var UG=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var cDe=UG((Zn,Jn)=>{function jG(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const VG=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};VG();function ez(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tz(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var W={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg=Symbol.for("react.element"),GG=Symbol.for("react.portal"),HG=Symbol.for("react.fragment"),WG=Symbol.for("react.strict_mode"),qG=Symbol.for("react.profiler"),$G=Symbol.for("react.provider"),XG=Symbol.for("react.context"),YG=Symbol.for("react.forward_ref"),QG=Symbol.for("react.suspense"),KG=Symbol.for("react.memo"),ZG=Symbol.for("react.lazy"),xP=Symbol.iterator;function JG(e){return e===null||typeof e!="object"?null:(e=xP&&e[xP]||e["@@iterator"],typeof e=="function"?e:null)}var rz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iz=Object.assign,nz={};function up(e,t,r){this.props=e,this.context=t,this.refs=nz,this.updater=r||rz}up.prototype.isReactComponent={};up.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};up.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sz(){}sz.prototype=up.prototype;function SE(e,t,r){this.props=e,this.context=t,this.refs=nz,this.updater=r||rz}var _E=SE.prototype=new sz;_E.constructor=SE;iz(_E,up.prototype);_E.isPureReactComponent=!0;var bP=Array.isArray,az=Object.prototype.hasOwnProperty,AE={current:null},oz={key:!0,ref:!0,__self:!0,__source:!0};function lz(e,t,r){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)az.call(t,i)&&!oz.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:wg,type:e,key:s,ref:a,props:n,_owner:AE.current}}function eH(e,t){return{$$typeof:wg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ME(e){return typeof e=="object"&&e!==null&&e.$$typeof===wg}function tH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wP=/\/+/g;function _b(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tH(""+e.key):t.toString(36)}function q0(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wg:case GG:a=!0}}if(a)return a=e,n=n(a),e=i===""?"."+_b(a,0):i,bP(n)?(r="",e!=null&&(r=e.replace(wP,"$&/")+"/"),q0(n,t,r,"",function(c){return c})):n!=null&&(ME(n)&&(n=eH(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(wP,"$&/")+"/")+e)),t.push(n)),1;if(a=0,i=i===""?".":i+":",bP(e))for(var o=0;o<e.length;o++){s=e[o];var l=i+_b(s,o);a+=q0(s,t,r,l,n)}else if(l=JG(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=i+_b(s,o++),a+=q0(s,t,r,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function tv(e,t,r){if(e==null)return e;var i=[],n=0;return q0(e,i,"","",function(s){return t.call(r,s,n++)}),i}function rH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var un={current:null},$0={transition:null},iH={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:$0,ReactCurrentOwner:AE};Dt.Children={map:tv,forEach:function(e,t,r){tv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return tv(e,function(){t++}),t},toArray:function(e){return tv(e,function(t){return t})||[]},only:function(e){if(!ME(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dt.Component=up;Dt.Fragment=HG;Dt.Profiler=qG;Dt.PureComponent=SE;Dt.StrictMode=WG;Dt.Suspense=QG;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iH;Dt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=iz({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=AE.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)az.call(t,l)&&!oz.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:wg,type:e.type,key:n,ref:s,props:i,_owner:a}};Dt.createContext=function(e){return e={$$typeof:XG,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$G,_context:e},e.Consumer=e};Dt.createElement=lz;Dt.createFactory=function(e){var t=lz.bind(null,e);return t.type=e,t};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(e){return{$$typeof:YG,render:e}};Dt.isValidElement=ME;Dt.lazy=function(e){return{$$typeof:ZG,_payload:{_status:-1,_result:e},_init:rH}};Dt.memo=function(e,t){return{$$typeof:KG,type:e,compare:t===void 0?null:t}};Dt.startTransition=function(e){var t=$0.transition;$0.transition={};try{e()}finally{$0.transition=t}};Dt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Dt.useCallback=function(e,t){return un.current.useCallback(e,t)};Dt.useContext=function(e){return un.current.useContext(e)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(e){return un.current.useDeferredValue(e)};Dt.useEffect=function(e,t){return un.current.useEffect(e,t)};Dt.useId=function(){return un.current.useId()};Dt.useImperativeHandle=function(e,t,r){return un.current.useImperativeHandle(e,t,r)};Dt.useInsertionEffect=function(e,t){return un.current.useInsertionEffect(e,t)};Dt.useLayoutEffect=function(e,t){return un.current.useLayoutEffect(e,t)};Dt.useMemo=function(e,t){return un.current.useMemo(e,t)};Dt.useReducer=function(e,t,r){return un.current.useReducer(e,t,r)};Dt.useRef=function(e){return un.current.useRef(e)};Dt.useState=function(e){return un.current.useState(e)};Dt.useSyncExternalStore=function(e,t,r){return un.current.useSyncExternalStore(e,t,r)};Dt.useTransition=function(){return un.current.useTransition()};Dt.version="18.2.0";(function(e){e.exports=Dt})(W);const sn=ez(W.exports),Sy=jG({__proto__:null,default:sn},[W.exports]);var m_={},rx={exports:{}},as={},cz={exports:{}},uz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,k){var z=O.length;O.push(k);e:for(;0<z;){var N=z-1>>>1,j=O[N];if(0<n(j,k))O[N]=k,O[z]=j,z=N;else break e}}function r(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var k=O[0],z=O.pop();if(z!==k){O[0]=z;e:for(var N=0,j=O.length,Y=j>>>1;N<Y;){var q=2*(N+1)-1,X=O[q],G=q+1,te=O[G];if(0>n(X,z))G<j&&0>n(te,X)?(O[N]=te,O[G]=z,N=G):(O[N]=X,O[q]=z,N=q);else if(G<j&&0>n(te,z))O[N]=te,O[G]=z,N=G;else break e}}return k}function n(O,k){var z=O.sortIndex-k.sortIndex;return z!==0?z:O.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,u=null,d=3,p=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var k=r(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=O)i(c),k.sortIndex=k.expirationTime,t(l,k);else break;k=r(c)}}function b(O){if(m=!1,x(O),!f)if(r(l)!==null)f=!0,V(S);else{var k=r(c);k!==null&&F(b,k.startTime-O)}}function S(O,k){f=!1,m&&(m=!1,v(_),_=-1),p=!0;var z=d;try{for(x(k),u=r(l);u!==null&&(!(u.expirationTime>k)||O&&!T());){var N=u.callback;if(typeof N=="function"){u.callback=null,d=u.priorityLevel;var j=N(u.expirationTime<=k);k=e.unstable_now(),typeof j=="function"?u.callback=j:u===r(l)&&i(l),x(k)}else i(l);u=r(l)}if(u!==null)var Y=!0;else{var q=r(c);q!==null&&F(b,q.startTime-k),Y=!1}return Y}finally{u=null,d=z,p=!1}}var w=!1,A=null,_=-1,M=5,E=-1;function T(){return!(e.unstable_now()-E<M)}function P(){if(A!==null){var O=e.unstable_now();E=O;var k=!0;try{k=A(!0,O)}finally{k?D():(w=!1,A=null)}}else w=!1}var D;if(typeof y=="function")D=function(){y(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,R=L.port2;L.port1.onmessage=P,D=function(){R.postMessage(null)}}else D=function(){g(P,0)};function V(O){A=O,w||(w=!0,D())}function F(O,k){_=g(function(){O(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,V(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var k=3;break;default:k=d}var z=d;d=k;try{return O()}finally{d=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,k){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=d;d=O;try{return k()}finally{d=z}},e.unstable_scheduleCallback=function(O,k,z){var N=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?N+z:N):z=N,O){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=z+j,O={id:h++,callback:k,priorityLevel:O,startTime:z,expirationTime:j,sortIndex:-1},z>N?(O.sortIndex=z,t(c,O),r(l)===null&&O===r(c)&&(m?(v(_),_=-1):m=!0,F(b,z-N))):(O.sortIndex=j,t(l,O),f||p||(f=!0,V(S))),O},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(O){var k=d;return function(){var z=d;d=k;try{return O.apply(this,arguments)}finally{d=z}}}})(uz);(function(e){e.exports=uz})(cz);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hz=W.exports,rs=cz.exports;function Ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dz=new Set,Mm={};function zu(e,t){Rd(e,t),Rd(e+"Capture",t)}function Rd(e,t){for(Mm[e]=t,e=0;e<t.length;e++)dz.add(t[e])}var Wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g_=Object.prototype.hasOwnProperty,nH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,SP={},_P={};function sH(e){return g_.call(_P,e)?!0:g_.call(SP,e)?!1:nH.test(e)?_P[e]=!0:(SP[e]=!0,!1)}function aH(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oH(e,t,r,i){if(t===null||typeof t>"u"||aH(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function hn(e,t,r,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ci[e]=new hn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ci[t]=new hn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ci[e]=new hn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ci[e]=new hn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ci[e]=new hn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ci[e]=new hn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ci[e]=new hn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ci[e]=new hn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ci[e]=new hn(e,5,!1,e.toLowerCase(),null,!1,!1)});var EE=/[\-:]([a-z])/g;function CE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(EE,CE);Ci[t]=new hn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(EE,CE);Ci[t]=new hn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(EE,CE);Ci[t]=new hn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ci[e]=new hn(e,1,!1,e.toLowerCase(),null,!1,!1)});Ci.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ci[e]=new hn(e,1,!1,e.toLowerCase(),null,!0,!0)});function TE(e,t,r,i){var n=Ci.hasOwnProperty(t)?Ci[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oH(t,r,n,i)&&(r=null),i||n===null?sH(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Jo=hz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rv=Symbol.for("react.element"),Fh=Symbol.for("react.portal"),Uh=Symbol.for("react.fragment"),PE=Symbol.for("react.strict_mode"),v_=Symbol.for("react.profiler"),pz=Symbol.for("react.provider"),fz=Symbol.for("react.context"),DE=Symbol.for("react.forward_ref"),y_=Symbol.for("react.suspense"),x_=Symbol.for("react.suspense_list"),OE=Symbol.for("react.memo"),bl=Symbol.for("react.lazy"),mz=Symbol.for("react.offscreen"),AP=Symbol.iterator;function Bp(e){return e===null||typeof e!="object"?null:(e=AP&&e[AP]||e["@@iterator"],typeof e=="function"?e:null)}var br=Object.assign,Ab;function Cf(e){if(Ab===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ab=t&&t[1]||""}return`
`+Ab+e}var Mb=!1;function Eb(e,t){if(!e||Mb)return"";Mb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var l=`
`+n[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{Mb=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Cf(e):""}function lH(e){switch(e.tag){case 5:return Cf(e.type);case 16:return Cf("Lazy");case 13:return Cf("Suspense");case 19:return Cf("SuspenseList");case 0:case 2:case 15:return e=Eb(e.type,!1),e;case 11:return e=Eb(e.type.render,!1),e;case 1:return e=Eb(e.type,!0),e;default:return""}}function b_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uh:return"Fragment";case Fh:return"Portal";case v_:return"Profiler";case PE:return"StrictMode";case y_:return"Suspense";case x_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fz:return(e.displayName||"Context")+".Consumer";case pz:return(e._context.displayName||"Context")+".Provider";case DE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case OE:return t=e.displayName||null,t!==null?t:b_(e.type)||"Memo";case bl:t=e._payload,e=e._init;try{return b_(e(t))}catch{}}return null}function cH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b_(t);case 8:return t===PE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ac(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gz(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uH(e){var t=gz(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function iv(e){e._valueTracker||(e._valueTracker=uH(e))}function vz(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=gz(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function _y(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function w_(e,t){var r=t.checked;return br({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function MP(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=ac(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yz(e,t){t=t.checked,t!=null&&TE(e,"checked",t,!1)}function S_(e,t){yz(e,t);var r=ac(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?__(e,t.type,r):t.hasOwnProperty("defaultValue")&&__(e,t.type,ac(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function EP(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function __(e,t,r){(t!=="number"||_y(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Tf=Array.isArray;function ud(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ac(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function A_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return br({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function CP(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ee(92));if(Tf(r)){if(1<r.length)throw Error(Ee(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ac(r)}}function xz(e,t){var r=ac(t.value),i=ac(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function TP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bz(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bz(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nv,wz=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nv=nv||document.createElement("div"),nv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Em(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hH=["Webkit","ms","Moz","O"];Object.keys(Hf).forEach(function(e){hH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hf[t]=Hf[e]})});function Sz(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hf.hasOwnProperty(e)&&Hf[e]?(""+t).trim():t+"px"}function _z(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=Sz(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var dH=br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E_(e,t){if(t){if(dH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ee(62))}}function C_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T_=null;function LE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var P_=null,hd=null,dd=null;function PP(e){if(e=Ag(e)){if(typeof P_!="function")throw Error(Ee(280));var t=e.stateNode;t&&(t=ox(t),P_(e.stateNode,e.type,t))}}function Az(e){hd?dd?dd.push(e):dd=[e]:hd=e}function Mz(){if(hd){var e=hd,t=dd;if(dd=hd=null,PP(e),t)for(e=0;e<t.length;e++)PP(t[e])}}function Ez(e,t){return e(t)}function Cz(){}var Cb=!1;function Tz(e,t,r){if(Cb)return e(t,r);Cb=!0;try{return Ez(e,t,r)}finally{Cb=!1,(hd!==null||dd!==null)&&(Cz(),Mz())}}function Cm(e,t){var r=e.stateNode;if(r===null)return null;var i=ox(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ee(231,t,typeof r));return r}var D_=!1;if(Wo)try{var kp={};Object.defineProperty(kp,"passive",{get:function(){D_=!0}}),window.addEventListener("test",kp,kp),window.removeEventListener("test",kp,kp)}catch{D_=!1}function pH(e,t,r,i,n,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var Wf=!1,Ay=null,My=!1,O_=null,fH={onError:function(e){Wf=!0,Ay=e}};function mH(e,t,r,i,n,s,a,o,l){Wf=!1,Ay=null,pH.apply(fH,arguments)}function gH(e,t,r,i,n,s,a,o,l){if(mH.apply(this,arguments),Wf){if(Wf){var c=Ay;Wf=!1,Ay=null}else throw Error(Ee(198));My||(My=!0,O_=c)}}function Nu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Pz(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function DP(e){if(Nu(e)!==e)throw Error(Ee(188))}function vH(e){var t=e.alternate;if(!t){if(t=Nu(e),t===null)throw Error(Ee(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return DP(n),e;if(s===i)return DP(n),t;s=s.sibling}throw Error(Ee(188))}if(r.return!==i.return)r=n,i=s;else{for(var a=!1,o=n.child;o;){if(o===r){a=!0,r=n,i=s;break}if(o===i){a=!0,i=n,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,i=n;break}if(o===i){a=!0,i=s,r=n;break}o=o.sibling}if(!a)throw Error(Ee(189))}}if(r.alternate!==i)throw Error(Ee(190))}if(r.tag!==3)throw Error(Ee(188));return r.stateNode.current===r?e:t}function Dz(e){return e=vH(e),e!==null?Oz(e):null}function Oz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Oz(e);if(t!==null)return t;e=e.sibling}return null}var Lz=rs.unstable_scheduleCallback,OP=rs.unstable_cancelCallback,yH=rs.unstable_shouldYield,xH=rs.unstable_requestPaint,Or=rs.unstable_now,bH=rs.unstable_getCurrentPriorityLevel,IE=rs.unstable_ImmediatePriority,Iz=rs.unstable_UserBlockingPriority,Ey=rs.unstable_NormalPriority,wH=rs.unstable_LowPriority,Rz=rs.unstable_IdlePriority,ix=null,ja=null;function SH(e){if(ja&&typeof ja.onCommitFiberRoot=="function")try{ja.onCommitFiberRoot(ix,e,void 0,(e.current.flags&128)===128)}catch{}}var ia=Math.clz32?Math.clz32:MH,_H=Math.log,AH=Math.LN2;function MH(e){return e>>>=0,e===0?32:31-(_H(e)/AH|0)|0}var sv=64,av=4194304;function Pf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cy(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~n;o!==0?i=Pf(o):(s&=a,s!==0&&(i=Pf(s)))}else a=r&~n,a!==0?i=Pf(a):s!==0&&(i=Pf(s));if(i===0)return 0;if(t!==0&&t!==i&&(t&n)===0&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-ia(t),n=1<<r,i|=e[r],t&=~n;return i}function EH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CH(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ia(s),o=1<<a,l=n[a];l===-1?((o&r)===0||(o&i)!==0)&&(n[a]=EH(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function L_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bz(){var e=sv;return sv<<=1,(sv&4194240)===0&&(sv=64),e}function Tb(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Sg(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ia(t),e[t]=r}function TH(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-ia(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function RE(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-ia(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var Xt=0;function kz(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var zz,BE,Nz,Fz,Uz,I_=!1,ov=[],Gl=null,Hl=null,Wl=null,Tm=new Map,Pm=new Map,Al=[],PH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LP(e,t){switch(e){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":Wl=null;break;case"pointerover":case"pointerout":Tm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pm.delete(t.pointerId)}}function zp(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=Ag(t),t!==null&&BE(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function DH(e,t,r,i,n){switch(t){case"focusin":return Gl=zp(Gl,e,t,r,i,n),!0;case"dragenter":return Hl=zp(Hl,e,t,r,i,n),!0;case"mouseover":return Wl=zp(Wl,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return Tm.set(s,zp(Tm.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Pm.set(s,zp(Pm.get(s)||null,e,t,r,i,n)),!0}return!1}function jz(e){var t=tu(e.target);if(t!==null){var r=Nu(t);if(r!==null){if(t=r.tag,t===13){if(t=Pz(r),t!==null){e.blockedOn=t,Uz(e.priority,function(){Nz(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function X0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=R_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);T_=i,r.target.dispatchEvent(i),T_=null}else return t=Ag(r),t!==null&&BE(t),e.blockedOn=r,!1;t.shift()}return!0}function IP(e,t,r){X0(e)&&r.delete(t)}function OH(){I_=!1,Gl!==null&&X0(Gl)&&(Gl=null),Hl!==null&&X0(Hl)&&(Hl=null),Wl!==null&&X0(Wl)&&(Wl=null),Tm.forEach(IP),Pm.forEach(IP)}function Np(e,t){e.blockedOn===t&&(e.blockedOn=null,I_||(I_=!0,rs.unstable_scheduleCallback(rs.unstable_NormalPriority,OH)))}function Dm(e){function t(n){return Np(n,e)}if(0<ov.length){Np(ov[0],e);for(var r=1;r<ov.length;r++){var i=ov[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Gl!==null&&Np(Gl,e),Hl!==null&&Np(Hl,e),Wl!==null&&Np(Wl,e),Tm.forEach(t),Pm.forEach(t),r=0;r<Al.length;r++)i=Al[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Al.length&&(r=Al[0],r.blockedOn===null);)jz(r),r.blockedOn===null&&Al.shift()}var pd=Jo.ReactCurrentBatchConfig,Ty=!0;function LH(e,t,r,i){var n=Xt,s=pd.transition;pd.transition=null;try{Xt=1,kE(e,t,r,i)}finally{Xt=n,pd.transition=s}}function IH(e,t,r,i){var n=Xt,s=pd.transition;pd.transition=null;try{Xt=4,kE(e,t,r,i)}finally{Xt=n,pd.transition=s}}function kE(e,t,r,i){if(Ty){var n=R_(e,t,r,i);if(n===null)Nb(e,t,i,Py,r),LP(e,i);else if(DH(n,e,t,r,i))i.stopPropagation();else if(LP(e,i),t&4&&-1<PH.indexOf(e)){for(;n!==null;){var s=Ag(n);if(s!==null&&zz(s),s=R_(e,t,r,i),s===null&&Nb(e,t,i,Py,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else Nb(e,t,i,null,r)}}var Py=null;function R_(e,t,r,i){if(Py=null,e=LE(i),e=tu(e),e!==null)if(t=Nu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Pz(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Py=e,null}function Vz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bH()){case IE:return 1;case Iz:return 4;case Ey:case wH:return 16;case Rz:return 536870912;default:return 16}default:return 16}}var Dl=null,zE=null,Y0=null;function Gz(){if(Y0)return Y0;var e,t=zE,r=t.length,i,n="value"in Dl?Dl.value:Dl.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(i=1;i<=a&&t[r-i]===n[s-i];i++);return Y0=n.slice(e,1<i?1-i:void 0)}function Q0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lv(){return!0}function RP(){return!1}function os(e){function t(r,i,n,s,a){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lv:RP,this.isPropagationStopped=RP,this}return br(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lv)},persist:function(){},isPersistent:lv}),t}var hp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NE=os(hp),_g=br({},hp,{view:0,detail:0}),RH=os(_g),Pb,Db,Fp,nx=br({},_g,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fp&&(Fp&&e.type==="mousemove"?(Pb=e.screenX-Fp.screenX,Db=e.screenY-Fp.screenY):Db=Pb=0,Fp=e),Pb)},movementY:function(e){return"movementY"in e?e.movementY:Db}}),BP=os(nx),BH=br({},nx,{dataTransfer:0}),kH=os(BH),zH=br({},_g,{relatedTarget:0}),Ob=os(zH),NH=br({},hp,{animationName:0,elapsedTime:0,pseudoElement:0}),FH=os(NH),UH=br({},hp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jH=os(UH),VH=br({},hp,{data:0}),kP=os(VH),GH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=WH[e])?!!t[e]:!1}function FE(){return qH}var $H=br({},_g,{key:function(e){if(e.key){var t=GH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Q0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?HH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FE,charCode:function(e){return e.type==="keypress"?Q0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Q0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XH=os($H),YH=br({},nx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zP=os(YH),QH=br({},_g,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FE}),KH=os(QH),ZH=br({},hp,{propertyName:0,elapsedTime:0,pseudoElement:0}),JH=os(ZH),eW=br({},nx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tW=os(eW),rW=[9,13,27,32],UE=Wo&&"CompositionEvent"in window,qf=null;Wo&&"documentMode"in document&&(qf=document.documentMode);var iW=Wo&&"TextEvent"in window&&!qf,Hz=Wo&&(!UE||qf&&8<qf&&11>=qf),NP=String.fromCharCode(32),FP=!1;function Wz(e,t){switch(e){case"keyup":return rW.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jh=!1;function nW(e,t){switch(e){case"compositionend":return qz(t);case"keypress":return t.which!==32?null:(FP=!0,NP);case"textInput":return e=t.data,e===NP&&FP?null:e;default:return null}}function sW(e,t){if(jh)return e==="compositionend"||!UE&&Wz(e,t)?(e=Gz(),Y0=zE=Dl=null,jh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hz&&t.locale!=="ko"?null:t.data;default:return null}}var aW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aW[e.type]:t==="textarea"}function $z(e,t,r,i){Az(i),t=Dy(t,"onChange"),0<t.length&&(r=new NE("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var $f=null,Om=null;function oW(e){nN(e,0)}function sx(e){var t=Hh(e);if(vz(t))return e}function lW(e,t){if(e==="change")return t}var Xz=!1;if(Wo){var Lb;if(Wo){var Ib="oninput"in document;if(!Ib){var jP=document.createElement("div");jP.setAttribute("oninput","return;"),Ib=typeof jP.oninput=="function"}Lb=Ib}else Lb=!1;Xz=Lb&&(!document.documentMode||9<document.documentMode)}function VP(){$f&&($f.detachEvent("onpropertychange",Yz),Om=$f=null)}function Yz(e){if(e.propertyName==="value"&&sx(Om)){var t=[];$z(t,Om,e,LE(e)),Tz(oW,t)}}function cW(e,t,r){e==="focusin"?(VP(),$f=t,Om=r,$f.attachEvent("onpropertychange",Yz)):e==="focusout"&&VP()}function uW(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sx(Om)}function hW(e,t){if(e==="click")return sx(t)}function dW(e,t){if(e==="input"||e==="change")return sx(t)}function pW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aa=typeof Object.is=="function"?Object.is:pW;function Lm(e,t){if(aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!g_.call(t,n)||!aa(e[n],t[n]))return!1}return!0}function GP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function HP(e,t){var r=GP(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=GP(r)}}function Qz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kz(){for(var e=window,t=_y();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_y(e.document)}return t}function jE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fW(e){var t=Kz(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Qz(r.ownerDocument.documentElement,r)){if(i!==null&&jE(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=HP(r,s);var a=HP(r,i);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mW=Wo&&"documentMode"in document&&11>=document.documentMode,Vh=null,B_=null,Xf=null,k_=!1;function WP(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;k_||Vh==null||Vh!==_y(i)||(i=Vh,"selectionStart"in i&&jE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xf&&Lm(Xf,i)||(Xf=i,i=Dy(B_,"onSelect"),0<i.length&&(t=new NE("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Vh)))}function cv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Gh={animationend:cv("Animation","AnimationEnd"),animationiteration:cv("Animation","AnimationIteration"),animationstart:cv("Animation","AnimationStart"),transitionend:cv("Transition","TransitionEnd")},Rb={},Zz={};Wo&&(Zz=document.createElement("div").style,"AnimationEvent"in window||(delete Gh.animationend.animation,delete Gh.animationiteration.animation,delete Gh.animationstart.animation),"TransitionEvent"in window||delete Gh.transitionend.transition);function ax(e){if(Rb[e])return Rb[e];if(!Gh[e])return e;var t=Gh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Zz)return Rb[e]=t[r];return e}var Jz=ax("animationend"),eN=ax("animationiteration"),tN=ax("animationstart"),rN=ax("transitionend"),iN=new Map,qP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fc(e,t){iN.set(e,t),zu(t,[e])}for(var Bb=0;Bb<qP.length;Bb++){var kb=qP[Bb],gW=kb.toLowerCase(),vW=kb[0].toUpperCase()+kb.slice(1);fc(gW,"on"+vW)}fc(Jz,"onAnimationEnd");fc(eN,"onAnimationIteration");fc(tN,"onAnimationStart");fc("dblclick","onDoubleClick");fc("focusin","onFocus");fc("focusout","onBlur");fc(rN,"onTransitionEnd");Rd("onMouseEnter",["mouseout","mouseover"]);Rd("onMouseLeave",["mouseout","mouseover"]);Rd("onPointerEnter",["pointerout","pointerover"]);Rd("onPointerLeave",["pointerout","pointerover"]);zu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zu("onBeforeInput",["compositionend","keypress","textInput","paste"]);zu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yW=new Set("cancel close invalid load scroll toggle".split(" ").concat(Df));function $P(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,gH(i,t,void 0,e),e.currentTarget=null}function nN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&n.isPropagationStopped())break e;$P(n,o,c),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&n.isPropagationStopped())break e;$P(n,o,c),s=l}}}if(My)throw e=O_,My=!1,O_=null,e}function ur(e,t){var r=t[j_];r===void 0&&(r=t[j_]=new Set);var i=e+"__bubble";r.has(i)||(sN(t,e,2,!1),r.add(i))}function zb(e,t,r){var i=0;t&&(i|=4),sN(r,e,i,t)}var uv="_reactListening"+Math.random().toString(36).slice(2);function Im(e){if(!e[uv]){e[uv]=!0,dz.forEach(function(r){r!=="selectionchange"&&(yW.has(r)||zb(r,!1,e),zb(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uv]||(t[uv]=!0,zb("selectionchange",!1,t))}}function sN(e,t,r,i){switch(Vz(t)){case 1:var n=LH;break;case 4:n=IH;break;default:n=kE}r=n.bind(null,t,r,e),n=void 0,!D_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Nb(e,t,r,i,n){var s=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;a=a.return}for(;o!==null;){if(a=tu(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}Tz(function(){var c=s,h=LE(r),u=[];e:{var d=iN.get(e);if(d!==void 0){var p=NE,f=e;switch(e){case"keypress":if(Q0(r)===0)break e;case"keydown":case"keyup":p=XH;break;case"focusin":f="focus",p=Ob;break;case"focusout":f="blur",p=Ob;break;case"beforeblur":case"afterblur":p=Ob;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=BP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=kH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=KH;break;case Jz:case eN:case tN:p=FH;break;case rN:p=JH;break;case"scroll":p=RH;break;case"wheel":p=tW;break;case"copy":case"cut":case"paste":p=jH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=zP}var m=(t&4)!==0,g=!m&&e==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var y=c,x;y!==null;){x=y;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,v!==null&&(b=Cm(y,v),b!=null&&m.push(Rm(y,b,x)))),g)break;y=y.return}0<m.length&&(d=new p(d,f,null,r,h),u.push({event:d,listeners:m}))}}if((t&7)===0){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&r!==T_&&(f=r.relatedTarget||r.fromElement)&&(tu(f)||f[qo]))break e;if((p||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,p?(f=r.relatedTarget||r.toElement,p=c,f=f?tu(f):null,f!==null&&(g=Nu(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=c),p!==f)){if(m=BP,b="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=zP,b="onPointerLeave",v="onPointerEnter",y="pointer"),g=p==null?d:Hh(p),x=f==null?d:Hh(f),d=new m(b,y+"leave",p,r,h),d.target=g,d.relatedTarget=x,b=null,tu(h)===c&&(m=new m(v,y+"enter",f,r,h),m.target=x,m.relatedTarget=g,b=m),g=b,p&&f)t:{for(m=p,v=f,y=0,x=m;x;x=$u(x))y++;for(x=0,b=v;b;b=$u(b))x++;for(;0<y-x;)m=$u(m),y--;for(;0<x-y;)v=$u(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=$u(m),v=$u(v)}m=null}else m=null;p!==null&&XP(u,d,p,m,!1),f!==null&&g!==null&&XP(u,g,f,m,!0)}}e:{if(d=c?Hh(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var S=lW;else if(UP(d))if(Xz)S=dW;else{S=uW;var w=cW}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=hW);if(S&&(S=S(e,c))){$z(u,S,r,h);break e}w&&w(e,d,c),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&__(d,"number",d.value)}switch(w=c?Hh(c):window,e){case"focusin":(UP(w)||w.contentEditable==="true")&&(Vh=w,B_=c,Xf=null);break;case"focusout":Xf=B_=Vh=null;break;case"mousedown":k_=!0;break;case"contextmenu":case"mouseup":case"dragend":k_=!1,WP(u,r,h);break;case"selectionchange":if(mW)break;case"keydown":case"keyup":WP(u,r,h)}var A;if(UE)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else jh?Wz(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Hz&&r.locale!=="ko"&&(jh||_!=="onCompositionStart"?_==="onCompositionEnd"&&jh&&(A=Gz()):(Dl=h,zE="value"in Dl?Dl.value:Dl.textContent,jh=!0)),w=Dy(c,_),0<w.length&&(_=new kP(_,e,null,r,h),u.push({event:_,listeners:w}),A?_.data=A:(A=qz(r),A!==null&&(_.data=A)))),(A=iW?nW(e,r):sW(e,r))&&(c=Dy(c,"onBeforeInput"),0<c.length&&(h=new kP("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:c}),h.data=A))}nN(u,t)})}function Rm(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dy(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Cm(e,r),s!=null&&i.unshift(Rm(e,s,n)),s=Cm(e,t),s!=null&&i.push(Rm(e,s,n))),e=e.return}return i}function $u(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function XP(e,t,r,i,n){for(var s=t._reactName,a=[];r!==null&&r!==i;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&c!==null&&(o=c,n?(l=Cm(r,s),l!=null&&a.unshift(Rm(r,l,o))):n||(l=Cm(r,s),l!=null&&a.push(Rm(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var xW=/\r\n?/g,bW=/\u0000|\uFFFD/g;function YP(e){return(typeof e=="string"?e:""+e).replace(xW,`
`).replace(bW,"")}function hv(e,t,r){if(t=YP(t),YP(e)!==t&&r)throw Error(Ee(425))}function Oy(){}var z_=null,N_=null;function F_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var U_=typeof setTimeout=="function"?setTimeout:void 0,wW=typeof clearTimeout=="function"?clearTimeout:void 0,QP=typeof Promise=="function"?Promise:void 0,SW=typeof queueMicrotask=="function"?queueMicrotask:typeof QP<"u"?function(e){return QP.resolve(null).then(e).catch(_W)}:U_;function _W(e){setTimeout(function(){throw e})}function Fb(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),Dm(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);Dm(t)}function ql(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function KP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var dp=Math.random().toString(36).slice(2),Ra="__reactFiber$"+dp,Bm="__reactProps$"+dp,qo="__reactContainer$"+dp,j_="__reactEvents$"+dp,AW="__reactListeners$"+dp,MW="__reactHandles$"+dp;function tu(e){var t=e[Ra];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qo]||r[Ra]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=KP(e);e!==null;){if(r=e[Ra])return r;e=KP(e)}return t}e=r,r=e.parentNode}return null}function Ag(e){return e=e[Ra]||e[qo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ee(33))}function ox(e){return e[Bm]||null}var V_=[],Wh=-1;function mc(e){return{current:e}}function dr(e){0>Wh||(e.current=V_[Wh],V_[Wh]=null,Wh--)}function or(e,t){Wh++,V_[Wh]=e.current,e.current=t}var oc={},ji=mc(oc),Mn=mc(!1),Su=oc;function Bd(e,t){var r=e.type.contextTypes;if(!r)return oc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function En(e){return e=e.childContextTypes,e!=null}function Ly(){dr(Mn),dr(ji)}function ZP(e,t,r){if(ji.current!==oc)throw Error(Ee(168));or(ji,t),or(Mn,r)}function aN(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(Ee(108,cH(e)||"Unknown",n));return br({},r,i)}function Iy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oc,Su=ji.current,or(ji,e),or(Mn,Mn.current),!0}function JP(e,t,r){var i=e.stateNode;if(!i)throw Error(Ee(169));r?(e=aN(e,t,Su),i.__reactInternalMemoizedMergedChildContext=e,dr(Mn),dr(ji),or(ji,e)):dr(Mn),or(Mn,r)}var Co=null,lx=!1,Ub=!1;function oN(e){Co===null?Co=[e]:Co.push(e)}function EW(e){lx=!0,oN(e)}function gc(){if(!Ub&&Co!==null){Ub=!0;var e=0,t=Xt;try{var r=Co;for(Xt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Co=null,lx=!1}catch(n){throw Co!==null&&(Co=Co.slice(e+1)),Lz(IE,gc),n}finally{Xt=t,Ub=!1}}return null}var qh=[],$h=0,Ry=null,By=0,bs=[],ws=0,_u=null,Lo=1,Io="";function Fc(e,t){qh[$h++]=By,qh[$h++]=Ry,Ry=e,By=t}function lN(e,t,r){bs[ws++]=Lo,bs[ws++]=Io,bs[ws++]=_u,_u=e;var i=Lo;e=Io;var n=32-ia(i)-1;i&=~(1<<n),r+=1;var s=32-ia(t)+n;if(30<s){var a=n-n%5;s=(i&(1<<a)-1).toString(32),i>>=a,n-=a,Lo=1<<32-ia(t)+n|r<<n|i,Io=s+e}else Lo=1<<s|r<<n|i,Io=e}function VE(e){e.return!==null&&(Fc(e,1),lN(e,1,0))}function GE(e){for(;e===Ry;)Ry=qh[--$h],qh[$h]=null,By=qh[--$h],qh[$h]=null;for(;e===_u;)_u=bs[--ws],bs[ws]=null,Io=bs[--ws],bs[ws]=null,Lo=bs[--ws],bs[ws]=null}var es=null,Xn=null,mr=!1,Qs=null;function cN(e,t){var r=Ms(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function eD(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,es=e,Xn=ql(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,es=e,Xn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=_u!==null?{id:Lo,overflow:Io}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ms(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,es=e,Xn=null,!0):!1;default:return!1}}function G_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function H_(e){if(mr){var t=Xn;if(t){var r=t;if(!eD(e,t)){if(G_(e))throw Error(Ee(418));t=ql(r.nextSibling);var i=es;t&&eD(e,t)?cN(i,r):(e.flags=e.flags&-4097|2,mr=!1,es=e)}}else{if(G_(e))throw Error(Ee(418));e.flags=e.flags&-4097|2,mr=!1,es=e}}}function tD(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;es=e}function dv(e){if(e!==es)return!1;if(!mr)return tD(e),mr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!F_(e.type,e.memoizedProps)),t&&(t=Xn)){if(G_(e))throw uN(),Error(Ee(418));for(;t;)cN(e,t),t=ql(t.nextSibling)}if(tD(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xn=ql(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xn=null}}else Xn=es?ql(e.stateNode.nextSibling):null;return!0}function uN(){for(var e=Xn;e;)e=ql(e.nextSibling)}function kd(){Xn=es=null,mr=!1}function HE(e){Qs===null?Qs=[e]:Qs.push(e)}var CW=Jo.ReactCurrentBatchConfig;function Xs(e,t){if(e&&e.defaultProps){t=br({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var ky=mc(null),zy=null,Xh=null,WE=null;function qE(){WE=Xh=zy=null}function $E(e){var t=ky.current;dr(ky),e._currentValue=t}function W_(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function fd(e,t){zy=e,WE=Xh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(wn=!0),e.firstContext=null)}function Ls(e){var t=e._currentValue;if(WE!==e)if(e={context:e,memoizedValue:t,next:null},Xh===null){if(zy===null)throw Error(Ee(308));Xh=e,zy.dependencies={lanes:0,firstContext:e}}else Xh=Xh.next=e;return t}var ru=null;function XE(e){ru===null?ru=[e]:ru.push(e)}function hN(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,XE(t)):(r.next=n.next,n.next=r),t.interleaved=r,$o(e,i)}function $o(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wl=!1;function YE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $l(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(zt&2)!==0){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,$o(e,r)}return n=i.interleaved,n===null?(t.next=t,XE(i)):(t.next=n.next,n.next=t),i.interleaved=t,$o(e,r)}function K0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,RE(e,r)}}function rD(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ny(e,t,r,i){var n=e.updateQueue;wl=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var u=n.baseState;a=0,h=c=l=null,o=s;do{var d=o.lane,p=o.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,p=r,m.tag){case 1:if(f=m.payload,typeof f=="function"){u=f.call(p,u,d);break e}u=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,d=typeof f=="function"?f.call(p,u,d):f,d==null)break e;u=br({},u,d);break e;case 2:wl=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=n.effects,d===null?n.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=u):h=h.next=p,a|=d;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;d=o,o=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(1);if(h===null&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);Mu|=a,e.lanes=a,e.memoizedState=u}}function iD(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Ee(191,n));n.call(i)}}}var pN=new hz.Component().refs;function q_(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:br({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var cx={isMounted:function(e){return(e=e._reactInternals)?Nu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=an(),n=Yl(e),s=zo(i,n);s.payload=t,r!=null&&(s.callback=r),t=$l(e,s,n),t!==null&&(na(t,e,n,i),K0(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=an(),n=Yl(e),s=zo(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=$l(e,s,n),t!==null&&(na(t,e,n,i),K0(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=an(),i=Yl(e),n=zo(r,i);n.tag=2,t!=null&&(n.callback=t),t=$l(e,n,i),t!==null&&(na(t,e,i,r),K0(t,e,i))}};function nD(e,t,r,i,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Lm(r,i)||!Lm(n,s):!0}function fN(e,t,r){var i=!1,n=oc,s=t.contextType;return typeof s=="object"&&s!==null?s=Ls(s):(n=En(t)?Su:ji.current,i=t.contextTypes,s=(i=i!=null)?Bd(e,n):oc),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cx,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function sD(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&cx.enqueueReplaceState(t,t.state,null)}function $_(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=pN,YE(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Ls(s):(s=En(t)?Su:ji.current,n.context=Bd(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(q_(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&cx.enqueueReplaceState(n,n.state,null),Ny(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Up(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ee(309));var i=r.stateNode}if(!i)throw Error(Ee(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;o===pN&&(o=n.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ee(284));if(!r._owner)throw Error(Ee(290,e))}return e}function pv(e,t){throw e=Object.prototype.toString.call(t),Error(Ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function aD(e){var t=e._init;return t(e._payload)}function mN(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function n(v,y){return v=Ql(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,x,b){return y===null||y.tag!==6?(y=$b(x,v.mode,b),y.return=v,y):(y=n(y,x),y.return=v,y)}function l(v,y,x,b){var S=x.type;return S===Uh?h(v,y,x.props.children,b,x.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bl&&aD(S)===y.type)?(b=n(y,x.props),b.ref=Up(v,y,x),b.return=v,b):(b=iy(x.type,x.key,x.props,null,v.mode,b),b.ref=Up(v,y,x),b.return=v,b)}function c(v,y,x,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Xb(x,v.mode,b),y.return=v,y):(y=n(y,x.children||[]),y.return=v,y)}function h(v,y,x,b,S){return y===null||y.tag!==7?(y=pu(x,v.mode,b,S),y.return=v,y):(y=n(y,x),y.return=v,y)}function u(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$b(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rv:return x=iy(y.type,y.key,y.props,null,v.mode,x),x.ref=Up(v,null,y),x.return=v,x;case Fh:return y=Xb(y,v.mode,x),y.return=v,y;case bl:var b=y._init;return u(v,b(y._payload),x)}if(Tf(y)||Bp(y))return y=pu(y,v.mode,x,null),y.return=v,y;pv(v,y)}return null}function d(v,y,x,b){var S=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:o(v,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rv:return x.key===S?l(v,y,x,b):null;case Fh:return x.key===S?c(v,y,x,b):null;case bl:return S=x._init,d(v,y,S(x._payload),b)}if(Tf(x)||Bp(x))return S!==null?null:h(v,y,x,b,null);pv(v,x)}return null}function p(v,y,x,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(x)||null,o(y,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rv:return v=v.get(b.key===null?x:b.key)||null,l(y,v,b,S);case Fh:return v=v.get(b.key===null?x:b.key)||null,c(y,v,b,S);case bl:var w=b._init;return p(v,y,x,w(b._payload),S)}if(Tf(b)||Bp(b))return v=v.get(x)||null,h(y,v,b,S,null);pv(y,b)}return null}function f(v,y,x,b){for(var S=null,w=null,A=y,_=y=0,M=null;A!==null&&_<x.length;_++){A.index>_?(M=A,A=null):M=A.sibling;var E=d(v,A,x[_],b);if(E===null){A===null&&(A=M);break}e&&A&&E.alternate===null&&t(v,A),y=s(E,y,_),w===null?S=E:w.sibling=E,w=E,A=M}if(_===x.length)return r(v,A),mr&&Fc(v,_),S;if(A===null){for(;_<x.length;_++)A=u(v,x[_],b),A!==null&&(y=s(A,y,_),w===null?S=A:w.sibling=A,w=A);return mr&&Fc(v,_),S}for(A=i(v,A);_<x.length;_++)M=p(A,v,_,x[_],b),M!==null&&(e&&M.alternate!==null&&A.delete(M.key===null?_:M.key),y=s(M,y,_),w===null?S=M:w.sibling=M,w=M);return e&&A.forEach(function(T){return t(v,T)}),mr&&Fc(v,_),S}function m(v,y,x,b){var S=Bp(x);if(typeof S!="function")throw Error(Ee(150));if(x=S.call(x),x==null)throw Error(Ee(151));for(var w=S=null,A=y,_=y=0,M=null,E=x.next();A!==null&&!E.done;_++,E=x.next()){A.index>_?(M=A,A=null):M=A.sibling;var T=d(v,A,E.value,b);if(T===null){A===null&&(A=M);break}e&&A&&T.alternate===null&&t(v,A),y=s(T,y,_),w===null?S=T:w.sibling=T,w=T,A=M}if(E.done)return r(v,A),mr&&Fc(v,_),S;if(A===null){for(;!E.done;_++,E=x.next())E=u(v,E.value,b),E!==null&&(y=s(E,y,_),w===null?S=E:w.sibling=E,w=E);return mr&&Fc(v,_),S}for(A=i(v,A);!E.done;_++,E=x.next())E=p(A,v,_,E.value,b),E!==null&&(e&&E.alternate!==null&&A.delete(E.key===null?_:E.key),y=s(E,y,_),w===null?S=E:w.sibling=E,w=E);return e&&A.forEach(function(P){return t(v,P)}),mr&&Fc(v,_),S}function g(v,y,x,b){if(typeof x=="object"&&x!==null&&x.type===Uh&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case rv:e:{for(var S=x.key,w=y;w!==null;){if(w.key===S){if(S=x.type,S===Uh){if(w.tag===7){r(v,w.sibling),y=n(w,x.props.children),y.return=v,v=y;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bl&&aD(S)===w.type){r(v,w.sibling),y=n(w,x.props),y.ref=Up(v,w,x),y.return=v,v=y;break e}r(v,w);break}else t(v,w);w=w.sibling}x.type===Uh?(y=pu(x.props.children,v.mode,b,x.key),y.return=v,v=y):(b=iy(x.type,x.key,x.props,null,v.mode,b),b.ref=Up(v,y,x),b.return=v,v=b)}return a(v);case Fh:e:{for(w=x.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){r(v,y.sibling),y=n(y,x.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=Xb(x,v.mode,b),y.return=v,v=y}return a(v);case bl:return w=x._init,g(v,y,w(x._payload),b)}if(Tf(x))return f(v,y,x,b);if(Bp(x))return m(v,y,x,b);pv(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(r(v,y.sibling),y=n(y,x),y.return=v,v=y):(r(v,y),y=$b(x,v.mode,b),y.return=v,v=y),a(v)):r(v,y)}return g}var zd=mN(!0),gN=mN(!1),Mg={},Va=mc(Mg),km=mc(Mg),zm=mc(Mg);function iu(e){if(e===Mg)throw Error(Ee(174));return e}function QE(e,t){switch(or(zm,t),or(km,e),or(Va,Mg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:M_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=M_(t,e)}dr(Va),or(Va,t)}function Nd(){dr(Va),dr(km),dr(zm)}function vN(e){iu(zm.current);var t=iu(Va.current),r=M_(t,e.type);t!==r&&(or(km,e),or(Va,r))}function KE(e){km.current===e&&(dr(Va),dr(km))}var gr=mc(0);function Fy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jb=[];function ZE(){for(var e=0;e<jb.length;e++)jb[e]._workInProgressVersionPrimary=null;jb.length=0}var Z0=Jo.ReactCurrentDispatcher,Vb=Jo.ReactCurrentBatchConfig,Au=0,xr=null,Yr=null,ci=null,Uy=!1,Yf=!1,Nm=0,TW=0;function Di(){throw Error(Ee(321))}function JE(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!aa(e[r],t[r]))return!1;return!0}function e2(e,t,r,i,n,s){if(Au=s,xr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z0.current=e===null||e.memoizedState===null?LW:IW,e=r(i,n),Yf){s=0;do{if(Yf=!1,Nm=0,25<=s)throw Error(Ee(301));s+=1,ci=Yr=null,t.updateQueue=null,Z0.current=RW,e=r(i,n)}while(Yf)}if(Z0.current=jy,t=Yr!==null&&Yr.next!==null,Au=0,ci=Yr=xr=null,Uy=!1,t)throw Error(Ee(300));return e}function t2(){var e=Nm!==0;return Nm=0,e}function Ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?xr.memoizedState=ci=e:ci=ci.next=e,ci}function Is(){if(Yr===null){var e=xr.alternate;e=e!==null?e.memoizedState:null}else e=Yr.next;var t=ci===null?xr.memoizedState:ci.next;if(t!==null)ci=t,Yr=e;else{if(e===null)throw Error(Ee(310));Yr=e,e={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},ci===null?xr.memoizedState=ci=e:ci=ci.next=e}return ci}function Fm(e,t){return typeof t=="function"?t(e):t}function Gb(e){var t=Is(),r=t.queue;if(r===null)throw Error(Ee(311));r.lastRenderedReducer=e;var i=Yr,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var o=a=null,l=null,c=s;do{var h=c.lane;if((Au&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=u,a=i):l=l.next=u,xr.lanes|=h,Mu|=h}c=c.next}while(c!==null&&c!==s);l===null?a=i:l.next=o,aa(i,t.memoizedState)||(wn=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,xr.lanes|=s,Mu|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hb(e){var t=Is(),r=t.queue;if(r===null)throw Error(Ee(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);aa(s,t.memoizedState)||(wn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function yN(){}function xN(e,t){var r=xr,i=Is(),n=t(),s=!aa(i.memoizedState,n);if(s&&(i.memoizedState=n,wn=!0),i=i.queue,r2(SN.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||ci!==null&&ci.memoizedState.tag&1){if(r.flags|=2048,Um(9,wN.bind(null,r,i,n,t),void 0,null),fi===null)throw Error(Ee(349));(Au&30)!==0||bN(r,t,n)}return n}function bN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function wN(e,t,r,i){t.value=r,t.getSnapshot=i,_N(t)&&AN(e)}function SN(e,t,r){return r(function(){_N(t)&&AN(e)})}function _N(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!aa(e,r)}catch{return!0}}function AN(e){var t=$o(e,1);t!==null&&na(t,e,1,-1)}function oD(e){var t=Ea();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:e},t.queue=e,e=e.dispatch=OW.bind(null,xr,e),[t.memoizedState,e]}function Um(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function MN(){return Is().memoizedState}function J0(e,t,r,i){var n=Ea();xr.flags|=e,n.memoizedState=Um(1|t,r,void 0,i===void 0?null:i)}function ux(e,t,r,i){var n=Is();i=i===void 0?null:i;var s=void 0;if(Yr!==null){var a=Yr.memoizedState;if(s=a.destroy,i!==null&&JE(i,a.deps)){n.memoizedState=Um(t,r,s,i);return}}xr.flags|=e,n.memoizedState=Um(1|t,r,s,i)}function lD(e,t){return J0(8390656,8,e,t)}function r2(e,t){return ux(2048,8,e,t)}function EN(e,t){return ux(4,2,e,t)}function CN(e,t){return ux(4,4,e,t)}function TN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function PN(e,t,r){return r=r!=null?r.concat([e]):null,ux(4,4,TN.bind(null,t,e),r)}function i2(){}function DN(e,t){var r=Is();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&JE(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function ON(e,t){var r=Is();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&JE(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function LN(e,t,r){return(Au&21)===0?(e.baseState&&(e.baseState=!1,wn=!0),e.memoizedState=r):(aa(r,t)||(r=Bz(),xr.lanes|=r,Mu|=r,e.baseState=!0),t)}function PW(e,t){var r=Xt;Xt=r!==0&&4>r?r:4,e(!0);var i=Vb.transition;Vb.transition={};try{e(!1),t()}finally{Xt=r,Vb.transition=i}}function IN(){return Is().memoizedState}function DW(e,t,r){var i=Yl(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},RN(e))BN(t,r);else if(r=hN(e,t,r,i),r!==null){var n=an();na(r,e,i,n),kN(r,t,i)}}function OW(e,t,r){var i=Yl(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(RN(e))BN(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,r);if(n.hasEagerState=!0,n.eagerState=o,aa(o,a)){var l=t.interleaved;l===null?(n.next=n,XE(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}r=hN(e,t,n,i),r!==null&&(n=an(),na(r,e,i,n),kN(r,t,i))}}function RN(e){var t=e.alternate;return e===xr||t!==null&&t===xr}function BN(e,t){Yf=Uy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function kN(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,RE(e,r)}}var jy={readContext:Ls,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},LW={readContext:Ls,useCallback:function(e,t){return Ea().memoizedState=[e,t===void 0?null:t],e},useContext:Ls,useEffect:lD,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,J0(4194308,4,TN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return J0(4194308,4,e,t)},useInsertionEffect:function(e,t){return J0(4,2,e,t)},useMemo:function(e,t){var r=Ea();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Ea();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=DW.bind(null,xr,e),[i.memoizedState,e]},useRef:function(e){var t=Ea();return e={current:e},t.memoizedState=e},useState:oD,useDebugValue:i2,useDeferredValue:function(e){return Ea().memoizedState=e},useTransition:function(){var e=oD(!1),t=e[0];return e=PW.bind(null,e[1]),Ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=xr,n=Ea();if(mr){if(r===void 0)throw Error(Ee(407));r=r()}else{if(r=t(),fi===null)throw Error(Ee(349));(Au&30)!==0||bN(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,lD(SN.bind(null,i,s,e),[e]),i.flags|=2048,Um(9,wN.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=Ea(),t=fi.identifierPrefix;if(mr){var r=Io,i=Lo;r=(i&~(1<<32-ia(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Nm++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=TW++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IW={readContext:Ls,useCallback:DN,useContext:Ls,useEffect:r2,useImperativeHandle:PN,useInsertionEffect:EN,useLayoutEffect:CN,useMemo:ON,useReducer:Gb,useRef:MN,useState:function(){return Gb(Fm)},useDebugValue:i2,useDeferredValue:function(e){var t=Is();return LN(t,Yr.memoizedState,e)},useTransition:function(){var e=Gb(Fm)[0],t=Is().memoizedState;return[e,t]},useMutableSource:yN,useSyncExternalStore:xN,useId:IN,unstable_isNewReconciler:!1},RW={readContext:Ls,useCallback:DN,useContext:Ls,useEffect:r2,useImperativeHandle:PN,useInsertionEffect:EN,useLayoutEffect:CN,useMemo:ON,useReducer:Hb,useRef:MN,useState:function(){return Hb(Fm)},useDebugValue:i2,useDeferredValue:function(e){var t=Is();return Yr===null?t.memoizedState=e:LN(t,Yr.memoizedState,e)},useTransition:function(){var e=Hb(Fm)[0],t=Is().memoizedState;return[e,t]},useMutableSource:yN,useSyncExternalStore:xN,useId:IN,unstable_isNewReconciler:!1};function Fd(e,t){try{var r="",i=t;do r+=lH(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function Wb(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function X_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var BW=typeof WeakMap=="function"?WeakMap:Map;function zN(e,t,r){r=zo(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Gy||(Gy=!0,nA=i),X_(e,t)},r}function NN(e,t,r){r=zo(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){X_(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){X_(e,t),typeof i!="function"&&(Xl===null?Xl=new Set([this]):Xl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function cD(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new BW;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=YW.bind(null,e,t,r),t.then(e,e))}function uD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hD(e,t,r,i,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=zo(-1,1),t.tag=2,$l(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var kW=Jo.ReactCurrentOwner,wn=!1;function Qi(e,t,r,i){t.child=e===null?gN(t,null,r,i):zd(t,e.child,r,i)}function dD(e,t,r,i,n){r=r.render;var s=t.ref;return fd(t,n),i=e2(e,t,r,i,s,n),r=t2(),e!==null&&!wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Xo(e,t,n)):(mr&&r&&VE(t),t.flags|=1,Qi(e,t,i,n),t.child)}function pD(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!h2(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,FN(e,t,s,i,n)):(e=iy(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Lm,r(a,i)&&e.ref===t.ref)return Xo(e,t,n)}return t.flags|=1,e=Ql(s,i),e.ref=t.ref,e.return=t,t.child=e}function FN(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(Lm(s,i)&&e.ref===t.ref)if(wn=!1,t.pendingProps=i=s,(e.lanes&n)!==0)(e.flags&131072)!==0&&(wn=!0);else return t.lanes=e.lanes,Xo(e,t,n)}return Y_(e,t,r,i,n)}function UN(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Qh,Hn),Hn|=r;else{if((r&1073741824)===0)return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,or(Qh,Hn),Hn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,or(Qh,Hn),Hn|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,or(Qh,Hn),Hn|=i;return Qi(e,t,n,r),t.child}function jN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Y_(e,t,r,i,n){var s=En(r)?Su:ji.current;return s=Bd(t,s),fd(t,n),r=e2(e,t,r,i,s,n),i=t2(),e!==null&&!wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Xo(e,t,n)):(mr&&i&&VE(t),t.flags|=1,Qi(e,t,r,n),t.child)}function fD(e,t,r,i,n){if(En(r)){var s=!0;Iy(t)}else s=!1;if(fd(t,n),t.stateNode===null)ey(e,t),fN(t,r,i),$_(t,r,i,n),i=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ls(c):(c=En(r)?Su:ji.current,c=Bd(t,c));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==c)&&sD(t,a,i,c),wl=!1;var d=t.memoizedState;a.state=d,Ny(t,i,a,n),l=t.memoizedState,o!==i||d!==l||Mn.current||wl?(typeof h=="function"&&(q_(t,r,h,i),l=t.memoizedState),(o=wl||nD(t,r,o,i,d,l,c))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,dN(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Xs(t.type,o),a.props=c,u=t.pendingProps,d=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ls(l):(l=En(r)?Su:ji.current,l=Bd(t,l));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||d!==l)&&sD(t,a,i,l),wl=!1,d=t.memoizedState,a.state=d,Ny(t,i,a,n);var f=t.memoizedState;o!==u||d!==f||Mn.current||wl?(typeof p=="function"&&(q_(t,r,p,i),f=t.memoizedState),(c=wl||nD(t,r,c,i,d,f,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,f,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Q_(e,t,r,i,s,n)}function Q_(e,t,r,i,n,s){jN(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&JP(t,r,!1),Xo(e,t,s);i=t.stateNode,kW.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=zd(t,e.child,null,s),t.child=zd(t,null,o,s)):Qi(e,t,o,s),t.memoizedState=i.state,n&&JP(t,r,!0),t.child}function VN(e){var t=e.stateNode;t.pendingContext?ZP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ZP(e,t.context,!1),QE(e,t.containerInfo)}function mD(e,t,r,i,n){return kd(),HE(n),t.flags|=256,Qi(e,t,r,i),t.child}var K_={dehydrated:null,treeContext:null,retryLane:0};function Z_(e){return{baseLanes:e,cachePool:null,transitions:null}}function GN(e,t,r){var i=t.pendingProps,n=gr.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),or(gr,n&1),e===null)return H_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=a):s=px(a,i,0,null),e=pu(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Z_(r),t.memoizedState=K_,e):n2(t,a));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return zW(e,t,a,i,o,n,r);if(s){s=i.fallback,a=t.mode,n=e.child,o=n.sibling;var l={mode:"hidden",children:i.children};return(a&1)===0&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ql(n,l),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=Ql(o,s):(s=pu(s,a,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=e.child.memoizedState,a=a===null?Z_(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=K_,i}return s=e.child,e=s.sibling,i=Ql(s,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function n2(e,t){return t=px({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fv(e,t,r,i){return i!==null&&HE(i),zd(t,e.child,null,r),e=n2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zW(e,t,r,i,n,s,a){if(r)return t.flags&256?(t.flags&=-257,i=Wb(Error(Ee(422))),fv(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=px({mode:"visible",children:i.children},n,0,null),s=pu(s,n,a,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,(t.mode&1)!==0&&zd(t,e.child,null,a),t.child.memoizedState=Z_(a),t.memoizedState=K_,s);if((t.mode&1)===0)return fv(e,t,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Ee(419)),i=Wb(s,i,void 0),fv(e,t,a,i)}if(o=(a&e.childLanes)!==0,wn||o){if(i=fi,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(i.suspendedLanes|a))!==0?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,$o(e,n),na(i,e,n,-1))}return u2(),i=Wb(Error(Ee(421))),fv(e,t,a,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=QW.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,Xn=ql(n.nextSibling),es=t,mr=!0,Qs=null,e!==null&&(bs[ws++]=Lo,bs[ws++]=Io,bs[ws++]=_u,Lo=e.id,Io=e.overflow,_u=t),t=n2(t,i.children),t.flags|=4096,t)}function gD(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),W_(e.return,t,r)}function qb(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function HN(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(Qi(e,t,i.children,r),i=gr.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gD(e,r,t);else if(e.tag===19)gD(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(or(gr,i),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Fy(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),qb(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Fy(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}qb(t,!0,r,null,s);break;case"together":qb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ey(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mu|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Ee(153));if(t.child!==null){for(e=t.child,r=Ql(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ql(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function NW(e,t,r){switch(t.tag){case 3:VN(t),kd();break;case 5:vN(t);break;case 1:En(t.type)&&Iy(t);break;case 4:QE(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;or(ky,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(or(gr,gr.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?GN(e,t,r):(or(gr,gr.current&1),e=Xo(e,t,r),e!==null?e.sibling:null);or(gr,gr.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return HN(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),or(gr,gr.current),i)break;return null;case 22:case 23:return t.lanes=0,UN(e,t,r)}return Xo(e,t,r)}var WN,J_,qN,$N;WN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};J_=function(){};qN=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,iu(Va.current);var s=null;switch(r){case"input":n=w_(e,n),i=w_(e,i),s=[];break;case"select":n=br({},n,{value:void 0}),i=br({},i,{value:void 0}),s=[];break;case"textarea":n=A_(e,n),i=A_(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Oy)}E_(r,i);var a;r=null;for(c in n)if(!i.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var o=n[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Mm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(o=n!=null?n[c]:void 0,i.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Mm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ur("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};$N=function(e,t,r,i){r!==i&&(t.flags|=4)};function jp(e,t){if(!mr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Oi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function FW(e,t,r){var i=t.pendingProps;switch(GE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oi(t),null;case 1:return En(t.type)&&Ly(),Oi(t),null;case 3:return i=t.stateNode,Nd(),dr(Mn),dr(ji),ZE(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(dv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Qs!==null&&(oA(Qs),Qs=null))),J_(e,t),Oi(t),null;case 5:KE(t);var n=iu(zm.current);if(r=t.type,e!==null&&t.stateNode!=null)qN(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ee(166));return Oi(t),null}if(e=iu(Va.current),dv(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Ra]=t,i[Bm]=s,e=(t.mode&1)!==0,r){case"dialog":ur("cancel",i),ur("close",i);break;case"iframe":case"object":case"embed":ur("load",i);break;case"video":case"audio":for(n=0;n<Df.length;n++)ur(Df[n],i);break;case"source":ur("error",i);break;case"img":case"image":case"link":ur("error",i),ur("load",i);break;case"details":ur("toggle",i);break;case"input":MP(i,s),ur("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ur("invalid",i);break;case"textarea":CP(i,s),ur("invalid",i)}E_(r,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&hv(i.textContent,o,e),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&hv(i.textContent,o,e),n=["children",""+o]):Mm.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ur("scroll",i)}switch(r){case"input":iv(i),EP(i,s,!0);break;case"textarea":iv(i),TP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Oy)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bz(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(r,{is:i.is}):(e=a.createElement(r),r==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,r),e[Ra]=t,e[Bm]=i,WN(e,t,!1,!1),t.stateNode=e;e:{switch(a=C_(r,i),r){case"dialog":ur("cancel",e),ur("close",e),n=i;break;case"iframe":case"object":case"embed":ur("load",e),n=i;break;case"video":case"audio":for(n=0;n<Df.length;n++)ur(Df[n],e);n=i;break;case"source":ur("error",e),n=i;break;case"img":case"image":case"link":ur("error",e),ur("load",e),n=i;break;case"details":ur("toggle",e),n=i;break;case"input":MP(e,i),n=w_(e,i),ur("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=br({},i,{value:void 0}),ur("invalid",e);break;case"textarea":CP(e,i),n=A_(e,i),ur("invalid",e);break;default:n=i}E_(r,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?_z(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wz(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Em(e,l):typeof l=="number"&&Em(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ur("scroll",e):l!=null&&TE(e,s,l,a))}switch(r){case"input":iv(e),EP(e,i,!1);break;case"textarea":iv(e),TP(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ac(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?ud(e,!!i.multiple,s,!1):i.defaultValue!=null&&ud(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Oy)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oi(t),null;case 6:if(e&&t.stateNode!=null)$N(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ee(166));if(r=iu(zm.current),iu(Va.current),dv(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ra]=t,(s=i.nodeValue!==r)&&(e=es,e!==null))switch(e.tag){case 3:hv(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hv(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ra]=t,t.stateNode=i}return Oi(t),null;case 13:if(dr(gr),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mr&&Xn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)uN(),kd(),t.flags|=98560,s=!1;else if(s=dv(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(Ee(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[Ra]=t}else kd(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Oi(t),s=!1}else Qs!==null&&(oA(Qs),Qs=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(gr.current&1)!==0?Kr===0&&(Kr=3):u2())),t.updateQueue!==null&&(t.flags|=4),Oi(t),null);case 4:return Nd(),J_(e,t),e===null&&Im(t.stateNode.containerInfo),Oi(t),null;case 10:return $E(t.type._context),Oi(t),null;case 17:return En(t.type)&&Ly(),Oi(t),null;case 19:if(dr(gr),s=t.memoizedState,s===null)return Oi(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)jp(s,!1);else{if(Kr!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=Fy(e),a!==null){for(t.flags|=128,jp(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return or(gr,gr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Or()>Ud&&(t.flags|=128,i=!0,jp(s,!1),t.lanes=4194304)}else{if(!i)if(e=Fy(a),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),jp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!mr)return Oi(t),null}else 2*Or()-s.renderingStartTime>Ud&&r!==1073741824&&(t.flags|=128,i=!0,jp(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Or(),t.sibling=null,r=gr.current,or(gr,i?r&1|2:r&1),t):(Oi(t),null);case 22:case 23:return c2(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Hn&1073741824)!==0&&(Oi(t),t.subtreeFlags&6&&(t.flags|=8192)):Oi(t),null;case 24:return null;case 25:return null}throw Error(Ee(156,t.tag))}function UW(e,t){switch(GE(t),t.tag){case 1:return En(t.type)&&Ly(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nd(),dr(Mn),dr(ji),ZE(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return KE(t),null;case 13:if(dr(gr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ee(340));kd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dr(gr),null;case 4:return Nd(),null;case 10:return $E(t.type._context),null;case 22:case 23:return c2(),null;case 24:return null;default:return null}}var mv=!1,Bi=!1,jW=typeof WeakSet=="function"?WeakSet:Set,He=null;function Yh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){_r(e,t,i)}else r.current=null}function eA(e,t,r){try{r()}catch(i){_r(e,t,i)}}var vD=!1;function VW(e,t){if(z_=Ty,e=Kz(),jE(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,h=0,u=e,d=null;t:for(;;){for(var p;u!==r||n!==0&&u.nodeType!==3||(o=a+n),u!==s||i!==0&&u.nodeType!==3||(l=a+i),u.nodeType===3&&(a+=u.nodeValue.length),(p=u.firstChild)!==null;)d=u,u=p;for(;;){if(u===e)break t;if(d===r&&++c===n&&(o=a),d===s&&++h===i&&(l=a),(p=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(N_={focusedElem:e,selectionRange:r},Ty=!1,He=t;He!==null;)if(t=He,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,He=e;else for(;He!==null;){t=He;try{var f=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Xs(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(b){_r(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,He=e;break}He=t.return}return f=vD,vD=!1,f}function Qf(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&eA(t,r,s)}n=n.next}while(n!==i)}}function hx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function tA(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function XN(e){var t=e.alternate;t!==null&&(e.alternate=null,XN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ra],delete t[Bm],delete t[j_],delete t[AW],delete t[MW])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YN(e){return e.tag===5||e.tag===3||e.tag===4}function yD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rA(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Oy));else if(i!==4&&(e=e.child,e!==null))for(rA(e,t,r),e=e.sibling;e!==null;)rA(e,t,r),e=e.sibling}function iA(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(iA(e,t,r),e=e.sibling;e!==null;)iA(e,t,r),e=e.sibling}var Si=null,Ys=!1;function nl(e,t,r){for(r=r.child;r!==null;)QN(e,t,r),r=r.sibling}function QN(e,t,r){if(ja&&typeof ja.onCommitFiberUnmount=="function")try{ja.onCommitFiberUnmount(ix,r)}catch{}switch(r.tag){case 5:Bi||Yh(r,t);case 6:var i=Si,n=Ys;Si=null,nl(e,t,r),Si=i,Ys=n,Si!==null&&(Ys?(e=Si,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Si.removeChild(r.stateNode));break;case 18:Si!==null&&(Ys?(e=Si,r=r.stateNode,e.nodeType===8?Fb(e.parentNode,r):e.nodeType===1&&Fb(e,r),Dm(e)):Fb(Si,r.stateNode));break;case 4:i=Si,n=Ys,Si=r.stateNode.containerInfo,Ys=!0,nl(e,t,r),Si=i,Ys=n;break;case 0:case 11:case 14:case 15:if(!Bi&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&((s&2)!==0||(s&4)!==0)&&eA(r,t,a),n=n.next}while(n!==i)}nl(e,t,r);break;case 1:if(!Bi&&(Yh(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){_r(r,t,o)}nl(e,t,r);break;case 21:nl(e,t,r);break;case 22:r.mode&1?(Bi=(i=Bi)||r.memoizedState!==null,nl(e,t,r),Bi=i):nl(e,t,r);break;default:nl(e,t,r)}}function xD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new jW),t.forEach(function(i){var n=KW.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function Fs(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Si=o.stateNode,Ys=!1;break e;case 3:Si=o.stateNode.containerInfo,Ys=!0;break e;case 4:Si=o.stateNode.containerInfo,Ys=!0;break e}o=o.return}if(Si===null)throw Error(Ee(160));QN(s,a,n),Si=null,Ys=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){_r(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)KN(t,e),t=t.sibling}function KN(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fs(t,e),da(e),i&4){try{Qf(3,e,e.return),hx(3,e)}catch(m){_r(e,e.return,m)}try{Qf(5,e,e.return)}catch(m){_r(e,e.return,m)}}break;case 1:Fs(t,e),da(e),i&512&&r!==null&&Yh(r,r.return);break;case 5:if(Fs(t,e),da(e),i&512&&r!==null&&Yh(r,r.return),e.flags&32){var n=e.stateNode;try{Em(n,"")}catch(m){_r(e,e.return,m)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&yz(n,s),C_(o,a);var c=C_(o,s);for(a=0;a<l.length;a+=2){var h=l[a],u=l[a+1];h==="style"?_z(n,u):h==="dangerouslySetInnerHTML"?wz(n,u):h==="children"?Em(n,u):TE(n,h,u,c)}switch(o){case"input":S_(n,s);break;case"textarea":xz(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ud(n,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?ud(n,!!s.multiple,s.defaultValue,!0):ud(n,!!s.multiple,s.multiple?[]:"",!1))}n[Bm]=s}catch(m){_r(e,e.return,m)}}break;case 6:if(Fs(t,e),da(e),i&4){if(e.stateNode===null)throw Error(Ee(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(m){_r(e,e.return,m)}}break;case 3:if(Fs(t,e),da(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Dm(t.containerInfo)}catch(m){_r(e,e.return,m)}break;case 4:Fs(t,e),da(e);break;case 13:Fs(t,e),da(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(o2=Or())),i&4&&xD(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Bi=(c=Bi)||h,Fs(t,e),Bi=c):Fs(t,e),da(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&(e.mode&1)!==0)for(He=e,h=e.child;h!==null;){for(u=He=h;He!==null;){switch(d=He,p=d.child,d.tag){case 0:case 11:case 14:case 15:Qf(4,d,d.return);break;case 1:Yh(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){i=d,r=d.return;try{t=i,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){_r(i,r,m)}}break;case 5:Yh(d,d.return);break;case 22:if(d.memoizedState!==null){wD(u);continue}}p!==null?(p.return=d,He=p):wD(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{n=u.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,l=u.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Sz("display",a))}catch(m){_r(e,e.return,m)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){_r(e,e.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Fs(t,e),da(e),i&4&&xD(e);break;case 21:break;default:Fs(t,e),da(e)}}function da(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(YN(r)){var i=r;break e}r=r.return}throw Error(Ee(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Em(n,""),i.flags&=-33);var s=yD(e);iA(e,s,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=yD(e);rA(e,o,a);break;default:throw Error(Ee(161))}}catch(l){_r(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GW(e,t,r){He=e,ZN(e)}function ZN(e,t,r){for(var i=(e.mode&1)!==0;He!==null;){var n=He,s=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||mv;if(!a){var o=n.alternate,l=o!==null&&o.memoizedState!==null||Bi;o=mv;var c=Bi;if(mv=a,(Bi=l)&&!c)for(He=n;He!==null;)a=He,l=a.child,a.tag===22&&a.memoizedState!==null?SD(n):l!==null?(l.return=a,He=l):SD(n);for(;s!==null;)He=s,ZN(s),s=s.sibling;He=n,mv=o,Bi=c}bD(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,He=s):bD(e)}}function bD(e){for(;He!==null;){var t=He;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Bi||hx(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Bi)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Xs(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&iD(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}iD(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&Dm(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Bi||t.flags&512&&tA(t)}catch(d){_r(t,t.return,d)}}if(t===e){He=null;break}if(r=t.sibling,r!==null){r.return=t.return,He=r;break}He=t.return}}function wD(e){for(;He!==null;){var t=He;if(t===e){He=null;break}var r=t.sibling;if(r!==null){r.return=t.return,He=r;break}He=t.return}}function SD(e){for(;He!==null;){var t=He;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{hx(4,t)}catch(l){_r(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){_r(t,n,l)}}var s=t.return;try{tA(t)}catch(l){_r(t,s,l)}break;case 5:var a=t.return;try{tA(t)}catch(l){_r(t,a,l)}}}catch(l){_r(t,t.return,l)}if(t===e){He=null;break}var o=t.sibling;if(o!==null){o.return=t.return,He=o;break}He=t.return}}var HW=Math.ceil,Vy=Jo.ReactCurrentDispatcher,s2=Jo.ReactCurrentOwner,Es=Jo.ReactCurrentBatchConfig,zt=0,fi=null,Vr=null,Mi=0,Hn=0,Qh=mc(0),Kr=0,jm=null,Mu=0,dx=0,a2=0,Kf=null,gn=null,o2=0,Ud=1/0,_o=null,Gy=!1,nA=null,Xl=null,gv=!1,Ol=null,Hy=0,Zf=0,sA=null,ty=-1,ry=0;function an(){return(zt&6)!==0?Or():ty!==-1?ty:ty=Or()}function Yl(e){return(e.mode&1)===0?1:(zt&2)!==0&&Mi!==0?Mi&-Mi:CW.transition!==null?(ry===0&&(ry=Bz()),ry):(e=Xt,e!==0||(e=window.event,e=e===void 0?16:Vz(e.type)),e)}function na(e,t,r,i){if(50<Zf)throw Zf=0,sA=null,Error(Ee(185));Sg(e,r,i),((zt&2)===0||e!==fi)&&(e===fi&&((zt&2)===0&&(dx|=r),Kr===4&&Ml(e,Mi)),Cn(e,i),r===1&&zt===0&&(t.mode&1)===0&&(Ud=Or()+500,lx&&gc()))}function Cn(e,t){var r=e.callbackNode;CH(e,t);var i=Cy(e,e===fi?Mi:0);if(i===0)r!==null&&OP(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&OP(r),t===1)e.tag===0?EW(_D.bind(null,e)):oN(_D.bind(null,e)),SW(function(){(zt&6)===0&&gc()}),r=null;else{switch(kz(i)){case 1:r=IE;break;case 4:r=Iz;break;case 16:r=Ey;break;case 536870912:r=Rz;break;default:r=Ey}r=a4(r,JN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function JN(e,t){if(ty=-1,ry=0,(zt&6)!==0)throw Error(Ee(327));var r=e.callbackNode;if(md()&&e.callbackNode!==r)return null;var i=Cy(e,e===fi?Mi:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Wy(e,i);else{t=i;var n=zt;zt|=2;var s=t4();(fi!==e||Mi!==t)&&(_o=null,Ud=Or()+500,du(e,t));do try{$W();break}catch(o){e4(e,o)}while(1);qE(),Vy.current=s,zt=n,Vr!==null?t=0:(fi=null,Mi=0,t=Kr)}if(t!==0){if(t===2&&(n=L_(e),n!==0&&(i=n,t=aA(e,n))),t===1)throw r=jm,du(e,0),Ml(e,i),Cn(e,Or()),r;if(t===6)Ml(e,i);else{if(n=e.current.alternate,(i&30)===0&&!WW(n)&&(t=Wy(e,i),t===2&&(s=L_(e),s!==0&&(i=s,t=aA(e,s))),t===1))throw r=jm,du(e,0),Ml(e,i),Cn(e,Or()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(Ee(345));case 2:Uc(e,gn,_o);break;case 3:if(Ml(e,i),(i&130023424)===i&&(t=o2+500-Or(),10<t)){if(Cy(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){an(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=U_(Uc.bind(null,e,gn,_o),t);break}Uc(e,gn,_o);break;case 4:if(Ml(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var a=31-ia(i);s=1<<a,a=t[a],a>n&&(n=a),i&=~s}if(i=n,i=Or()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*HW(i/1960))-i,10<i){e.timeoutHandle=U_(Uc.bind(null,e,gn,_o),i);break}Uc(e,gn,_o);break;case 5:Uc(e,gn,_o);break;default:throw Error(Ee(329))}}}return Cn(e,Or()),e.callbackNode===r?JN.bind(null,e):null}function aA(e,t){var r=Kf;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),e=Wy(e,t),e!==2&&(t=gn,gn=r,t!==null&&oA(t)),e}function oA(e){gn===null?gn=e:gn.push.apply(gn,e)}function WW(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!aa(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ml(e,t){for(t&=~a2,t&=~dx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ia(t),i=1<<r;e[r]=-1,t&=~i}}function _D(e){if((zt&6)!==0)throw Error(Ee(327));md();var t=Cy(e,0);if((t&1)===0)return Cn(e,Or()),null;var r=Wy(e,t);if(e.tag!==0&&r===2){var i=L_(e);i!==0&&(t=i,r=aA(e,i))}if(r===1)throw r=jm,du(e,0),Ml(e,t),Cn(e,Or()),r;if(r===6)throw Error(Ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uc(e,gn,_o),Cn(e,Or()),null}function l2(e,t){var r=zt;zt|=1;try{return e(t)}finally{zt=r,zt===0&&(Ud=Or()+500,lx&&gc())}}function Eu(e){Ol!==null&&Ol.tag===0&&(zt&6)===0&&md();var t=zt;zt|=1;var r=Es.transition,i=Xt;try{if(Es.transition=null,Xt=1,e)return e()}finally{Xt=i,Es.transition=r,zt=t,(zt&6)===0&&gc()}}function c2(){Hn=Qh.current,dr(Qh)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,wW(r)),Vr!==null)for(r=Vr.return;r!==null;){var i=r;switch(GE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ly();break;case 3:Nd(),dr(Mn),dr(ji),ZE();break;case 5:KE(i);break;case 4:Nd();break;case 13:dr(gr);break;case 19:dr(gr);break;case 10:$E(i.type._context);break;case 22:case 23:c2()}r=r.return}if(fi=e,Vr=e=Ql(e.current,null),Mi=Hn=t,Kr=0,jm=null,a2=dx=Mu=0,gn=Kf=null,ru!==null){for(t=0;t<ru.length;t++)if(r=ru[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=n,i.next=a}r.pending=i}ru=null}return e}function e4(e,t){do{var r=Vr;try{if(qE(),Z0.current=jy,Uy){for(var i=xr.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Uy=!1}if(Au=0,ci=Yr=xr=null,Yf=!1,Nm=0,s2.current=null,r===null||r.return===null){Kr=1,jm=t,Vr=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=Mi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,u=h.tag;if((h.mode&1)===0&&(u===0||u===11||u===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=uD(a);if(p!==null){p.flags&=-257,hD(p,a,o,s,t),p.mode&1&&cD(s,c,t),t=p,l=c;var f=t.updateQueue;if(f===null){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}else{if((t&1)===0){cD(s,c,t),u2();break e}l=Error(Ee(426))}}else if(mr&&o.mode&1){var g=uD(a);if(g!==null){(g.flags&65536)===0&&(g.flags|=256),hD(g,a,o,s,t),HE(Fd(l,o));break e}}s=l=Fd(l,o),Kr!==4&&(Kr=2),Kf===null?Kf=[s]:Kf.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=zN(s,l,t);rD(s,v);break e;case 1:o=l;var y=s.type,x=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Xl===null||!Xl.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=NN(s,o,t);rD(s,b);break e}}s=s.return}while(s!==null)}i4(r)}catch(S){t=S,Vr===r&&r!==null&&(Vr=r=r.return);continue}break}while(1)}function t4(){var e=Vy.current;return Vy.current=jy,e===null?jy:e}function u2(){(Kr===0||Kr===3||Kr===2)&&(Kr=4),fi===null||(Mu&268435455)===0&&(dx&268435455)===0||Ml(fi,Mi)}function Wy(e,t){var r=zt;zt|=2;var i=t4();(fi!==e||Mi!==t)&&(_o=null,du(e,t));do try{qW();break}catch(n){e4(e,n)}while(1);if(qE(),zt=r,Vy.current=i,Vr!==null)throw Error(Ee(261));return fi=null,Mi=0,Kr}function qW(){for(;Vr!==null;)r4(Vr)}function $W(){for(;Vr!==null&&!yH();)r4(Vr)}function r4(e){var t=s4(e.alternate,e,Hn);e.memoizedProps=e.pendingProps,t===null?i4(e):Vr=t,s2.current=null}function i4(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=FW(r,t,Hn),r!==null){Vr=r;return}}else{if(r=UW(r,t),r!==null){r.flags&=32767,Vr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kr=6,Vr=null;return}}if(t=t.sibling,t!==null){Vr=t;return}Vr=t=e}while(t!==null);Kr===0&&(Kr=5)}function Uc(e,t,r){var i=Xt,n=Es.transition;try{Es.transition=null,Xt=1,XW(e,t,r,i)}finally{Es.transition=n,Xt=i}return null}function XW(e,t,r,i){do md();while(Ol!==null);if((zt&6)!==0)throw Error(Ee(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ee(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(TH(e,s),e===fi&&(Vr=fi=null,Mi=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||gv||(gv=!0,a4(Ey,function(){return md(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=Es.transition,Es.transition=null;var a=Xt;Xt=1;var o=zt;zt|=4,s2.current=null,VW(e,r),KN(r,e),fW(N_),Ty=!!z_,N_=z_=null,e.current=r,GW(r),xH(),zt=o,Xt=a,Es.transition=s}else e.current=r;if(gv&&(gv=!1,Ol=e,Hy=n),s=e.pendingLanes,s===0&&(Xl=null),SH(r.stateNode),Cn(e,Or()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(Gy)throw Gy=!1,e=nA,nA=null,e;return(Hy&1)!==0&&e.tag!==0&&md(),s=e.pendingLanes,(s&1)!==0?e===sA?Zf++:(Zf=0,sA=e):Zf=0,gc(),null}function md(){if(Ol!==null){var e=kz(Hy),t=Es.transition,r=Xt;try{if(Es.transition=null,Xt=16>e?16:e,Ol===null)var i=!1;else{if(e=Ol,Ol=null,Hy=0,(zt&6)!==0)throw Error(Ee(331));var n=zt;for(zt|=4,He=e.current;He!==null;){var s=He,a=s.child;if((He.flags&16)!==0){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(He=c;He!==null;){var h=He;switch(h.tag){case 0:case 11:case 15:Qf(8,h,s)}var u=h.child;if(u!==null)u.return=h,He=u;else for(;He!==null;){h=He;var d=h.sibling,p=h.return;if(XN(h),h===c){He=null;break}if(d!==null){d.return=p,He=d;break}He=p}}}var f=s.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}He=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,He=a;else e:for(;He!==null;){if(s=He,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Qf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,He=v;break e}He=s.return}}var y=e.current;for(He=y;He!==null;){a=He;var x=a.child;if((a.subtreeFlags&2064)!==0&&x!==null)x.return=a,He=x;else e:for(a=y;He!==null;){if(o=He,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:hx(9,o)}}catch(S){_r(o,o.return,S)}if(o===a){He=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,He=b;break e}He=o.return}}if(zt=n,gc(),ja&&typeof ja.onPostCommitFiberRoot=="function")try{ja.onPostCommitFiberRoot(ix,e)}catch{}i=!0}return i}finally{Xt=r,Es.transition=t}}return!1}function AD(e,t,r){t=Fd(r,t),t=zN(e,t,1),e=$l(e,t,1),t=an(),e!==null&&(Sg(e,1,t),Cn(e,t))}function _r(e,t,r){if(e.tag===3)AD(e,e,r);else for(;t!==null;){if(t.tag===3){AD(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xl===null||!Xl.has(i))){e=Fd(r,e),e=NN(t,e,1),t=$l(t,e,1),e=an(),t!==null&&(Sg(t,1,e),Cn(t,e));break}}t=t.return}}function YW(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=an(),e.pingedLanes|=e.suspendedLanes&r,fi===e&&(Mi&r)===r&&(Kr===4||Kr===3&&(Mi&130023424)===Mi&&500>Or()-o2?du(e,0):a2|=r),Cn(e,t)}function n4(e,t){t===0&&((e.mode&1)===0?t=1:(t=av,av<<=1,(av&130023424)===0&&(av=4194304)));var r=an();e=$o(e,t),e!==null&&(Sg(e,t,r),Cn(e,r))}function QW(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),n4(e,r)}function KW(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ee(314))}i!==null&&i.delete(t),n4(e,r)}var s4;s4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mn.current)wn=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return wn=!1,NW(e,t,r);wn=(e.flags&131072)!==0}else wn=!1,mr&&(t.flags&1048576)!==0&&lN(t,By,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ey(e,t),e=t.pendingProps;var n=Bd(t,ji.current);fd(t,r),n=e2(null,t,i,e,n,r);var s=t2();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,En(i)?(s=!0,Iy(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,YE(t),n.updater=cx,t.stateNode=n,n._reactInternals=t,$_(t,i,e,r),t=Q_(null,t,i,!0,s,r)):(t.tag=0,mr&&s&&VE(t),Qi(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(ey(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=JW(i),e=Xs(i,e),n){case 0:t=Y_(null,t,i,e,r);break e;case 1:t=fD(null,t,i,e,r);break e;case 11:t=dD(null,t,i,e,r);break e;case 14:t=pD(null,t,i,Xs(i.type,e),r);break e}throw Error(Ee(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Xs(i,n),Y_(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Xs(i,n),fD(e,t,i,n,r);case 3:e:{if(VN(t),e===null)throw Error(Ee(387));i=t.pendingProps,s=t.memoizedState,n=s.element,dN(e,t),Ny(t,i,null,r);var a=t.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Fd(Error(Ee(423)),t),t=mD(e,t,i,r,n);break e}else if(i!==n){n=Fd(Error(Ee(424)),t),t=mD(e,t,i,r,n);break e}else for(Xn=ql(t.stateNode.containerInfo.firstChild),es=t,mr=!0,Qs=null,r=gN(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(kd(),i===n){t=Xo(e,t,r);break e}Qi(e,t,i,r)}t=t.child}return t;case 5:return vN(t),e===null&&H_(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,F_(i,n)?a=null:s!==null&&F_(i,s)&&(t.flags|=32),jN(e,t),Qi(e,t,a,r),t.child;case 6:return e===null&&H_(t),null;case 13:return GN(e,t,r);case 4:return QE(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=zd(t,null,i,r):Qi(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Xs(i,n),dD(e,t,i,n,r);case 7:return Qi(e,t,t.pendingProps,r),t.child;case 8:return Qi(e,t,t.pendingProps.children,r),t.child;case 12:return Qi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,or(ky,i._currentValue),i._currentValue=a,s!==null)if(aa(s.value,a)){if(s.children===n.children&&!Mn.current){t=Xo(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=zo(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),W_(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ee(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),W_(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Qi(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,fd(t,r),n=Ls(n),i=i(n),t.flags|=1,Qi(e,t,i,r),t.child;case 14:return i=t.type,n=Xs(i,t.pendingProps),n=Xs(i.type,n),pD(e,t,i,n,r);case 15:return FN(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Xs(i,n),ey(e,t),t.tag=1,En(i)?(e=!0,Iy(t)):e=!1,fd(t,r),fN(t,i,n),$_(t,i,n,r),Q_(null,t,i,!0,e,r);case 19:return HN(e,t,r);case 22:return UN(e,t,r)}throw Error(Ee(156,t.tag))};function a4(e,t){return Lz(e,t)}function ZW(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(e,t,r,i){return new ZW(e,t,r,i)}function h2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function JW(e){if(typeof e=="function")return h2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===DE)return 11;if(e===OE)return 14}return 2}function Ql(e,t){var r=e.alternate;return r===null?(r=Ms(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function iy(e,t,r,i,n,s){var a=2;if(i=e,typeof e=="function")h2(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Uh:return pu(r.children,n,s,t);case PE:a=8,n|=8;break;case v_:return e=Ms(12,r,t,n|2),e.elementType=v_,e.lanes=s,e;case y_:return e=Ms(13,r,t,n),e.elementType=y_,e.lanes=s,e;case x_:return e=Ms(19,r,t,n),e.elementType=x_,e.lanes=s,e;case mz:return px(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pz:a=10;break e;case fz:a=9;break e;case DE:a=11;break e;case OE:a=14;break e;case bl:a=16,i=null;break e}throw Error(Ee(130,e==null?e:typeof e,""))}return t=Ms(a,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function pu(e,t,r,i){return e=Ms(7,e,i,t),e.lanes=r,e}function px(e,t,r,i){return e=Ms(22,e,i,t),e.elementType=mz,e.lanes=r,e.stateNode={isHidden:!1},e}function $b(e,t,r){return e=Ms(6,e,null,t),e.lanes=r,e}function Xb(e,t,r){return t=Ms(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function e8(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tb(0),this.expirationTimes=Tb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tb(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function d2(e,t,r,i,n,s,a,o,l){return e=new e8(e,t,r,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ms(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},YE(s),e}function t8(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function o4(e){if(!e)return oc;e=e._reactInternals;e:{if(Nu(e)!==e||e.tag!==1)throw Error(Ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(En(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ee(171))}if(e.tag===1){var r=e.type;if(En(r))return aN(e,r,t)}return t}function l4(e,t,r,i,n,s,a,o,l){return e=d2(r,i,!0,e,n,s,a,o,l),e.context=o4(null),r=e.current,i=an(),n=Yl(r),s=zo(i,n),s.callback=t!=null?t:null,$l(r,s,n),e.current.lanes=n,Sg(e,n,i),Cn(e,i),e}function fx(e,t,r,i){var n=t.current,s=an(),a=Yl(n);return r=o4(r),t.context===null?t.context=r:t.pendingContext=r,t=zo(s,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=$l(n,t,a),e!==null&&(na(e,n,a,s),K0(e,n,a)),a}function qy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function MD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function p2(e,t){MD(e,t),(e=e.alternate)&&MD(e,t)}function r8(){return null}var c4=typeof reportError=="function"?reportError:function(e){console.error(e)};function f2(e){this._internalRoot=e}mx.prototype.render=f2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ee(409));fx(e,t,null,null)};mx.prototype.unmount=f2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eu(function(){fx(null,e,null,null)}),t[qo]=null}};function mx(e){this._internalRoot=e}mx.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fz();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Al.length&&t!==0&&t<Al[r].priority;r++);Al.splice(r,0,e),r===0&&jz(e)}};function m2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ED(){}function i8(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var c=qy(a);s.call(c)}}var a=l4(t,i,e,0,null,!1,!1,"",ED);return e._reactRootContainer=a,e[qo]=a.current,Im(e.nodeType===8?e.parentNode:e),Eu(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var c=qy(l);o.call(c)}}var l=d2(e,0,!1,null,null,!1,!1,"",ED);return e._reactRootContainer=l,e[qo]=l.current,Im(e.nodeType===8?e.parentNode:e),Eu(function(){fx(t,l,r,i)}),l}function vx(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var l=qy(a);o.call(l)}}fx(t,a,e,n)}else a=i8(r,t,e,n,i);return qy(a)}zz=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pf(t.pendingLanes);r!==0&&(RE(t,r|1),Cn(t,Or()),(zt&6)===0&&(Ud=Or()+500,gc()))}break;case 13:Eu(function(){var i=$o(e,1);if(i!==null){var n=an();na(i,e,1,n)}}),p2(e,1)}};BE=function(e){if(e.tag===13){var t=$o(e,134217728);if(t!==null){var r=an();na(t,e,134217728,r)}p2(e,134217728)}};Nz=function(e){if(e.tag===13){var t=Yl(e),r=$o(e,t);if(r!==null){var i=an();na(r,e,t,i)}p2(e,t)}};Fz=function(){return Xt};Uz=function(e,t){var r=Xt;try{return Xt=e,t()}finally{Xt=r}};P_=function(e,t,r){switch(t){case"input":if(S_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=ox(i);if(!n)throw Error(Ee(90));vz(i),S_(i,n)}}}break;case"textarea":xz(e,r);break;case"select":t=r.value,t!=null&&ud(e,!!r.multiple,t,!1)}};Ez=l2;Cz=Eu;var n8={usingClientEntryPoint:!1,Events:[Ag,Hh,ox,Az,Mz,l2]},Vp={findFiberByHostInstance:tu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},s8={bundleType:Vp.bundleType,version:Vp.version,rendererPackageName:Vp.rendererPackageName,rendererConfig:Vp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dz(e),e===null?null:e.stateNode},findFiberByHostInstance:Vp.findFiberByHostInstance||r8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vv.isDisabled&&vv.supportsFiber)try{ix=vv.inject(s8),ja=vv}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n8;as.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m2(t))throw Error(Ee(200));return t8(e,t,null,r)};as.createRoot=function(e,t){if(!m2(e))throw Error(Ee(299));var r=!1,i="",n=c4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=d2(e,1,!1,null,null,r,!1,i,n),e[qo]=t.current,Im(e.nodeType===8?e.parentNode:e),new f2(t)};as.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ee(188)):(e=Object.keys(e).join(","),Error(Ee(268,e)));return e=Dz(t),e=e===null?null:e.stateNode,e};as.flushSync=function(e){return Eu(e)};as.hydrate=function(e,t,r){if(!gx(t))throw Error(Ee(200));return vx(null,e,t,!0,r)};as.hydrateRoot=function(e,t,r){if(!m2(e))throw Error(Ee(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",a=c4;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=l4(t,null,e,1,r!=null?r:null,n,!1,s,a),e[qo]=t.current,Im(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new mx(t)};as.render=function(e,t,r){if(!gx(t))throw Error(Ee(200));return vx(null,e,t,!1,r)};as.unmountComponentAtNode=function(e){if(!gx(e))throw Error(Ee(40));return e._reactRootContainer?(Eu(function(){vx(null,null,e,!1,function(){e._reactRootContainer=null,e[qo]=null})}),!0):!1};as.unstable_batchedUpdates=l2;as.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!gx(r))throw Error(Ee(200));if(e==null||e._reactInternals===void 0)throw Error(Ee(38));return vx(e,t,r,!1,i)};as.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=as})(rx);const Yb=ez(rx.exports);var CD=rx.exports;m_.createRoot=CD.createRoot,m_.hydrateRoot=CD.hydrateRoot;const u4=W.exports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),yx=W.exports.createContext({}),xx=W.exports.createContext(null),bx=typeof document<"u",wx=bx?W.exports.useLayoutEffect:W.exports.useEffect,h4=W.exports.createContext({strict:!1});function a8(e,t,r,i){const{visualElement:n}=W.exports.useContext(yx),s=W.exports.useContext(h4),a=W.exports.useContext(xx),o=W.exports.useContext(u4).reducedMotion,l=W.exports.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(e,{visualState:t,parent:n,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:o}));const c=l.current;W.exports.useInsertionEffect(()=>{c&&c.update(r,a)});const h=W.exports.useRef(Boolean(window.HandoffAppearAnimations));return wx(()=>{!c||(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),W.exports.useEffect(()=>{!c||(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,h.current=!1)}),c}function Kh(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function o8(e,t,r){return W.exports.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),r&&(typeof r=="function"?r(i):Kh(r)&&(r.current=i))},[t])}function Vm(e){return typeof e=="string"||Array.isArray(e)}function Sx(e){return typeof e=="object"&&typeof e.start=="function"}const g2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],v2=["initial",...g2];function _x(e){return Sx(e.animate)||v2.some(t=>Vm(e[t]))}function d4(e){return Boolean(_x(e)||e.variants)}function l8(e,t){if(_x(e)){const{initial:r,animate:i}=e;return{initial:r===!1||Vm(r)?r:void 0,animate:Vm(i)?i:void 0}}return e.inherit!==!1?t:{}}function c8(e){const{initial:t,animate:r}=l8(e,W.exports.useContext(yx));return W.exports.useMemo(()=>({initial:t,animate:r}),[TD(t),TD(r)])}function TD(e){return Array.isArray(e)?e.join(" "):e}const PD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gm={};for(const e in PD)Gm[e]={isEnabled:t=>PD[e].some(r=>!!t[r])};function u8(e){for(const t in e)Gm[t]={...Gm[t],...e[t]}}const y2=W.exports.createContext({}),p4=W.exports.createContext({}),h8=Symbol.for("motionComponentSymbol");var Ax={exports:{}},Mx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d8=W.exports,p8=Symbol.for("react.element"),f8=Symbol.for("react.fragment"),m8=Object.prototype.hasOwnProperty,g8=d8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v8={key:!0,ref:!0,__self:!0,__source:!0};function f4(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)m8.call(t,i)&&!v8.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:p8,type:e,key:s,ref:a,props:n,_owner:g8.current}}Mx.Fragment=f8;Mx.jsx=f4;Mx.jsxs=f4;(function(e){e.exports=Mx})(Ax);const on=Ax.exports.Fragment,H=Ax.exports.jsx,Me=Ax.exports.jsxs,y8=Object.freeze(Object.defineProperty({__proto__:null,Fragment:on,jsx:H,jsxs:Me},Symbol.toStringTag,{value:"Module"}));function x8({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:i,Component:n}){e&&u8(e);function s(o,l){let c;const h={...W.exports.useContext(u4),...o,layoutId:b8(o)},{isStatic:u}=h,d=c8(o),p=i(o,u);if(!u&&bx){d.visualElement=a8(n,p,h,t);const f=W.exports.useContext(p4),m=W.exports.useContext(h4).strict;d.visualElement&&(c=d.visualElement.loadFeatures(h,m,e,f))}return Me(yx.Provider,{value:d,children:[c&&d.visualElement?H(c,{visualElement:d.visualElement,...h}):null,r(n,o,o8(p,d.visualElement,l),p,u,d.visualElement)]})}const a=W.exports.forwardRef(s);return a[h8]=n,a}function b8({layoutId:e}){const t=W.exports.useContext(y2).id;return t&&e!==void 0?t+"-"+e:e}function w8(e){function t(i,n={}){return x8(e(i,n))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(i,n)=>(r.has(n)||r.set(n,t(n)),r.get(n))})}const S8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function x2(e){return typeof e!="string"||e.includes("-")?!1:!!(S8.indexOf(e)>-1||/[A-Z]/.test(e))}const $y={};function _8(e){Object.assign($y,e)}const Eg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fu=new Set(Eg);function m4(e,{layout:t,layoutId:r}){return Fu.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!$y[e]||e==="opacity")}const Ln=e=>Boolean(e&&e.getVelocity),A8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M8=Eg.length;function E8(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},i,n){let s="";for(let a=0;a<M8;a++){const o=Eg[a];e[o]!==void 0&&(s+=`${A8[o]||o}(${e[o]}) `)}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),n?s=n(e,i?"":s):r&&i&&(s="none"),s}const g4=e=>t=>typeof t=="string"&&t.startsWith(e),v4=g4("--"),lA=g4("var(--"),C8=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,T8=(e,t)=>t&&typeof e=="number"?t.transform(e):e,lc=(e,t,r)=>Math.min(Math.max(r,e),t),Uu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Jf={...Uu,transform:e=>lc(0,1,e)},yv={...Uu,default:1},em=e=>Math.round(e*1e5)/1e5,Ex=/(-)?([\d]*\.?[\d])+/g,y4=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,P8=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Cg(e){return typeof e=="string"}const Tg=e=>({test:t=>Cg(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),xl=Tg("deg"),Ga=Tg("%"),ct=Tg("px"),D8=Tg("vh"),O8=Tg("vw"),DD={...Ga,parse:e=>Ga.parse(e)/100,transform:e=>Ga.transform(e*100)},OD={...Uu,transform:Math.round},x4={borderWidth:ct,borderTopWidth:ct,borderRightWidth:ct,borderBottomWidth:ct,borderLeftWidth:ct,borderRadius:ct,radius:ct,borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomRightRadius:ct,borderBottomLeftRadius:ct,width:ct,maxWidth:ct,height:ct,maxHeight:ct,size:ct,top:ct,right:ct,bottom:ct,left:ct,padding:ct,paddingTop:ct,paddingRight:ct,paddingBottom:ct,paddingLeft:ct,margin:ct,marginTop:ct,marginRight:ct,marginBottom:ct,marginLeft:ct,rotate:xl,rotateX:xl,rotateY:xl,rotateZ:xl,scale:yv,scaleX:yv,scaleY:yv,scaleZ:yv,skew:xl,skewX:xl,skewY:xl,distance:ct,translateX:ct,translateY:ct,translateZ:ct,x:ct,y:ct,z:ct,perspective:ct,transformPerspective:ct,opacity:Jf,originX:DD,originY:DD,originZ:ct,zIndex:OD,fillOpacity:Jf,strokeOpacity:Jf,numOctaves:OD};function b2(e,t,r,i){const{style:n,vars:s,transform:a,transformOrigin:o}=e;let l=!1,c=!1,h=!0;for(const u in t){const d=t[u];if(v4(u)){s[u]=d;continue}const p=x4[u],f=T8(d,p);if(Fu.has(u)){if(l=!0,a[u]=f,!h)continue;d!==(p.default||0)&&(h=!1)}else u.startsWith("origin")?(c=!0,o[u]=f):n[u]=f}if(t.transform||(l||i?n.transform=E8(e.transform,r,h,i):n.transform&&(n.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:p=0}=o;n.transformOrigin=`${u} ${d} ${p}`}}const w2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function b4(e,t,r){for(const i in t)!Ln(t[i])&&!m4(i,r)&&(e[i]=t[i])}function L8({transformTemplate:e},t,r){return W.exports.useMemo(()=>{const i=w2();return b2(i,t,{enableHardwareAcceleration:!r},e),Object.assign({},i.vars,i.style)},[t])}function I8(e,t,r){const i=e.style||{},n={};return b4(n,i,e),Object.assign(n,L8(e,t,r)),e.transformValues?e.transformValues(n):n}function R8(e,t,r){const i={},n=I8(e,t,r);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=n,i}const B8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Xy(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||B8.has(e)}let w4=e=>!Xy(e);function k8(e){!e||(w4=t=>t.startsWith("on")?!Xy(t):e(t))}try{k8(require("@emotion/is-prop-valid").default)}catch{}function z8(e,t,r){const i={};for(const n in e)n==="values"&&typeof e.values=="object"||(w4(n)||r===!0&&Xy(n)||!t&&!Xy(n)||e.draggable&&n.startsWith("onDrag"))&&(i[n]=e[n]);return i}function LD(e,t,r){return typeof e=="string"?e:ct.transform(t+r*e)}function N8(e,t,r){const i=LD(t,e.x,e.width),n=LD(r,e.y,e.height);return`${i} ${n}`}const F8={offset:"stroke-dashoffset",array:"stroke-dasharray"},U8={offset:"strokeDashoffset",array:"strokeDasharray"};function j8(e,t,r=1,i=0,n=!0){e.pathLength=1;const s=n?F8:U8;e[s.offset]=ct.transform(-i);const a=ct.transform(t),o=ct.transform(r);e[s.array]=`${a} ${o}`}function S2(e,{attrX:t,attrY:r,attrScale:i,originX:n,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},h,u,d){if(b2(e,c,h,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:f,dimensions:m}=e;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(n!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=N8(m,n!==void 0?n:.5,s!==void 0?s:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),i!==void 0&&(p.scale=i),a!==void 0&&j8(p,a,o,l,!1)}const S4=()=>({...w2(),attrs:{}}),_2=e=>typeof e=="string"&&e.toLowerCase()==="svg";function V8(e,t,r,i){const n=W.exports.useMemo(()=>{const s=S4();return S2(s,t,{enableHardwareAcceleration:!1},_2(i),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};b4(s,e.style,e),n.style={...s,...n.style}}return n}function G8(e=!1){return(r,i,n,{latestValues:s},a)=>{const l=(x2(r)?V8:R8)(i,s,a,r),h={...z8(i,typeof r=="string",e),...l,ref:n},{children:u}=i,d=W.exports.useMemo(()=>Ln(u)?u.get():u,[u]);return W.exports.createElement(r,{...h,children:d})}}const A2=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function _4(e,{style:t,vars:r},i,n){Object.assign(e.style,t,n&&n.getProjectionStyles(i));for(const s in r)e.style.setProperty(s,r[s])}const A4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function M4(e,t,r,i){_4(e,t,void 0,i);for(const n in t.attrs)e.setAttribute(A4.has(n)?n:A2(n),t.attrs[n])}function M2(e,t){const{style:r}=e,i={};for(const n in r)(Ln(r[n])||t.style&&Ln(t.style[n])||m4(n,e))&&(i[n]=r[n]);return i}function E4(e,t){const r=M2(e,t);for(const i in e)if(Ln(e[i])||Ln(t[i])){const n=Eg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[n]=e[i]}return r}function E2(e,t,r,i={},n={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,i,n)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,i,n)),t}function C2(e){const t=W.exports.useRef(null);return t.current===null&&(t.current=e()),t.current}const Yy=e=>Array.isArray(e),H8=e=>Boolean(e&&typeof e=="object"&&e.mix&&e.toValue),W8=e=>Yy(e)?e[e.length-1]||0:e;function ny(e){const t=Ln(e)?e.get():e;return H8(t)?t.toValue():t}function q8({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},i,n,s){const a={latestValues:$8(i,n,s,e),renderState:t()};return r&&(a.mount=o=>r(i,o,a)),a}const C4=e=>(t,r)=>{const i=W.exports.useContext(yx),n=W.exports.useContext(xx),s=()=>q8(e,t,i,n);return r?s():C2(s)};function $8(e,t,r,i){const n={},s=i(e,{});for(const d in s)n[d]=ny(s[d]);let{initial:a,animate:o}=e;const l=_x(e),c=d4(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let h=r?r.initial===!1:!1;h=h||a===!1;const u=h?o:a;return u&&typeof u!="boolean"&&!Sx(u)&&(Array.isArray(u)?u:[u]).forEach(p=>{const f=E2(e,p);if(!f)return;const{transitionEnd:m,transition:g,...v}=f;for(const y in v){let x=v[y];if(Array.isArray(x)){const b=h?x.length-1:0;x=x[b]}x!==null&&(n[y]=x)}for(const y in m)n[y]=m[y]}),n}const Mr=e=>e;class ID{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function X8(e){let t=new ID,r=new ID,i=0,n=!1,s=!1;const a=new WeakSet,o={schedule:(l,c=!1,h=!1)=>{const u=h&&n,d=u?t:r;return c&&a.add(l),d.add(l)&&u&&n&&(i=t.order.length),l},cancel:l=>{r.remove(l),a.delete(l)},process:l=>{if(n){s=!0;return}if(n=!0,[t,r]=[r,t],r.clear(),i=t.order.length,i)for(let c=0;c<i;c++){const h=t.order[c];h(l),a.has(h)&&(o.schedule(h),e())}n=!1,s&&(s=!1,o.process(l))}};return o}const xv=["prepare","read","update","preRender","render","postRender"],Y8=40;function Q8(e,t){let r=!1,i=!0;const n={delta:0,timestamp:0,isProcessing:!1},s=xv.reduce((u,d)=>(u[d]=X8(()=>r=!0),u),{}),a=u=>s[u].process(n),o=()=>{const u=performance.now();r=!1,n.delta=i?1e3/60:Math.max(Math.min(u-n.timestamp,Y8),1),n.timestamp=u,n.isProcessing=!0,xv.forEach(a),n.isProcessing=!1,r&&t&&(i=!1,e(o))},l=()=>{r=!0,i=!0,n.isProcessing||e(o)};return{schedule:xv.reduce((u,d)=>{const p=s[d];return u[d]=(f,m=!1,g=!1)=>(r||l(),p.schedule(f,m,g)),u},{}),cancel:u=>xv.forEach(d=>s[d].cancel(u)),state:n,steps:s}}const{schedule:lr,cancel:Yo,state:li,steps:Qb}=Q8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mr,!0),K8={useVisualState:C4({scrapeMotionValuesFromProps:E4,createRenderState:S4,onMount:(e,t,{renderState:r,latestValues:i})=>{lr.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),lr.render(()=>{S2(r,i,{enableHardwareAcceleration:!1},_2(t.tagName),e.transformTemplate),M4(t,r)})}})},Z8={useVisualState:C4({scrapeMotionValuesFromProps:M2,createRenderState:w2})};function J8(e,{forwardMotionProps:t=!1},r,i){return{...x2(e)?K8:Z8,preloadedFeatures:r,useRender:G8(t),createVisualElement:i,Component:e}}function Ro(e,t,r,i={passive:!0}){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r)}const T4=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Cx(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const e9=e=>t=>T4(t)&&e(t,Cx(t));function No(e,t,r,i){return Ro(e,t,e9(r),i)}const t9=(e,t)=>r=>t(e(r)),Kl=(...e)=>e.reduce(t9);function P4(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const RD=P4("dragHorizontal"),BD=P4("dragVertical");function D4(e){let t=!1;if(e==="y")t=BD();else if(e==="x")t=RD();else{const r=RD(),i=BD();r&&i?t=()=>{r(),i()}:(r&&r(),i&&i())}return t}function O4(){const e=D4(!0);return e?(e(),!1):!0}class vc{constructor(t){this.isMounted=!1,this.node=t}update(){}}function kD(e,t){const r="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),n=(s,a)=>{if(s.type==="touch"||O4())return;const o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t),o[i]&&lr.update(()=>o[i](s,a))};return No(e.current,r,n,{passive:!e.getProps()[i]})}class r9 extends vc{mount(){this.unmount=Kl(kD(this.node,!0),kD(this.node,!1))}unmount(){}}class i9 extends vc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kl(Ro(this.node.current,"focus",()=>this.onFocus()),Ro(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const L4=(e,t)=>t?e===t?!0:L4(e,t.parentElement):!1;function Kb(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Cx(r))}class n9 extends vc{constructor(){super(...arguments),this.removeStartListeners=Mr,this.removeEndListeners=Mr,this.removeAccessibleListeners=Mr,this.startPointerPress=(t,r)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=No(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h}=this.node.getProps();lr.update(()=>{L4(this.node.current,o.target)?c&&c(o,l):h&&h(o,l)})},{passive:!(i.onTap||i.onPointerUp)}),a=No(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Kl(s,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||Kb("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&lr.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=Ro(this.node.current,"keyup",a),Kb("down",(o,l)=>{this.startPress(o,l)})},r=Ro(this.node.current,"keydown",t),i=()=>{!this.isPressing||Kb("cancel",(s,a)=>this.cancelPress(s,a))},n=Ro(this.node.current,"blur",i);this.removeAccessibleListeners=Kl(r,n)}}startPress(t,r){this.isPressing=!0;const{onTapStart:i,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&lr.update(()=>i(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!O4()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&lr.update(()=>i(t,r))}mount(){const t=this.node.getProps(),r=No(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=Ro(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Kl(r,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const cA=new WeakMap,Zb=new WeakMap,s9=e=>{const t=cA.get(e.target);t&&t(e)},a9=e=>{e.forEach(s9)};function o9({root:e,...t}){const r=e||document;Zb.has(r)||Zb.set(r,{});const i=Zb.get(r),n=JSON.stringify(t);return i[n]||(i[n]=new IntersectionObserver(a9,{root:e,...t})),i[n]}function l9(e,t,r){const i=o9(t);return cA.set(e,r),i.observe(e),()=>{cA.delete(e),i.unobserve(e)}}const c9={some:0,all:1};class u9 extends vc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:i,amount:n="some",once:s}=t,a={root:r?r.current:void 0,rootMargin:i,threshold:typeof n=="number"?n:c9[n]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:u}=this.node.getProps(),d=c?h:u;d&&d(l)};return l9(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(h9(t,r))&&this.startObserver()}unmount(){}}function h9({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const d9={inView:{Feature:u9},tap:{Feature:n9},focus:{Feature:i9},hover:{Feature:r9}};function I4(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}function p9(e){const t={};return e.values.forEach((r,i)=>t[i]=r.get()),t}function f9(e){const t={};return e.values.forEach((r,i)=>t[i]=r.getVelocity()),t}function Tx(e,t,r){const i=e.getProps();return E2(i,t,r!==void 0?r:i.custom,p9(e),f9(e))}const m9="framerAppearId",g9="data-"+A2(m9);let T2=Mr,Pg=Mr;const Zl=e=>e*1e3,Fo=e=>e/1e3,zD={current:!1},R4=e=>Array.isArray(e)&&typeof e[0]=="number";function B4(e){return Boolean(!e||typeof e=="string"&&k4[e]||R4(e)||Array.isArray(e)&&e.every(B4))}const Of=([e,t,r,i])=>`cubic-bezier(${e}, ${t}, ${r}, ${i})`,k4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Of([0,.65,.55,1]),circOut:Of([.55,0,1,.45]),backIn:Of([.31,.01,.66,-.59]),backOut:Of([.33,1.53,.69,.99])};function z4(e){if(!!e)return R4(e)?Of(e):Array.isArray(e)?e.map(z4):k4[e]}function v9(e,t,r,{delay:i=0,duration:n,repeat:s=0,repeatType:a="loop",ease:o,times:l}={}){const c={[t]:r};l&&(c.offset=l);const h=z4(o);return Array.isArray(h)&&(c.easing=h),e.animate(c,{delay:i,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function y9(e,{repeat:t,repeatType:r="loop"}){const i=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[i]}const N4=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,x9=1e-7,b9=12;function w9(e,t,r,i,n){let s,a,o=0;do a=t+(r-t)/2,s=N4(a,i,n)-e,s>0?r=a:t=a;while(Math.abs(s)>x9&&++o<b9);return a}function Dg(e,t,r,i){if(e===t&&r===i)return Mr;const n=s=>w9(s,0,1,e,r);return s=>s===0||s===1?s:N4(n(s),t,i)}const S9=Dg(.42,0,1,1),_9=Dg(0,0,.58,1),F4=Dg(.42,0,.58,1),A9=e=>Array.isArray(e)&&typeof e[0]!="number",U4=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,j4=e=>t=>1-e(1-t),V4=e=>1-Math.sin(Math.acos(e)),P2=j4(V4),M9=U4(P2),G4=Dg(.33,1.53,.69,.99),D2=j4(G4),E9=U4(D2),C9=e=>(e*=2)<1?.5*D2(e):.5*(2-Math.pow(2,-10*(e-1))),T9={linear:Mr,easeIn:S9,easeInOut:F4,easeOut:_9,circIn:V4,circInOut:M9,circOut:P2,backIn:D2,backInOut:E9,backOut:G4,anticipate:C9},ND=e=>{if(Array.isArray(e)){Pg(e.length===4);const[t,r,i,n]=e;return Dg(t,r,i,n)}else if(typeof e=="string")return T9[e];return e},O2=(e,t)=>r=>Boolean(Cg(r)&&P8.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),H4=(e,t,r)=>i=>{if(!Cg(i))return i;const[n,s,a,o]=i.match(Ex);return{[e]:parseFloat(n),[t]:parseFloat(s),[r]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},P9=e=>lc(0,255,e),Jb={...Uu,transform:e=>Math.round(P9(e))},nu={test:O2("rgb","red"),parse:H4("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:i=1})=>"rgba("+Jb.transform(e)+", "+Jb.transform(t)+", "+Jb.transform(r)+", "+em(Jf.transform(i))+")"};function D9(e){let t="",r="",i="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:n?parseInt(n,16)/255:1}}const uA={test:O2("#"),parse:D9,transform:nu.transform},Zh={test:O2("hsl","hue"),parse:H4("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+Ga.transform(em(t))+", "+Ga.transform(em(r))+", "+em(Jf.transform(i))+")"},Yi={test:e=>nu.test(e)||uA.test(e)||Zh.test(e),parse:e=>nu.test(e)?nu.parse(e):Zh.test(e)?Zh.parse(e):uA.parse(e),transform:e=>Cg(e)?e:e.hasOwnProperty("red")?nu.transform(e):Zh.transform(e)},vr=(e,t,r)=>-r*e+r*t+e;function ew(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function O9({hue:e,saturation:t,lightness:r,alpha:i}){e/=360,t/=100,r/=100;let n=0,s=0,a=0;if(!t)n=s=a=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;n=ew(l,o,e+1/3),s=ew(l,o,e),a=ew(l,o,e-1/3)}return{red:Math.round(n*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}const tw=(e,t,r)=>{const i=e*e;return Math.sqrt(Math.max(0,r*(t*t-i)+i))},L9=[uA,nu,Zh],I9=e=>L9.find(t=>t.test(e));function FD(e){const t=I9(e);let r=t.parse(e);return t===Zh&&(r=O9(r)),r}const W4=(e,t)=>{const r=FD(e),i=FD(t),n={...r};return s=>(n.red=tw(r.red,i.red,s),n.green=tw(r.green,i.green,s),n.blue=tw(r.blue,i.blue,s),n.alpha=vr(r.alpha,i.alpha,s),nu.transform(n))};function R9(e){var t,r;return isNaN(e)&&Cg(e)&&(((t=e.match(Ex))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(y4))===null||r===void 0?void 0:r.length)||0)>0}const q4={regex:C8,countKey:"Vars",token:"${v}",parse:Mr},$4={regex:y4,countKey:"Colors",token:"${c}",parse:Yi.parse},X4={regex:Ex,countKey:"Numbers",token:"${n}",parse:Uu.parse};function rw(e,{regex:t,countKey:r,token:i,parse:n}){const s=e.tokenised.match(t);!s||(e["num"+r]=s.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...s.map(n)))}function Qy(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&rw(r,q4),rw(r,$4),rw(r,X4),r}function Y4(e){return Qy(e).values}function Q4(e){const{values:t,numColors:r,numVars:i,tokenised:n}=Qy(e),s=t.length;return a=>{let o=n;for(let l=0;l<s;l++)l<i?o=o.replace(q4.token,a[l]):l<i+r?o=o.replace($4.token,Yi.transform(a[l])):o=o.replace(X4.token,em(a[l]));return o}}const B9=e=>typeof e=="number"?0:e;function k9(e){const t=Y4(e);return Q4(e)(t.map(B9))}const cc={test:R9,parse:Y4,createTransformer:Q4,getAnimatableNone:k9},K4=(e,t)=>r=>`${r>0?t:e}`;function Z4(e,t){return typeof e=="number"?r=>vr(e,t,r):Yi.test(e)?W4(e,t):e.startsWith("var(")?K4(e,t):e5(e,t)}const J4=(e,t)=>{const r=[...e],i=r.length,n=e.map((s,a)=>Z4(s,t[a]));return s=>{for(let a=0;a<i;a++)r[a]=n[a](s);return r}},z9=(e,t)=>{const r={...e,...t},i={};for(const n in r)e[n]!==void 0&&t[n]!==void 0&&(i[n]=Z4(e[n],t[n]));return n=>{for(const s in i)r[s]=i[s](n);return r}},e5=(e,t)=>{const r=cc.createTransformer(t),i=Qy(e),n=Qy(t);return i.numVars===n.numVars&&i.numColors===n.numColors&&i.numNumbers>=n.numNumbers?Kl(J4(i.values,n.values),r):(T2(!0),K4(e,t))},Hm=(e,t,r)=>{const i=t-e;return i===0?1:(r-e)/i},UD=(e,t)=>r=>vr(e,t,r);function N9(e){return typeof e=="number"?UD:typeof e=="string"?Yi.test(e)?W4:e5:Array.isArray(e)?J4:typeof e=="object"?z9:UD}function F9(e,t,r){const i=[],n=r||N9(e[0]),s=e.length-1;for(let a=0;a<s;a++){let o=n(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||Mr:t;o=Kl(l,o)}i.push(o)}return i}function t5(e,t,{clamp:r=!0,ease:i,mixer:n}={}){const s=e.length;if(Pg(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=F9(t,i,n),o=a.length,l=c=>{let h=0;if(o>1)for(;h<e.length-2&&!(c<e[h+1]);h++);const u=Hm(e[h],e[h+1],c);return a[h](u)};return r?c=>l(lc(e[0],e[s-1],c)):l}function U9(e,t){const r=e[e.length-1];for(let i=1;i<=t;i++){const n=Hm(0,t,i);e.push(vr(r,1,n))}}function j9(e){const t=[0];return U9(t,e.length-1),t}function V9(e,t){return e.map(r=>r*t)}function G9(e,t){return e.map(()=>t||F4).splice(0,e.length-1)}function Ky({duration:e=300,keyframes:t,times:r,ease:i="easeInOut"}){const n=A9(i)?i.map(ND):ND(i),s={done:!1,value:t[0]},a=V9(r&&r.length===t.length?r:j9(t),e),o=t5(a,t,{ease:Array.isArray(n)?n:G9(t,n)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}function r5(e,t){return t?e*(1e3/t):0}const H9=5;function i5(e,t,r){const i=Math.max(t-H9,0);return r5(r-e(i),t-i)}const iw=.001,W9=.01,jD=10,q9=.05,$9=1;function X9({duration:e=800,bounce:t=.25,velocity:r=0,mass:i=1}){let n,s;T2(e<=Zl(jD));let a=1-t;a=lc(q9,$9,a),e=lc(W9,jD,Fo(e)),a<1?(n=c=>{const h=c*a,u=h*e,d=h-r,p=hA(c,a),f=Math.exp(-u);return iw-d/p*f},s=c=>{const u=c*a*e,d=u*r+r,p=Math.pow(a,2)*Math.pow(c,2)*e,f=Math.exp(-u),m=hA(Math.pow(c,2),a);return(-n(c)+iw>0?-1:1)*((d-p)*f)/m}):(n=c=>{const h=Math.exp(-c*e),u=(c-r)*e+1;return-iw+h*u},s=c=>{const h=Math.exp(-c*e),u=(r-c)*(e*e);return h*u});const o=5/e,l=Q9(n,s,o);if(e=Zl(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:e}}}const Y9=12;function Q9(e,t,r){let i=r;for(let n=1;n<Y9;n++)i=i-e(i)/t(i);return i}function hA(e,t){return e*Math.sqrt(1-t*t)}const K9=["duration","bounce"],Z9=["stiffness","damping","mass"];function VD(e,t){return t.some(r=>e[r]!==void 0)}function J9(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!VD(e,Z9)&&VD(e,K9)){const r=X9(e);t={...t,...r,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function n5({keyframes:e,restDelta:t,restSpeed:r,...i}){const n=e[0],s=e[e.length-1],a={done:!1,value:n},{stiffness:o,damping:l,mass:c,velocity:h,duration:u,isResolvedFromDuration:d}=J9(i),p=h?-Fo(h):0,f=l/(2*Math.sqrt(o*c)),m=s-n,g=Fo(Math.sqrt(o/c)),v=Math.abs(m)<5;r||(r=v?.01:2),t||(t=v?.005:.5);let y;if(f<1){const x=hA(g,f);y=b=>{const S=Math.exp(-f*g*b);return s-S*((p+f*g*m)/x*Math.sin(x*b)+m*Math.cos(x*b))}}else if(f===1)y=x=>s-Math.exp(-g*x)*(m+(p+g*m)*x);else{const x=g*Math.sqrt(f*f-1);y=b=>{const S=Math.exp(-f*g*b),w=Math.min(x*b,300);return s-S*((p+f*g*m)*Math.sinh(w)+x*m*Math.cosh(w))/x}}return{calculatedDuration:d&&u||null,next:x=>{const b=y(x);if(d)a.done=x>=u;else{let S=p;x!==0&&(f<1?S=i5(y,x,b):S=0);const w=Math.abs(S)<=r,A=Math.abs(s-b)<=t;a.done=w&&A}return a.value=a.done?s:b,a}}}function GD({keyframes:e,velocity:t=0,power:r=.8,timeConstant:i=325,bounceDamping:n=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:h}){const u=e[0],d={done:!1,value:u},p=_=>o!==void 0&&_<o||l!==void 0&&_>l,f=_=>o===void 0?l:l===void 0||Math.abs(o-_)<Math.abs(l-_)?o:l;let m=r*t;const g=u+m,v=a===void 0?g:a(g);v!==g&&(m=v-u);const y=_=>-m*Math.exp(-_/i),x=_=>v+y(_),b=_=>{const M=y(_),E=x(_);d.done=Math.abs(M)<=c,d.value=d.done?v:E};let S,w;const A=_=>{!p(d.value)||(S=_,w=n5({keyframes:[d.value,f(d.value)],velocity:i5(x,_,d.value),damping:n,stiffness:s,restDelta:c,restSpeed:h}))};return A(0),{calculatedDuration:null,next:_=>{let M=!1;return!w&&S===void 0&&(M=!0,b(_),A(_)),S!==void 0&&_>S?w.next(_-S):(!M&&b(_),d)}}}const e7=e=>{const t=({timestamp:r})=>e(r);return{start:()=>lr.update(t,!0),stop:()=>Yo(t),now:()=>li.isProcessing?li.timestamp:performance.now()}},HD=2e4;function WD(e){let t=0;const r=50;let i=e.next(t);for(;!i.done&&t<HD;)t+=r,i=e.next(t);return t>=HD?1/0:t}const t7={decay:GD,inertia:GD,tween:Ky,keyframes:Ky,spring:n5};function Zy({autoplay:e=!0,delay:t=0,driver:r=e7,keyframes:i,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:u,...d}){let p=1,f=!1,m,g;const v=()=>{g=new Promise(N=>{m=N})};v();let y;const x=t7[n]||Ky;let b;x!==Ky&&typeof i[0]!="number"&&(b=t5([0,100],i,{clamp:!1}),i=[0,100]);const S=x({...d,keyframes:i});let w;o==="mirror"&&(w=x({...d,keyframes:[...i].reverse(),velocity:-(d.velocity||0)}));let A="idle",_=null,M=null,E=null;S.calculatedDuration===null&&s&&(S.calculatedDuration=WD(S));const{calculatedDuration:T}=S;let P=1/0,D=1/0;T!==null&&(P=T+a,D=P*(s+1)-a);let L=0;const R=N=>{if(M===null)return;p>0&&(M=Math.min(M,N)),p<0&&(M=Math.min(N-D/p,M)),_!==null?L=_:L=Math.round(N-M)*p;const j=L-t*(p>=0?1:-1),Y=p>=0?j<0:j>D;L=Math.max(j,0),A==="finished"&&_===null&&(L=D);let q=L,X=S;if(s){const Q=L/P;let re=Math.floor(Q),ae=Q%1;!ae&&Q>=1&&(ae=1),ae===1&&re--,re=Math.min(re,s+1);const ce=Boolean(re%2);ce&&(o==="reverse"?(ae=1-ae,a&&(ae-=a/P)):o==="mirror"&&(X=w));let pe=lc(0,1,ae);L>D&&(pe=o==="reverse"&&ce?1:0),q=pe*P}const G=Y?{done:!1,value:i[0]}:X.next(q);b&&(G.value=b(G.value));let{done:te}=G;!Y&&T!==null&&(te=p>=0?L>=D:L<=0);const Z=_===null&&(A==="finished"||A==="running"&&te);return u&&u(G.value),Z&&O(),G},V=()=>{y&&y.stop(),y=void 0},F=()=>{A="idle",V(),m(),v(),M=E=null},O=()=>{A="finished",h&&h(),V(),m()},k=()=>{if(f)return;y||(y=r(R));const N=y.now();l&&l(),_!==null?M=N-_:(!M||A==="finished")&&(M=N),A==="finished"&&v(),E=M,_=null,A="running",y.start()};e&&k();const z={then(N,j){return g.then(N,j)},get time(){return Fo(L)},set time(N){N=Zl(N),L=N,_!==null||!y||p===0?_=N:M=y.now()-N/p},get duration(){const N=S.calculatedDuration===null?WD(S):S.calculatedDuration;return Fo(N)},get speed(){return p},set speed(N){N===p||!y||(p=N,z.time=Fo(L))},get state(){return A},play:k,pause:()=>{A="paused",_=L},stop:()=>{f=!0,A!=="idle"&&(A="idle",c&&c(),F())},cancel:()=>{E!==null&&R(E),F()},complete:()=>{A="finished"},sample:N=>(M=0,R(N))};return z}function r7(e){let t;return()=>(t===void 0&&(t=e()),t)}const i7=r7(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),n7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),bv=10,s7=2e4,a7=(e,t)=>t.type==="spring"||e==="backgroundColor"||!B4(t.ease);function o7(e,t,{onUpdate:r,onComplete:i,...n}){if(!(i7()&&n7.has(t)&&!n.repeatDelay&&n.repeatType!=="mirror"&&n.damping!==0&&n.type!=="inertia"))return!1;let a=!1,o,l;const c=()=>{l=new Promise(y=>{o=y})};c();let{keyframes:h,duration:u=300,ease:d,times:p}=n;if(a7(t,n)){const y=Zy({...n,repeat:0,delay:0});let x={done:!1,value:h[0]};const b=[];let S=0;for(;!x.done&&S<s7;)x=y.sample(S),b.push(x.value),S+=bv;p=void 0,h=b,u=S-bv,d="linear"}const f=v9(e.owner.current,t,h,{...n,duration:u,ease:d,times:p});n.syncStart&&(f.startTime=li.isProcessing?li.timestamp:document.timeline?document.timeline.currentTime:performance.now());const m=()=>f.cancel(),g=()=>{lr.update(m),o(),c()};return f.onfinish=()=>{e.set(y9(h,n)),i&&i(),g()},{then(y,x){return l.then(y,x)},attachTimeline(y){return f.timeline=y,f.onfinish=null,Mr},get time(){return Fo(f.currentTime||0)},set time(y){f.currentTime=Zl(y)},get speed(){return f.playbackRate},set speed(y){f.playbackRate=y},get duration(){return Fo(u)},play:()=>{a||(f.play(),Yo(m))},pause:()=>f.pause(),stop:()=>{if(a=!0,f.playState==="idle")return;const{currentTime:y}=f;if(y){const x=Zy({...n,autoplay:!1});e.setWithVelocity(x.sample(y-bv).value,x.sample(y).value,bv)}g()},complete:()=>f.finish(),cancel:g}}function l7({keyframes:e,delay:t,onUpdate:r,onComplete:i}){const n=()=>(r&&r(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Mr,pause:Mr,stop:Mr,then:s=>(s(),Promise.resolve()),cancel:Mr,complete:Mr});return t?Zy({keyframes:[0,1],duration:0,delay:t,onComplete:n}):n()}const c7={type:"spring",stiffness:500,damping:25,restSpeed:10},u7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),h7={type:"keyframes",duration:.8},d7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},p7=(e,{keyframes:t})=>t.length>2?h7:Fu.has(e)?e.startsWith("scale")?u7(t[1]):c7:d7,dA=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(cc.test(t)||t==="0")&&!t.startsWith("url(")),f7=new Set(["brightness","contrast","saturate","opacity"]);function m7(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=r.match(Ex)||[];if(!i)return e;const n=r.replace(i,"");let s=f7.has(t)?1:0;return i!==r&&(s*=100),t+"("+s+n+")"}const g7=/([a-z-]*)\(.*?\)/g,pA={...cc,getAnimatableNone:e=>{const t=e.match(g7);return t?t.map(m7).join(" "):e}},v7={...x4,color:Yi,backgroundColor:Yi,outlineColor:Yi,fill:Yi,stroke:Yi,borderColor:Yi,borderTopColor:Yi,borderRightColor:Yi,borderBottomColor:Yi,borderLeftColor:Yi,filter:pA,WebkitFilter:pA},L2=e=>v7[e];function s5(e,t){let r=L2(e);return r!==pA&&(r=cc),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const a5=e=>/^0[^.\s]+$/.test(e);function y7(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||a5(e)}function x7(e,t,r,i){const n=dA(t,r);let s;Array.isArray(r)?s=[...r]:s=[null,r];const a=i.from!==void 0?i.from:e.get();let o;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?a:s[c-1]),y7(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(o=s[c]);if(n&&l.length&&o)for(let c=0;c<l.length;c++){const h=l[c];s[h]=s5(t,o)}return s}function b7({when:e,delay:t,delayChildren:r,staggerChildren:i,staggerDirection:n,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function o5(e,t){return e[t]||e.default||e}const I2=(e,t,r,i={})=>n=>{const s=o5(i,e)||{},a=s.delay||i.delay||0;let{elapsed:o=0}=i;o=o-Zl(a);const l=x7(t,e,r,s),c=l[0],h=l[l.length-1],u=dA(e,c),d=dA(e,h);T2(u===d);let p={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-o,onUpdate:f=>{t.set(f),s.onUpdate&&s.onUpdate(f)},onComplete:()=>{n(),s.onComplete&&s.onComplete()}};if(b7(s)||(p={...p,...p7(e,p)}),p.duration&&(p.duration=Zl(p.duration)),p.repeatDelay&&(p.repeatDelay=Zl(p.repeatDelay)),!u||!d||zD.current||s.type===!1)return l7(zD.current?{...p,delay:0}:p);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const f=o7(t,e,p);if(f)return f}return Zy(p)};function Jy(e){return Boolean(Ln(e)&&e.add)}const l5=e=>/^\-?\d*\.?\d+$/.test(e);function R2(e,t){e.indexOf(t)===-1&&e.push(t)}function B2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class k2{constructor(){this.subscriptions=[]}add(t){return R2(this.subscriptions,t),()=>B2(this.subscriptions,t)}notify(t,r,i){const n=this.subscriptions.length;if(!!n)if(n===1)this.subscriptions[0](t,r,i);else for(let s=0;s<n;s++){const a=this.subscriptions[s];a&&a(t,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const w7=e=>!isNaN(parseFloat(e));class S7{constructor(t,r={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,n=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:a}=li;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,lr.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>lr.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=w7(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new k2);const i=this.events[t].add(r);return t==="change"?()=>{i(),lr.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,i){this.set(r),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?r5(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jd(e,t){return new S7(e,t)}const c5=e=>t=>t.test(e),_7={test:e=>e==="auto",parse:e=>e},u5=[Uu,ct,Ga,xl,O8,D8,_7],Gp=e=>u5.find(c5(e)),A7=[...u5,Yi,cc],M7=e=>A7.find(c5(e));function E7(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,jd(r))}function z2(e,t){const r=Tx(e,t);let{transitionEnd:i={},transition:n={},...s}=r?e.makeTargetAnimatable(r,!1):{};s={...s,...i};for(const a in s){const o=W8(s[a]);E7(e,a,o)}}function fA(e,t){[...t].reverse().forEach(i=>{const n=e.getVariant(i);n&&z2(e,n),e.variantChildren&&e.variantChildren.forEach(s=>{fA(s,t)})})}function C7(e,t){if(Array.isArray(t))return fA(e,t);if(typeof t=="string")return fA(e,[t]);z2(e,t)}function T7(e,t,r){var i,n;const s=Object.keys(t).filter(o=>!e.hasValue(o)),a=s.length;if(!!a)for(let o=0;o<a;o++){const l=s[o],c=t[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(n=(i=r[l])!==null&&i!==void 0?i:e.readValue(l))!==null&&n!==void 0?n:t[l]),h!=null&&(typeof h=="string"&&(l5(h)||a5(h))?h=parseFloat(h):!M7(h)&&cc.test(c)&&(h=s5(l,c)),e.addValue(l,jd(h,{owner:e})),r[l]===void 0&&(r[l]=h),h!==null&&e.setBaseTarget(l,h))}}function P7(e,t){return t?(t[e]||t.default||t).from:void 0}function D7(e,t,r){const i={};for(const n in e){const s=P7(n,t);if(s!==void 0)i[n]=s;else{const a=r.getValue(n);a&&(i[n]=a.get())}}return i}function O7({protectedKeys:e,needsAnimating:t},r){const i=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,i}function h5(e,t,{delay:r=0,transitionOverride:i,type:n}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");i&&(s=i);const c=[],h=n&&e.animationState&&e.animationState.getState()[n];for(const u in o){const d=e.getValue(u),p=o[u];if(!d||p===void 0||h&&O7(h,u))continue;const f={delay:r,elapsed:0,...s};if(window.HandoffAppearAnimations&&!d.hasAnimated){const g=e.getProps()[g9];g&&(f.elapsed=window.HandoffAppearAnimations(g,u,d,lr),f.syncStart=!0)}d.start(I2(u,d,p,e.shouldReduceMotion&&Fu.has(u)?{type:!1}:f));const m=d.animation;Jy(l)&&(l.add(u),m.then(()=>l.remove(u))),c.push(m)}return a&&Promise.all(c).then(()=>{a&&z2(e,a)}),c}function mA(e,t,r={}){const i=Tx(e,t,r.custom);let{transition:n=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(n=r.transitionOverride);const s=i?()=>Promise.all(h5(e,i,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:u}=n;return L7(e,t,c+l,h,u,r)}:()=>Promise.resolve(),{when:o}=n;if(o){const[l,c]=o==="beforeChildren"?[s,a]:[a,s];return l().then(()=>c())}else return Promise.all([s(),a(r.delay)])}function L7(e,t,r=0,i=0,n=1,s){const a=[],o=(e.variantChildren.size-1)*i,l=n===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(e.variantChildren).sort(I7).forEach((c,h)=>{c.notify("AnimationStart",t),a.push(mA(c,t,{...s,delay:r+l(h)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function I7(e,t){return e.sortNodePosition(t)}function d5(e,t,r={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const n=t.map(s=>mA(e,s,r));i=Promise.all(n)}else if(typeof t=="string")i=mA(e,t,r);else{const n=typeof t=="function"?Tx(e,t,r.custom):t;i=Promise.all(h5(e,n,r))}return i.then(()=>e.notify("AnimationComplete",t))}const R7=[...g2].reverse(),B7=g2.length;function k7(e){return t=>Promise.all(t.map(({animation:r,options:i})=>d5(e,r,i)))}function z7(e){let t=k7(e);const r=F7();let i=!0;const n=(l,c)=>{const h=Tx(e,c);if(h){const{transition:u,transitionEnd:d,...p}=h;l={...l,...p,...d}}return l};function s(l){t=l(e)}function a(l,c){const h=e.getProps(),u=e.getVariantContext(!0)||{},d=[],p=new Set;let f={},m=1/0;for(let v=0;v<B7;v++){const y=R7[v],x=r[y],b=h[y]!==void 0?h[y]:u[y],S=Vm(b),w=y===c?x.isActive:null;w===!1&&(m=v);let A=b===u[y]&&b!==h[y]&&S;if(A&&i&&e.manuallyAnimateOnMount&&(A=!1),x.protectedKeys={...f},!x.isActive&&w===null||!b&&!x.prevProp||Sx(b)||typeof b=="boolean")continue;const _=N7(x.prevProp,b);let M=_||y===c&&x.isActive&&!A&&S||v>m&&S;const E=Array.isArray(b)?b:[b];let T=E.reduce(n,{});w===!1&&(T={});const{prevResolvedValues:P={}}=x,D={...P,...T},L=R=>{M=!0,p.delete(R),x.needsAnimating[R]=!0};for(const R in D){const V=T[R],F=P[R];f.hasOwnProperty(R)||(V!==F?Yy(V)&&Yy(F)?!I4(V,F)||_?L(R):x.protectedKeys[R]=!0:V!==void 0?L(R):p.add(R):V!==void 0&&p.has(R)?L(R):x.protectedKeys[R]=!0)}x.prevProp=b,x.prevResolvedValues=T,x.isActive&&(f={...f,...T}),i&&e.blockInitialAnimation&&(M=!1),M&&!A&&d.push(...E.map(R=>({animation:R,options:{type:y,...l}})))}if(p.size){const v={};p.forEach(y=>{const x=e.getBaseTarget(y);x!==void 0&&(v[y]=x)}),d.push({animation:v})}let g=Boolean(d.length);return i&&h.initial===!1&&!e.manuallyAnimateOnMount&&(g=!1),i=!1,g?t(d):Promise.resolve()}function o(l,c,h){var u;if(r[l].isActive===c)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(p=>{var f;return(f=p.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),r[l].isActive=c;const d=a(h,l);for(const p in r)r[p].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>r}}function N7(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!I4(t,e):!1}function Dc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function F7(){return{animate:Dc(!0),whileInView:Dc(),whileHover:Dc(),whileTap:Dc(),whileDrag:Dc(),whileFocus:Dc(),exit:Dc()}}class U7 extends vc{constructor(t){super(t),t.animationState||(t.animationState=z7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Sx(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let j7=0;class V7 extends vc{constructor(){super(...arguments),this.id=j7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:i}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t,{custom:i!=null?i:this.node.getProps().custom});r&&!t&&s.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const G7={animation:{Feature:U7},exit:{Feature:V7}},qD=(e,t)=>Math.abs(e-t);function H7(e,t){const r=qD(e.x,t.x),i=qD(e.y,t.y);return Math.sqrt(r**2+i**2)}class p5{constructor(t,r,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=sw(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,u=H7(c.offset,{x:0,y:0})>=3;if(!h&&!u)return;const{point:d}=c,{timestamp:p}=li;this.history.push({...d,timestamp:p});const{onStart:f,onMove:m}=this.handlers;h||(f&&f(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,c)},this.handlePointerMove=(c,h)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=nw(h,this.transformPagePoint),lr.update(this.updatePoint,!0)},this.handlePointerUp=(c,h)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:u,onSessionEnd:d}=this.handlers,p=sw(c.type==="pointercancel"?this.lastMoveEventInfo:nw(h,this.transformPagePoint),this.history);this.startEvent&&u&&u(c,p),d&&d(c,p)},!T4(t))return;this.handlers=r,this.transformPagePoint=i;const n=Cx(t),s=nw(n,this.transformPagePoint),{point:a}=s,{timestamp:o}=li;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=r;l&&l(t,sw(s,this.history)),this.removeListeners=Kl(No(window,"pointermove",this.handlePointerMove),No(window,"pointerup",this.handlePointerUp),No(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Yo(this.updatePoint)}}function nw(e,t){return t?{point:t(e.point)}:e}function $D(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sw({point:e},t){return{point:e,delta:$D(e,f5(t)),offset:$D(e,W7(t)),velocity:q7(t,.1)}}function W7(e){return e[0]}function f5(e){return e[e.length-1]}function q7(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null;const n=f5(e);for(;r>=0&&(i=e[r],!(n.timestamp-i.timestamp>Zl(t)));)r--;if(!i)return{x:0,y:0};const s=Fo(n.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(n.x-i.x)/s,y:(n.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function is(e){return e.max-e.min}function gA(e,t=0,r=.01){return Math.abs(e-t)<=r}function XD(e,t,r,i=.5){e.origin=i,e.originPoint=vr(t.min,t.max,e.origin),e.scale=is(r)/is(t),(gA(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=vr(r.min,r.max,e.origin)-e.originPoint,(gA(e.translate)||isNaN(e.translate))&&(e.translate=0)}function tm(e,t,r,i){XD(e.x,t.x,r.x,i?i.originX:void 0),XD(e.y,t.y,r.y,i?i.originY:void 0)}function YD(e,t,r){e.min=r.min+t.min,e.max=e.min+is(t)}function $7(e,t,r){YD(e.x,t.x,r.x),YD(e.y,t.y,r.y)}function QD(e,t,r){e.min=t.min-r.min,e.max=e.min+is(t)}function rm(e,t,r){QD(e.x,t.x,r.x),QD(e.y,t.y,r.y)}function X7(e,{min:t,max:r},i){return t!==void 0&&e<t?e=i?vr(t,e,i.min):Math.max(e,t):r!==void 0&&e>r&&(e=i?vr(r,e,i.max):Math.min(e,r)),e}function KD(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Y7(e,{top:t,left:r,bottom:i,right:n}){return{x:KD(e.x,r,n),y:KD(e.y,t,i)}}function ZD(e,t){let r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function Q7(e,t){return{x:ZD(e.x,t.x),y:ZD(e.y,t.y)}}function K7(e,t){let r=.5;const i=is(e),n=is(t);return n>i?r=Hm(t.min,t.max-i,e.min):i>n&&(r=Hm(e.min,e.max-n,t.min)),lc(0,1,r)}function Z7(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const vA=.35;function J7(e=vA){return e===!1?e=0:e===!0&&(e=vA),{x:JD(e,"left","right"),y:JD(e,"top","bottom")}}function JD(e,t,r){return{min:e3(e,t),max:e3(e,r)}}function e3(e,t){return typeof e=="number"?e:e[t]||0}const t3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jh=()=>({x:t3(),y:t3()}),r3=()=>({min:0,max:0}),Fr=()=>({x:r3(),y:r3()});function Ca(e){return[e("x"),e("y")]}function m5({top:e,left:t,right:r,bottom:i}){return{x:{min:t,max:r},y:{min:e,max:i}}}function eq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function tq(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}function aw(e){return e===void 0||e===1}function yA({scale:e,scaleX:t,scaleY:r}){return!aw(e)||!aw(t)||!aw(r)}function jc(e){return yA(e)||g5(e)||e.z||e.rotate||e.rotateX||e.rotateY}function g5(e){return i3(e.x)||i3(e.y)}function i3(e){return e&&e!=="0%"}function e1(e,t,r){const i=e-r,n=t*i;return r+n}function n3(e,t,r,i,n){return n!==void 0&&(e=e1(e,n,i)),e1(e,r,i)+t}function xA(e,t=0,r=1,i,n){e.min=n3(e.min,t,r,i,n),e.max=n3(e.max,t,r,i,n)}function v5(e,{x:t,y:r}){xA(e.x,t.translate,t.scale,t.originPoint),xA(e.y,r.translate,r.scale,r.originPoint)}function rq(e,t,r,i=!1){const n=r.length;if(!n)return;t.x=t.y=1;let s,a;for(let o=0;o<n;o++){s=r[o],a=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ed(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,v5(e,a)),i&&jc(s.latestValues)&&ed(e,s.latestValues))}t.x=s3(t.x),t.y=s3(t.y)}function s3(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Sl(e,t){e.min=e.min+t,e.max=e.max+t}function a3(e,t,[r,i,n]){const s=t[n]!==void 0?t[n]:.5,a=vr(e.min,e.max,s);xA(e,t[r],t[i],a,t.scale)}const iq=["x","scaleX","originX"],nq=["y","scaleY","originY"];function ed(e,t){a3(e.x,t,iq),a3(e.y,t,nq)}function y5(e,t){return m5(tq(e.getBoundingClientRect(),t))}function sq(e,t,r){const i=y5(e,r),{scroll:n}=t;return n&&(Sl(i.x,n.offset.x),Sl(i.y,n.offset.y)),i}const aq=new WeakMap;class oq{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fr(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const n=l=>{this.stopAnimation(),r&&this.snapToCursor(Cx(l,"page").point)},s=(l,c)=>{const{drag:h,dragPropagation:u,onDragStart:d}=this.getProps();if(h&&!u&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=D4(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ca(f=>{let m=this.getAxisMotionValue(f).get()||0;if(Ga.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const v=g.layout.layoutBox[f];v&&(m=is(v)*(parseFloat(m)/100))}}this.originPoint[f]=m}),d&&lr.update(()=>d(l,c),!1,!0);const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},a=(l,c)=>{const{dragPropagation:h,dragDirectionLock:u,onDirectionLock:d,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:f}=c;if(u&&this.currentDirection===null){this.currentDirection=lq(f),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",c.point,f),this.updateAxis("y",c.point,f),this.visualElement.render(),p&&p(l,c)},o=(l,c)=>this.stop(l,c);this.panSession=new p5(t,{onSessionStart:n,onStart:s,onMove:a,onSessionEnd:o},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,r){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:s}=this.getProps();s&&lr.update(()=>s(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,i){const{drag:n}=this.getProps();if(!i||!wv(t,n,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(a=X7(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),{layout:i}=this.visualElement.projection||{},n=this.constraints;t&&Kh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Y7(i.layoutBox,t):this.constraints=!1,this.elastic=J7(r),n!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ca(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=Z7(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Kh(t))return!1;const i=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const s=sq(i,n.root,this.visualElement.getTransformPagePoint());let a=Q7(n.layout.layoutBox,s);if(r){const o=r(eq(a));this.hasMutatedConstraints=!!o,o&&(a=m5(o))}return a}startAnimation(t){const{drag:r,dragMomentum:i,dragElastic:n,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Ca(h=>{if(!wv(h,r,this.currentDirection))return;let u=l&&l[h]||{};a&&(u={min:0,max:0});const d=n?200:1e6,p=n?40:1e7,f={type:"inertia",velocity:i?t[h]:0,bounceStiffness:d,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(h,f)});return Promise.all(c).then(o)}startAxisValueAnimation(t,r){const i=this.getAxisMotionValue(t);return i.start(I2(t,i,0,r))}stopAnimation(){Ca(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),n=i[r];return n||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ca(r=>{const{drag:i}=this.getProps();if(!wv(r,i,this.currentDirection))return;const{projection:n}=this.visualElement,s=this.getAxisMotionValue(r);if(n&&n.layout){const{min:a,max:o}=n.layout.layoutBox[r];s.set(t[r]-vr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!Kh(r)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Ca(a=>{const o=this.getAxisMotionValue(a);if(o){const l=o.get();n[a]=K7({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ca(a=>{if(!wv(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(vr(l,c,n[a]))})}addListeners(){if(!this.visualElement.current)return;aq.set(this.visualElement,this);const t=this.visualElement.current,r=No(t,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Kh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",i);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),i();const a=Ro(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ca(h=>{const u=this.getAxisMotionValue(h);!u||(this.originPoint[h]+=l[h].translate,u.set(u.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),r(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:s=!1,dragElastic:a=vA,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:i,dragPropagation:n,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function wv(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function lq(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class cq extends vc{constructor(t){super(t),this.removeGroupControls=Mr,this.removeListeners=Mr,this.controls=new oq(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const o3=e=>(t,r)=>{e&&lr.update(()=>e(t,r))};class uq extends vc{constructor(){super(...arguments),this.removePointerDownListener=Mr}onPointerDown(t){this.session=new p5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:o3(t),onStart:o3(r),onMove:i,onEnd:(s,a)=>{delete this.session,n&&lr.update(()=>n(s,a))}}}mount(){this.removePointerDownListener=No(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function hq(){const e=W.exports.useContext(xx);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,n=W.exports.useId();return W.exports.useEffect(()=>i(n),[]),!t&&r?[!1,()=>r&&r(n)]:[!0]}const sy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function l3(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Hp={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ct.test(e))e=parseFloat(e);else return e;const r=l3(e,t.target.x),i=l3(e,t.target.y);return`${r}% ${i}%`}},dq={correct:(e,{treeScale:t,projectionDelta:r})=>{const i=e,n=cc.parse(e);if(n.length>5)return i;const s=cc.createTransformer(e),a=typeof n[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;n[0+a]/=o,n[1+a]/=l;const c=vr(o,l,.5);return typeof n[2+a]=="number"&&(n[2+a]/=c),typeof n[3+a]=="number"&&(n[3+a]/=c),s(n)}};class pq extends sn.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:i,layoutId:n}=this.props,{projection:s}=t;_8(fq),s&&(r.group&&r.group.add(s),i&&i.register&&n&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:i,drag:n,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,n||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||lr.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function x5(e){const[t,r]=hq(),i=W.exports.useContext(y2);return H(pq,{...e,layoutGroup:i,switchLayoutGroup:W.exports.useContext(p4),isPresent:t,safeToRemove:r})}const fq={borderRadius:{...Hp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hp,borderTopRightRadius:Hp,borderBottomLeftRadius:Hp,borderBottomRightRadius:Hp,boxShadow:dq},b5=["TopLeft","TopRight","BottomLeft","BottomRight"],mq=b5.length,c3=e=>typeof e=="string"?parseFloat(e):e,u3=e=>typeof e=="number"||ct.test(e);function gq(e,t,r,i,n,s){n?(e.opacity=vr(0,r.opacity!==void 0?r.opacity:1,vq(i)),e.opacityExit=vr(t.opacity!==void 0?t.opacity:1,0,yq(i))):s&&(e.opacity=vr(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,i));for(let a=0;a<mq;a++){const o=`border${b5[a]}Radius`;let l=h3(t,o),c=h3(r,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||u3(l)===u3(c)?(e[o]=Math.max(vr(c3(l),c3(c),i),0),(Ga.test(c)||Ga.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||r.rotate)&&(e.rotate=vr(t.rotate||0,r.rotate||0,i))}function h3(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const vq=w5(0,.5,P2),yq=w5(.5,.95,Mr);function w5(e,t,r){return i=>i<e?0:i>t?1:r(Hm(e,t,i))}function d3(e,t){e.min=t.min,e.max=t.max}function cs(e,t){d3(e.x,t.x),d3(e.y,t.y)}function p3(e,t,r,i,n){return e-=t,e=e1(e,1/r,i),n!==void 0&&(e=e1(e,1/n,i)),e}function xq(e,t=0,r=1,i=.5,n,s=e,a=e){if(Ga.test(t)&&(t=parseFloat(t),t=vr(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=vr(s.min,s.max,i);e===s&&(o-=t),e.min=p3(e.min,t,r,o,n),e.max=p3(e.max,t,r,o,n)}function f3(e,t,[r,i,n],s,a){xq(e,t[r],t[i],t[n],t.scale,s,a)}const bq=["x","scaleX","originX"],wq=["y","scaleY","originY"];function m3(e,t,r,i){f3(e.x,t,bq,r?r.x:void 0,i?i.x:void 0),f3(e.y,t,wq,r?r.y:void 0,i?i.y:void 0)}function g3(e){return e.translate===0&&e.scale===1}function S5(e){return g3(e.x)&&g3(e.y)}function Sq(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function _5(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function v3(e){return is(e.x)/is(e.y)}class _q{constructor(){this.members=[]}add(t){R2(this.members,t),t.scheduleRender()}remove(t){if(B2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let i;for(let n=r;n>=0;n--){const s=this.members[n];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(t,r){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,r&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:i}=t;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function y3(e,t,r){let i="";const n=e.x.translate/t.x,s=e.y.translate/t.y;if((n||s)&&(i=`translate3d(${n}px, ${s}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:l,rotateX:c,rotateY:h}=r;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),h&&(i+=`rotateY(${h}deg) `)}const a=e.x.scale*t.x,o=e.y.scale*t.y;return(a!==1||o!==1)&&(i+=`scale(${a}, ${o})`),i||"none"}const Aq=(e,t)=>e.depth-t.depth;class Mq{constructor(){this.children=[],this.isDirty=!1}add(t){R2(this.children,t),this.isDirty=!0}remove(t){B2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Aq),this.isDirty=!1,this.children.forEach(t)}}function Eq(e,t){const r=performance.now(),i=({timestamp:n})=>{const s=n-r;s>=t&&(Yo(i),e(s-t))};return lr.read(i,!0),()=>Yo(i)}function Cq(e){window.MotionDebug&&window.MotionDebug.record(e)}function Tq(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Pq(e,t,r){const i=Ln(e)?e:jd(e);return i.start(I2("",i,t,r)),i.animation}const x3=["","X","Y","Z"],b3=1e3;let Dq=0;const Vc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function A5({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:i,resetTransform:n}){return class{constructor(a={},o=t==null?void 0:t()){this.id=Dq++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Vc.totalNodes=Vc.resolvedTargetDeltas=Vc.recalculatedProjection=0,this.nodes.forEach(Iq),this.nodes.forEach(Nq),this.nodes.forEach(Fq),this.nodes.forEach(Rq),Cq(Vc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Mq)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new k2),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Tq(a),this.instance=a;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),e){let u;const d=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Eq(d,250),sy.hasAnimatedSinceResize&&(sy.hasAnimatedSinceResize=!1,this.nodes.forEach(S3))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeTargetChanged:p,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||h.getDefaultTransition()||Hq,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=h.getProps(),y=!this.targetLayout||!_5(this.targetLayout,f)||p,x=!d&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,x);const b={...o5(m,"layout"),onPlay:g,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else d||S3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Yo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Uq),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const u=this.path[h];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(w3);return}this.isUpdating||this.nodes.forEach(kq),this.isUpdating=!1,this.nodes.forEach(zq),this.nodes.forEach(Oq),this.nodes.forEach(Lq),this.clearAllSnapshots();const o=performance.now();li.delta=lc(0,1e3/60,o-li.timestamp),li.timestamp=o,li.isProcessing=!0,Qb.update.process(li),Qb.preRender.process(li),Qb.render.process(li),li.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Bq),this.sharedNodes.forEach(jq)}scheduleUpdateProjection(){lr.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){lr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!n)return;const a=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!S5(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;a&&(o||jc(this.latestValues)||h)&&(n(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Wq(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Fr();const o=a.measureViewportBox(),{scroll:l}=this.root;return l&&(Sl(o.x,l.offset.x),Sl(o.y,l.offset.y)),o}removeElementScroll(a){const o=Fr();cs(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:u}=c;if(c!==this.root&&h&&u.layoutScroll){if(h.isRoot){cs(o,a);const{scroll:d}=this.root;d&&(Sl(o.x,-d.offset.x),Sl(o.y,-d.offset.y))}Sl(o.x,h.offset.x),Sl(o.y,h.offset.y)}}return o}applyTransform(a,o=!1){const l=Fr();cs(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ed(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),jc(h.latestValues)&&ed(l,h.latestValues)}return jc(this.latestValues)&&ed(l,this.latestValues),l}removeTransform(a){const o=Fr();cs(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!jc(c.latestValues))continue;yA(c.latestValues)&&c.updateSnapshot();const h=Fr(),u=c.measurePageBox();cs(h,u),m3(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return jc(this.latestValues)&&m3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){!this.relativeParent||this.relativeParent.resolvedRelativeTargetAt!==li.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=Boolean(this.resumingFrom)||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||((o=this.parent)===null||o===void 0?void 0:o.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=li.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fr(),this.relativeTargetOrigin=Fr(),rm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Fr(),this.targetWithTransforms=Fr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):cs(this.target,this.layout.layoutBox),v5(this.target,this.targetDelta)):cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&Boolean(p.resumingFrom)===Boolean(this.resumingFrom)&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fr(),this.relativeTargetOrigin=Fr(),rm(this.relativeTargetOrigin,this.target,p.target),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yA(this.parent.latestValues)||g5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=Boolean(this.resumingFrom)||this!==o;let c=!0;if((this.isProjectionDirty||((a=this.parent)===null||a===void 0?void 0:a.isProjectionDirty))&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===li.timestamp&&(c=!1),c)return;const{layout:h,layoutId:u}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||u))return;cs(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;rq(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:f}=o;if(!f){this.projectionTransform&&(this.projectionDelta=Jh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Jh(),this.projectionDeltaWithTransform=Jh());const m=this.projectionTransform;tm(this.projectionDelta,this.layoutCorrected,f,this.latestValues),this.projectionTransform=y3(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==d||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f)),Vc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},u=Jh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=Fr(),p=l?l.source:void 0,f=this.layout?this.layout.source:void 0,m=p!==f,g=this.getStack(),v=!g||g.members.length<=1,y=Boolean(m&&!v&&this.options.crossfade===!0&&!this.path.some(Gq));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const S=b/1e3;_3(u.x,a.x,S),_3(u.y,a.y,S),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rm(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Vq(this.relativeTarget,this.relativeTargetOrigin,d,S),x&&Sq(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Fr()),cs(x,this.relativeTarget)),m&&(this.animationValues=h,gq(h,c,this.latestValues,S,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Yo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=lr.update(()=>{sy.hasAnimatedSinceResize=!0,this.currentAnimation=Pq(0,b3,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(b3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:h}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&M5(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Fr();const u=is(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+u;const d=is(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+d}cs(o,l),ed(o,h),tm(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new _q),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(o=!0),!o)return;const c={};for(let h=0;h<x3.length;h++){const u="rotate"+x3[h];l[u]&&(c[u]=l[u],a.setStaticValue(u,0))}a.render();for(const h in c)a.setStaticValue(h,c[h]);a.scheduleRender()}getProjectionStyles(a={}){var o,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ny(a.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=ny(a.pointerEvents)||""),this.hasProjected&&!jc(this.latestValues)&&(m.transform=h?h({},""):"none",this.hasProjected=!1),m}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=y3(this.projectionDeltaWithTransform,this.treeScale,d),h&&(c.transform=h(d,c.transform));const{x:p,y:f}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${f.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(o=d.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in $y){if(d[m]===void 0)continue;const{correct:g,applyTo:v}=$y[m],y=c.transform==="none"?d[m]:g(d[m],u);if(v){const x=v.length;for(let b=0;b<x;b++)c[v[b]]=y}else c[m]=y}return this.options.layoutId&&(c.pointerEvents=u===this?ny(a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(w3),this.root.sharedNodes.clear()}}}function Oq(e){e.updateLayout()}function Lq(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:n}=e.layout,{animationType:s}=e.options,a=r.source!==e.layout.source;s==="size"?Ca(u=>{const d=a?r.measuredBox[u]:r.layoutBox[u],p=is(d);d.min=i[u].min,d.max=d.min+p}):M5(s,r.layoutBox,i)&&Ca(u=>{const d=a?r.measuredBox[u]:r.layoutBox[u],p=is(i[u]);d.max=d.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const o=Jh();tm(o,i,r.layoutBox);const l=Jh();a?tm(l,e.applyTransform(n,!0),r.measuredBox):tm(l,i,r.layoutBox);const c=!S5(o);let h=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:d,layout:p}=u;if(d&&p){const f=Fr();rm(f,r.layoutBox,d.layoutBox);const m=Fr();rm(m,i,p.layoutBox),_5(f,m)||(h=!0),u.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=f,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:r,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function Iq(e){Vc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Rq(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Bq(e){e.clearSnapshot()}function w3(e){e.clearMeasurements()}function kq(e){e.isLayoutDirty=!1}function zq(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function S3(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Nq(e){e.resolveTargetDelta()}function Fq(e){e.calcProjection()}function Uq(e){e.resetRotation()}function jq(e){e.removeLeadSnapshot()}function _3(e,t,r){e.translate=vr(t.translate,0,r),e.scale=vr(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function A3(e,t,r,i){e.min=vr(t.min,r.min,i),e.max=vr(t.max,r.max,i)}function Vq(e,t,r,i){A3(e.x,t.x,r.x,i),A3(e.y,t.y,r.y,i)}function Gq(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Hq={duration:.45,ease:[.4,0,.1,1]},M3=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),E3=M3("applewebkit/")&&!M3("chrome/")?Math.round:Mr;function C3(e){e.min=E3(e.min),e.max=E3(e.max)}function Wq(e){C3(e.x),C3(e.y)}function M5(e,t,r){return e==="position"||e==="preserve-aspect"&&!gA(v3(t),v3(r),.2)}const qq=A5({attachResizeListener:(e,t)=>Ro(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ow={current:void 0},E5=A5({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ow.current){const e=new qq({});e.mount(window),e.setOptions({layoutScroll:!0}),ow.current=e}return ow.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>Boolean(window.getComputedStyle(e).position==="fixed")}),$q={pan:{Feature:uq},drag:{Feature:cq,ProjectionNode:E5,MeasureLayout:x5}},Xq=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Yq(e){const t=Xq.exec(e);if(!t)return[,];const[,r,i]=t;return[r,i]}function bA(e,t,r=1){const[i,n]=Yq(e);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const a=s.trim();return l5(a)?parseFloat(a):a}else return lA(n)?bA(n,t,r+1):n}function Qq(e,{...t},r){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(n=>{const s=n.get();if(!lA(s))return;const a=bA(s,i);a&&n.set(a)});for(const n in t){const s=t[n];if(!lA(s))continue;const a=bA(s,i);!a||(t[n]=a,r||(r={}),r[n]===void 0&&(r[n]=s))}return{target:t,transitionEnd:r}}const Kq=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),C5=e=>Kq.has(e),Zq=e=>Object.keys(e).some(C5),T3=e=>e===Uu||e===ct,P3=(e,t)=>parseFloat(e.split(", ")[t]),D3=(e,t)=>(r,{transform:i})=>{if(i==="none"||!i)return 0;const n=i.match(/^matrix3d\((.+)\)$/);if(n)return P3(n[1],t);{const s=i.match(/^matrix\((.+)\)$/);return s?P3(s[1],e):0}},Jq=new Set(["x","y","z"]),e$=Eg.filter(e=>!Jq.has(e));function t$(e){const t=[];return e$.forEach(r=>{const i=e.getValue(r);i!==void 0&&(t.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Vd={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:D3(4,13),y:D3(5,14)};Vd.translateX=Vd.x;Vd.translateY=Vd.y;const r$=(e,t,r)=>{const i=t.measureViewportBox(),n=t.current,s=getComputedStyle(n),{display:a}=s,o={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(c=>{o[c]=Vd[c](i,s)}),t.render();const l=t.measureViewportBox();return r.forEach(c=>{const h=t.getValue(c);h&&h.jump(o[c]),e[c]=Vd[c](l,s)}),e},i$=(e,t,r={},i={})=>{t={...t},i={...i};const n=Object.keys(t).filter(C5);let s=[],a=!1;const o=[];if(n.forEach(l=>{const c=e.getValue(l);if(!e.hasValue(l))return;let h=r[l],u=Gp(h);const d=t[l];let p;if(Yy(d)){const f=d.length,m=d[0]===null?1:0;h=d[m],u=Gp(h);for(let g=m;g<f&&d[g]!==null;g++)p?Pg(Gp(d[g])===p):p=Gp(d[g])}else p=Gp(d);if(u!==p)if(T3(u)&&T3(p)){const f=c.get();typeof f=="string"&&c.set(parseFloat(f)),typeof d=="string"?t[l]=parseFloat(d):Array.isArray(d)&&p===ct&&(t[l]=d.map(parseFloat))}else(u==null?void 0:u.transform)&&(p==null?void 0:p.transform)&&(h===0||d===0)?h===0?c.set(p.transform(h)):t[l]=u.transform(d):(a||(s=t$(e),a=!0),o.push(l),i[l]=i[l]!==void 0?i[l]:t[l],c.jump(d))}),o.length){const l=o.indexOf("height")>=0?window.pageYOffset:null,c=r$(t,e,o);return s.length&&s.forEach(([h,u])=>{e.getValue(h).set(u)}),e.render(),bx&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:t,transitionEnd:i}};function n$(e,t,r,i){return Zq(t)?i$(e,t,r,i):{target:t,transitionEnd:i}}const s$=(e,t,r,i)=>{const n=Qq(e,t,i);return t=n.target,i=n.transitionEnd,n$(e,t,r,i)},wA={current:null},T5={current:!1};function a$(){if(T5.current=!0,!!bx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>wA.current=e.matches;e.addListener(t),t()}else wA.current=!1}function o$(e,t,r){const{willChange:i}=t;for(const n in t){const s=t[n],a=r[n];if(Ln(s))e.addValue(n,s),Jy(i)&&i.add(n);else if(Ln(a))e.addValue(n,jd(s,{owner:e})),Jy(i)&&i.remove(n);else if(a!==s)if(e.hasValue(n)){const o=e.getValue(n);!o.hasAnimated&&o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,jd(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const O3=new WeakMap,P5=Object.keys(Gm),l$=P5.length,L3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],c$=v2.length;class u${constructor({parent:t,props:r,presenceContext:i,reducedMotionConfig:n,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{!this.current||(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>lr.render(this.render,!1,!0);const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=l,this.parent=t,this.props=r,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.isControllingVariants=_x(r),this.isVariantNode=d4(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(r,{});for(const u in h){const d=h[u];o[u]!==void 0&&Ln(d)&&(d.set(o[u],!1),Jy(c)&&c.add(u))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,O3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),T5.current||a$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:wA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){O3.delete(this.current),this.projection&&this.projection.unmount(),Yo(this.notifyUpdate),Yo(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const i=Fu.has(t),n=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&lr.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{n(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},i,n,s){let a,o;for(let l=0;l<l$;l++){const c=P5[l],{isEnabled:h,Feature:u,ProjectionNode:d,MeasureLayout:p}=Gm[c];d&&(a=d),h(r)&&(!this.features[c]&&u&&(this.features[c]=new u(this)),p&&(o=p))}if(!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:u,layoutScroll:d,layoutRoot:p}=r;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:Boolean(h)||u&&Kh(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:d,layoutRoot:p})}return o}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<L3.length;i++){const n=L3[i];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const s=t["on"+n];s&&(this.propEventSubscriptions[n]=this.on(n,s))}this.prevMotionValues=o$(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const r={};for(let i=0;i<c$;i++){const n=v2[i],s=this.props[n];(Vm(s)||s===!1)&&(r[n]=s)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&r!==void 0&&(i=jd(r,{owner:this}),this.addValue(t,i)),i}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:i}=this.props,n=typeof i=="string"||typeof i=="object"?(r=E2(this.props,i))===null||r===void 0?void 0:r[t]:void 0;if(i&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ln(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new k2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class D5 extends u${sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:i}){delete r[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...i},{transformValues:n},s){let a=D7(i,t||{},this);if(n&&(r&&(r=n(r)),i&&(i=n(i)),a&&(a=n(a))),s){T7(this,i,a);const o=s$(this,i,a,r);r=o.transitionEnd,i=o.target}return{transition:t,transitionEnd:r,...i}}}function h$(e){return window.getComputedStyle(e)}class d$ extends D5{readValueFromInstance(t,r){if(Fu.has(r)){const i=L2(r);return i&&i.default||0}else{const i=h$(t),n=(v4(r)?i.getPropertyValue(r):i[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:r}){return y5(t,r)}build(t,r,i,n){b2(t,r,i,n.transformTemplate)}scrapeMotionValuesFromProps(t,r){return M2(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ln(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,i,n){_4(t,r,i,n)}}class p$ extends D5{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Fu.has(r)){const i=L2(r);return i&&i.default||0}return r=A4.has(r)?r:A2(r),t.getAttribute(r)}measureInstanceViewportBox(){return Fr()}scrapeMotionValuesFromProps(t,r){return E4(t,r)}build(t,r,i,n){S2(t,r,i,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,i,n){M4(t,r,i,n)}mount(t){this.isSVGTag=_2(t.tagName),super.mount(t)}}const f$=(e,t)=>x2(e)?new p$(t,{enableHardwareAcceleration:!1}):new d$(t,{enableHardwareAcceleration:!0}),m$={layout:{ProjectionNode:E5,MeasureLayout:x5}},g$={...G7,...d9,...$q,...m$},ui=w8((e,t)=>J8(e,t,g$,f$));function O5(){const e=W.exports.useRef(!1);return wx(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function v$(){const e=O5(),[t,r]=W.exports.useState(0),i=W.exports.useCallback(()=>{e.current&&r(t+1)},[t]);return[W.exports.useCallback(()=>lr.postRender(i),[i]),t]}class y$ extends W.exports.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function x$({children:e,isPresent:t}){const r=W.exports.useId(),i=W.exports.useRef(null),n=W.exports.useRef({width:0,height:0,top:0,left:0});return W.exports.useInsertionEffect(()=>{const{width:s,height:a,top:o,left:l}=n.current;if(t||!i.current||!s||!a)return;i.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${a}px !important;
            top: ${o}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),H(y$,{isPresent:t,childRef:i,sizeRef:n,children:W.exports.cloneElement(e,{ref:i})})}const lw=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:n,presenceAffectsLayout:s,mode:a})=>{const o=C2(b$),l=W.exports.useId(),c=W.exports.useMemo(()=>({id:l,initial:t,isPresent:r,custom:n,onExitComplete:h=>{o.set(h,!0);for(const u of o.values())if(!u)return;i&&i()},register:h=>(o.set(h,!1),()=>o.delete(h))}),s?void 0:[r]);return W.exports.useMemo(()=>{o.forEach((h,u)=>o.set(u,!1))},[r]),W.exports.useEffect(()=>{!r&&!o.size&&i&&i()},[r]),a==="popLayout"&&(e=H(x$,{isPresent:r,children:e})),H(xx.Provider,{value:c,children:e})};function b$(){return new Map}function w$(e){return W.exports.useEffect(()=>()=>e(),[])}const Lh=e=>e.key||"";function S$(e,t){e.forEach(r=>{const i=Lh(r);t.set(i,r)})}function _$(e){const t=[];return W.exports.Children.forEach(e,r=>{W.exports.isValidElement(r)&&t.push(r)}),t}const A$=({children:e,custom:t,initial:r=!0,onExitComplete:i,exitBeforeEnter:n,presenceAffectsLayout:s=!0,mode:a="sync"})=>{Pg(!n);const o=W.exports.useContext(y2).forceRender||v$()[0],l=O5(),c=_$(e);let h=c;const u=W.exports.useRef(new Map).current,d=W.exports.useRef(h),p=W.exports.useRef(new Map).current,f=W.exports.useRef(!0);if(wx(()=>{f.current=!1,S$(c,p),d.current=h}),w$(()=>{f.current=!0,p.clear(),u.clear()}),f.current)return H(on,{children:h.map(y=>H(lw,{isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:s,mode:a,children:y},Lh(y)))});h=[...h];const m=d.current.map(Lh),g=c.map(Lh),v=m.length;for(let y=0;y<v;y++){const x=m[y];g.indexOf(x)===-1&&!u.has(x)&&u.set(x,void 0)}return a==="wait"&&u.size&&(h=[]),u.forEach((y,x)=>{if(g.indexOf(x)!==-1)return;const b=p.get(x);if(!b)return;const S=m.indexOf(x);let w=y;w||(w=H(lw,{isPresent:!1,onExitComplete:()=>{p.delete(x),u.delete(x);const _=d.current.findIndex(M=>M.key===x);if(d.current.splice(_,1),!u.size){if(d.current=c,l.current===!1)return;o(),i&&i()}},custom:t,presenceAffectsLayout:s,mode:a,children:b},Lh(b)),u.set(x,w)),h.splice(S,0,w)}),h=h.map(y=>{const x=y.key;return u.has(x)?y:H(lw,{isPresent:!0,presenceAffectsLayout:s,mode:a,children:y},Lh(y))}),H(on,{children:u.size?h:h.map(y=>W.exports.cloneElement(y))})};function M$(e,t,r){var i;if(typeof e=="string"){let n=document;t&&(Pg(Boolean(t.current)),n=t.current),r?((i=r[e])!==null&&i!==void 0||(r[e]=n.querySelectorAll(e)),e=r[e]):e=n.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}function E$(e){e.values.forEach(t=>t.stop())}function C$(){const e=new Set,t={subscribe(r){return e.add(r),()=>void e.delete(r)},start(r,i){const n=[];return e.forEach(s=>{n.push(d5(s,r,{transitionOverride:i}))}),Promise.all(n)},set(r){return e.forEach(i=>{C7(i,r)})},stop(){e.forEach(r=>{E$(r)})},mount(){return()=>{t.stop()}}};return t}function T$(){const e=C2(C$);return wx(e.mount,[]),e}const P$=T$,D$={some:0,all:1};function O$(e,t,{root:r,margin:i,amount:n="some"}={}){const s=M$(e),a=new WeakMap,o=c=>{c.forEach(h=>{const u=a.get(h.target);if(h.isIntersecting!==Boolean(u))if(h.isIntersecting){const d=t(h);typeof d=="function"?a.set(h.target,d):l.unobserve(h.target)}else u&&(u(h),a.delete(h.target))})},l=new IntersectionObserver(o,{root:r,rootMargin:i,threshold:typeof n=="number"?n:D$[n]});return s.forEach(c=>l.observe(c)),()=>l.disconnect()}function L$(e,{root:t,margin:r,amount:i,once:n=!1}={}){const[s,a]=W.exports.useState(!1);return W.exports.useEffect(()=>{if(!e.current||n&&s)return;const o=()=>(a(!0),n?void 0:()=>a(!1)),l={root:t&&t.current||void 0,margin:r,amount:i};return O$(e.current,o,l)},[t,e,r,n]),s}function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ce.apply(this,arguments)}var su;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(su||(su={}));var I3=function(e){return e},R3="beforeunload",I$="hashchange",R$="popstate";function B$(e){e===void 0&&(e={});var t=e,r=t.window,i=r===void 0?document.defaultView:r,n=i.history;function s(){var _=uc(i.location.hash.substr(1)),M=_.pathname,E=M===void 0?"/":M,T=_.search,P=T===void 0?"":T,D=_.hash,L=D===void 0?"":D,R=n.state||{};return[R.idx,I3({pathname:E,search:P,hash:L,state:R.usr||null,key:R.key||"default"})]}var a=null;function o(){if(a)p.call(a),a=null;else{var _=su.Pop,M=s(),E=M[0],T=M[1];if(p.length){if(E!=null){var P=h-E;P&&(a={action:_,location:T,retry:function(){w(P*-1)}},w(P))}}else x(_)}}i.addEventListener(R$,o),i.addEventListener(I$,function(){var _=s(),M=_[1];im(M)!==im(u)&&o()});var l=su.Pop,c=s(),h=c[0],u=c[1],d=k3(),p=k3();h==null&&(h=0,n.replaceState(Ce({},n.state,{idx:h}),""));function f(){var _=document.querySelector("base"),M="";if(_&&_.getAttribute("href")){var E=i.location.href,T=E.indexOf("#");M=T===-1?E:E.slice(0,T)}return M}function m(_){return f()+"#"+(typeof _=="string"?_:im(_))}function g(_,M){return M===void 0&&(M=null),I3(Ce({pathname:u.pathname,hash:"",search:""},typeof _=="string"?uc(_):_,{state:M,key:k$()}))}function v(_,M){return[{usr:_.state,key:_.key,idx:M},m(_)]}function y(_,M,E){return!p.length||(p.call({action:_,location:M,retry:E}),!1)}function x(_){l=_;var M=s();h=M[0],u=M[1],d.call({action:l,location:u})}function b(_,M){var E=su.Push,T=g(_,M);function P(){b(_,M)}if(y(E,T,P)){var D=v(T,h+1),L=D[0],R=D[1];try{n.pushState(L,"",R)}catch{i.location.assign(R)}x(E)}}function S(_,M){var E=su.Replace,T=g(_,M);function P(){S(_,M)}if(y(E,T,P)){var D=v(T,h),L=D[0],R=D[1];n.replaceState(L,"",R),x(E)}}function w(_){n.go(_)}var A={get action(){return l},get location(){return u},createHref:m,push:b,replace:S,go:w,back:function(){w(-1)},forward:function(){w(1)},listen:function(M){return d.push(M)},block:function(M){var E=p.push(M);return p.length===1&&i.addEventListener(R3,B3),function(){E(),p.length||i.removeEventListener(R3,B3)}}};return A}function B3(e){e.preventDefault(),e.returnValue=""}function k3(){var e=[];return{get length(){return e.length},push:function(r){return e.push(r),function(){e=e.filter(function(i){return i!==r})}},call:function(r){e.forEach(function(i){return i&&i(r)})}}}function k$(){return Math.random().toString(36).substr(2,8)}function im(e){var t=e.pathname,r=t===void 0?"/":t,i=e.search,n=i===void 0?"":i,s=e.hash,a=s===void 0?"":s;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function uc(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const N2=W.exports.createContext(null),F2=W.exports.createContext(null),Og=W.exports.createContext({outlet:null,matches:[]});function Xa(e,t){if(!e)throw new Error(t)}function z$(e,t,r){r===void 0&&(r="/");let i=typeof t=="string"?uc(t):t,n=R5(i.pathname||"/",r);if(n==null)return null;let s=L5(e);N$(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=$$(s[o],n);return a}function L5(e,t,r,i){return t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i=""),e.forEach((n,s)=>{let a={relativePath:n.path||"",caseSensitive:n.caseSensitive===!0,childrenIndex:s,route:n};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(i)||Xa(!1),a.relativePath=a.relativePath.slice(i.length));let o=Jl([i,a.relativePath]),l=r.concat(a);n.children&&n.children.length>0&&(n.index===!0&&Xa(!1),L5(n.children,t,l,o)),!(n.path==null&&!n.index)&&t.push({path:o,score:W$(o,n.index),routesMeta:l})}),t}function N$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:q$(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const F$=/^:\w+$/,U$=3,j$=2,V$=1,G$=10,H$=-2,z3=e=>e==="*";function W$(e,t){let r=e.split("/"),i=r.length;return r.some(z3)&&(i+=H$),t&&(i+=j$),r.filter(n=>!z3(n)).reduce((n,s)=>n+(F$.test(s)?U$:s===""?V$:G$),i)}function q$(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function $$(e,t){let{routesMeta:r}=e,i={},n="/",s=[];for(let a=0;a<r.length;++a){let o=r[a],l=a===r.length-1,c=n==="/"?t:t.slice(n.length)||"/",h=X$({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},c);if(!h)return null;Object.assign(i,h.params);let u=o.route;s.push({params:i,pathname:Jl([n,h.pathname]),pathnameBase:B5(Jl([n,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(n=Jl([n,h.pathnameBase]))}return s}function X$(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=Y$(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],a=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:i.reduce((c,h,u)=>{if(h==="*"){let d=o[u]||"";a=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return c[h]=Q$(o[u]||""),c},{}),pathname:s,pathnameBase:a,pattern:e}}function Y$(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0);let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(a,o)=>(i.push(o),"([^\\/]+)"));return e.endsWith("*")?(i.push("*"),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n+=r?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(n,t?void 0:"i"),i]}function Q$(e,t){try{return decodeURIComponent(e)}catch{return e}}function K$(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?uc(e):e;return{pathname:r?r.startsWith("/")?r:Z$(r,t):t,search:eX(i),hash:tX(n)}}function Z$(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function I5(e,t,r){let i=typeof e=="string"?uc(e):e,n=e===""||i.pathname===""?"/":i.pathname,s;if(n==null)s=r;else{let o=t.length-1;if(n.startsWith("..")){let l=n.split("/");for(;l[0]==="..";)l.shift(),o-=1;i.pathname=l.join("/")}s=o>=0?t[o]:"/"}let a=K$(i,s);return n&&n!=="/"&&n.endsWith("/")&&!a.pathname.endsWith("/")&&(a.pathname+="/"),a}function J$(e){return e===""||e.pathname===""?"/":typeof e=="string"?uc(e).pathname:e.pathname}function R5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=e.charAt(t.length);return r&&r!=="/"?null:e.slice(t.length)||"/"}const Jl=e=>e.join("/").replace(/\/\/+/g,"/"),B5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function rX(e){Lg()||Xa(!1);let{basename:t,navigator:r}=W.exports.useContext(N2),{hash:i,pathname:n,search:s}=U2(e),a=n;if(t!=="/"){let o=J$(e),l=o!=null&&o.endsWith("/");a=n==="/"?t+(l?"/":""):Jl([t,n])}return r.createHref({pathname:a,search:s,hash:i})}function Lg(){return W.exports.useContext(F2)!=null}function pp(){return Lg()||Xa(!1),W.exports.useContext(F2).location}function iX(){Lg()||Xa(!1);let{basename:e,navigator:t}=W.exports.useContext(N2),{matches:r}=W.exports.useContext(Og),{pathname:i}=pp(),n=JSON.stringify(r.map(o=>o.pathnameBase)),s=W.exports.useRef(!1);return W.exports.useEffect(()=>{s.current=!0}),W.exports.useCallback(function(o,l){if(l===void 0&&(l={}),!s.current)return;if(typeof o=="number"){t.go(o);return}let c=I5(o,JSON.parse(n),i);e!=="/"&&(c.pathname=Jl([e,c.pathname])),(l.replace?t.replace:t.push)(c,l.state)},[e,t,n,i])}const nX=W.exports.createContext(null);function sX(e){let t=W.exports.useContext(Og).outlet;return t&&W.exports.createElement(nX.Provider,{value:e},t)}function U2(e){let{matches:t}=W.exports.useContext(Og),{pathname:r}=pp(),i=JSON.stringify(t.map(n=>n.pathnameBase));return W.exports.useMemo(()=>I5(e,JSON.parse(i),r),[e,i,r])}function aX(e,t){Lg()||Xa(!1);let{matches:r}=W.exports.useContext(Og),i=r[r.length-1],n=i?i.params:{};i&&i.pathname;let s=i?i.pathnameBase:"/";i&&i.route;let a=pp(),o;if(t){var l;let d=typeof t=="string"?uc(t):t;s==="/"||((l=d.pathname)==null?void 0:l.startsWith(s))||Xa(!1),o=d}else o=a;let c=o.pathname||"/",h=s==="/"?c:c.slice(s.length)||"/",u=z$(e,{pathname:h});return oX(u&&u.map(d=>Object.assign({},d,{params:Object.assign({},n,d.params),pathname:Jl([s,d.pathname]),pathnameBase:d.pathnameBase==="/"?s:Jl([s,d.pathnameBase])})),r)}function oX(e,t){return t===void 0&&(t=[]),e==null?null:e.reduceRight((r,i,n)=>W.exports.createElement(Og.Provider,{children:i.route.element!==void 0?i.route.element:r,value:{outlet:r,matches:t.concat(e.slice(0,n+1))}}),null)}function lX(e){return sX(e.context)}function Lf(e){Xa(!1)}function cX(e){let{basename:t="/",children:r=null,location:i,navigationType:n=su.Pop,navigator:s,static:a=!1}=e;Lg()&&Xa(!1);let o=B5(t),l=W.exports.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof i=="string"&&(i=uc(i));let{pathname:c="/",search:h="",hash:u="",state:d=null,key:p="default"}=i,f=W.exports.useMemo(()=>{let m=R5(c,o);return m==null?null:{pathname:m,search:h,hash:u,state:d,key:p}},[o,c,h,u,d,p]);return f==null?null:W.exports.createElement(N2.Provider,{value:l},W.exports.createElement(F2.Provider,{children:r,value:{location:f,navigationType:n}}))}function uX(e){let{children:t,location:r}=e;return aX(SA(t),r)}function SA(e){let t=[];return W.exports.Children.forEach(e,r=>{if(!W.exports.isValidElement(r))return;if(r.type===W.exports.Fragment){t.push.apply(t,SA(r.props.children));return}r.type!==Lf&&Xa(!1);let i={caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path};r.props.children&&(i.children=SA(r.props.children)),t.push(i)}),t}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function t1(){return t1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},t1.apply(this,arguments)}function k5(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,s;for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}const hX=["onClick","reloadDocument","replace","state","target","to"],dX=["aria-current","caseSensitive","className","end","style","to","children"];function pX(e){let{basename:t,children:r,window:i}=e,n=W.exports.useRef();n.current==null&&(n.current=B$({window:i}));let s=n.current,[a,o]=W.exports.useState({action:s.action,location:s.location});return W.exports.useLayoutEffect(()=>s.listen(o),[s]),W.exports.createElement(cX,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:s})}function fX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const j2=W.exports.forwardRef(function(t,r){let{onClick:i,reloadDocument:n,replace:s=!1,state:a,target:o,to:l}=t,c=k5(t,hX),h=rX(l),u=mX(l,{replace:s,state:a,target:o});function d(p){i&&i(p),!p.defaultPrevented&&!n&&u(p)}return W.exports.createElement("a",t1({},c,{href:h,onClick:d,ref:r,target:o}))}),cw=W.exports.forwardRef(function(t,r){let{"aria-current":i="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:l,children:c}=t,h=k5(t,dX),u=pp(),d=U2(l),p=u.pathname,f=d.pathname;n||(p=p.toLowerCase(),f=f.toLowerCase());let m=p===f||!a&&p.startsWith(f)&&p.charAt(f.length)==="/",g=m?i:void 0,v;typeof s=="function"?v=s({isActive:m}):v=[s,m?"active":null].filter(Boolean).join(" ");let y=typeof o=="function"?o({isActive:m}):o;return W.exports.createElement(j2,t1({},h,{"aria-current":g,className:v,ref:r,style:y,to:l}),typeof c=="function"?c({isActive:m}):c)});function mX(e,t){let{target:r,replace:i,state:n}=t===void 0?{}:t,s=iX(),a=pp(),o=U2(e);return W.exports.useCallback(l=>{if(l.button===0&&(!r||r==="_self")&&!fX(l)){l.preventDefault();let c=!!i||im(a)===im(o);s(e,{replace:c,state:n})}},[a,s,o,i,n,r,e])}function pr(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,s;for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function z5(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=z5(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Ur(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=z5(e))&&(i&&(i+=" "),i+=t);return i}function If(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function Uo(e,t,r={clone:!0}){const i=r.clone?Ce({},e):e;return If(e)&&If(t)&&Object.keys(t).forEach(n=>{n!=="__proto__"&&(If(t[n])&&n in e&&If(e[n])?i[n]=Uo(e[n],t[n],r):i[n]=t[n])}),i}function Wm(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Zr(e){if(typeof e!="string")throw new Error(Wm(7));return e.charAt(0).toUpperCase()+e.slice(1)}function gX(...e){return e.reduce((t,r)=>r==null?t:function(...n){t.apply(this,n),r.apply(this,n)},()=>{})}function vX(e,t=166){let r;function i(...n){const s=()=>{e.apply(this,n)};clearTimeout(r),r=setTimeout(s,t)}return i.clear=()=>{clearTimeout(r)},i}function yX(e,t){return()=>null}function xX(e,t){return W.exports.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function V2(e){return e&&e.ownerDocument||document}function bX(e){return V2(e).defaultView||window}function wX(e,t){return()=>null}function qm(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const SX=typeof window<"u"?W.exports.useLayoutEffect:W.exports.useEffect,Cu=SX;let N3=0;function _X(e){const[t,r]=W.exports.useState(e),i=e||t;return W.exports.useEffect(()=>{t==null&&(N3+=1,r(`mui-${N3}`))},[t]),i}const F3=Sy["useId"];function N5(e){if(F3!==void 0){const t=F3();return e!=null?e:t}return _X(e)}function AX(e,t,r,i,n){return null}function F5({controlled:e,default:t,name:r,state:i="value"}){const{current:n}=W.exports.useRef(e!==void 0),[s,a]=W.exports.useState(t),o=n?e:s,l=W.exports.useCallback(c=>{n||a(c)},[]);return[o,l]}function td(e){const t=W.exports.useRef(e);return Cu(()=>{t.current=e}),W.exports.useCallback((...r)=>(0,t.current)(...r),[])}function Cs(e,t){return W.exports.useMemo(()=>e==null&&t==null?null:r=>{qm(e,r),qm(t,r)},[e,t])}let Px=!0,_A=!1,U3;const MX={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function EX(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&MX[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function CX(e){e.metaKey||e.altKey||e.ctrlKey||(Px=!0)}function uw(){Px=!1}function TX(){this.visibilityState==="hidden"&&_A&&(Px=!0)}function PX(e){e.addEventListener("keydown",CX,!0),e.addEventListener("mousedown",uw,!0),e.addEventListener("pointerdown",uw,!0),e.addEventListener("touchstart",uw,!0),e.addEventListener("visibilitychange",TX,!0)}function DX(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Px||EX(t)}function G2(){const e=W.exports.useCallback(n=>{n!=null&&PX(n.ownerDocument)},[]),t=W.exports.useRef(!1);function r(){return t.current?(_A=!0,window.clearTimeout(U3),U3=window.setTimeout(()=>{_A=!1},100),t.current=!1,!0):!1}function i(n){return DX(n)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:r,ref:e}}function OX(e,t){const r=Ce({},t);return Object.keys(e).forEach(i=>{r[i]===void 0&&(r[i]=e[i])}),r}function ju(e,t,r){const i={};return Object.keys(e).forEach(n=>{i[n]=e[n].reduce((s,a)=>(a&&(r&&r[a]&&s.push(r[a]),s.push(t(a))),s),[]).join(" ")}),i}const j3=e=>e,LX=()=>{let e=j3;return{configure(t){e=t},generate(t){return e(t)},reset(){e=j3}}},IX=LX(),H2=IX,RX={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function yc(e,t,r="Mui"){const i=RX[t];return i?`${r}-${i}`:`${H2.generate(e)}-${t}`}function xc(e,t,r="Mui"){const i={};return t.forEach(n=>{i[n]=yc(e,n,r)}),i}function BX(e){return typeof e=="string"}function Sv(e,t={},r){return BX(e)?t:Ce({},t,{ownerState:Ce({},t.ownerState,r)})}var Tn="top",Rs="bottom",Bs="right",Pn="left",W2="auto",Ig=[Tn,Rs,Bs,Pn],Gd="start",$m="end",kX="clippingParents",U5="viewport",Wp="popper",zX="reference",V3=Ig.reduce(function(e,t){return e.concat([t+"-"+Gd,t+"-"+$m])},[]),j5=[].concat(Ig,[W2]).reduce(function(e,t){return e.concat([t,t+"-"+Gd,t+"-"+$m])},[]),NX="beforeRead",FX="read",UX="afterRead",jX="beforeMain",VX="main",GX="afterMain",HX="beforeWrite",WX="write",qX="afterWrite",$X=[NX,FX,UX,jX,VX,GX,HX,WX,qX];function Ya(e){return e?(e.nodeName||"").toLowerCase():null}function ca(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Hd(e){var t=ca(e).Element;return e instanceof t||e instanceof Element}function Ts(e){var t=ca(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function q2(e){if(typeof ShadowRoot>"u")return!1;var t=ca(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function XX(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},n=t.attributes[r]||{},s=t.elements[r];!Ts(s)||!Ya(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(a){var o=n[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function YX(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var n=t.elements[i],s=t.attributes[i]||{},a=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),o=a.reduce(function(l,c){return l[c]="",l},{});!Ts(n)||!Ya(n)||(Object.assign(n.style,o),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}const QX={name:"applyStyles",enabled:!0,phase:"write",fn:XX,effect:YX,requires:["computeStyles"]};function Ha(e){return e.split("-")[0]}var fu=Math.max,r1=Math.min,Wd=Math.round;function qd(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),i=1,n=1;if(Ts(e)&&t){var s=e.offsetHeight,a=e.offsetWidth;a>0&&(i=Wd(r.width)/a||1),s>0&&(n=Wd(r.height)/s||1)}return{width:r.width/i,height:r.height/n,top:r.top/n,right:r.right/i,bottom:r.bottom/n,left:r.left/i,x:r.left/i,y:r.top/n}}function $2(e){var t=qd(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function V5(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&q2(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Qo(e){return ca(e).getComputedStyle(e)}function KX(e){return["table","td","th"].indexOf(Ya(e))>=0}function bc(e){return((Hd(e)?e.ownerDocument:e.document)||window.document).documentElement}function Dx(e){return Ya(e)==="html"?e:e.assignedSlot||e.parentNode||(q2(e)?e.host:null)||bc(e)}function G3(e){return!Ts(e)||Qo(e).position==="fixed"?null:e.offsetParent}function ZX(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Ts(e)){var i=Qo(e);if(i.position==="fixed")return null}var n=Dx(e);for(q2(n)&&(n=n.host);Ts(n)&&["html","body"].indexOf(Ya(n))<0;){var s=Qo(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function Rg(e){for(var t=ca(e),r=G3(e);r&&KX(r)&&Qo(r).position==="static";)r=G3(r);return r&&(Ya(r)==="html"||Ya(r)==="body"&&Qo(r).position==="static")?t:r||ZX(e)||t}function X2(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function nm(e,t,r){return fu(e,r1(t,r))}function JX(e,t,r){var i=nm(e,t,r);return i>r?r:i}function G5(){return{top:0,right:0,bottom:0,left:0}}function H5(e){return Object.assign({},G5(),e)}function W5(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var eY=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,H5(typeof t!="number"?t:W5(t,Ig))};function tY(e){var t,r=e.state,i=e.name,n=e.options,s=r.elements.arrow,a=r.modifiersData.popperOffsets,o=Ha(r.placement),l=X2(o),c=[Pn,Bs].indexOf(o)>=0,h=c?"height":"width";if(!(!s||!a)){var u=eY(n.padding,r),d=$2(s),p=l==="y"?Tn:Pn,f=l==="y"?Rs:Bs,m=r.rects.reference[h]+r.rects.reference[l]-a[l]-r.rects.popper[h],g=a[l]-r.rects.reference[l],v=Rg(s),y=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,x=m/2-g/2,b=u[p],S=y-d[h]-u[f],w=y/2-d[h]/2+x,A=nm(b,w,S),_=l;r.modifiersData[i]=(t={},t[_]=A,t.centerOffset=A-w,t)}}function rY(e){var t=e.state,r=e.options,i=r.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!V5(t.elements.popper,n)||(t.elements.arrow=n))}const iY={name:"arrow",enabled:!0,phase:"main",fn:tY,effect:rY,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $d(e){return e.split("-")[1]}var nY={top:"auto",right:"auto",bottom:"auto",left:"auto"};function sY(e){var t=e.x,r=e.y,i=window,n=i.devicePixelRatio||1;return{x:Wd(t*n)/n||0,y:Wd(r*n)/n||0}}function H3(e){var t,r=e.popper,i=e.popperRect,n=e.placement,s=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,h=e.roundOffsets,u=e.isFixed,d=a.x,p=d===void 0?0:d,f=a.y,m=f===void 0?0:f,g=typeof h=="function"?h({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),x=Pn,b=Tn,S=window;if(c){var w=Rg(r),A="clientHeight",_="clientWidth";if(w===ca(r)&&(w=bc(r),Qo(w).position!=="static"&&o==="absolute"&&(A="scrollHeight",_="scrollWidth")),w=w,n===Tn||(n===Pn||n===Bs)&&s===$m){b=Rs;var M=u&&w===S&&S.visualViewport?S.visualViewport.height:w[A];m-=M-i.height,m*=l?1:-1}if(n===Pn||(n===Tn||n===Rs)&&s===$m){x=Bs;var E=u&&w===S&&S.visualViewport?S.visualViewport.width:w[_];p-=E-i.width,p*=l?1:-1}}var T=Object.assign({position:o},c&&nY),P=h===!0?sY({x:p,y:m}):{x:p,y:m};if(p=P.x,m=P.y,l){var D;return Object.assign({},T,(D={},D[b]=y?"0":"",D[x]=v?"0":"",D.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",D))}return Object.assign({},T,(t={},t[b]=y?m+"px":"",t[x]=v?p+"px":"",t.transform="",t))}function aY(e){var t=e.state,r=e.options,i=r.gpuAcceleration,n=i===void 0?!0:i,s=r.adaptive,a=s===void 0?!0:s,o=r.roundOffsets,l=o===void 0?!0:o,c={placement:Ha(t.placement),variation:$d(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,H3(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,H3(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const oY={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:aY,data:{}};var _v={passive:!0};function lY(e){var t=e.state,r=e.instance,i=e.options,n=i.scroll,s=n===void 0?!0:n,a=i.resize,o=a===void 0?!0:a,l=ca(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(h){h.addEventListener("scroll",r.update,_v)}),o&&l.addEventListener("resize",r.update,_v),function(){s&&c.forEach(function(h){h.removeEventListener("scroll",r.update,_v)}),o&&l.removeEventListener("resize",r.update,_v)}}const cY={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lY,data:{}};var uY={left:"right",right:"left",bottom:"top",top:"bottom"};function ay(e){return e.replace(/left|right|bottom|top/g,function(t){return uY[t]})}var hY={start:"end",end:"start"};function W3(e){return e.replace(/start|end/g,function(t){return hY[t]})}function Y2(e){var t=ca(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function Q2(e){return qd(bc(e)).left+Y2(e).scrollLeft}function dY(e){var t=ca(e),r=bc(e),i=t.visualViewport,n=r.clientWidth,s=r.clientHeight,a=0,o=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,o=i.offsetTop)),{width:n,height:s,x:a+Q2(e),y:o}}function pY(e){var t,r=bc(e),i=Y2(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=fu(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=fu(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-i.scrollLeft+Q2(e),l=-i.scrollTop;return Qo(n||r).direction==="rtl"&&(o+=fu(r.clientWidth,n?n.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function K2(e){var t=Qo(e),r=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+i)}function q5(e){return["html","body","#document"].indexOf(Ya(e))>=0?e.ownerDocument.body:Ts(e)&&K2(e)?e:q5(Dx(e))}function sm(e,t){var r;t===void 0&&(t=[]);var i=q5(e),n=i===((r=e.ownerDocument)==null?void 0:r.body),s=ca(i),a=n?[s].concat(s.visualViewport||[],K2(i)?i:[]):i,o=t.concat(a);return n?o:o.concat(sm(Dx(a)))}function AA(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function fY(e){var t=qd(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function q3(e,t){return t===U5?AA(dY(e)):Hd(t)?fY(t):AA(pY(bc(e)))}function mY(e){var t=sm(Dx(e)),r=["absolute","fixed"].indexOf(Qo(e).position)>=0,i=r&&Ts(e)?Rg(e):e;return Hd(i)?t.filter(function(n){return Hd(n)&&V5(n,i)&&Ya(n)!=="body"}):[]}function gY(e,t,r){var i=t==="clippingParents"?mY(e):[].concat(t),n=[].concat(i,[r]),s=n[0],a=n.reduce(function(o,l){var c=q3(e,l);return o.top=fu(c.top,o.top),o.right=r1(c.right,o.right),o.bottom=r1(c.bottom,o.bottom),o.left=fu(c.left,o.left),o},q3(e,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function $5(e){var t=e.reference,r=e.element,i=e.placement,n=i?Ha(i):null,s=i?$d(i):null,a=t.x+t.width/2-r.width/2,o=t.y+t.height/2-r.height/2,l;switch(n){case Tn:l={x:a,y:t.y-r.height};break;case Rs:l={x:a,y:t.y+t.height};break;case Bs:l={x:t.x+t.width,y:o};break;case Pn:l={x:t.x-r.width,y:o};break;default:l={x:t.x,y:t.y}}var c=n?X2(n):null;if(c!=null){var h=c==="y"?"height":"width";switch(s){case Gd:l[c]=l[c]-(t[h]/2-r[h]/2);break;case $m:l[c]=l[c]+(t[h]/2-r[h]/2);break}}return l}function Xm(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=i===void 0?e.placement:i,s=r.boundary,a=s===void 0?kX:s,o=r.rootBoundary,l=o===void 0?U5:o,c=r.elementContext,h=c===void 0?Wp:c,u=r.altBoundary,d=u===void 0?!1:u,p=r.padding,f=p===void 0?0:p,m=H5(typeof f!="number"?f:W5(f,Ig)),g=h===Wp?zX:Wp,v=e.rects.popper,y=e.elements[d?g:h],x=gY(Hd(y)?y:y.contextElement||bc(e.elements.popper),a,l),b=qd(e.elements.reference),S=$5({reference:b,element:v,strategy:"absolute",placement:n}),w=AA(Object.assign({},v,S)),A=h===Wp?w:b,_={top:x.top-A.top+m.top,bottom:A.bottom-x.bottom+m.bottom,left:x.left-A.left+m.left,right:A.right-x.right+m.right},M=e.modifiersData.offset;if(h===Wp&&M){var E=M[n];Object.keys(_).forEach(function(T){var P=[Bs,Rs].indexOf(T)>=0?1:-1,D=[Tn,Rs].indexOf(T)>=0?"y":"x";_[T]+=E[D]*P})}return _}function vY(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=r.boundary,s=r.rootBoundary,a=r.padding,o=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?j5:l,h=$d(i),u=h?o?V3:V3.filter(function(f){return $d(f)===h}):Ig,d=u.filter(function(f){return c.indexOf(f)>=0});d.length===0&&(d=u);var p=d.reduce(function(f,m){return f[m]=Xm(e,{placement:m,boundary:n,rootBoundary:s,padding:a})[Ha(m)],f},{});return Object.keys(p).sort(function(f,m){return p[f]-p[m]})}function yY(e){if(Ha(e)===W2)return[];var t=ay(e);return[W3(e),t,W3(t)]}function xY(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var n=r.mainAxis,s=n===void 0?!0:n,a=r.altAxis,o=a===void 0?!0:a,l=r.fallbackPlacements,c=r.padding,h=r.boundary,u=r.rootBoundary,d=r.altBoundary,p=r.flipVariations,f=p===void 0?!0:p,m=r.allowedAutoPlacements,g=t.options.placement,v=Ha(g),y=v===g,x=l||(y||!f?[ay(g)]:yY(g)),b=[g].concat(x).reduce(function(q,X){return q.concat(Ha(X)===W2?vY(t,{placement:X,boundary:h,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:m}):X)},[]),S=t.rects.reference,w=t.rects.popper,A=new Map,_=!0,M=b[0],E=0;E<b.length;E++){var T=b[E],P=Ha(T),D=$d(T)===Gd,L=[Tn,Rs].indexOf(P)>=0,R=L?"width":"height",V=Xm(t,{placement:T,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),F=L?D?Bs:Pn:D?Rs:Tn;S[R]>w[R]&&(F=ay(F));var O=ay(F),k=[];if(s&&k.push(V[P]<=0),o&&k.push(V[F]<=0,V[O]<=0),k.every(function(q){return q})){M=T,_=!1;break}A.set(T,k)}if(_)for(var z=f?3:1,N=function(X){var G=b.find(function(te){var Z=A.get(te);if(Z)return Z.slice(0,X).every(function(Q){return Q})});if(G)return M=G,"break"},j=z;j>0;j--){var Y=N(j);if(Y==="break")break}t.placement!==M&&(t.modifiersData[i]._skip=!0,t.placement=M,t.reset=!0)}}const bY={name:"flip",enabled:!0,phase:"main",fn:xY,requiresIfExists:["offset"],data:{_skip:!1}};function $3(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function X3(e){return[Tn,Bs,Rs,Pn].some(function(t){return e[t]>=0})}function wY(e){var t=e.state,r=e.name,i=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,a=Xm(t,{elementContext:"reference"}),o=Xm(t,{altBoundary:!0}),l=$3(a,i),c=$3(o,n,s),h=X3(l),u=X3(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}const SY={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wY};function _Y(e,t,r){var i=Ha(e),n=[Pn,Tn].indexOf(i)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,a=s[0],o=s[1];return a=a||0,o=(o||0)*n,[Pn,Bs].indexOf(i)>=0?{x:o,y:a}:{x:a,y:o}}function AY(e){var t=e.state,r=e.options,i=e.name,n=r.offset,s=n===void 0?[0,0]:n,a=j5.reduce(function(h,u){return h[u]=_Y(u,t.rects,s),h},{}),o=a[t.placement],l=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=a}const MY={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:AY};function EY(e){var t=e.state,r=e.name;t.modifiersData[r]=$5({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const CY={name:"popperOffsets",enabled:!0,phase:"read",fn:EY,data:{}};function TY(e){return e==="x"?"y":"x"}function PY(e){var t=e.state,r=e.options,i=e.name,n=r.mainAxis,s=n===void 0?!0:n,a=r.altAxis,o=a===void 0?!1:a,l=r.boundary,c=r.rootBoundary,h=r.altBoundary,u=r.padding,d=r.tether,p=d===void 0?!0:d,f=r.tetherOffset,m=f===void 0?0:f,g=Xm(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),v=Ha(t.placement),y=$d(t.placement),x=!y,b=X2(v),S=TY(b),w=t.modifiersData.popperOffsets,A=t.rects.reference,_=t.rects.popper,M=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,E=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(!!w){if(s){var D,L=b==="y"?Tn:Pn,R=b==="y"?Rs:Bs,V=b==="y"?"height":"width",F=w[b],O=F+g[L],k=F-g[R],z=p?-_[V]/2:0,N=y===Gd?A[V]:_[V],j=y===Gd?-_[V]:-A[V],Y=t.elements.arrow,q=p&&Y?$2(Y):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:G5(),G=X[L],te=X[R],Z=nm(0,A[V],q[V]),Q=x?A[V]/2-z-Z-G-E.mainAxis:N-Z-G-E.mainAxis,re=x?-A[V]/2+z+Z+te+E.mainAxis:j+Z+te+E.mainAxis,ae=t.elements.arrow&&Rg(t.elements.arrow),ce=ae?b==="y"?ae.clientTop||0:ae.clientLeft||0:0,pe=(D=T==null?void 0:T[b])!=null?D:0,Te=F+Q-pe-ce,xe=F+re-pe,Ie=nm(p?r1(O,Te):O,F,p?fu(k,xe):k);w[b]=Ie,P[b]=Ie-F}if(o){var Oe,Se=b==="x"?Tn:Pn,be=b==="x"?Rs:Bs,Re=w[S],Be=S==="y"?"height":"width",U=Re+g[Se],I=Re-g[be],ne=[Tn,Pn].indexOf(v)!==-1,ge=(Oe=T==null?void 0:T[S])!=null?Oe:0,ve=ne?U:Re-A[Be]-_[Be]-ge+E.altAxis,Ae=ne?Re+A[Be]+_[Be]-ge-E.altAxis:I,Ne=p&&ne?JX(ve,Re,Ae):nm(p?ve:U,Re,p?Ae:I);w[S]=Ne,P[S]=Ne-Re}t.modifiersData[i]=P}}const DY={name:"preventOverflow",enabled:!0,phase:"main",fn:PY,requiresIfExists:["offset"]};function OY(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function LY(e){return e===ca(e)||!Ts(e)?Y2(e):OY(e)}function IY(e){var t=e.getBoundingClientRect(),r=Wd(t.width)/e.offsetWidth||1,i=Wd(t.height)/e.offsetHeight||1;return r!==1||i!==1}function RY(e,t,r){r===void 0&&(r=!1);var i=Ts(t),n=Ts(t)&&IY(t),s=bc(t),a=qd(e,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((Ya(t)!=="body"||K2(s))&&(o=LY(t)),Ts(t)?(l=qd(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=Q2(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function BY(e){var t=new Map,r=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function n(s){r.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!r.has(o)){var l=t.get(o);l&&n(l)}}),i.push(s)}return e.forEach(function(s){r.has(s.name)||n(s)}),i}function kY(e){var t=BY(e);return $X.reduce(function(r,i){return r.concat(t.filter(function(n){return n.phase===i}))},[])}function zY(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function NY(e){var t=e.reduce(function(r,i){var n=r[i.name];return r[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var Y3={placement:"bottom",modifiers:[],strategy:"absolute"};function Q3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function FY(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,n=t.defaultOptions,s=n===void 0?Y3:n;return function(o,l,c){c===void 0&&(c=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Y3,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},u=[],d=!1,p={state:h,setOptions:function(v){var y=typeof v=="function"?v(h.options):v;m(),h.options=Object.assign({},s,h.options,y),h.scrollParents={reference:Hd(o)?sm(o):o.contextElement?sm(o.contextElement):[],popper:sm(l)};var x=kY(NY([].concat(i,h.options.modifiers)));return h.orderedModifiers=x.filter(function(b){return b.enabled}),f(),p.update()},forceUpdate:function(){if(!d){var v=h.elements,y=v.reference,x=v.popper;if(!!Q3(y,x)){h.rects={reference:RY(y,Rg(x),h.options.strategy==="fixed"),popper:$2(x)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(E){return h.modifiersData[E.name]=Object.assign({},E.data)});for(var b=0;b<h.orderedModifiers.length;b++){if(h.reset===!0){h.reset=!1,b=-1;continue}var S=h.orderedModifiers[b],w=S.fn,A=S.options,_=A===void 0?{}:A,M=S.name;typeof w=="function"&&(h=w({state:h,options:_,name:M,instance:p})||h)}}}},update:zY(function(){return new Promise(function(g){p.forceUpdate(),g(h)})}),destroy:function(){m(),d=!0}};if(!Q3(o,l))return p;p.setOptions(c).then(function(g){!d&&c.onFirstUpdate&&c.onFirstUpdate(g)});function f(){h.orderedModifiers.forEach(function(g){var v=g.name,y=g.options,x=y===void 0?{}:y,b=g.effect;if(typeof b=="function"){var S=b({state:h,name:v,instance:p,options:x}),w=function(){};u.push(S||w)}})}function m(){u.forEach(function(g){return g()}),u=[]}return p}}var UY=[cY,CY,oY,QX,MY,bY,DY,iY,SY],jY=FY({defaultModifiers:UY});function VY(e){return typeof e=="function"?e():e}const GY=W.exports.forwardRef(function(t,r){const{children:i,container:n,disablePortal:s=!1}=t,[a,o]=W.exports.useState(null),l=Cs(W.exports.isValidElement(i)?i.ref:null,r);return Cu(()=>{s||o(VY(n)||document.body)},[n,s]),Cu(()=>{if(a&&!s)return qm(r,a),()=>{qm(r,null)}},[r,a,s]),s?W.exports.isValidElement(i)?W.exports.cloneElement(i,{ref:l}):i:a&&rx.exports.createPortal(i,a)}),HY=GY,WY=["anchorEl","children","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],qY=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function $Y(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function MA(e){return typeof e=="function"?e():e}const XY={},YY=W.exports.forwardRef(function(t,r){const{anchorEl:i,children:n,direction:s,disablePortal:a,modifiers:o,open:l,placement:c,popperOptions:h,popperRef:u,TransitionProps:d}=t,p=pr(t,WY),f=W.exports.useRef(null),m=Cs(f,r),g=W.exports.useRef(null),v=Cs(g,u),y=W.exports.useRef(v);Cu(()=>{y.current=v},[v]),W.exports.useImperativeHandle(u,()=>g.current,[]);const x=$Y(c,s),[b,S]=W.exports.useState(x);W.exports.useEffect(()=>{g.current&&g.current.forceUpdate()}),Cu(()=>{if(!i||!l)return;const A=E=>{S(E.placement)};MA(i);let _=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:E})=>{A(E)}}];o!=null&&(_=_.concat(o)),h&&h.modifiers!=null&&(_=_.concat(h.modifiers));const M=jY(MA(i),f.current,Ce({placement:x},h,{modifiers:_}));return y.current(M),()=>{M.destroy(),y.current(null)}},[i,a,o,l,h,x]);const w={placement:b};return d!==null&&(w.TransitionProps=d),H("div",Ce({ref:m,role:"tooltip"},p,{children:typeof n=="function"?n(w):n}))}),QY=W.exports.forwardRef(function(t,r){const{anchorEl:i,children:n,container:s,direction:a="ltr",disablePortal:o=!1,keepMounted:l=!1,modifiers:c,open:h,placement:u="bottom",popperOptions:d=XY,popperRef:p,style:f,transition:m=!1}=t,g=pr(t,qY),[v,y]=W.exports.useState(!0),x=()=>{y(!1)},b=()=>{y(!0)};if(!l&&!h&&(!m||v))return null;const S=s||(i?V2(MA(i)).body:void 0);return H(HY,{disablePortal:o,container:S,children:H(YY,Ce({anchorEl:i,direction:a,disablePortal:o,modifiers:c,ref:r,open:m?!v:h,placement:u,popperOptions:d,popperRef:p},g,{style:Ce({position:"fixed",top:0,left:0,display:!h&&l&&(!m||v)?"none":null},f),TransitionProps:m?{in:h,onEnter:x,onExited:b}:null,children:n}))})}),KY=QY;function X5(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var ZY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,JY=X5(function(e){return ZY.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function eQ(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function tQ(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var rQ=function(){function e(r){var i=this;this._insertTag=function(n){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(n,s),i.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(tQ(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=eQ(n);try{s.insertRule(i,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),Ri="-ms-",i1="-moz-",jt="-webkit-",Y5="comm",Z2="rule",J2="decl",iQ="@import",Q5="@keyframes",nQ="@layer",sQ=Math.abs,Ox=String.fromCharCode,aQ=Object.assign;function oQ(e,t){return Ai(e,0)^45?(((t<<2^Ai(e,0))<<2^Ai(e,1))<<2^Ai(e,2))<<2^Ai(e,3):0}function K5(e){return e.trim()}function lQ(e,t){return(e=t.exec(e))?e[0]:e}function Vt(e,t,r){return e.replace(t,r)}function EA(e,t){return e.indexOf(t)}function Ai(e,t){return e.charCodeAt(t)|0}function Ym(e,t,r){return e.slice(t,r)}function Pa(e){return e.length}function eC(e){return e.length}function Av(e,t){return t.push(e),e}function cQ(e,t){return e.map(t).join("")}var Lx=1,Xd=1,Z5=0,In=0,jr=0,fp="";function Ix(e,t,r,i,n,s,a){return{value:e,root:t,parent:r,type:i,props:n,children:s,line:Lx,column:Xd,length:a,return:""}}function qp(e,t){return aQ(Ix("",null,null,"",null,null,0),e,{length:-e.length},t)}function uQ(){return jr}function hQ(){return jr=In>0?Ai(fp,--In):0,Xd--,jr===10&&(Xd=1,Lx--),jr}function ts(){return jr=In<Z5?Ai(fp,In++):0,Xd++,jr===10&&(Xd=1,Lx++),jr}function Wa(){return Ai(fp,In)}function oy(){return In}function Bg(e,t){return Ym(fp,e,t)}function Qm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function J5(e){return Lx=Xd=1,Z5=Pa(fp=e),In=0,[]}function eF(e){return fp="",e}function ly(e){return K5(Bg(In-1,CA(e===91?e+2:e===40?e+1:e)))}function dQ(e){for(;(jr=Wa())&&jr<33;)ts();return Qm(e)>2||Qm(jr)>3?"":" "}function pQ(e,t){for(;--t&&ts()&&!(jr<48||jr>102||jr>57&&jr<65||jr>70&&jr<97););return Bg(e,oy()+(t<6&&Wa()==32&&ts()==32))}function CA(e){for(;ts();)switch(jr){case e:return In;case 34:case 39:e!==34&&e!==39&&CA(jr);break;case 40:e===41&&CA(e);break;case 92:ts();break}return In}function fQ(e,t){for(;ts()&&e+jr!==47+10;)if(e+jr===42+42&&Wa()===47)break;return"/*"+Bg(t,In-1)+"*"+Ox(e===47?e:ts())}function mQ(e){for(;!Qm(Wa());)ts();return Bg(e,In)}function gQ(e){return eF(cy("",null,null,null,[""],e=J5(e),0,[0],e))}function cy(e,t,r,i,n,s,a,o,l){for(var c=0,h=0,u=a,d=0,p=0,f=0,m=1,g=1,v=1,y=0,x="",b=n,S=s,w=i,A=x;g;)switch(f=y,y=ts()){case 40:if(f!=108&&Ai(A,u-1)==58){EA(A+=Vt(ly(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:A+=ly(y);break;case 9:case 10:case 13:case 32:A+=dQ(f);break;case 92:A+=pQ(oy()-1,7);continue;case 47:switch(Wa()){case 42:case 47:Av(vQ(fQ(ts(),oy()),t,r),l);break;default:A+="/"}break;case 123*m:o[c++]=Pa(A)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+h:v==-1&&(A=Vt(A,/\f/g,"")),p>0&&Pa(A)-u&&Av(p>32?Z3(A+";",i,r,u-1):Z3(Vt(A," ","")+";",i,r,u-2),l);break;case 59:A+=";";default:if(Av(w=K3(A,t,r,c,h,n,o,x,b=[],S=[],u),s),y===123)if(h===0)cy(A,t,w,w,b,s,u,o,S);else switch(d===99&&Ai(A,3)===110?100:d){case 100:case 108:case 109:case 115:cy(e,w,w,i&&Av(K3(e,w,w,0,0,n,o,x,n,b=[],u),S),n,S,u,o,i?b:S);break;default:cy(A,w,w,w,[""],S,0,o,S)}}c=h=p=0,m=v=1,x=A="",u=a;break;case 58:u=1+Pa(A),p=f;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&hQ()==125)continue}switch(A+=Ox(y),y*m){case 38:v=h>0?1:(A+="\f",-1);break;case 44:o[c++]=(Pa(A)-1)*v,v=1;break;case 64:Wa()===45&&(A+=ly(ts())),d=Wa(),h=u=Pa(x=A+=mQ(oy())),y++;break;case 45:f===45&&Pa(A)==2&&(m=0)}}return s}function K3(e,t,r,i,n,s,a,o,l,c,h){for(var u=n-1,d=n===0?s:[""],p=eC(d),f=0,m=0,g=0;f<i;++f)for(var v=0,y=Ym(e,u+1,u=sQ(m=a[f])),x=e;v<p;++v)(x=K5(m>0?d[v]+" "+y:Vt(y,/&\f/g,d[v])))&&(l[g++]=x);return Ix(e,t,r,n===0?Z2:o,l,c,h)}function vQ(e,t,r){return Ix(e,t,r,Y5,Ox(uQ()),Ym(e,2,-2),0)}function Z3(e,t,r,i){return Ix(e,t,r,J2,Ym(e,0,i),Ym(e,i+1,-1),i)}function gd(e,t){for(var r="",i=eC(e),n=0;n<i;n++)r+=t(e[n],n,e,t)||"";return r}function yQ(e,t,r,i){switch(e.type){case nQ:if(e.children.length)break;case iQ:case J2:return e.return=e.return||e.value;case Y5:return"";case Q5:return e.return=e.value+"{"+gd(e.children,i)+"}";case Z2:e.value=e.props.join(",")}return Pa(r=gd(e.children,i))?e.return=e.value+"{"+r+"}":""}function xQ(e){var t=eC(e);return function(r,i,n,s){for(var a="",o=0;o<t;o++)a+=e[o](r,i,n,s)||"";return a}}function bQ(e){return function(t){t.root||(t=t.return)&&e(t)}}var wQ=function(t,r,i){for(var n=0,s=0;n=s,s=Wa(),n===38&&s===12&&(r[i]=1),!Qm(s);)ts();return Bg(t,In)},SQ=function(t,r){var i=-1,n=44;do switch(Qm(n)){case 0:n===38&&Wa()===12&&(r[i]=1),t[i]+=wQ(In-1,r,i);break;case 2:t[i]+=ly(n);break;case 4:if(n===44){t[++i]=Wa()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=Ox(n)}while(n=ts());return t},_Q=function(t,r){return eF(SQ(J5(t),r))},J3=new WeakMap,AQ=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,n=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!J3.get(i))&&!n){J3.set(t,!0);for(var s=[],a=_Q(r,s),o=i.props,l=0,c=0;l<a.length;l++)for(var h=0;h<o.length;h++,c++)t.props[c]=s[l]?a[l].replace(/&\f/g,o[h]):o[h]+" "+a[l]}}},MQ=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function tF(e,t){switch(oQ(e,t)){case 5103:return jt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return jt+e+i1+e+Ri+e+e;case 6828:case 4268:return jt+e+Ri+e+e;case 6165:return jt+e+Ri+"flex-"+e+e;case 5187:return jt+e+Vt(e,/(\w+).+(:[^]+)/,jt+"box-$1$2"+Ri+"flex-$1$2")+e;case 5443:return jt+e+Ri+"flex-item-"+Vt(e,/flex-|-self/,"")+e;case 4675:return jt+e+Ri+"flex-line-pack"+Vt(e,/align-content|flex-|-self/,"")+e;case 5548:return jt+e+Ri+Vt(e,"shrink","negative")+e;case 5292:return jt+e+Ri+Vt(e,"basis","preferred-size")+e;case 6060:return jt+"box-"+Vt(e,"-grow","")+jt+e+Ri+Vt(e,"grow","positive")+e;case 4554:return jt+Vt(e,/([^-])(transform)/g,"$1"+jt+"$2")+e;case 6187:return Vt(Vt(Vt(e,/(zoom-|grab)/,jt+"$1"),/(image-set)/,jt+"$1"),e,"")+e;case 5495:case 3959:return Vt(e,/(image-set\([^]*)/,jt+"$1$`$1");case 4968:return Vt(Vt(e,/(.+:)(flex-)?(.*)/,jt+"box-pack:$3"+Ri+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jt+e+e;case 4095:case 3583:case 4068:case 2532:return Vt(e,/(.+)-inline(.+)/,jt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pa(e)-1-t>6)switch(Ai(e,t+1)){case 109:if(Ai(e,t+4)!==45)break;case 102:return Vt(e,/(.+:)(.+)-([^]+)/,"$1"+jt+"$2-$3$1"+i1+(Ai(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~EA(e,"stretch")?tF(Vt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ai(e,t+1)!==115)break;case 6444:switch(Ai(e,Pa(e)-3-(~EA(e,"!important")&&10))){case 107:return Vt(e,":",":"+jt)+e;case 101:return Vt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jt+(Ai(e,14)===45?"inline-":"")+"box$3$1"+jt+"$2$3$1"+Ri+"$2box$3")+e}break;case 5936:switch(Ai(e,t+11)){case 114:return jt+e+Ri+Vt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return jt+e+Ri+Vt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return jt+e+Ri+Vt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return jt+e+Ri+e+e}return e}var EQ=function(t,r,i,n){if(t.length>-1&&!t.return)switch(t.type){case J2:t.return=tF(t.value,t.length);break;case Q5:return gd([qp(t,{value:Vt(t.value,"@","@"+jt)})],n);case Z2:if(t.length)return cQ(t.props,function(s){switch(lQ(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gd([qp(t,{props:[Vt(s,/:(read-\w+)/,":"+i1+"$1")]})],n);case"::placeholder":return gd([qp(t,{props:[Vt(s,/:(plac\w+)/,":"+jt+"input-$1")]}),qp(t,{props:[Vt(s,/:(plac\w+)/,":"+i1+"$1")]}),qp(t,{props:[Vt(s,/:(plac\w+)/,Ri+"input-$1")]})],n)}return""})}},CQ=[EQ],TQ=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var n=t.stylisPlugins||CQ,s={},a,o=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)s[g[v]]=!0;o.push(m)});var l,c=[AQ,MQ];{var h,u=[yQ,bQ(function(m){h.insert(m)})],d=xQ(c.concat(n,u)),p=function(g){return gd(gQ(g),d)};l=function(g,v,y,x){h=y,p(g?g+"{"+v.styles+"}":v.styles),x&&(f.inserted[v.name]=!0)}}var f={key:r,sheet:new rQ({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return f.sheet.hydrate(o),f},rF={exports:{}},Qt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=typeof Symbol=="function"&&Symbol.for,tC=vi?Symbol.for("react.element"):60103,rC=vi?Symbol.for("react.portal"):60106,Rx=vi?Symbol.for("react.fragment"):60107,Bx=vi?Symbol.for("react.strict_mode"):60108,kx=vi?Symbol.for("react.profiler"):60114,zx=vi?Symbol.for("react.provider"):60109,Nx=vi?Symbol.for("react.context"):60110,iC=vi?Symbol.for("react.async_mode"):60111,Fx=vi?Symbol.for("react.concurrent_mode"):60111,Ux=vi?Symbol.for("react.forward_ref"):60112,jx=vi?Symbol.for("react.suspense"):60113,PQ=vi?Symbol.for("react.suspense_list"):60120,Vx=vi?Symbol.for("react.memo"):60115,Gx=vi?Symbol.for("react.lazy"):60116,DQ=vi?Symbol.for("react.block"):60121,OQ=vi?Symbol.for("react.fundamental"):60117,LQ=vi?Symbol.for("react.responder"):60118,IQ=vi?Symbol.for("react.scope"):60119;function ls(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tC:switch(e=e.type,e){case iC:case Fx:case Rx:case kx:case Bx:case jx:return e;default:switch(e=e&&e.$$typeof,e){case Nx:case Ux:case Gx:case Vx:case zx:return e;default:return t}}case rC:return t}}}function iF(e){return ls(e)===Fx}Qt.AsyncMode=iC;Qt.ConcurrentMode=Fx;Qt.ContextConsumer=Nx;Qt.ContextProvider=zx;Qt.Element=tC;Qt.ForwardRef=Ux;Qt.Fragment=Rx;Qt.Lazy=Gx;Qt.Memo=Vx;Qt.Portal=rC;Qt.Profiler=kx;Qt.StrictMode=Bx;Qt.Suspense=jx;Qt.isAsyncMode=function(e){return iF(e)||ls(e)===iC};Qt.isConcurrentMode=iF;Qt.isContextConsumer=function(e){return ls(e)===Nx};Qt.isContextProvider=function(e){return ls(e)===zx};Qt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tC};Qt.isForwardRef=function(e){return ls(e)===Ux};Qt.isFragment=function(e){return ls(e)===Rx};Qt.isLazy=function(e){return ls(e)===Gx};Qt.isMemo=function(e){return ls(e)===Vx};Qt.isPortal=function(e){return ls(e)===rC};Qt.isProfiler=function(e){return ls(e)===kx};Qt.isStrictMode=function(e){return ls(e)===Bx};Qt.isSuspense=function(e){return ls(e)===jx};Qt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Rx||e===Fx||e===kx||e===Bx||e===jx||e===PQ||typeof e=="object"&&e!==null&&(e.$$typeof===Gx||e.$$typeof===Vx||e.$$typeof===zx||e.$$typeof===Nx||e.$$typeof===Ux||e.$$typeof===OQ||e.$$typeof===LQ||e.$$typeof===IQ||e.$$typeof===DQ)};Qt.typeOf=ls;(function(e){e.exports=Qt})(rF);var nF=rF.exports,RQ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},BQ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sF={};sF[nF.ForwardRef]=RQ;sF[nF.Memo]=BQ;var kQ=!0;function zQ(e,t,r){var i="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):i+=n+" "}),i}var aF=function(t,r,i){var n=t.key+"-"+r.name;(i===!1||kQ===!1)&&t.registered[n]===void 0&&(t.registered[n]=r.styles)},NQ=function(t,r,i){aF(t,r,i);var n=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+n:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function FQ(e){for(var t=0,r,i=0,n=e.length;n>=4;++i,n-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var UQ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jQ=/[A-Z]|^ms/g,VQ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,oF=function(t){return t.charCodeAt(1)===45},eO=function(t){return t!=null&&typeof t!="boolean"},hw=X5(function(e){return oF(e)?e:e.replace(jQ,"-$&").toLowerCase()}),tO=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(VQ,function(i,n,s){return Da={name:n,styles:s,next:Da},n})}return UQ[t]!==1&&!oF(t)&&typeof r=="number"&&r!==0?r+"px":r};function Km(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Da={name:r.name,styles:r.styles,next:Da},r.name;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)Da={name:i.name,styles:i.styles,next:Da},i=i.next;var n=r.styles+";";return n}return GQ(e,t,r)}case"function":{if(e!==void 0){var s=Da,a=r(e);return Da=s,Km(e,t,a)}break}}if(t==null)return r;var o=t[r];return o!==void 0?o:r}function GQ(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=Km(e,t,r[n])+";";else for(var s in r){var a=r[s];if(typeof a!="object")t!=null&&t[a]!==void 0?i+=s+"{"+t[a]+"}":eO(a)&&(i+=hw(s)+":"+tO(s,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var o=0;o<a.length;o++)eO(a[o])&&(i+=hw(s)+":"+tO(s,a[o])+";");else{var l=Km(e,t,a);switch(s){case"animation":case"animationName":{i+=hw(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var rO=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Da,lF=function(t,r,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,s="";Da=void 0;var a=t[0];a==null||a.raw===void 0?(n=!1,s+=Km(i,r,a)):s+=a[0];for(var o=1;o<t.length;o++)s+=Km(i,r,t[o]),n&&(s+=a[o]);rO.lastIndex=0;for(var l="",c;(c=rO.exec(s))!==null;)l+="-"+c[1];var h=FQ(s)+l;return{name:h,styles:s,next:Da}},HQ=function(t){return t()},WQ=Sy["useInsertionEffect"]?Sy["useInsertionEffect"]:!1,qQ=WQ||HQ,cF=W.exports.createContext(typeof HTMLElement<"u"?TQ({key:"css"}):null);cF.Provider;var $Q=function(t){return W.exports.forwardRef(function(r,i){var n=W.exports.useContext(cF);return t(r,n,i)})},XQ=W.exports.createContext({});function TA(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return lF(t)}var kg=function(){var t=TA.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},YQ=JY,QQ=function(t){return t!=="theme"},iO=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?YQ:QQ},nO=function(t,r,i){var n;if(r){var s=r.shouldForwardProp;n=t.__emotion_forwardProp&&s?function(a){return t.__emotion_forwardProp(a)&&s(a)}:s}return typeof n!="function"&&i&&(n=t.__emotion_forwardProp),n},KQ=function(t){var r=t.cache,i=t.serialized,n=t.isStringTag;return aF(r,i,n),qQ(function(){return NQ(r,i,n)}),null},ZQ=function e(t,r){var i=t.__emotion_real===t,n=i&&t.__emotion_base||t,s,a;r!==void 0&&(s=r.label,a=r.target);var o=nO(t,r,i),l=o||iO(n),c=!l("as");return function(){var h=arguments,u=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&u.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)u.push.apply(u,h);else{u.push(h[0][0]);for(var d=h.length,p=1;p<d;p++)u.push(h[p],h[0][p])}var f=$Q(function(m,g,v){var y=c&&m.as||n,x="",b=[],S=m;if(m.theme==null){S={};for(var w in m)S[w]=m[w];S.theme=W.exports.useContext(XQ)}typeof m.className=="string"?x=zQ(g.registered,b,m.className):m.className!=null&&(x=m.className+" ");var A=lF(u.concat(b),g.registered,S);x+=g.key+"-"+A.name,a!==void 0&&(x+=" "+a);var _=c&&o===void 0?iO(y):l,M={};for(var E in m)c&&E==="as"||_(E)&&(M[E]=m[E]);return M.className=x,M.ref=v,Me(on,{children:[H(KQ,{cache:g,serialized:A,isStringTag:typeof y=="string"}),H(y,{...M})]})});return f.displayName=s!==void 0?s:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",f.defaultProps=t.defaultProps,f.__emotion_real=f,f.__emotion_base=n,f.__emotion_styles=u,f.__emotion_forwardProp=o,Object.defineProperty(f,"toString",{value:function(){return"."+a}}),f.withComponent=function(m,g){return e(m,Ce({},r,g,{shouldForwardProp:nO(f,g,!0)})).apply(void 0,u)},f}},JQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],PA=ZQ.bind();JQ.forEach(function(e){PA[e]=PA(e)});/** @license MUI v5.8.7
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function uF(e,t){return PA(e,t)}function am(e,t){return t?Uo(e,t,{clone:!1}):e}const nC={xs:0,sm:600,md:900,lg:1200,xl:1536},sO={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${nC[e]}px)`};function wc(e,t,r){const i=e.theme||{};if(Array.isArray(t)){const s=i.breakpoints||sO;return t.reduce((a,o,l)=>(a[s.up(s.keys[l])]=r(t[l]),a),{})}if(typeof t=="object"){const s=i.breakpoints||sO;return Object.keys(t).reduce((a,o)=>{if(Object.keys(s.values||nC).indexOf(o)!==-1){const l=s.up(o);a[l]=r(t[o],o)}else{const l=o;a[l]=t[l]}return a},{})}return r(t)}function eK(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,n)=>{const s=e.up(n);return i[s]={},i},{}))||{}}function tK(e,t){return e.reduce((r,i)=>{const n=r[i];return(!n||Object.keys(n).length===0)&&delete r[i],r},t)}function sC(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const i=`vars.${t}`.split(".").reduce((n,s)=>n&&n[s]?n[s]:null,e);if(i!=null)return i}return t.split(".").reduce((i,n)=>i&&i[n]!=null?i[n]:null,e)}function aO(e,t,r,i=r){let n;return typeof e=="function"?n=e(r):Array.isArray(e)?n=e[r]||i:n=sC(e,r)||i,t&&(n=t(n)),n}function qe(e){const{prop:t,cssProperty:r=e.prop,themeKey:i,transform:n}=e,s=a=>{if(a[t]==null)return null;const o=a[t],l=a.theme,c=sC(l,i)||{};return wc(a,o,u=>{let d=aO(c,n,u);return u===d&&typeof u=="string"&&(d=aO(c,n,`${t}${u==="default"?"":Zr(u)}`,u)),r===!1?d:{[r]:d}})};return s.propTypes={},s.filterProps=[t],s}function Sc(...e){const t=e.reduce((i,n)=>(n.filterProps.forEach(s=>{i[s]=n}),i),{}),r=i=>Object.keys(i).reduce((n,s)=>t[s]?am(n,t[s](i)):n,{});return r.propTypes={},r.filterProps=e.reduce((i,n)=>i.concat(n.filterProps),[]),r}function rK(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const iK={m:"margin",p:"padding"},nK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},oO={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},sK=rK(e=>{if(e.length>2)if(oO[e])e=oO[e];else return[e];const[t,r]=e.split(""),i=iK[t],n=nK[r]||"";return Array.isArray(n)?n.map(s=>i+s):[i+n]}),aK=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],oK=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],hF=[...aK,...oK];function zg(e,t,r,i){var n;const s=(n=sC(e,t,!1))!=null?n:r;return typeof s=="number"?a=>typeof a=="string"?a:s*a:Array.isArray(s)?a=>typeof a=="string"?a:s[a]:typeof s=="function"?s:()=>{}}function dF(e){return zg(e,"spacing",8)}function Ng(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),i=e(r);return t>=0?i:typeof i=="number"?-i:`-${i}`}function lK(e,t){return r=>e.reduce((i,n)=>(i[n]=Ng(t,r),i),{})}function cK(e,t,r,i){if(t.indexOf(r)===-1)return null;const n=sK(r),s=lK(n,i),a=e[r];return wc(e,a,s)}function uK(e,t){const r=dF(e.theme);return Object.keys(e).map(i=>cK(e,t,i,r)).reduce(am,{})}function Hx(e){return uK(e,hF)}Hx.propTypes={};Hx.filterProps=hF;function Fg(e){return typeof e!="number"?e:`${e}px solid`}const hK=qe({prop:"border",themeKey:"borders",transform:Fg}),dK=qe({prop:"borderTop",themeKey:"borders",transform:Fg}),pK=qe({prop:"borderRight",themeKey:"borders",transform:Fg}),fK=qe({prop:"borderBottom",themeKey:"borders",transform:Fg}),mK=qe({prop:"borderLeft",themeKey:"borders",transform:Fg}),gK=qe({prop:"borderColor",themeKey:"palette"}),vK=qe({prop:"borderTopColor",themeKey:"palette"}),yK=qe({prop:"borderRightColor",themeKey:"palette"}),xK=qe({prop:"borderBottomColor",themeKey:"palette"}),bK=qe({prop:"borderLeftColor",themeKey:"palette"}),aC=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=zg(e.theme,"shape.borderRadius",4),r=i=>({borderRadius:Ng(t,i)});return wc(e,e.borderRadius,r)}return null};aC.propTypes={};aC.filterProps=["borderRadius"];const wK=Sc(hK,dK,pK,fK,mK,gK,vK,yK,xK,bK,aC),pF=wK,SK=qe({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),_K=qe({prop:"display"}),AK=qe({prop:"overflow"}),MK=qe({prop:"textOverflow"}),EK=qe({prop:"visibility"}),CK=qe({prop:"whiteSpace"}),fF=Sc(SK,_K,AK,MK,EK,CK),TK=qe({prop:"flexBasis"}),PK=qe({prop:"flexDirection"}),DK=qe({prop:"flexWrap"}),OK=qe({prop:"justifyContent"}),LK=qe({prop:"alignItems"}),IK=qe({prop:"alignContent"}),RK=qe({prop:"order"}),BK=qe({prop:"flex"}),kK=qe({prop:"flexGrow"}),zK=qe({prop:"flexShrink"}),NK=qe({prop:"alignSelf"}),FK=qe({prop:"justifyItems"}),UK=qe({prop:"justifySelf"}),jK=Sc(TK,PK,DK,OK,LK,IK,RK,BK,kK,zK,NK,FK,UK),mF=jK,oC=e=>{if(e.gap!==void 0&&e.gap!==null){const t=zg(e.theme,"spacing",8),r=i=>({gap:Ng(t,i)});return wc(e,e.gap,r)}return null};oC.propTypes={};oC.filterProps=["gap"];const lC=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=zg(e.theme,"spacing",8),r=i=>({columnGap:Ng(t,i)});return wc(e,e.columnGap,r)}return null};lC.propTypes={};lC.filterProps=["columnGap"];const cC=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=zg(e.theme,"spacing",8),r=i=>({rowGap:Ng(t,i)});return wc(e,e.rowGap,r)}return null};cC.propTypes={};cC.filterProps=["rowGap"];const VK=qe({prop:"gridColumn"}),GK=qe({prop:"gridRow"}),HK=qe({prop:"gridAutoFlow"}),WK=qe({prop:"gridAutoColumns"}),qK=qe({prop:"gridAutoRows"}),$K=qe({prop:"gridTemplateColumns"}),XK=qe({prop:"gridTemplateRows"}),YK=qe({prop:"gridTemplateAreas"}),QK=qe({prop:"gridArea"}),KK=Sc(oC,lC,cC,VK,GK,HK,WK,qK,$K,XK,YK,QK),gF=KK,ZK=qe({prop:"color",themeKey:"palette"}),JK=qe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),eZ=qe({prop:"backgroundColor",themeKey:"palette"}),tZ=Sc(ZK,JK,eZ),vF=tZ,rZ=qe({prop:"position"}),iZ=qe({prop:"zIndex",themeKey:"zIndex"}),nZ=qe({prop:"top"}),sZ=qe({prop:"right"}),aZ=qe({prop:"bottom"}),oZ=qe({prop:"left"}),yF=Sc(rZ,iZ,nZ,sZ,aZ,oZ),lZ=qe({prop:"boxShadow",themeKey:"shadows"}),xF=lZ;function _c(e){return e<=1&&e!==0?`${e*100}%`:e}const cZ=qe({prop:"width",transform:_c}),bF=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var i,n,s;return{maxWidth:((i=e.theme)==null||(n=i.breakpoints)==null||(s=n.values)==null?void 0:s[r])||nC[r]||_c(r)}};return wc(e,e.maxWidth,t)}return null};bF.filterProps=["maxWidth"];const uZ=qe({prop:"minWidth",transform:_c}),hZ=qe({prop:"height",transform:_c}),dZ=qe({prop:"maxHeight",transform:_c}),pZ=qe({prop:"minHeight",transform:_c});qe({prop:"size",cssProperty:"width",transform:_c});qe({prop:"size",cssProperty:"height",transform:_c});const fZ=qe({prop:"boxSizing"}),mZ=Sc(cZ,bF,uZ,hZ,dZ,pZ,fZ),wF=mZ,gZ=qe({prop:"fontFamily",themeKey:"typography"}),vZ=qe({prop:"fontSize",themeKey:"typography"}),yZ=qe({prop:"fontStyle",themeKey:"typography"}),xZ=qe({prop:"fontWeight",themeKey:"typography"}),bZ=qe({prop:"letterSpacing"}),wZ=qe({prop:"textTransform"}),SZ=qe({prop:"lineHeight"}),_Z=qe({prop:"textAlign"}),AZ=qe({prop:"typography",cssProperty:!1,themeKey:"typography"}),MZ=Sc(AZ,gZ,vZ,yZ,xZ,bZ,SZ,_Z,wZ),SF=MZ,lO={borders:pF.filterProps,display:fF.filterProps,flexbox:mF.filterProps,grid:gF.filterProps,positions:yF.filterProps,palette:vF.filterProps,shadows:xF.filterProps,sizing:wF.filterProps,spacing:Hx.filterProps,typography:SF.filterProps},_F={borders:pF,display:fF,flexbox:mF,grid:gF,positions:yF,palette:vF,shadows:xF,sizing:wF,spacing:Hx,typography:SF},EZ=Object.keys(lO).reduce((e,t)=>(lO[t].forEach(r=>{e[r]=_F[t]}),e),{});function CZ(...e){const t=e.reduce((i,n)=>i.concat(Object.keys(n)),[]),r=new Set(t);return e.every(i=>r.size===Object.keys(i).length)}function TZ(e,t){return typeof e=="function"?e(t):e}function PZ(e=_F){const t=Object.keys(e).reduce((n,s)=>(e[s].filterProps.forEach(a=>{n[a]=e[s]}),n),{});function r(n,s,a){const o={[n]:s,theme:a},l=t[n];return l?l(o):{[n]:s}}function i(n){const{sx:s,theme:a={}}=n||{};if(!s)return null;function o(l){let c=l;if(typeof l=="function")c=l(a);else if(typeof l!="object")return l;if(!c)return null;const h=eK(a.breakpoints),u=Object.keys(h);let d=h;return Object.keys(c).forEach(p=>{const f=TZ(c[p],a);if(f!=null)if(typeof f=="object")if(t[p])d=am(d,r(p,f,a));else{const m=wc({theme:a},f,g=>({[p]:g}));CZ(m,f)?d[p]=i({sx:f,theme:a}):d=am(d,m)}else d=am(d,r(p,f,a))}),tK(u,d)}return Array.isArray(s)?s.map(o):o(s)}return i}const AF=PZ();AF.filterProps=["sx"];const MF=AF,DZ=["sx"],OZ=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(r=>{EZ[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]}),t};function EF(e){const{sx:t}=e,r=pr(e,DZ),{systemProps:i,otherProps:n}=OZ(r);let s;return Array.isArray(t)?s=[i,...t]:typeof t=="function"?s=(...a)=>{const o=t(...a);return If(o)?Ce({},i,o):i}:s=Ce({},i,t),Ce({},n,{sx:s})}const LZ=["values","unit","step"],IZ=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,i)=>r.val-i.val),t.reduce((r,i)=>Ce({},r,{[i.key]:i.val}),{})};function RZ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:i=5}=e,n=pr(e,LZ),s=IZ(t),a=Object.keys(s);function o(d){return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${r})`}function l(d){return`@media (max-width:${(typeof t[d]=="number"?t[d]:d)-i/100}${r})`}function c(d,p){const f=a.indexOf(p);return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${r}) and (max-width:${(f!==-1&&typeof t[a[f]]=="number"?t[a[f]]:p)-i/100}${r})`}function h(d){return a.indexOf(d)+1<a.length?c(d,a[a.indexOf(d)+1]):o(d)}function u(d){const p=a.indexOf(d);return p===0?o(a[1]):p===a.length-1?l(a[p]):c(d,a[a.indexOf(d)+1]).replace("@media","@media not all and")}return Ce({keys:a,values:s,up:o,down:l,between:c,only:h,not:u,unit:r},n)}const BZ={borderRadius:4},kZ=BZ;function zZ(e=8){if(e.mui)return e;const t=dF({spacing:e}),r=(...i)=>(i.length===0?[1]:i).map(s=>{const a=t(s);return typeof a=="number"?`${a}px`:a}).join(" ");return r.mui=!0,r}const NZ=["breakpoints","palette","spacing","shape"];function uC(e={},...t){const{breakpoints:r={},palette:i={},spacing:n,shape:s={}}=e,a=pr(e,NZ),o=RZ(r),l=zZ(n);let c=Uo({breakpoints:o,direction:"ltr",components:{},palette:Ce({mode:"light"},i),spacing:l,shape:Ce({},kZ,s)},a);return c=t.reduce((h,u)=>Uo(h,u),c),c}const FZ=W.exports.createContext(null),UZ=FZ;function jZ(){return W.exports.useContext(UZ)}function VZ(e){return Object.keys(e).length===0}function hC(e=null){const t=jZ();return!t||VZ(t)?e:t}const GZ=uC();function dC(e=GZ){return hC(e)}const HZ=["className","component"];function WZ(e={}){const{defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i,styleFunctionSx:n=MF}=e,s=uF("div")(n);return W.exports.forwardRef(function(l,c){const h=dC(t),u=EF(l),{className:d,component:p="div"}=u,f=pr(u,HZ);return H(s,Ce({as:p,ref:c,className:Ur(d,i?i(r):r),theme:h},f))})}const qZ=["variant"];function cO(e){return e.length===0}function CF(e){const{variant:t}=e,r=pr(e,qZ);let i=t||"";return Object.keys(r).sort().forEach(n=>{n==="color"?i+=cO(i)?e[n]:Zr(e[n]):i+=`${cO(i)?n:Zr(n)}${Zr(e[n].toString())}`}),i}const $Z=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],XZ=["theme"],YZ=["theme"];function $p(e){return Object.keys(e).length===0}const QZ=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,KZ=(e,t)=>{let r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);const i={};return r.forEach(n=>{const s=CF(n.props);i[s]=n.style}),i},ZZ=(e,t,r,i)=>{var n,s;const{ownerState:a={}}=e,o=[],l=r==null||(n=r.components)==null||(s=n[i])==null?void 0:s.variants;return l&&l.forEach(c=>{let h=!0;Object.keys(c.props).forEach(u=>{a[u]!==c.props[u]&&e[u]!==c.props[u]&&(h=!1)}),h&&o.push(t[CF(c.props)])}),o};function uy(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const JZ=uC();function eJ(e={}){const{defaultTheme:t=JZ,rootShouldForwardProp:r=uy,slotShouldForwardProp:i=uy,styleFunctionSx:n=MF}=e;return(s,a={})=>{const{name:o,slot:l,skipVariantsResolver:c,skipSx:h,overridesResolver:u}=a,d=pr(a,$Z),p=c!==void 0?c:l&&l!=="Root"||!1,f=h||!1;let m,g=uy;l==="Root"?g=r:l&&(g=i);const v=uF(s,Ce({shouldForwardProp:g,label:m},d)),y=(x,...b)=>{const S=b?b.map(M=>typeof M=="function"&&M.__emotion_real!==M?E=>{let{theme:T}=E,P=pr(E,XZ);return M(Ce({theme:$p(T)?t:T},P))}:M):[];let w=x;o&&u&&S.push(M=>{const E=$p(M.theme)?t:M.theme,T=QZ(o,E);if(T){const P={};return Object.entries(T).forEach(([D,L])=>{P[D]=typeof L=="function"?L(Ce({},M,{theme:E})):L}),u(M,P)}return null}),o&&!p&&S.push(M=>{const E=$p(M.theme)?t:M.theme;return ZZ(M,KZ(o,E),E,o)}),f||S.push(M=>{const E=$p(M.theme)?t:M.theme;return n(Ce({},M,{theme:E}))});const A=S.length-b.length;if(Array.isArray(x)&&A>0){const M=new Array(A).fill("");w=[...x,...M],w.raw=[...x.raw,...M]}else typeof x=="function"&&x.__emotion_real!==x&&(w=M=>{let{theme:E}=M,T=pr(M,YZ);return x(Ce({theme:$p(E)?t:E},T))});return v(w,...S)};return v.withConfig&&(y.withConfig=v.withConfig),y}}function TF(e){const{theme:t,name:r,props:i}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?i:OX(t.components[r].defaultProps,i)}function tJ({props:e,name:t,defaultTheme:r}){const i=dC(r);return TF({theme:i,name:t,props:e})}function pC(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function rJ(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(i=>i+i)),r?`rgb${r.length===4?"a":""}(${r.map((i,n)=>n<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Tu(e){if(e.type)return e;if(e.charAt(0)==="#")return Tu(rJ(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Wm(9,e));let i=e.substring(t+1,e.length-1),n;if(r==="color"){if(i=i.split(" "),n=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n)===-1)throw new Error(Wm(10,n))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:r,values:i,colorSpace:n}}function Wx(e){const{type:t,colorSpace:r}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((n,s)=>s<3?parseInt(n,10):n):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${r} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function iJ(e){e=Tu(e);const{values:t}=e,r=t[0],i=t[1]/100,n=t[2]/100,s=i*Math.min(n,1-n),a=(c,h=(c+r/30)%12)=>n-s*Math.max(Math.min(h-3,9-h,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return e.type==="hsla"&&(o+="a",l.push(t[3])),Wx({type:o,values:l})}function uO(e){e=Tu(e);let t=e.type==="hsl"?Tu(iJ(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function nJ(e,t){const r=uO(e),i=uO(t);return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)}function Zm(e,t){return e=Tu(e),t=pC(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Wx(e)}function sJ(e,t){if(e=Tu(e),t=pC(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Wx(e)}function aJ(e,t){if(e=Tu(e),t=pC(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Wx(e)}function oJ(e,t){return Ce({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const lJ={black:"#000",white:"#fff"},Jm=lJ,cJ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},uJ=cJ,hJ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Xu=hJ,dJ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Yu=dJ,pJ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Xp=pJ,fJ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Qu=fJ,mJ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ku=mJ,gJ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Zu=gJ,vJ=["mode","contrastThreshold","tonalOffset"],hO={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Jm.white,default:Jm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dw={text:{primary:Jm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Jm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dO(e,t,r,i){const n=i.light||i,s=i.dark||i*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=aJ(e.main,n):t==="dark"&&(e.dark=sJ(e.main,s)))}function yJ(e="light"){return e==="dark"?{main:Qu[200],light:Qu[50],dark:Qu[400]}:{main:Qu[700],light:Qu[400],dark:Qu[800]}}function xJ(e="light"){return e==="dark"?{main:Xu[200],light:Xu[50],dark:Xu[400]}:{main:Xu[500],light:Xu[300],dark:Xu[700]}}function bJ(e="light"){return e==="dark"?{main:Yu[500],light:Yu[300],dark:Yu[700]}:{main:Yu[700],light:Yu[400],dark:Yu[800]}}function wJ(e="light"){return e==="dark"?{main:Ku[400],light:Ku[300],dark:Ku[700]}:{main:Ku[700],light:Ku[500],dark:Ku[900]}}function SJ(e="light"){return e==="dark"?{main:Zu[400],light:Zu[300],dark:Zu[700]}:{main:Zu[800],light:Zu[500],dark:Zu[900]}}function _J(e="light"){return e==="dark"?{main:Xp[400],light:Xp[300],dark:Xp[700]}:{main:"#ed6c02",light:Xp[500],dark:Xp[900]}}function AJ(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:i=.2}=e,n=pr(e,vJ),s=e.primary||yJ(t),a=e.secondary||xJ(t),o=e.error||bJ(t),l=e.info||wJ(t),c=e.success||SJ(t),h=e.warning||_J(t);function u(m){return nJ(m,dw.text.primary)>=r?dw.text.primary:hO.text.primary}const d=({color:m,name:g,mainShade:v=500,lightShade:y=300,darkShade:x=700})=>{if(m=Ce({},m),!m.main&&m[v]&&(m.main=m[v]),!m.hasOwnProperty("main"))throw new Error(Wm(11,g?` (${g})`:"",v));if(typeof m.main!="string")throw new Error(Wm(12,g?` (${g})`:"",JSON.stringify(m.main)));return dO(m,"light",y,i),dO(m,"dark",x,i),m.contrastText||(m.contrastText=u(m.main)),m},p={dark:dw,light:hO};return Uo(Ce({common:Ce({},Jm),mode:t,primary:d({color:s,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:o,name:"error"}),warning:d({color:h,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:uJ,contrastThreshold:r,getContrastText:u,augmentColor:d,tonalOffset:i},p[t]),n)}const MJ=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function EJ(e){return Math.round(e*1e5)/1e5}const pO={textTransform:"uppercase"},fO='"Roboto", "Helvetica", "Arial", sans-serif';function CJ(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:i=fO,fontSize:n=14,fontWeightLight:s=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:u}=r,d=pr(r,MJ),p=n/14,f=u||(v=>`${v/c*p}rem`),m=(v,y,x,b,S)=>Ce({fontFamily:i,fontWeight:v,fontSize:f(y),lineHeight:x},i===fO?{letterSpacing:`${EJ(b/y)}em`}:{},S,h),g={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(a,48,1.167,0),h4:m(a,34,1.235,.25),h5:m(a,24,1.334,0),h6:m(o,20,1.6,.15),subtitle1:m(a,16,1.75,.15),subtitle2:m(o,14,1.57,.1),body1:m(a,16,1.5,.15),body2:m(a,14,1.43,.15),button:m(o,14,1.75,.4,pO),caption:m(a,12,1.66,.4),overline:m(a,12,2.66,1,pO)};return Uo(Ce({htmlFontSize:c,pxToRem:f,fontFamily:i,fontSize:n,fontWeightLight:s,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:l},g),d,{clone:!1})}const TJ=.2,PJ=.14,DJ=.12;function fr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${TJ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${PJ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${DJ})`].join(",")}const OJ=["none",fr(0,2,1,-1,0,1,1,0,0,1,3,0),fr(0,3,1,-2,0,2,2,0,0,1,5,0),fr(0,3,3,-2,0,3,4,0,0,1,8,0),fr(0,2,4,-1,0,4,5,0,0,1,10,0),fr(0,3,5,-1,0,5,8,0,0,1,14,0),fr(0,3,5,-1,0,6,10,0,0,1,18,0),fr(0,4,5,-2,0,7,10,1,0,2,16,1),fr(0,5,5,-3,0,8,10,1,0,3,14,2),fr(0,5,6,-3,0,9,12,1,0,3,16,2),fr(0,6,6,-3,0,10,14,1,0,4,18,3),fr(0,6,7,-4,0,11,15,1,0,4,20,3),fr(0,7,8,-4,0,12,17,2,0,5,22,4),fr(0,7,8,-4,0,13,19,2,0,5,24,4),fr(0,7,9,-4,0,14,21,2,0,5,26,4),fr(0,8,9,-5,0,15,22,2,0,6,28,5),fr(0,8,10,-5,0,16,24,2,0,6,30,5),fr(0,8,11,-5,0,17,26,2,0,6,32,5),fr(0,9,11,-5,0,18,28,2,0,7,34,6),fr(0,9,12,-6,0,19,29,2,0,7,36,6),fr(0,10,13,-6,0,20,31,3,0,8,38,7),fr(0,10,13,-6,0,21,33,3,0,8,40,7),fr(0,10,14,-6,0,22,35,3,0,8,42,7),fr(0,11,14,-7,0,23,36,3,0,9,44,8),fr(0,11,15,-7,0,24,38,3,0,9,46,8)],LJ=OJ,IJ=["duration","easing","delay"],RJ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},BJ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function mO(e){return`${Math.round(e)}ms`}function kJ(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function zJ(e){const t=Ce({},RJ,e.easing),r=Ce({},BJ,e.duration);return Ce({getAutoHeightDuration:kJ,create:(n=["all"],s={})=>{const{duration:a=r.standard,easing:o=t.easeInOut,delay:l=0}=s;return pr(s,IJ),(Array.isArray(n)?n:[n]).map(c=>`${c} ${typeof a=="string"?a:mO(a)} ${o} ${typeof l=="string"?l:mO(l)}`).join(",")}},e,{easing:t,duration:r})}const NJ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},FJ=NJ,UJ=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function PF(e={},...t){const{mixins:r={},palette:i={},transitions:n={},typography:s={}}=e,a=pr(e,UJ),o=AJ(i),l=uC(e);let c=Uo(l,{mixins:oJ(l.breakpoints,r),palette:o,shadows:LJ.slice(),typography:CJ(o,s),transitions:zJ(n),zIndex:Ce({},FJ)});return c=Uo(c,a),c=t.reduce((h,u)=>Uo(h,u),c),c}const jJ=PF(),fC=jJ,VJ=e=>uy(e)&&e!=="classes",GJ=eJ({defaultTheme:fC,rootShouldForwardProp:VJ}),kn=GJ;function el({props:e,name:t}){return tJ({props:e,name:t,defaultTheme:fC})}function DA(e,t){return DA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},DA(e,t)}function DF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,DA(e,t)}const gO={disabled:!1},n1=sn.createContext(null);var Rf="unmounted",Gc="exited",Hc="entering",Ih="entered",OA="exiting",tl=function(e){DF(t,e);function t(i,n){var s;s=e.call(this,i,n)||this;var a=n,o=a&&!a.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?o?(l=Gc,s.appearStatus=Hc):l=Ih:i.unmountOnExit||i.mountOnEnter?l=Rf:l=Gc,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(n,s){var a=n.in;return a&&s.status===Rf?{status:Gc}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var s=null;if(n!==this.props){var a=this.state.status;this.props.in?a!==Hc&&a!==Ih&&(s=Hc):(a===Hc||a===Ih)&&(s=OA)}this.updateStatus(!1,s)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,s,a,o;return s=a=o=n,n!=null&&typeof n!="number"&&(s=n.exit,a=n.enter,o=n.appear!==void 0?n.appear:a),{exit:s,enter:a,appear:o}},r.updateStatus=function(n,s){n===void 0&&(n=!1),s!==null?(this.cancelNextCallback(),s===Hc?this.performEnter(n):this.performExit()):this.props.unmountOnExit&&this.state.status===Gc&&this.setState({status:Rf})},r.performEnter=function(n){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:n,l=this.props.nodeRef?[o]:[Yb.findDOMNode(this),o],c=l[0],h=l[1],u=this.getTimeouts(),d=o?u.appear:u.enter;if(!n&&!a||gO.disabled){this.safeSetState({status:Ih},function(){s.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:Hc},function(){s.props.onEntering(c,h),s.onTransitionEnd(d,function(){s.safeSetState({status:Ih},function(){s.props.onEntered(c,h)})})})},r.performExit=function(){var n=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:Yb.findDOMNode(this);if(!s||gO.disabled){this.safeSetState({status:Gc},function(){n.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:OA},function(){n.props.onExiting(o),n.onTransitionEnd(a.exit,function(){n.safeSetState({status:Gc},function(){n.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,s){s=this.setNextCallback(s),this.setState(n,s)},r.setNextCallback=function(n){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,n(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(n,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:Yb.findDOMNode(this),o=n==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],h=l[1];this.props.addEndListener(c,h)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===Rf)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=pr(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return H(n1.Provider,{value:null,children:typeof a=="function"?a(n,o):sn.cloneElement(sn.Children.only(a),o)})},t}(sn.Component);tl.contextType=n1;tl.propTypes={};function Ju(){}tl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ju,onEntering:Ju,onEntered:Ju,onExit:Ju,onExiting:Ju,onExited:Ju};tl.UNMOUNTED=Rf;tl.EXITED=Gc;tl.ENTERING=Hc;tl.ENTERED=Ih;tl.EXITING=OA;const HJ=tl;function WJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mC(e,t){var r=function(s){return t&&W.exports.isValidElement(s)?t(s):s},i=Object.create(null);return e&&W.exports.Children.map(e,function(n){return n}).forEach(function(n){i[n.key]=r(n)}),i}function qJ(e,t){e=e||{},t=t||{};function r(h){return h in t?t[h]:e[h]}var i=Object.create(null),n=[];for(var s in e)s in t?n.length&&(i[s]=n,n=[]):n.push(s);var a,o={};for(var l in t){if(i[l])for(a=0;a<i[l].length;a++){var c=i[l][a];o[i[l][a]]=r(c)}o[l]=r(l)}for(a=0;a<n.length;a++)o[n[a]]=r(n[a]);return o}function au(e,t,r){return r[t]!=null?r[t]:e.props[t]}function $J(e,t){return mC(e.children,function(r){return W.exports.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:au(r,"appear",e),enter:au(r,"enter",e),exit:au(r,"exit",e)})})}function XJ(e,t,r){var i=mC(e.children),n=qJ(t,i);return Object.keys(n).forEach(function(s){var a=n[s];if(!!W.exports.isValidElement(a)){var o=s in t,l=s in i,c=t[s],h=W.exports.isValidElement(c)&&!c.props.in;l&&(!o||h)?n[s]=W.exports.cloneElement(a,{onExited:r.bind(null,a),in:!0,exit:au(a,"exit",e),enter:au(a,"enter",e)}):!l&&o&&!h?n[s]=W.exports.cloneElement(a,{in:!1}):l&&o&&W.exports.isValidElement(c)&&(n[s]=W.exports.cloneElement(a,{onExited:r.bind(null,a),in:c.props.in,exit:au(a,"exit",e),enter:au(a,"enter",e)}))}}),n}var YJ=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},QJ={component:"div",childFactory:function(t){return t}},gC=function(e){DF(t,e);function t(i,n){var s;s=e.call(this,i,n)||this;var a=s.handleExited.bind(WJ(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?$J(n,o):XJ(n,a,o),firstRender:!1}},r.handleExited=function(n,s){var a=mC(this.props.children);n.key in a||(n.props.onExited&&n.props.onExited(s),this.mounted&&this.setState(function(o){var l=Ce({},o.children);return delete l[n.key],{children:l}}))},r.render=function(){var n=this.props,s=n.component,a=n.childFactory,o=pr(n,["component","childFactory"]),l=this.state.contextValue,c=YJ(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?H(n1.Provider,{value:l,children:c}):H(n1.Provider,{value:l,children:H(s,{...o,children:c})})},t}(sn.Component);gC.propTypes={};gC.defaultProps=QJ;const KJ=gC;function ZJ(e){const{className:t,classes:r,pulsate:i=!1,rippleX:n,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:c}=e,[h,u]=W.exports.useState(!1),d=Ur(t,r.ripple,r.rippleVisible,i&&r.ripplePulsate),p={width:a,height:a,top:-(a/2)+s,left:-(a/2)+n},f=Ur(r.child,h&&r.childLeaving,i&&r.childPulsate);return!o&&!h&&u(!0),W.exports.useEffect(()=>{if(!o&&l!=null){const m=setTimeout(l,c);return()=>{clearTimeout(m)}}},[l,o,c]),H("span",{className:d,style:p,children:H("span",{className:f})})}const JJ=xc("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),xs=JJ,eee=["center","classes","className"];let qx=e=>e,vO,yO,xO,bO;const LA=550,tee=80,ree=kg(vO||(vO=qx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),iee=kg(yO||(yO=qx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),nee=kg(xO||(xO=qx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),see=kn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),aee=kn(ZJ,{name:"MuiTouchRipple",slot:"Ripple"})(bO||(bO=qx`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),xs.rippleVisible,ree,LA,({theme:e})=>e.transitions.easing.easeInOut,xs.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,xs.child,xs.childLeaving,iee,LA,({theme:e})=>e.transitions.easing.easeInOut,xs.childPulsate,nee,({theme:e})=>e.transitions.easing.easeInOut),oee=W.exports.forwardRef(function(t,r){const i=el({props:t,name:"MuiTouchRipple"}),{center:n=!1,classes:s={},className:a}=i,o=pr(i,eee),[l,c]=W.exports.useState([]),h=W.exports.useRef(0),u=W.exports.useRef(null);W.exports.useEffect(()=>{u.current&&(u.current(),u.current=null)},[l]);const d=W.exports.useRef(!1),p=W.exports.useRef(null),f=W.exports.useRef(null),m=W.exports.useRef(null);W.exports.useEffect(()=>()=>{clearTimeout(p.current)},[]);const g=W.exports.useCallback(b=>{const{pulsate:S,rippleX:w,rippleY:A,rippleSize:_,cb:M}=b;c(E=>[...E,H(aee,{classes:{ripple:Ur(s.ripple,xs.ripple),rippleVisible:Ur(s.rippleVisible,xs.rippleVisible),ripplePulsate:Ur(s.ripplePulsate,xs.ripplePulsate),child:Ur(s.child,xs.child),childLeaving:Ur(s.childLeaving,xs.childLeaving),childPulsate:Ur(s.childPulsate,xs.childPulsate)},timeout:LA,pulsate:S,rippleX:w,rippleY:A,rippleSize:_},h.current)]),h.current+=1,u.current=M},[s]),v=W.exports.useCallback((b={},S={},w)=>{const{pulsate:A=!1,center:_=n||S.pulsate,fakeElement:M=!1}=S;if((b==null?void 0:b.type)==="mousedown"&&d.current){d.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(d.current=!0);const E=M?null:m.current,T=E?E.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,D,L;if(_||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)P=Math.round(T.width/2),D=Math.round(T.height/2);else{const{clientX:R,clientY:V}=b.touches&&b.touches.length>0?b.touches[0]:b;P=Math.round(R-T.left),D=Math.round(V-T.top)}if(_)L=Math.sqrt((2*T.width**2+T.height**2)/3),L%2===0&&(L+=1);else{const R=Math.max(Math.abs((E?E.clientWidth:0)-P),P)*2+2,V=Math.max(Math.abs((E?E.clientHeight:0)-D),D)*2+2;L=Math.sqrt(R**2+V**2)}b!=null&&b.touches?f.current===null&&(f.current=()=>{g({pulsate:A,rippleX:P,rippleY:D,rippleSize:L,cb:w})},p.current=setTimeout(()=>{f.current&&(f.current(),f.current=null)},tee)):g({pulsate:A,rippleX:P,rippleY:D,rippleSize:L,cb:w})},[n,g]),y=W.exports.useCallback(()=>{v({},{pulsate:!0})},[v]),x=W.exports.useCallback((b,S)=>{if(clearTimeout(p.current),(b==null?void 0:b.type)==="touchend"&&f.current){f.current(),f.current=null,p.current=setTimeout(()=>{x(b,S)});return}f.current=null,c(w=>w.length>0?w.slice(1):w),u.current=S},[]);return W.exports.useImperativeHandle(r,()=>({pulsate:y,start:v,stop:x}),[y,v,x]),H(see,Ce({className:Ur(s.root,xs.root,a),ref:m},o,{children:H(KJ,{component:null,exit:!0,children:l})}))}),lee=oee;function cee(e){return yc("MuiButtonBase",e)}const uee=xc("MuiButtonBase",["root","disabled","focusVisible"]),hee=uee,dee=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],pee=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:i,classes:n}=e,a=ju({root:["root",t&&"disabled",r&&"focusVisible"]},cee,n);return r&&i&&(a.root+=` ${i}`),a},fee=kn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${hee.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),mee=W.exports.forwardRef(function(t,r){const i=el({props:t,name:"MuiButtonBase"}),{action:n,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:c=!1,disableRipple:h=!1,disableTouchRipple:u=!1,focusRipple:d=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:x,onKeyDown:b,onKeyUp:S,onMouseDown:w,onMouseLeave:A,onMouseUp:_,onTouchEnd:M,onTouchMove:E,onTouchStart:T,tabIndex:P=0,TouchRippleProps:D,touchRippleRef:L,type:R}=i,V=pr(i,dee),F=W.exports.useRef(null),O=W.exports.useRef(null),k=Cs(O,L),{isFocusVisibleRef:z,onFocus:N,onBlur:j,ref:Y}=G2(),[q,X]=W.exports.useState(!1);c&&q&&X(!1),W.exports.useImperativeHandle(n,()=>({focusVisible:()=>{X(!0),F.current.focus()}}),[]);const[G,te]=W.exports.useState(!1);W.exports.useEffect(()=>{te(!0)},[]);const Z=G&&!h&&!c;W.exports.useEffect(()=>{q&&d&&!h&&G&&O.current.pulsate()},[h,d,q,G]);function Q(J,Fe,We=u){return td(Ge=>(Fe&&Fe(Ge),!We&&O.current&&O.current[J](Ge),!0))}const re=Q("start",w),ae=Q("stop",g),ce=Q("stop",v),pe=Q("stop",_),Te=Q("stop",J=>{q&&J.preventDefault(),A&&A(J)}),xe=Q("start",T),Ie=Q("stop",M),Oe=Q("stop",E),Se=Q("stop",J=>{j(J),z.current===!1&&X(!1),f&&f(J)},!1),be=td(J=>{F.current||(F.current=J.currentTarget),N(J),z.current===!0&&(X(!0),x&&x(J)),y&&y(J)}),Re=()=>{const J=F.current;return l&&l!=="button"&&!(J.tagName==="A"&&J.href)},Be=W.exports.useRef(!1),U=td(J=>{d&&!Be.current&&q&&O.current&&J.key===" "&&(Be.current=!0,O.current.stop(J,()=>{O.current.start(J)})),J.target===J.currentTarget&&Re()&&J.key===" "&&J.preventDefault(),b&&b(J),J.target===J.currentTarget&&Re()&&J.key==="Enter"&&!c&&(J.preventDefault(),m&&m(J))}),I=td(J=>{d&&J.key===" "&&O.current&&q&&!J.defaultPrevented&&(Be.current=!1,O.current.stop(J,()=>{O.current.pulsate(J)})),S&&S(J),m&&J.target===J.currentTarget&&Re()&&J.key===" "&&!J.defaultPrevented&&m(J)});let ne=l;ne==="button"&&(V.href||V.to)&&(ne=p);const ge={};ne==="button"?(ge.type=R===void 0?"button":R,ge.disabled=c):(!V.href&&!V.to&&(ge.role="button"),c&&(ge["aria-disabled"]=c));const ve=Cs(Y,F),Ae=Cs(r,ve),Ne=Ce({},i,{centerRipple:s,component:l,disabled:c,disableRipple:h,disableTouchRipple:u,focusRipple:d,tabIndex:P,focusVisible:q}),Le=pee(Ne);return Me(fee,Ce({as:ne,className:Ur(Le.root,o),ownerState:Ne,onBlur:Se,onClick:m,onContextMenu:ae,onFocus:be,onKeyDown:U,onKeyUp:I,onMouseDown:re,onMouseLeave:Te,onMouseUp:pe,onDragLeave:ce,onTouchEnd:Ie,onTouchMove:Oe,onTouchStart:xe,ref:Ae,tabIndex:c?-1:P,type:R},ge,V,{children:[a,Z?H(lee,Ce({ref:k,center:s},D)):null]}))}),gee=mee;function vee(e){return yc("MuiIconButton",e)}const yee=xc("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),xee=yee,bee=["edge","children","className","color","disabled","disableFocusRipple","size"],wee=e=>{const{classes:t,disabled:r,color:i,edge:n,size:s}=e,a={root:["root",r&&"disabled",i!=="default"&&`color${Zr(i)}`,n&&`edge${Zr(n)}`,`size${Zr(s)}`]};return ju(a,vee,t)},See=kn(gee,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="default"&&t[`color${Zr(r.color)}`],r.edge&&t[`edge${Zr(r.edge)}`],t[`size${Zr(r.size)}`]]}})(({theme:e,ownerState:t})=>Ce({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.active} / ${e.vars.palette.action.hoverOpacity})`:Zm(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>Ce({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&Ce({color:(e.vars||e).palette[t.color].main},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Zm(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${xee.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})),_ee=W.exports.forwardRef(function(t,r){const i=el({props:t,name:"MuiIconButton"}),{edge:n=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:c=!1,size:h="medium"}=i,u=pr(i,bee),d=Ce({},i,{edge:n,color:o,disabled:l,disableFocusRipple:c,size:h}),p=wee(d);return H(See,Ce({className:Ur(p.root,a),centerRipple:!0,focusRipple:!c,disabled:l,ref:r,ownerState:d},u,{children:s}))}),Aee=_ee;var vC={},Gi={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Gi);var pw={};function Mee(e){return yc("MuiSvgIcon",e)}xc("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Eee=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Cee=e=>{const{color:t,fontSize:r,classes:i}=e,n={root:["root",t!=="inherit"&&`color${Zr(t)}`,`fontSize${Zr(r)}`]};return ju(n,Mee,i)},Tee=kn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Zr(r.color)}`],t[`fontSize${Zr(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,i,n,s,a,o,l,c,h,u,d,p,f,m,g,v,y;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(i=r.create)==null?void 0:i.call(r,"fill",{duration:(n=e.transitions)==null||(s=n.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((a=e.typography)==null||(o=a.pxToRem)==null?void 0:o.call(a,20))||"1.25rem",medium:((l=e.typography)==null||(c=l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem",large:((h=e.typography)==null||(u=h.pxToRem)==null?void 0:u.call(h,35))||"2.1875"}[t.fontSize],color:(d=(p=(e.vars||e).palette)==null||(f=p[t.color])==null?void 0:f.main)!=null?d:{action:(m=(e.vars||e).palette)==null||(g=m.action)==null?void 0:g.active,disabled:(v=(e.vars||e).palette)==null||(y=v.action)==null?void 0:y.disabled,inherit:void 0}[t.color]}}),OF=W.exports.forwardRef(function(t,r){const i=el({props:t,name:"MuiSvgIcon"}),{children:n,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:h=!1,titleAccess:u,viewBox:d="0 0 24 24"}=i,p=pr(i,Eee),f=Ce({},i,{color:a,component:o,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:h,viewBox:d}),m={};h||(m.viewBox=d);const g=Cee(f);return Me(Tee,Ce({as:o,className:Ur(g.root,s),ownerState:f,focusable:"false",color:c,"aria-hidden":u?void 0:!0,role:u?"img":void 0,ref:r},m,p,{children:[n,u?H("title",{children:u}):null]}))});OF.muiName="SvgIcon";const wO=OF;function LF(e,t){const r=(i,n)=>H(wO,Ce({"data-testid":`${t}Icon`,ref:n},i,{children:e}));return r.muiName=wO.muiName,W.exports.memo(W.exports.forwardRef(r))}const Pee={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join(`
`)),H2.configure(e)}},Dee=Object.freeze(Object.defineProperty({__proto__:null,unstable_ClassNameGenerator:Pee,capitalize:Zr,createChainedFunction:gX,createSvgIcon:LF,debounce:vX,deprecatedPropType:yX,isMuiElement:xX,ownerDocument:V2,ownerWindow:bX,requirePropFactory:wX,setRef:qm,unstable_useEnhancedEffect:Cu,unstable_useId:N5,unsupportedProp:AX,useControlled:F5,useEventCallback:td,useForkRef:Cs,useIsFocusVisible:G2},Symbol.toStringTag,{value:"Module"})),Oee=tz(Dee);var SO;function dn(){return SO||(SO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Oee}(pw)),pw}const pn=tz(y8);var Lee=Gi.exports;Object.defineProperty(vC,"__esModule",{value:!0});var IF=vC.default=void 0,Iee=Lee(dn()),Ree=pn,Bee=(0,Iee.default)((0,Ree.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");IF=vC.default=Bee;var yC={},kee=Gi.exports;Object.defineProperty(yC,"__esModule",{value:!0});var RF=yC.default=void 0,zee=kee(dn()),Nee=pn,Fee=(0,zee.default)((0,Nee.jsx)("path",{d:"M12 3 1 11.4l1.21 1.59L4 11.62V21h16v-9.38l1.79 1.36L23 11.4 12 3zm6 16H6v-8.9l6-4.58 6 4.58V19zm-9-5c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1zm3-1c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm3 1c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1z"}),"OtherHousesOutlined");RF=yC.default=Fee;var xC={},Uee=Gi.exports;Object.defineProperty(xC,"__esModule",{value:!0});var BF=xC.default=void 0,jee=Uee(dn()),Vee=pn,Gee=(0,jee.default)((0,Vee.jsx)("path",{d:"m11 18.5 4-4-4-4-1 1 3 3-3 3zM20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm10 15H4V9h16v11z"}),"NextWeekOutlined");BF=xC.default=Gee;var bC={},Hee=Gi.exports;Object.defineProperty(bC,"__esModule",{value:!0});var kF=bC.default=void 0,Wee=Hee(dn()),qee=pn,$ee=(0,Wee.default)((0,qee.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");kF=bC.default=$ee;const Xee=({children:e,className:t})=>H("div",{className:"collapse navbar-collapse"+t,id:"navbarSupportedContent",children:e});var wC={},Yee=Gi.exports;Object.defineProperty(wC,"__esModule",{value:!0});var zF=wC.default=void 0,Qee=Yee(dn()),Kee=pn,Zee=(0,Qee.default)((0,Kee.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");zF=wC.default=Zee;function Jee(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function ete(e){return parseFloat(e)}function NF(){return dC(fC)}const tte=e=>e.scrollTop;function _O(e,t){var r,i;const{timeout:n,easing:s,style:a={}}=e;return{duration:(r=a.transitionDuration)!=null?r:typeof n=="number"?n:n[t.mode]||0,easing:(i=a.transitionTimingFunction)!=null?i:typeof s=="object"?s[t.mode]:s,delay:a.transitionDelay}}function rte(e){return yc("MuiTypography",e)}xc("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const ite=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],nte=e=>{const{align:t,gutterBottom:r,noWrap:i,paragraph:n,variant:s,classes:a}=e,o={root:["root",s,e.align!=="inherit"&&`align${Zr(t)}`,r&&"gutterBottom",i&&"noWrap",n&&"paragraph"]};return ju(o,rte,a)},ste=kn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${Zr(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>Ce({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),AO={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ate={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ote=e=>ate[e]||e,lte=W.exports.forwardRef(function(t,r){const i=el({props:t,name:"MuiTypography"}),n=ote(i.color),s=EF(Ce({},i,{color:n})),{align:a="inherit",className:o,component:l,gutterBottom:c=!1,noWrap:h=!1,paragraph:u=!1,variant:d="body1",variantMapping:p=AO}=s,f=pr(s,ite),m=Ce({},s,{align:a,color:n,className:o,component:l,gutterBottom:c,noWrap:h,paragraph:u,variant:d,variantMapping:p}),g=l||(u?"p":p[d]||AO[d])||"span",v=nte(m);return H(ste,Ce({as:g,ref:r,ownerState:m,className:Ur(v.root,o)},f))}),Tt=lte,cte=kn(KY,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ute=W.exports.forwardRef(function(t,r){const i=hC(),n=el({props:t,name:"MuiPopper"});return H(cte,Ce({direction:i==null?void 0:i.direction},n,{ref:r}))}),FF=ute,hte=LF(H("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function dte(e){return yc("MuiAvatar",e)}xc("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const pte=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],fte=e=>{const{classes:t,variant:r,colorDefault:i}=e;return ju({root:["root",r,i&&"colorDefault"],img:["img"],fallback:["fallback"]},dte,t)},mte=kn("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>Ce({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&Ce({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),gte=kn("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),vte=kn(hte,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function yte({crossOrigin:e,referrerPolicy:t,src:r,srcSet:i}){const[n,s]=W.exports.useState(!1);return W.exports.useEffect(()=>{if(!r&&!i)return;s(!1);let a=!0;const o=new Image;return o.onload=()=>{!a||s("loaded")},o.onerror=()=>{!a||s("error")},o.crossOrigin=e,o.referrerPolicy=t,o.src=r,i&&(o.srcset=i),()=>{a=!1}},[e,t,r,i]),n}const xte=W.exports.forwardRef(function(t,r){const i=el({props:t,name:"MuiAvatar"}),{alt:n,children:s,className:a,component:o="div",imgProps:l,sizes:c,src:h,srcSet:u,variant:d="circular"}=i,p=pr(i,pte);let f=null;const m=yte(Ce({},l,{src:h,srcSet:u})),g=h||u,v=g&&m!=="error",y=Ce({},i,{colorDefault:!v,component:o,variant:d}),x=fte(y);return v?f=H(gte,Ce({alt:n,src:h,srcSet:u,sizes:c,ownerState:y,className:x.img},l)):s!=null?f=s:g&&n?f=n[0]:f=H(vte,{className:x.fallback}),H(mte,Ce({as:o,ownerState:y,className:Ur(x.root,a),ref:r},p,{children:f}))}),El=xte,bte=PF(),wte=WZ({defaultTheme:bte,defaultClassName:"MuiBox-root",generateClassName:H2.generate}),Ct=wte,Ste=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function IA(e){return`scale(${e}, ${e**2})`}const _te={entering:{opacity:1,transform:IA(1)},entered:{opacity:1,transform:"none"}},fw=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),UF=W.exports.forwardRef(function(t,r){const{addEndListener:i,appear:n=!0,children:s,easing:a,in:o,onEnter:l,onEntered:c,onEntering:h,onExit:u,onExited:d,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=HJ}=t,v=pr(t,Ste),y=W.exports.useRef(),x=W.exports.useRef(),b=NF(),S=W.exports.useRef(null),w=Cs(s.ref,r),A=Cs(S,w),_=V=>F=>{if(V){const O=S.current;F===void 0?V(O):V(O,F)}},M=_(h),E=_((V,F)=>{tte(V);const{duration:O,delay:k,easing:z}=_O({style:f,timeout:m,easing:a},{mode:"enter"});let N;m==="auto"?(N=b.transitions.getAutoHeightDuration(V.clientHeight),x.current=N):N=O,V.style.transition=[b.transitions.create("opacity",{duration:N,delay:k}),b.transitions.create("transform",{duration:fw?N:N*.666,delay:k,easing:z})].join(","),l&&l(V,F)}),T=_(c),P=_(p),D=_(V=>{const{duration:F,delay:O,easing:k}=_O({style:f,timeout:m,easing:a},{mode:"exit"});let z;m==="auto"?(z=b.transitions.getAutoHeightDuration(V.clientHeight),x.current=z):z=F,V.style.transition=[b.transitions.create("opacity",{duration:z,delay:O}),b.transitions.create("transform",{duration:fw?z:z*.666,delay:fw?O:O||z*.333,easing:k})].join(","),V.style.opacity=0,V.style.transform=IA(.75),u&&u(V)}),L=_(d),R=V=>{m==="auto"&&(y.current=setTimeout(V,x.current||0)),i&&i(S.current,V)};return W.exports.useEffect(()=>()=>{clearTimeout(y.current)},[]),H(g,Ce({appear:n,in:o,nodeRef:S,onEnter:E,onEntered:T,onEntering:M,onExit:D,onExited:L,onExiting:P,addEndListener:R,timeout:m==="auto"?null:m},v,{children:(V,F)=>W.exports.cloneElement(s,Ce({style:Ce({opacity:0,transform:IA(.75),visibility:V==="exited"&&!o?"hidden":void 0},_te[V],f,s.props.style),ref:A},F))}))});UF.muiSupportAuto=!0;const MO=UF;function Ate(e,t,r,i,n){const s=typeof window<"u"&&typeof window.matchMedia<"u",[a,o]=W.exports.useState(()=>n&&s?r(e).matches:i?i(e).matches:t);return Cu(()=>{let l=!0;if(!s)return;const c=r(e),h=()=>{l&&o(c.matches)};return h(),c.addListener(h),()=>{l=!1,c.removeListener(h)}},[e,r,s]),a}const jF=Sy["useSyncExternalStore"];function Mte(e,t,r,i){const n=W.exports.useCallback(()=>t,[t]),s=W.exports.useMemo(()=>{if(i!==null){const{matches:c}=i(e);return()=>c}return n},[n,e,i]),[a,o]=W.exports.useMemo(()=>{if(r===null)return[n,()=>()=>{}];const c=r(e);return[()=>c.matches,h=>(c.addListener(h),()=>{c.removeListener(h)})]},[n,r,e]);return jF(o,a,s)}function Ete(e,t={}){const r=hC(),i=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:n=!1,matchMedia:s=i?window.matchMedia:null,ssrMatchMedia:a=null,noSsr:o}=TF({name:"MuiUseMediaQuery",props:t,theme:r});let l=typeof e=="function"?e(r):e;return l=l.replace(/^@media( ?)/m,""),(jF!==void 0?Mte:Ate)(l,n,s,a,o)}function Cte(e){return yc("MuiSkeleton",e)}xc("MuiSkeleton",["root","text","rectangular","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Tte=["animation","className","component","height","style","variant","width"];let s1=e=>e,EO,CO,TO,PO;const Pte=e=>{const{classes:t,variant:r,animation:i,hasChildren:n,width:s,height:a}=e;return ju({root:["root",r,i,n&&"withChildren",n&&!s&&"fitContent",n&&!a&&"heightAuto"]},Cte,t)},Dte=kg(EO||(EO=s1`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),Ote=kg(CO||(CO=s1`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Lte=kn("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.animation!==!1&&t[r.animation],r.hasChildren&&t.withChildren,r.hasChildren&&!r.width&&t.fitContent,r.hasChildren&&!r.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const r=Jee(e.shape.borderRadius)||"px",i=ete(e.shape.borderRadius);return Ce({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Zm(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${i}${r}/${Math.round(i/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&TA(TO||(TO=s1`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),Dte),({ownerState:e,theme:t})=>e.animation==="wave"&&TA(PO||(PO=s1`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),Ote,(t.vars||t).palette.action.hover)),Ite=W.exports.forwardRef(function(t,r){const i=el({props:t,name:"MuiSkeleton"}),{animation:n="pulse",className:s,component:a="span",height:o,style:l,variant:c="text",width:h}=i,u=pr(i,Tte),d=Ce({},i,{animation:n,component:a,variant:c,hasChildren:Boolean(u.children)}),p=Pte(d);return H(Lte,Ce({as:a,ref:r,className:Ur(p.root,s),ownerState:d},u,{style:Ce({width:h,height:o},l)}))}),Li=Ite;function Rte(e){return yc("MuiTooltip",e)}const Bte=xc("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Ll=Bte,kte=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];function zte(e){return Math.round(e*1e5)/1e5}const Nte=e=>{const{classes:t,disableInteractive:r,arrow:i,touch:n,placement:s}=e,a={popper:["popper",!r&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",n&&"touch",`tooltipPlacement${Zr(s.split("-")[0])}`],arrow:["arrow"]};return ju(a,Rte,t)},Fte=kn(FF,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(({theme:e,ownerState:t,open:r})=>Ce({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${Ll.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ll.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ll.arrow}`]:Ce({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ll.arrow}`]:Ce({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),Ute=kn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${Zr(r.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>Ce({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Zm(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${zte(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${Ll.popper}[data-popper-placement*="left"] &`]:Ce({transformOrigin:"right center"},t.isRtl?Ce({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):Ce({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${Ll.popper}[data-popper-placement*="right"] &`]:Ce({transformOrigin:"left center"},t.isRtl?Ce({marginRight:"14px"},t.touch&&{marginRight:"24px"}):Ce({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${Ll.popper}[data-popper-placement*="top"] &`]:Ce({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${Ll.popper}[data-popper-placement*="bottom"] &`]:Ce({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),jte=kn("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?`rgba(${e.vars.palette.grey.darkChannel} / 0.9)`:Zm(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Mv=!1,mw=null;function Ev(e,t){return r=>{t&&t(r),e(r)}}const Vte=W.exports.forwardRef(function(t,r){var i,n,s,a,o,l;const c=el({props:t,name:"MuiTooltip"}),{arrow:h=!1,children:u,components:d={},componentsProps:p={},describeChild:f=!1,disableFocusListener:m=!1,disableHoverListener:g=!1,disableInteractive:v=!1,disableTouchListener:y=!1,enterDelay:x=100,enterNextDelay:b=0,enterTouchDelay:S=700,followCursor:w=!1,id:A,leaveDelay:_=0,leaveTouchDelay:M=1500,onClose:E,onOpen:T,open:P,placement:D="bottom",PopperComponent:L,PopperProps:R={},title:V,TransitionComponent:F=MO,TransitionProps:O}=c,k=pr(c,kte),z=NF(),N=z.direction==="rtl",[j,Y]=W.exports.useState(),[q,X]=W.exports.useState(null),G=W.exports.useRef(!1),te=v||w,Z=W.exports.useRef(),Q=W.exports.useRef(),re=W.exports.useRef(),ae=W.exports.useRef(),[ce,pe]=F5({controlled:P,default:!1,name:"Tooltip",state:"open"});let Te=ce;const xe=N5(A),Ie=W.exports.useRef(),Oe=W.exports.useCallback(()=>{Ie.current!==void 0&&(document.body.style.WebkitUserSelect=Ie.current,Ie.current=void 0),clearTimeout(ae.current)},[]);W.exports.useEffect(()=>()=>{clearTimeout(Z.current),clearTimeout(Q.current),clearTimeout(re.current),Oe()},[Oe]);const Se=B=>{clearTimeout(mw),Mv=!0,pe(!0),T&&!Te&&T(B)},be=td(B=>{clearTimeout(mw),mw=setTimeout(()=>{Mv=!1},800+_),pe(!1),E&&Te&&E(B),clearTimeout(Z.current),Z.current=setTimeout(()=>{G.current=!1},z.transitions.duration.shortest)}),Re=B=>{G.current&&B.type!=="touchstart"||(j?j.removeAttribute("title"):Y(B.currentTarget),clearTimeout(Q.current),clearTimeout(re.current),x||Mv&&b?Q.current=setTimeout(()=>{Se(B)},Mv?b:x):Se(B))},Be=B=>{clearTimeout(Q.current),clearTimeout(re.current),re.current=setTimeout(()=>{be(B)},_)},{isFocusVisibleRef:U,onBlur:I,onFocus:ne,ref:ge}=G2(),[,ve]=W.exports.useState(!1),Ae=B=>{I(B),U.current===!1&&(ve(!1),Be(B))},Ne=B=>{j||Y(B.currentTarget),ne(B),U.current===!0&&(ve(!0),Re(B))},Le=B=>{G.current=!0;const ee=u.props;ee.onTouchStart&&ee.onTouchStart(B)},J=Re,Fe=Be,We=B=>{Le(B),clearTimeout(re.current),clearTimeout(Z.current),Oe(),Ie.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ae.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ie.current,Re(B)},S)},Ge=B=>{u.props.onTouchEnd&&u.props.onTouchEnd(B),Oe(),clearTimeout(re.current),re.current=setTimeout(()=>{be(B)},M)};W.exports.useEffect(()=>{if(!Te)return;function B(ee){(ee.key==="Escape"||ee.key==="Esc")&&be(ee)}return document.addEventListener("keydown",B),()=>{document.removeEventListener("keydown",B)}},[be,Te]);const Ye=Cs(Y,r),Xe=Cs(ge,Ye),wt=Cs(u.ref,Xe);V===""&&(Te=!1);const Ot=W.exports.useRef({x:0,y:0}),er=W.exports.useRef(),K=B=>{const ee=u.props;ee.onMouseMove&&ee.onMouseMove(B),Ot.current={x:B.clientX,y:B.clientY},er.current&&er.current.update()},he={},oe=typeof V=="string";f?(he.title=!Te&&oe&&!g?V:null,he["aria-describedby"]=Te?xe:null):(he["aria-label"]=oe?V:null,he["aria-labelledby"]=Te&&!oe?xe:null);const de=Ce({},he,k,u.props,{className:Ur(k.className,u.props.className),onTouchStart:Le,ref:wt},w?{onMouseMove:K}:{}),_e={};y||(de.onTouchStart=We,de.onTouchEnd=Ge),g||(de.onMouseOver=Ev(J,de.onMouseOver),de.onMouseLeave=Ev(Fe,de.onMouseLeave),te||(_e.onMouseOver=J,_e.onMouseLeave=Fe)),m||(de.onFocus=Ev(Ne,de.onFocus),de.onBlur=Ev(Ae,de.onBlur),te||(_e.onFocus=Ne,_e.onBlur=Ae));const ke=W.exports.useMemo(()=>{var B;let ee=[{name:"arrow",enabled:Boolean(q),options:{element:q,padding:4}}];return(B=R.popperOptions)!=null&&B.modifiers&&(ee=ee.concat(R.popperOptions.modifiers)),Ce({},R.popperOptions,{modifiers:ee})},[q,R]),at=Ce({},c,{isRtl:N,arrow:h,disableInteractive:te,placement:D,PopperComponentProp:L,touch:G.current}),ot=Nte(at),bt=(i=d.Popper)!=null?i:Fte,Qe=(n=(s=d.Transition)!=null?s:F)!=null?n:MO,At=(a=d.Tooltip)!=null?a:Ute,yt=(o=d.Arrow)!=null?o:jte,cr=Sv(bt,Ce({},R,p.popper),at),ni=Sv(Qe,Ce({},O,p.transition),at),Nn=Sv(At,Ce({},p.tooltip),at),Ns=Sv(yt,Ce({},p.arrow),at);return Me(W.exports.Fragment,{children:[W.exports.cloneElement(u,de),H(bt,Ce({as:L!=null?L:FF,placement:D,anchorEl:w?{getBoundingClientRect:()=>({top:Ot.current.y,left:Ot.current.x,right:Ot.current.x,bottom:Ot.current.y,width:0,height:0})}:j,popperRef:er,open:j?Te:!1,id:xe,transition:!0},_e,cr,{className:Ur(ot.popper,R==null?void 0:R.className,(l=p.popper)==null?void 0:l.className),popperOptions:ke,children:({TransitionProps:B})=>{var ee,ue;return H(Qe,Ce({timeout:z.transitions.duration.shorter},B,ni,{children:Me(At,Ce({},Nn,{className:Ur(ot.tooltip,(ee=p.tooltip)==null?void 0:ee.className),children:[V,h?H(yt,Ce({},Ns,{className:Ur(ot.arrow,(ue=p.arrow)==null?void 0:ue.className),ref:X})):null]}))}))}}))]})}),Gte=Vte,Hte={initial:{filter:"none",boxShadow:"none"},animate:{filter:"blur(50px)",boxShadow:"#f7404b88 15px 15px 15px 5px inset, #f7404b66 100px 100px 100px 100px inset, #f7404b44 200px 200px 200px 200px inset, #f7404b22 300px 300px 300px 300px inset"}},vd=({title:e,description:t,titleFlexStyles:r="d-flex flex-row align-items-center justify-content-between",iconTitle:i=H(zF,{className:"fs-6 navbar-styled__icon"}),titleHelp:n,path:s="/",withHover:a=!0})=>{const[o,l]=W.exports.useState(!1);return H(j2,{to:s,className:"text-dark text-decoration-none ","data-bs-dismiss":"offcanvas","aria-label":"Close",state:{title:e},children:Me(Ct,{component:ui.div,sx:{maxWidth:"10rem",position:"relative"},className:`mx-2 mx-lg-4 my-3 ${a?"navbar-styled":""}`,onHoverStart:()=>l(!0),onHoverEnd:()=>l(!1),children:[H(Ct,{component:ui.div,sx:{width:"125%",height:"125%",rotate:"-5deg",position:"absolute",borderRadius:"50%",left:"50%",top:"50%",transform:"translate(-55%, -55%)",zIndex:-1},variants:Hte,animate:o?"animate":"initial",transition:{duration:.25,ease:"circIn"}}),n&&H(Tt,{variant:"body1",fontWeight:500,children:n}),Me("div",{className:`border-top pt-1 border-dark border-2 ${r} navbar-styled__border`,children:[H(Tt,{variant:"subtitle1",className:"m-0",sx:{lineHeight:1.2},gutterBottom:!0,children:e}),i]}),H(Tt,{variant:"body2",className:"text-muted",style:{fontSize:"0.85rem"},children:t})]})})},Wte=({children:e,className:t})=>Me("div",{className:"offcanvas offcanvas-end "+t,tabIndex:-1,id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",children:[Me("div",{className:"offcanvas-header",children:[H("h5",{id:"offcanvasRightLabel",children:"Navigation"}),H("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),H("div",{className:"offcanvas-body",children:e})]}),qte=()=>Me(on,{children:[H(Aee,{children:H(IF,{className:"fs-1 text-dark d-md-none","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"})}),H(Wte,{className:"d-md-none",children:H(on,{children:Me("ul",{className:"navbar-nav mb-2 mb-lg-0 bg-transparent fs-6",children:[H(cw,{to:"/",className:"text-dark cursor-pointer hover-color text-decoration-none","data-bs-dismiss":"offcanvas","aria-label":"Close",state:{title:"Home"},children:Me("li",{className:" nav-item d-flex align-items-center mb-2",style:{fontWeight:"600"},children:[H(RF,{className:"navbar-styled__icon fs-5 me-2"})," Home"]})}),H(cw,{to:"/my-works",className:"text-dark cursor-pointer hover-color text-decoration-none","data-bs-dismiss":"offcanvas","aria-label":"Close",state:{title:"My Works"},children:Me("li",{className:" nav-item d-flex align-items-center mb-2",style:{fontWeight:"600"},children:[H(BF,{className:"navbar-styled__icon fs-5 me-2"}),"My Works Collection"]})}),H(cw,{to:"/about-me",className:"text-dark cursor-pointer hover-color text-decoration-none","data-bs-dismiss":"offcanvas","aria-label":"Close",state:{title:"About Me"},children:Me("li",{className:" nav-item d-flex align-items-center mb-2",style:{fontWeight:"600"},children:[H(kF,{className:"navbar-styled__icon fs-5 me-2"}),"About Me"]})})]})})}),H(Xee,{className:"d-none d-md-flex",children:H(on,{children:Me("ul",{className:"navbar-nav me-4 mb-2 mb-lg-0 bg-transparent ms-auto d-flex flex-row",children:[H(vd,{title:"Home",description:"I'm Jean Rada a FullStack Developer.",path:"/"}),H(vd,{title:"My Works",description:"My works collection.",path:"/my-works"}),H(vd,{title:"About Me",description:"Jean Rada's personal information",path:"/about-me"})]})})})]}),$te=()=>H("div",{className:"bg-transparent container-fluid top-0 start-0 p-3",style:{zIndex:"1"},children:H("div",{className:"row bg-transparent",children:H("div",{className:"col-12 bg-transparent py-0 ",children:H("nav",{className:"navbar navbar-expand-lg navbar-light p-0 bg-transparent",children:Me("div",{className:"container-fluid p-0 bg-transparent d-flex flex-row flex-nowrap align-items-center justify-content-between",children:[H("div",{className:"navbar-brand bg-transparent d-flex align-items-start",children:H(j2,{to:"/",className:"text-dark text-decoration-none navbar-brand hover-color",children:Me(Tt,{variant:"h5",className:" fw-bold",children:["Jean",H("br",{}),"Victor Rada",H("span",{className:"fs-4 fw-bold",children:"."})]})})}),H(qte,{})]})})})})}),Xte={initial:{filter:"none",boxShadow:"none"},animate:{filter:"blur(40px)",boxShadow:"#f7404b88 15px 15px 15px 5px inset, #f7404b66 100px 100px 100px 100px inset, #f7404b44 200px 200px 200px 200px inset, #f7404b22 300px 300px 300px 300px inset"}},Yte={initial:{transform:"scale(1)"},animate:{transform:"scale(1.5)"}},SC=({text:e,sm:t=!1,className:r,onClick:i=()=>{}})=>{const[n,s]=W.exports.useState(!1);return Me(Tt,{component:ui.div,whileHover:{transform:"scale(0.95)"},onHoverStart:()=>s(!0),onHoverEnd:()=>s(!1),variant:t?"subtitle1":"h5",className:`text-center text-dark w-100 h-100 position-relative border border-dark border-2 rounded-circle d-flex align-items-center justify-content-center button-styled ${t?"button-styled-size-sm":"button-styled-size"} ${r||""}`,sx:{cursor:"pointer",transform:"scale(1)",position:"relative",borderWidth:2,borderColor:"black"},onClick:i,children:[H(Ct,{component:ui.div,sx:{width:"125%",height:"125%",position:"absolute",borderRadius:"50%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:-1},variants:Xte,animate:n?"animate":"initial"}),H("div",{className:"position-absolute bg-dark button-styled__line",style:{height:"0.05rem",width:"150%",transform:"rotate(-30deg)"}}),H(ui.span,{variants:Yte,animate:n?"animate":"initial",children:e})]})},Qte=()=>Me("div",{className:"row d-flex flex-row py-5 align-items-center flex-nowrap",children:[Me("div",{className:"col-8 col-md-9 col-lg-9 m-md-auto",children:[Me(Tt,{className:"border border-dark border-2 border-top-0 border-end-0 border-start-0 pb-3",variant:"h1",fontWeight:500,children:["Ready To Talk ",H("span",{className:"text-gradient text-glow",children:"Growth"})]}),H("a",{href:"mailto:radajean36@gmail.com",className:"h6 mt-2 text-decoration-underline text-dark ",children:H(Tt,{variant:"body1",children:"radajean36@gmail.com"})})]}),H("div",{className:"col-4 col-md-3 col-lg-3 d-flex align-items-center justify-content-center",children:H("a",{target:"_blank",href:"https://v0v3ykkaptr.typeform.com/to/QW2TUmbK",className:"text-decoration-none",children:H(SC,{text:"Let's Talk"})})})]}),Kte=()=>Me(Ct,{className:"position-relative px-3 pt-4 bg-white overflow-hidden",style:{zIndex:"1"},children:[H($te,{}),H("div",{className:"container-xxl position-relative",style:{zIndex:"-10",backdropFilter:"blur(25px)"},children:H(lX,{})}),H(Qte,{})]});var _C={},Zte=Gi.exports;Object.defineProperty(_C,"__esModule",{value:!0});var AC=_C.default=void 0,Jte=Zte(dn()),ere=pn,tre=(0,Jte.default)((0,ere.jsx)("path",{d:"M18.62 18h-5.24l2-4H13V6h8v7.24L18.62 18zm-2-2h.76L19 12.76V8h-4v4h3.62l-2 4zm-8 2H3.38l2-4H3V6h8v7.24L8.62 18zm-2-2h.76L9 12.76V8H5v4h3.62l-2 4z"}),"FormatQuoteOutlined");AC=_C.default=tre;const rre="/jeansyo/assets/CV_Jean_Rada.5b8331f4.pdf",VF="/jeansyo/assets/gradient.712df0a6.png",ire=({start:e=!0})=>Me("div",{className:"col-12 col-md-11 col-lg-11 d-flex flex-wrap flex-sm-nowrap flex-sm-row my-5 mx-auto",children:[Me("div",{className:`position-relative overflow-hidden order-0 col-12 col-sm-6 col-md-5 order-1 my-sm-4 ms-sm-4 ${e?"order-sm-1":"order-sm-0 "}`,style:{maxWidth:"30rem",maxHeight:"30rem",minWidth:"17rem",minHeight:"25rem"},children:[H("img",{className:"",src:VF,style:{width:"100%",height:"100%"}}),H("img",{className:"position-absolute",src:"/about.jpg",style:{width:"100%",height:"100%",objectFit:"cover",left:0,top:0}})]}),Me("div",{className:`order-1 mt-md-3 mt-sm-0 position-relative col-12 col-sm-6 p-sm-3 col-md-7 order-0 d-flex flex-column mb-3 mb-sm-0 ${e?"order-sm-0":"order-sm-1"}`,children:[H(AC,{style:{fontSize:"6rem",top:"-1.7rem",left:"-4rem"},className:"position-absolute d-none d-sm-block text-dark"}),Me(Tt,{variant:"h2",fontWeight:400,className:`col-12 h1 mt-md-4  pt-5 ${e?"ms-sm-2 ms-md-3 ms-lg-4":""}`,children:["I",H("span",{className:"text-gradient text-glow",children:"'m"})]}),H("div",{className:"col-12 col-sm-12 col-md-12 col-lg-10 d-flex flex-row align-items-center my-2 my-md-3",children:Me("div",{className:"ps-2 ps-sm-2 ps-md-3 ps-lg-4 col-12 d-flex flex-column",children:[Me(Tt,{variant:"body1",className:"text-muted col-12 m-0",children:["FullStack Developer and NLP/AI Integration specialist with +",new Date().getFullYear()-2019," years of experience developing web and mobile applications with Python, Langchain, Langgraph, JavaScript, Typescript, React, Flutter, Swift, Node, and Java.",H("br",{}),H("br",{}),"I have experience participating in the entire application development cycle, ensuring the quality of the system. I also have solid experience in managing and monitoring cloud servers with Amazon Web Services and putting Machine Learning models into production.",H("br",{}),H("br",{}),"I consider myself a self-taught person, open to learning and try new technologies."]}),H("a",{href:rre,target:"_blank",download:"CV_Jean_Rada.pdf",className:"text-decoration-none text-dark ",children:H(SC,{text:"Get CV",sm:!1,className:"mt-4 ms-0 ms-sm-3 ms-md-auto mt-3"})})]})})]})]}),nre=()=>Me("div",{className:"row overflow-visible mt-5 position-relative",children:[Me("div",{className:"col-12",children:[Me("div",{className:"col-12 fs-5 d-flex flex-row align-items-center justify-content-start mb-4",children:[H("div",{className:"col-1 bg-dark me-3",style:{height:"0.05rem"}}),H(Tt,{textTransform:"uppercase",variant:"subtitle2",textAlign:{xs:"left",sm:"left",md:"left",lg:"left"},children:"About Me"})]}),H("div",{className:"col-12",children:H(ire,{start:!1})})]}),H("div",{className:"circle-animated-static circle-animated__static1"}),H("div",{className:"circle-animated-static circle-animated__static3"}),H("div",{className:"circle-animated-static circle-animated__static4"})]});var MC={},sre=Gi.exports;Object.defineProperty(MC,"__esModule",{value:!0});var GF=MC.default=void 0,are=sre(dn()),ore=pn,lre=(0,are.default)((0,ore.jsx)("path",{d:"M7 5h10v2h2V3c0-1.1-.9-1.99-2-1.99L7 1c-1.1 0-2 .9-2 2v4h2V5zm8.41 11.59L20 12l-4.59-4.59L14 8.83 17.17 12 14 15.17l1.41 1.42zM10 15.17 6.83 12 10 8.83 8.59 7.41 4 12l4.59 4.59L10 15.17zM17 19H7v-2H5v4c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-4h-2v2z"}),"DeveloperMode");GF=MC.default=lre;var EC={},cre=Gi.exports;Object.defineProperty(EC,"__esModule",{value:!0});var HF=EC.default=void 0,ure=cre(dn()),hre=pn,dre=(0,ure.default)((0,hre.jsx)("path",{d:"M15.5 13.5c0 2-2.5 3.5-2.5 5h-2c0-1.5-2.5-3-2.5-5 0-1.93 1.57-3.5 3.5-3.5s3.5 1.57 3.5 3.5zm-2.5 6h-2V21h2v-1.5zm6-6.5c0 1.68-.59 3.21-1.58 4.42l1.42 1.42C20.18 17.27 21 15.23 21 13c0-2.74-1.23-5.19-3.16-6.84l-1.42 1.42C17.99 8.86 19 10.82 19 13zm-3-8-4-4v3c-4.97 0-9 4.03-9 9 0 2.23.82 4.27 2.16 5.84l1.42-1.42C5.59 16.21 5 14.68 5 13c0-3.86 3.14-7 7-7v3l4-4z"}),"ModelTraining");HF=EC.default=dre;var CC={},pre=Gi.exports;Object.defineProperty(CC,"__esModule",{value:!0});var WF=CC.default=void 0,fre=pre(dn()),mre=pn,gre=(0,fre.default)((0,mre.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm0 16H5V7h14v12zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5zM12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4zm0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"Preview");WF=CC.default=gre;function DO(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function TC(e={},t={}){Object.keys(t).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:DO(t[r])&&DO(e[r])&&Object.keys(t[r]).length>0&&TC(e[r],t[r])})}const qF={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ei(){const e=typeof document<"u"?document:{};return TC(e,qF),e}const vre={document:qF,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function yi(){const e=typeof window<"u"?window:{};return TC(e,vre),e}function yre(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get(){return t},set(r){t.__proto__=r}})}class Il extends Array{constructor(t){typeof t=="number"?super(t):(super(...t||[]),yre(this))}}function Ug(e=[]){const t=[];return e.forEach(r=>{Array.isArray(r)?t.push(...Ug(r)):t.push(r)}),t}function $F(e,t){return Array.prototype.filter.call(e,t)}function xre(e){const t=[];for(let r=0;r<e.length;r+=1)t.indexOf(e[r])===-1&&t.push(e[r]);return t}function bre(e,t){if(typeof e!="string")return[e];const r=[],i=t.querySelectorAll(e);for(let n=0;n<i.length;n+=1)r.push(i[n]);return r}function je(e,t){const r=yi(),i=Ei();let n=[];if(!t&&e instanceof Il)return e;if(!e)return new Il(n);if(typeof e=="string"){const s=e.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){let a="div";s.indexOf("<li")===0&&(a="ul"),s.indexOf("<tr")===0&&(a="tbody"),(s.indexOf("<td")===0||s.indexOf("<th")===0)&&(a="tr"),s.indexOf("<tbody")===0&&(a="table"),s.indexOf("<option")===0&&(a="select");const o=i.createElement(a);o.innerHTML=s;for(let l=0;l<o.childNodes.length;l+=1)n.push(o.childNodes[l])}else n=bre(e.trim(),t||i)}else if(e.nodeType||e===r||e===i)n.push(e);else if(Array.isArray(e)){if(e instanceof Il)return e;n=e}return new Il(xre(n))}je.fn=Il.prototype;function wre(...e){const t=Ug(e.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.add(...t)}),this}function Sre(...e){const t=Ug(e.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.remove(...t)}),this}function _re(...e){const t=Ug(e.map(r=>r.split(" ")));this.forEach(r=>{t.forEach(i=>{r.classList.toggle(i)})})}function Are(...e){const t=Ug(e.map(r=>r.split(" ")));return $F(this,r=>t.filter(i=>r.classList.contains(i)).length>0).length>0}function Mre(e,t){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(let r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(e,t);else for(const i in e)this[r][i]=e[i],this[r].setAttribute(i,e[i]);return this}function Ere(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function Cre(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function Tre(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration=typeof e!="string"?`${e}ms`:e;return this}function Pre(...e){let[t,r,i,n]=e;typeof e[1]=="function"&&([t,i,n]=e,r=void 0),n||(n=!1);function s(c){const h=c.target;if(!h)return;const u=c.target.dom7EventData||[];if(u.indexOf(c)<0&&u.unshift(c),je(h).is(r))i.apply(h,u);else{const d=je(h).parents();for(let p=0;p<d.length;p+=1)je(d[p]).is(r)&&i.apply(d[p],u)}}function a(c){const h=c&&c.target?c.target.dom7EventData||[]:[];h.indexOf(c)<0&&h.unshift(c),i.apply(this,h)}const o=t.split(" ");let l;for(let c=0;c<this.length;c+=1){const h=this[c];if(r)for(l=0;l<o.length;l+=1){const u=o[l];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[u]||(h.dom7LiveListeners[u]=[]),h.dom7LiveListeners[u].push({listener:i,proxyListener:s}),h.addEventListener(u,s,n)}else for(l=0;l<o.length;l+=1){const u=o[l];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[u]||(h.dom7Listeners[u]=[]),h.dom7Listeners[u].push({listener:i,proxyListener:a}),h.addEventListener(u,a,n)}}return this}function Dre(...e){let[t,r,i,n]=e;typeof e[1]=="function"&&([t,i,n]=e,r=void 0),n||(n=!1);const s=t.split(" ");for(let a=0;a<s.length;a+=1){const o=s[a];for(let l=0;l<this.length;l+=1){const c=this[l];let h;if(!r&&c.dom7Listeners?h=c.dom7Listeners[o]:r&&c.dom7LiveListeners&&(h=c.dom7LiveListeners[o]),h&&h.length)for(let u=h.length-1;u>=0;u-=1){const d=h[u];i&&d.listener===i||i&&d.listener&&d.listener.dom7proxy&&d.listener.dom7proxy===i?(c.removeEventListener(o,d.proxyListener,n),h.splice(u,1)):i||(c.removeEventListener(o,d.proxyListener,n),h.splice(u,1))}}}return this}function Ore(...e){const t=yi(),r=e[0].split(" "),i=e[1];for(let n=0;n<r.length;n+=1){const s=r[n];for(let a=0;a<this.length;a+=1){const o=this[a];if(t.CustomEvent){const l=new t.CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0});o.dom7EventData=e.filter((c,h)=>h>0),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}}}return this}function Lre(e){const t=this;function r(i){i.target===this&&(e.call(this,i),t.off("transitionend",r))}return e&&t.on("transitionend",r),this}function Ire(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function Rre(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function Bre(){if(this.length>0){const e=yi(),t=Ei(),r=this[0],i=r.getBoundingClientRect(),n=t.body,s=r.clientTop||n.clientTop||0,a=r.clientLeft||n.clientLeft||0,o=r===e?e.scrollY:r.scrollTop,l=r===e?e.scrollX:r.scrollLeft;return{top:i.top+o-s,left:i.left+l-a}}return null}function kre(){const e=yi();return this[0]?e.getComputedStyle(this[0],null):{}}function zre(e,t){const r=yi();let i;if(arguments.length===1)if(typeof e=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(i=0;i<this.length;i+=1)for(const n in e)this[i].style[n]=e[n];return this}if(arguments.length===2&&typeof e=="string"){for(i=0;i<this.length;i+=1)this[i].style[e]=t;return this}return this}function Nre(e){return e?(this.forEach((t,r)=>{e.apply(t,[t,r])}),this):this}function Fre(e){const t=$F(this,e);return je(t)}function Ure(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function jre(e){if(typeof e>"u")return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this}function Vre(e){const t=yi(),r=Ei(),i=this[0];let n,s;if(!i||typeof e>"u")return!1;if(typeof e=="string"){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(n=je(e),s=0;s<n.length;s+=1)if(n[s]===i)return!0;return!1}if(e===r)return i===r;if(e===t)return i===t;if(e.nodeType||e instanceof Il){for(n=e.nodeType?[e]:e,s=0;s<n.length;s+=1)if(n[s]===i)return!0;return!1}return!1}function Gre(){let e=this[0],t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Hre(e){if(typeof e>"u")return this;const t=this.length;if(e>t-1)return je([]);if(e<0){const r=t+e;return r<0?je([]):je([this[r]])}return je([this[e]])}function Wre(...e){let t;const r=Ei();for(let i=0;i<e.length;i+=1){t=e[i];for(let n=0;n<this.length;n+=1)if(typeof t=="string"){const s=r.createElement("div");for(s.innerHTML=t;s.firstChild;)this[n].appendChild(s.firstChild)}else if(t instanceof Il)for(let s=0;s<t.length;s+=1)this[n].appendChild(t[s]);else this[n].appendChild(t)}return this}function qre(e){const t=Ei();let r,i;for(r=0;r<this.length;r+=1)if(typeof e=="string"){const n=t.createElement("div");for(n.innerHTML=e,i=n.childNodes.length-1;i>=0;i-=1)this[r].insertBefore(n.childNodes[i],this[r].childNodes[0])}else if(e instanceof Il)for(i=0;i<e.length;i+=1)this[r].insertBefore(e[i],this[r].childNodes[0]);else this[r].insertBefore(e,this[r].childNodes[0]);return this}function $re(e){return this.length>0?e?this[0].nextElementSibling&&je(this[0].nextElementSibling).is(e)?je([this[0].nextElementSibling]):je([]):this[0].nextElementSibling?je([this[0].nextElementSibling]):je([]):je([])}function Xre(e){const t=[];let r=this[0];if(!r)return je([]);for(;r.nextElementSibling;){const i=r.nextElementSibling;e?je(i).is(e)&&t.push(i):t.push(i),r=i}return je(t)}function Yre(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&je(t.previousElementSibling).is(e)?je([t.previousElementSibling]):je([]):t.previousElementSibling?je([t.previousElementSibling]):je([])}return je([])}function Qre(e){const t=[];let r=this[0];if(!r)return je([]);for(;r.previousElementSibling;){const i=r.previousElementSibling;e?je(i).is(e)&&t.push(i):t.push(i),r=i}return je(t)}function Kre(e){const t=[];for(let r=0;r<this.length;r+=1)this[r].parentNode!==null&&(e?je(this[r].parentNode).is(e)&&t.push(this[r].parentNode):t.push(this[r].parentNode));return je(t)}function Zre(e){const t=[];for(let r=0;r<this.length;r+=1){let i=this[r].parentNode;for(;i;)e?je(i).is(e)&&t.push(i):t.push(i),i=i.parentNode}return je(t)}function Jre(e){let t=this;return typeof e>"u"?je([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function eie(e){const t=[];for(let r=0;r<this.length;r+=1){const i=this[r].querySelectorAll(e);for(let n=0;n<i.length;n+=1)t.push(i[n])}return je(t)}function tie(e){const t=[];for(let r=0;r<this.length;r+=1){const i=this[r].children;for(let n=0;n<i.length;n+=1)(!e||je(i[n]).is(e))&&t.push(i[n])}return je(t)}function rie(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}const OO={addClass:wre,removeClass:Sre,hasClass:Are,toggleClass:_re,attr:Mre,removeAttr:Ere,transform:Cre,transition:Tre,on:Pre,off:Dre,trigger:Ore,transitionEnd:Lre,outerWidth:Ire,outerHeight:Rre,styles:kre,offset:Bre,css:zre,each:Nre,html:Ure,text:jre,is:Vre,index:Gre,eq:Hre,append:Wre,prepend:qre,next:$re,nextAll:Xre,prev:Yre,prevAll:Qre,parent:Kre,parents:Zre,closest:Jre,find:eie,children:tie,filter:Fre,remove:rie};Object.keys(OO).forEach(e=>{Object.defineProperty(je.fn,e,{value:OO[e],writable:!0})});function iie(e){const t=e;Object.keys(t).forEach(r=>{try{t[r]=null}catch{}try{delete t[r]}catch{}})}function a1(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function eg(){return Date.now()}function nie(e){const t=yi();let r;return t.getComputedStyle&&(r=t.getComputedStyle(e,null)),!r&&e.currentStyle&&(r=e.currentStyle),r||(r=e.style),r}function sie(e,t){t===void 0&&(t="x");const r=yi();let i,n,s;const a=nie(e);return r.WebKitCSSMatrix?(n=a.transform||a.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new r.WebKitCSSMatrix(n==="none"?"":n)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),t==="x"&&(r.WebKitCSSMatrix?n=s.m41:i.length===16?n=parseFloat(i[12]):n=parseFloat(i[4])),t==="y"&&(r.WebKitCSSMatrix?n=s.m42:i.length===16?n=parseFloat(i[13]):n=parseFloat(i[5])),n||0}function Cv(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function aie(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Wn(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let r=1;r<arguments.length;r+=1){const i=r<0||arguments.length<=r?void 0:arguments[r];if(i!=null&&!aie(i)){const n=Object.keys(Object(i)).filter(s=>t.indexOf(s)<0);for(let s=0,a=n.length;s<a;s+=1){const o=n[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(Cv(e[o])&&Cv(i[o])?i[o].__swiper__?e[o]=i[o]:Wn(e[o],i[o]):!Cv(e[o])&&Cv(i[o])?(e[o]={},i[o].__swiper__?e[o]=i[o]:Wn(e[o],i[o])):e[o]=i[o])}}}return e}function Tv(e,t,r){e.style.setProperty(t,r)}function XF(e){let{swiper:t,targetPosition:r,side:i}=e;const n=yi(),s=-t.translate;let a=null,o;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const c=r>s?"next":"prev",h=(d,p)=>c==="next"&&d>=p||c==="prev"&&d<=p,u=()=>{o=new Date().getTime(),a===null&&(a=o);const d=Math.max(Math.min((o-a)/l,1),0),p=.5-Math.cos(d*Math.PI)/2;let f=s+p*(r-s);if(h(f,r)&&(f=r),t.wrapperEl.scrollTo({[i]:f}),h(f,r)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[i]:f})}),n.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=n.requestAnimationFrame(u)};u()}let gw;function oie(){const e=yi(),t=Ei();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let i=!1;try{const n=Object.defineProperty({},"passive",{get(){i=!0}});e.addEventListener("testPassiveListener",null,n)}catch{}return i}(),gestures:function(){return"ongesturestart"in e}()}}function YF(){return gw||(gw=oie()),gw}let vw;function lie(e){let{userAgent:t}=e===void 0?{}:e;const r=YF(),i=yi(),n=i.navigator.platform,s=t||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let h=s.match(/(iPad).*OS\s([\d_]+)/);const u=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!h&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=n==="Win32";let f=n==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&f&&r.touch&&m.indexOf(`${o}x${l}`)>=0&&(h=s.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),f=!1),c&&!p&&(a.os="android",a.android=!0),(h||d||u)&&(a.os="ios",a.ios=!0),a}function cie(e){return e===void 0&&(e={}),vw||(vw=lie(e)),vw}let yw;function uie(){const e=yi();function t(){const r=e.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function hie(){return yw||(yw=uie()),yw}function die(e){let{swiper:t,on:r,emit:i}=e;const n=yi();let s=null,a=null;const o=()=>{!t||t.destroyed||!t.initialized||(i("beforeResize"),i("resize"))},l=()=>{!t||t.destroyed||!t.initialized||(s=new ResizeObserver(u=>{a=n.requestAnimationFrame(()=>{const{width:d,height:p}=t;let f=d,m=p;u.forEach(g=>{let{contentBoxSize:v,contentRect:y,target:x}=g;x&&x!==t.el||(f=y?y.width:(v[0]||v).inlineSize,m=y?y.height:(v[0]||v).blockSize)}),(f!==d||m!==p)&&o()})}),s.observe(t.el))},c=()=>{a&&n.cancelAnimationFrame(a),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null)},h=()=>{!t||t.destroyed||!t.initialized||i("orientationchange")};r("init",()=>{if(t.params.resizeObserver&&typeof n.ResizeObserver<"u"){l();return}n.addEventListener("resize",o),n.addEventListener("orientationchange",h)}),r("destroy",()=>{c(),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",h)})}function pie(e){let{swiper:t,extendParams:r,on:i,emit:n}=e;const s=[],a=yi(),o=function(h,u){u===void 0&&(u={});const d=a.MutationObserver||a.WebkitMutationObserver,p=new d(f=>{if(f.length===1){n("observerUpdate",f[0]);return}const m=function(){n("observerUpdate",f[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});p.observe(h,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:typeof u.childList>"u"?!0:u.childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),s.push(p)},l=()=>{if(!!t.params.observer){if(t.params.observeParents){const h=t.$el.parents();for(let u=0;u<h.length;u+=1)o(h[u])}o(t.$el[0],{childList:t.params.observeSlideChildren}),o(t.$wrapperEl[0],{attributes:!1})}},c=()=>{s.forEach(h=>{h.disconnect()}),s.splice(0,s.length)};r({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}const fie={on(e,t,r){const i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;const n=r?"unshift":"push";return e.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][n](t)}),i},once(e,t,r){const i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;function n(){i.off(e,n),n.__emitterProxy&&delete n.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];t.apply(i,a)}return n.__emitterProxy=t,i.on(e,n,r)},onAny(e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=t?"unshift":"push";return r.eventsAnyListeners.indexOf(e)<0&&r.eventsAnyListeners[i](e),r},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const r=t.eventsAnyListeners.indexOf(e);return r>=0&&t.eventsAnyListeners.splice(r,1),t},off(e,t){const r=this;return!r.eventsListeners||r.destroyed||!r.eventsListeners||e.split(" ").forEach(i=>{typeof t>"u"?r.eventsListeners[i]=[]:r.eventsListeners[i]&&r.eventsListeners[i].forEach((n,s)=>{(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&r.eventsListeners[i].splice(s,1)})}),r},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,r,i;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(t=s[0],r=s.slice(1,s.length),i=e):(t=s[0].events,r=s[0].data,i=s[0].context||e),r.unshift(i),(Array.isArray(t)?t:t.split(" ")).forEach(l=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...r])}),e.eventsListeners&&e.eventsListeners[l]&&e.eventsListeners[l].forEach(c=>{c.apply(i,r)})}),e}};function mie(){const e=this;let t,r;const i=e.$el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=i[0].clientWidth,typeof e.params.height<"u"&&e.params.height!==null?r=e.params.height:r=i[0].clientHeight,!(t===0&&e.isHorizontal()||r===0&&e.isVertical())&&(t=t-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),r=r-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(r)&&(r=0),Object.assign(e,{width:t,height:r,size:e.isHorizontal()?t:r}))}function gie(){const e=this;function t(E){return e.isHorizontal()?E:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[E]}function r(E,T){return parseFloat(E.getPropertyValue(t(T))||0)}const i=e.params,{$wrapperEl:n,size:s,rtlTranslate:a,wrongRTL:o}=e,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,h=n.children(`.${e.params.slideClass}`),u=l?e.virtual.slides.length:h.length;let d=[];const p=[],f=[];let m=i.slidesOffsetBefore;typeof m=="function"&&(m=i.slidesOffsetBefore.call(e));let g=i.slidesOffsetAfter;typeof g=="function"&&(g=i.slidesOffsetAfter.call(e));const v=e.snapGrid.length,y=e.slidesGrid.length;let x=i.spaceBetween,b=-m,S=0,w=0;if(typeof s>"u")return;typeof x=="string"&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*s),e.virtualSize=-x,a?h.css({marginLeft:"",marginBottom:"",marginTop:""}):h.css({marginRight:"",marginBottom:"",marginTop:""}),i.centeredSlides&&i.cssMode&&(Tv(e.wrapperEl,"--swiper-centered-offset-before",""),Tv(e.wrapperEl,"--swiper-centered-offset-after",""));const A=i.grid&&i.grid.rows>1&&e.grid;A&&e.grid.initSlides(u);let _;const M=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(E=>typeof i.breakpoints[E].slidesPerView<"u").length>0;for(let E=0;E<u;E+=1){_=0;const T=h.eq(E);if(A&&e.grid.updateSlide(E,T,u,t),T.css("display")!=="none"){if(i.slidesPerView==="auto"){M&&(h[E].style[t("width")]="");const P=getComputedStyle(T[0]),D=T[0].style.transform,L=T[0].style.webkitTransform;if(D&&(T[0].style.transform="none"),L&&(T[0].style.webkitTransform="none"),i.roundLengths)_=e.isHorizontal()?T.outerWidth(!0):T.outerHeight(!0);else{const R=r(P,"width"),V=r(P,"padding-left"),F=r(P,"padding-right"),O=r(P,"margin-left"),k=r(P,"margin-right"),z=P.getPropertyValue("box-sizing");if(z&&z==="border-box")_=R+O+k;else{const{clientWidth:N,offsetWidth:j}=T[0];_=R+V+F+O+k+(j-N)}}D&&(T[0].style.transform=D),L&&(T[0].style.webkitTransform=L),i.roundLengths&&(_=Math.floor(_))}else _=(s-(i.slidesPerView-1)*x)/i.slidesPerView,i.roundLengths&&(_=Math.floor(_)),h[E]&&(h[E].style[t("width")]=`${_}px`);h[E]&&(h[E].swiperSlideSize=_),f.push(_),i.centeredSlides?(b=b+_/2+S/2+x,S===0&&E!==0&&(b=b-s/2-x),E===0&&(b=b-s/2-x),Math.abs(b)<1/1e3&&(b=0),i.roundLengths&&(b=Math.floor(b)),w%i.slidesPerGroup===0&&d.push(b),p.push(b)):(i.roundLengths&&(b=Math.floor(b)),(w-Math.min(e.params.slidesPerGroupSkip,w))%e.params.slidesPerGroup===0&&d.push(b),p.push(b),b=b+_+x),e.virtualSize+=_+x,S=_,w+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,a&&o&&(i.effect==="slide"||i.effect==="coverflow")&&n.css({width:`${e.virtualSize+i.spaceBetween}px`}),i.setWrapperSize&&n.css({[t("width")]:`${e.virtualSize+i.spaceBetween}px`}),A&&e.grid.updateWrapperSize(_,d,t),!i.centeredSlides){const E=[];for(let T=0;T<d.length;T+=1){let P=d[T];i.roundLengths&&(P=Math.floor(P)),d[T]<=e.virtualSize-s&&E.push(P)}d=E,Math.floor(e.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-s)}if(d.length===0&&(d=[0]),i.spaceBetween!==0){const E=e.isHorizontal()&&a?"marginLeft":t("marginRight");h.filter((T,P)=>i.cssMode?P!==h.length-1:!0).css({[E]:`${x}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let E=0;f.forEach(P=>{E+=P+(i.spaceBetween?i.spaceBetween:0)}),E-=i.spaceBetween;const T=E-s;d=d.map(P=>P<0?-m:P>T?T+g:P)}if(i.centerInsufficientSlides){let E=0;if(f.forEach(T=>{E+=T+(i.spaceBetween?i.spaceBetween:0)}),E-=i.spaceBetween,E<s){const T=(s-E)/2;d.forEach((P,D)=>{d[D]=P-T}),p.forEach((P,D)=>{p[D]=P+T})}}if(Object.assign(e,{slides:h,snapGrid:d,slidesGrid:p,slidesSizesGrid:f}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){Tv(e.wrapperEl,"--swiper-centered-offset-before",`${-d[0]}px`),Tv(e.wrapperEl,"--swiper-centered-offset-after",`${e.size/2-f[f.length-1]/2}px`);const E=-e.snapGrid[0],T=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(P=>P+E),e.slidesGrid=e.slidesGrid.map(P=>P+T)}if(u!==c&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),!l&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const E=`${i.containerModifierClass}backface-hidden`,T=e.$el.hasClass(E);u<=i.maxBackfaceHiddenSlides?T||e.$el.addClass(E):T&&e.$el.removeClass(E)}}function vie(e){const t=this,r=[],i=t.virtual&&t.params.virtual.enabled;let n=0,s;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const a=o=>i?t.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===o)[0]:t.slides.eq(o)[0];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||je([])).each(o=>{r.push(o)});else for(s=0;s<Math.ceil(t.params.slidesPerView);s+=1){const o=t.activeIndex+s;if(o>t.slides.length&&!i)break;r.push(a(o))}else r.push(a(t.activeIndex));for(s=0;s<r.length;s+=1)if(typeof r[s]<"u"){const o=r[s].offsetHeight;n=o>n?o:n}(n||n===0)&&t.$wrapperEl.css("height",`${n}px`)}function yie(){const e=this,t=e.slides;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop}function xie(e){e===void 0&&(e=this&&this.translate||0);const t=this,r=t.params,{slides:i,rtlTranslate:n,snapGrid:s}=t;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let a=-e;n&&(a=e),i.removeClass(r.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let o=0;o<i.length;o+=1){const l=i[o];let c=l.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(c-=i[0].swiperSlideOffset);const h=(a+(r.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),u=(a-s[0]+(r.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),d=-(a-c),p=d+t.slidesSizesGrid[o];(d>=0&&d<t.size-1||p>1&&p<=t.size||d<=0&&p>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(o),i.eq(o).addClass(r.slideVisibleClass)),l.progress=n?-h:h,l.originalProgress=n?-u:u}t.visibleSlides=je(t.visibleSlides)}function bie(e){const t=this;if(typeof e>"u"){const c=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*c||0}const r=t.params,i=t.maxTranslate()-t.minTranslate();let{progress:n,isBeginning:s,isEnd:a}=t;const o=s,l=a;i===0?(n=0,s=!0,a=!0):(n=(e-t.minTranslate())/i,s=n<=0,a=n>=1),Object.assign(t,{progress:n,isBeginning:s,isEnd:a}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),s&&!o&&t.emit("reachBeginning toEdge"),a&&!l&&t.emit("reachEnd toEdge"),(o&&!s||l&&!a)&&t.emit("fromEdge"),t.emit("progress",n)}function wie(){const e=this,{slides:t,params:r,$wrapperEl:i,activeIndex:n,realIndex:s}=e,a=e.virtual&&r.virtual.enabled;t.removeClass(`${r.slideActiveClass} ${r.slideNextClass} ${r.slidePrevClass} ${r.slideDuplicateActiveClass} ${r.slideDuplicateNextClass} ${r.slideDuplicatePrevClass}`);let o;a?o=e.$wrapperEl.find(`.${r.slideClass}[data-swiper-slide-index="${n}"]`):o=t.eq(n),o.addClass(r.slideActiveClass),r.loop&&(o.hasClass(r.slideDuplicateClass)?i.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(r.slideDuplicateActiveClass):i.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(r.slideDuplicateActiveClass));let l=o.nextAll(`.${r.slideClass}`).eq(0).addClass(r.slideNextClass);r.loop&&l.length===0&&(l=t.eq(0),l.addClass(r.slideNextClass));let c=o.prevAll(`.${r.slideClass}`).eq(0).addClass(r.slidePrevClass);r.loop&&c.length===0&&(c=t.eq(-1),c.addClass(r.slidePrevClass)),r.loop&&(l.hasClass(r.slideDuplicateClass)?i.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass):i.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass),c.hasClass(r.slideDuplicateClass)?i.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass):i.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass)),e.emitSlidesClasses()}function Sie(e){const t=this,r=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:i,snapGrid:n,params:s,activeIndex:a,realIndex:o,snapIndex:l}=t;let c=e,h;if(typeof c>"u"){for(let d=0;d<i.length;d+=1)typeof i[d+1]<"u"?r>=i[d]&&r<i[d+1]-(i[d+1]-i[d])/2?c=d:r>=i[d]&&r<i[d+1]&&(c=d+1):r>=i[d]&&(c=d);s.normalizeSlideIndex&&(c<0||typeof c>"u")&&(c=0)}if(n.indexOf(r)>=0)h=n.indexOf(r);else{const d=Math.min(s.slidesPerGroupSkip,c);h=d+Math.floor((c-d)/s.slidesPerGroup)}if(h>=n.length&&(h=n.length-1),c===a){h!==l&&(t.snapIndex=h,t.emit("snapIndexChange"));return}const u=parseInt(t.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(t,{snapIndex:h,realIndex:u,previousIndex:a,activeIndex:c}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),o!==u&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function _ie(e){const t=this,r=t.params,i=je(e).closest(`.${r.slideClass}`)[0];let n=!1,s;if(i){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===i){n=!0,s=a;break}}if(i&&n)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(je(i).attr("data-swiper-slide-index"),10):t.clickedIndex=s;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const Aie={updateSize:mie,updateSlides:gie,updateAutoHeight:vie,updateSlidesOffset:yie,updateSlidesProgress:xie,updateProgress:bie,updateSlidesClasses:wie,updateActiveIndex:Sie,updateClickedSlide:_ie};function Mie(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:r,rtlTranslate:i,translate:n,$wrapperEl:s}=t;if(r.virtualTranslate)return i?-n:n;if(r.cssMode)return n;let a=sie(s[0],e);return i&&(a=-a),a||0}function Eie(e,t){const r=this,{rtlTranslate:i,params:n,$wrapperEl:s,wrapperEl:a,progress:o}=r;let l=0,c=0;const h=0;r.isHorizontal()?l=i?-e:e:c=e,n.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.cssMode?a[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-c:n.virtualTranslate||s.transform(`translate3d(${l}px, ${c}px, ${h}px)`),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:c;let u;const d=r.maxTranslate()-r.minTranslate();d===0?u=0:u=(e-r.minTranslate())/d,u!==o&&r.updateProgress(e),r.emit("setTranslate",r.translate,t)}function Cie(){return-this.snapGrid[0]}function Tie(){return-this.snapGrid[this.snapGrid.length-1]}function Pie(e,t,r,i,n){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),r===void 0&&(r=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let h;if(i&&e>l?h=l:i&&e<c?h=c:h=e,s.updateProgress(h),a.cssMode){const u=s.isHorizontal();if(t===0)o[u?"scrollLeft":"scrollTop"]=-h;else{if(!s.support.smoothScroll)return XF({swiper:s,targetPosition:-h,side:u?"left":"top"}),!0;o.scrollTo({[u?"left":"top"]:-h,behavior:"smooth"})}return!0}return t===0?(s.setTransition(0),s.setTranslate(h),r&&(s.emit("beforeTransitionStart",t,n),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(h),r&&(s.emit("beforeTransitionStart",t,n),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(d){!s||s.destroyed||d.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,r&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}const Die={getTranslate:Mie,setTranslate:Eie,minTranslate:Cie,maxTranslate:Tie,translateTo:Pie};function Oie(e,t){const r=this;r.params.cssMode||r.$wrapperEl.transition(e),r.emit("setTransition",e,t)}function QF(e){let{swiper:t,runCallbacks:r,direction:i,step:n}=e;const{activeIndex:s,previousIndex:a}=t;let o=i;if(o||(s>a?o="next":s<a?o="prev":o="reset"),t.emit(`transition${n}`),r&&s!==a){if(o==="reset"){t.emit(`slideResetTransition${n}`);return}t.emit(`slideChangeTransition${n}`),o==="next"?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`)}}function Lie(e,t){e===void 0&&(e=!0);const r=this,{params:i}=r;i.cssMode||(i.autoHeight&&r.updateAutoHeight(),QF({swiper:r,runCallbacks:e,direction:t,step:"Start"}))}function Iie(e,t){e===void 0&&(e=!0);const r=this,{params:i}=r;r.animating=!1,!i.cssMode&&(r.setTransition(0),QF({swiper:r,runCallbacks:e,direction:t,step:"End"}))}const Rie={setTransition:Oie,transitionStart:Lie,transitionEnd:Iie};function Bie(e,t,r,i,n){if(e===void 0&&(e=0),t===void 0&&(t=this.params.speed),r===void 0&&(r=!0),typeof e!="number"&&typeof e!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if(typeof e=="string"){const x=parseInt(e,10);if(!isFinite(x))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=x}const s=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:u,rtlTranslate:d,wrapperEl:p,enabled:f}=s;if(s.animating&&o.preventInteractionOnTransition||!f&&!i&&!n)return!1;const m=Math.min(s.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1),(u||o.initialSlide||0)===(h||0)&&r&&s.emit("beforeSlideChangeStart");const v=-l[g];if(s.updateProgress(v),o.normalizeSlideIndex)for(let x=0;x<c.length;x+=1){const b=-Math.floor(v*100),S=Math.floor(c[x]*100),w=Math.floor(c[x+1]*100);typeof c[x+1]<"u"?b>=S&&b<w-(w-S)/2?a=x:b>=S&&b<w&&(a=x+1):b>=S&&(a=x)}if(s.initialized&&a!==u&&(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate()||!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(u||0)!==a))return!1;let y;if(a>u?y="next":a<u?y="prev":y="reset",d&&-v===s.translate||!d&&v===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(v),y!=="reset"&&(s.transitionStart(r,y),s.transitionEnd(r,y)),!1;if(o.cssMode){const x=s.isHorizontal(),b=d?v:-v;if(t===0){const S=s.virtual&&s.params.virtual.enabled;S&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),p[x?"scrollLeft":"scrollTop"]=b,S&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1})}else{if(!s.support.smoothScroll)return XF({swiper:s,targetPosition:b,side:x?"left":"top"}),!0;p.scrollTo({[x?"left":"top"]:b,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(r,y),t===0?s.transitionEnd(r,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(b){!s||s.destroyed||b.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(r,y))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0}function kie(e,t,r,i){if(e===void 0&&(e=0),t===void 0&&(t=this.params.speed),r===void 0&&(r=!0),typeof e=="string"){const a=parseInt(e,10);if(!isFinite(a))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=a}const n=this;let s=e;return n.params.loop&&(s+=n.loopedSlides),n.slideTo(s,t,r,i)}function zie(e,t,r){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const i=this,{animating:n,enabled:s,params:a}=i;if(!s)return i;let o=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<a.slidesPerGroupSkip?1:o;if(a.loop){if(n&&a.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return a.rewind&&i.isEnd?i.slideTo(0,e,t,r):i.slideTo(i.activeIndex+l,e,t,r)}function Nie(e,t,r){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const i=this,{params:n,animating:s,snapGrid:a,slidesGrid:o,rtlTranslate:l,enabled:c}=i;if(!c)return i;if(n.loop){if(s&&n.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}const h=l?i.translate:-i.translate;function u(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const d=u(h),p=a.map(g=>u(g));let f=a[p.indexOf(d)-1];if(typeof f>"u"&&n.cssMode){let g;a.forEach((v,y)=>{d>=v&&(g=y)}),typeof g<"u"&&(f=a[g>0?g-1:g])}let m=0;if(typeof f<"u"&&(m=o.indexOf(f),m<0&&(m=i.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(m=m-i.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),n.rewind&&i.isBeginning){const g=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(g,e,t,r)}return i.slideTo(m,e,t,r)}function Fie(e,t,r){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const i=this;return i.slideTo(i.activeIndex,e,t,r)}function Uie(e,t,r,i){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=.5);const n=this;let s=n.activeIndex;const a=Math.min(n.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[o]){const c=n.snapGrid[o],h=n.snapGrid[o+1];l-c>(h-c)*i&&(s+=n.params.slidesPerGroup)}else{const c=n.snapGrid[o-1],h=n.snapGrid[o];l-c<=(h-c)*i&&(s-=n.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,n.slidesGrid.length-1),n.slideTo(s,e,t,r)}function jie(){const e=this,{params:t,$wrapperEl:r}=e,i=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let n=e.clickedIndex,s;if(t.loop){if(e.animating)return;s=parseInt(je(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?n<e.loopedSlides-i/2||n>e.slides.length-e.loopedSlides+i/2?(e.loopFix(),n=r.children(`.${t.slideClass}[data-swiper-slide-index="${s}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),a1(()=>{e.slideTo(n)})):e.slideTo(n):n>e.slides.length-i?(e.loopFix(),n=r.children(`.${t.slideClass}[data-swiper-slide-index="${s}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),a1(()=>{e.slideTo(n)})):e.slideTo(n)}else e.slideTo(n)}const Vie={slideTo:Bie,slideToLoop:kie,slideNext:zie,slidePrev:Nie,slideReset:Fie,slideToClosest:Uie,slideToClickedSlide:jie};function Gie(){const e=this,t=Ei(),{params:r,$wrapperEl:i}=e,n=i.children().length>0?je(i.children()[0].parentNode):i;n.children(`.${r.slideClass}.${r.slideDuplicateClass}`).remove();let s=n.children(`.${r.slideClass}`);if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-s.length%r.slidesPerGroup;if(l!==r.slidesPerGroup){for(let c=0;c<l;c+=1){const h=je(t.createElement("div")).addClass(`${r.slideClass} ${r.slideBlankClass}`);n.append(h)}s=n.children(`.${r.slideClass}`)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=s.length),e.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),e.loopedSlides+=r.loopAdditionalSlides,e.loopedSlides>s.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=s.length);const a=[],o=[];s.each((l,c)=>{je(l).attr("data-swiper-slide-index",c)});for(let l=0;l<e.loopedSlides;l+=1){const c=l-Math.floor(l/s.length)*s.length;o.push(s.eq(c)[0]),a.unshift(s.eq(s.length-c-1)[0])}for(let l=0;l<o.length;l+=1)n.append(je(o[l].cloneNode(!0)).addClass(r.slideDuplicateClass));for(let l=a.length-1;l>=0;l-=1)n.prepend(je(a[l].cloneNode(!0)).addClass(r.slideDuplicateClass))}function Hie(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:r,loopedSlides:i,allowSlidePrev:n,allowSlideNext:s,snapGrid:a,rtlTranslate:o}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const h=-a[t]-e.getTranslate();t<i?(l=r.length-i*3+t,l+=i,e.slideTo(l,0,!1,!0)&&h!==0&&e.setTranslate((o?-e.translate:e.translate)-h)):t>=r.length-i&&(l=-r.length+t+i,l+=i,e.slideTo(l,0,!1,!0)&&h!==0&&e.setTranslate((o?-e.translate:e.translate)-h)),e.allowSlidePrev=n,e.allowSlideNext=s,e.emit("loopFix")}function Wie(){const e=this,{$wrapperEl:t,params:r,slides:i}=e;t.children(`.${r.slideClass}.${r.slideDuplicateClass},.${r.slideClass}.${r.slideBlankClass}`).remove(),i.removeAttr("data-swiper-slide-index")}const qie={loopCreate:Gie,loopFix:Hie,loopDestroy:Wie};function $ie(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const r=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;r.style.cursor="move",r.style.cursor=e?"grabbing":"grab"}function Xie(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const Yie={setGrabCursor:$ie,unsetGrabCursor:Xie};function Qie(e,t){t===void 0&&(t=this);function r(i){if(!i||i===Ei()||i===yi())return null;i.assignedSlot&&(i=i.assignedSlot);const n=i.closest(e);return!n&&!i.getRootNode?null:n||r(i.getRootNode().host)}return r(t)}function Kie(e){const t=this,r=Ei(),i=yi(),n=t.touchEventsData,{params:s,touches:a,enabled:o}=t;if(!o||t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=e;l.originalEvent&&(l=l.originalEvent);let c=je(l.target);if(s.touchEventsTarget==="wrapper"&&!c.closest(t.wrapperEl).length||(n.isTouchEvent=l.type==="touchstart",!n.isTouchEvent&&"which"in l&&l.which===3)||!n.isTouchEvent&&"button"in l&&l.button>0||n.isTouched&&n.isMoved)return;!!s.noSwipingClass&&s.noSwipingClass!==""&&l.target&&l.target.shadowRoot&&e.path&&e.path[0]&&(c=je(e.path[0]));const u=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,d=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(d?Qie(u,c[0]):c.closest(u)[0])){t.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler)[0])return;a.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,a.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;const p=a.currentX,f=a.currentY,m=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,g=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(m&&(p<=g||p>=i.innerWidth-g))if(m==="prevent")e.preventDefault();else return;if(Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=f,n.touchStartTime=eg(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(n.allowThresholdMove=!1),l.type!=="touchstart"){let v=!0;c.is(n.focusableElements)&&(v=!1,c[0].nodeName==="SELECT"&&(n.isTouched=!1)),r.activeElement&&je(r.activeElement).is(n.focusableElements)&&r.activeElement!==c[0]&&r.activeElement.blur();const y=v&&t.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||y)&&!c[0].isContentEditable&&l.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function Zie(e){const t=Ei(),r=this,i=r.touchEventsData,{params:n,touches:s,rtlTranslate:a,enabled:o}=r;if(!o)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&r.emit("touchMoveOpposite",l);return}if(i.isTouchEvent&&l.type!=="touchmove")return;const c=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),h=l.type==="touchmove"?c.pageX:l.pageX,u=l.type==="touchmove"?c.pageY:l.pageY;if(l.preventedByNestedSwiper){s.startX=h,s.startY=u;return}if(!r.allowTouchMove){je(l.target).is(i.focusableElements)||(r.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:h,startY:u,currentX:h,currentY:u}),i.touchStartTime=eg());return}if(i.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop){if(r.isVertical()){if(u<s.startY&&r.translate<=r.maxTranslate()||u>s.startY&&r.translate>=r.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(h<s.startX&&r.translate<=r.maxTranslate()||h>s.startX&&r.translate>=r.minTranslate())return}if(i.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&je(l.target).is(i.focusableElements)){i.isMoved=!0,r.allowClick=!1;return}if(i.allowTouchCallbacks&&r.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=h,s.currentY=u;const d=s.currentX-s.startX,p=s.currentY-s.startY;if(r.params.threshold&&Math.sqrt(d**2+p**2)<r.params.threshold)return;if(typeof i.isScrolling>"u"){let v;r.isHorizontal()&&s.currentY===s.startY||r.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:d*d+p*p>=25&&(v=Math.atan2(Math.abs(p),Math.abs(d))*180/Math.PI,i.isScrolling=r.isHorizontal()?v>n.touchAngle:90-v>n.touchAngle)}if(i.isScrolling&&r.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling){i.isTouched=!1;return}if(!i.startMoving)return;r.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation(),i.isMoved||(n.loop&&!n.cssMode&&r.loopFix(),i.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,n.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),i.isMoved=!0;let f=r.isHorizontal()?d:p;s.diff=f,f*=n.touchRatio,a&&(f=-f),r.swipeDirection=f>0?"prev":"next",i.currentTranslate=f+i.startTranslate;let m=!0,g=n.resistanceRatio;if(n.touchReleaseOnEdges&&(g=0),f>0&&i.currentTranslate>r.minTranslate()?(m=!1,n.resistance&&(i.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+i.startTranslate+f)**g)):f<0&&i.currentTranslate<r.maxTranslate()&&(m=!1,n.resistance&&(i.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-i.startTranslate-f)**g)),m&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(i.currentTranslate=i.startTranslate),n.threshold>0)if(Math.abs(f)>n.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=r.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&r.freeMode||n.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&n.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(i.currentTranslate),r.setTranslate(i.currentTranslate))}function Jie(e){const t=this,r=t.touchEventsData,{params:i,touches:n,rtlTranslate:s,slidesGrid:a,enabled:o}=t;if(!o)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),r.allowTouchCallbacks&&t.emit("touchEnd",l),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&i.grabCursor&&t.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}i.grabCursor&&r.isMoved&&r.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const c=eg(),h=c-r.touchStartTime;if(t.allowClick){const y=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(y&&y[0]||l.target),t.emit("tap click",l),h<300&&c-r.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(r.lastClickTime=eg(),a1(()=>{t.destroyed||(t.allowClick=!0)}),!r.isTouched||!r.isMoved||!t.swipeDirection||n.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let u;if(i.followFinger?u=s?t.translate:-t.translate:u=-r.currentTranslate,i.cssMode)return;if(t.params.freeMode&&i.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:u});return}let d=0,p=t.slidesSizesGrid[0];for(let y=0;y<a.length;y+=y<i.slidesPerGroupSkip?1:i.slidesPerGroup){const x=y<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof a[y+x]<"u"?u>=a[y]&&u<a[y+x]&&(d=y,p=a[y+x]-a[y]):u>=a[y]&&(d=y,p=a[a.length-1]-a[a.length-2])}let f=null,m=null;i.rewind&&(t.isBeginning?m=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(f=0));const g=(u-a[d])/p,v=d<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(h>i.longSwipesMs){if(!i.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(g>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?f:d+v):t.slideTo(d)),t.swipeDirection==="prev"&&(g>1-i.longSwipesRatio?t.slideTo(d+v):m!==null&&g<0&&Math.abs(g)>i.longSwipesRatio?t.slideTo(m):t.slideTo(d))}else{if(!i.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(d+v):t.slideTo(d):(t.swipeDirection==="next"&&t.slideTo(f!==null?f:d+v),t.swipeDirection==="prev"&&t.slideTo(m!==null?m:d))}}function LO(){const e=this,{params:t,el:r}=e;if(r&&r.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:n,snapGrid:s}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=n,e.allowSlideNext=i,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function ene(e){const t=this;!t.enabled||t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function tne(){const e=this,{wrapperEl:t,rtlTranslate:r,enabled:i}=e;if(!i)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let n;const s=e.maxTranslate()-e.minTranslate();s===0?n=0:n=(e.translate-e.minTranslate())/s,n!==e.progress&&e.updateProgress(r?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let IO=!1;function rne(){}const KF=(e,t)=>{const r=Ei(),{params:i,touchEvents:n,el:s,wrapperEl:a,device:o,support:l}=e,c=!!i.nested,h=t==="on"?"addEventListener":"removeEventListener",u=t;if(!l.touch)s[h](n.start,e.onTouchStart,!1),r[h](n.move,e.onTouchMove,c),r[h](n.end,e.onTouchEnd,!1);else{const d=n.start==="touchstart"&&l.passiveListener&&i.passiveListeners?{passive:!0,capture:!1}:!1;s[h](n.start,e.onTouchStart,d),s[h](n.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),s[h](n.end,e.onTouchEnd,d),n.cancel&&s[h](n.cancel,e.onTouchEnd,d)}(i.preventClicks||i.preventClicksPropagation)&&s[h]("click",e.onClick,!0),i.cssMode&&a[h]("scroll",e.onScroll),i.updateOnWindowResize?e[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",LO,!0):e[u]("observerUpdate",LO,!0)};function ine(){const e=this,t=Ei(),{params:r,support:i}=e;e.onTouchStart=Kie.bind(e),e.onTouchMove=Zie.bind(e),e.onTouchEnd=Jie.bind(e),r.cssMode&&(e.onScroll=tne.bind(e)),e.onClick=ene.bind(e),i.touch&&!IO&&(t.addEventListener("touchstart",rne),IO=!0),KF(e,"on")}function nne(){KF(this,"off")}const sne={attachEvents:ine,detachEvents:nne},RO=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function ane(){const e=this,{activeIndex:t,initialized:r,loopedSlides:i=0,params:n,$el:s}=e,a=n.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const o=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!o||e.currentBreakpoint===o)return;const c=(o in a?a[o]:void 0)||e.originalParams,h=RO(e,n),u=RO(e,c),d=n.enabled;h&&!u?(s.removeClass(`${n.containerModifierClass}grid ${n.containerModifierClass}grid-column`),e.emitContainerClasses()):!h&&u&&(s.addClass(`${n.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&n.grid.fill==="column")&&s.addClass(`${n.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{const v=n[g]&&n[g].enabled,y=c[g]&&c[g].enabled;v&&!y&&e[g].disable(),!v&&y&&e[g].enable()});const p=c.direction&&c.direction!==n.direction,f=n.loop&&(c.slidesPerView!==n.slidesPerView||p);p&&r&&e.changeDirection(),Wn(e.params,c);const m=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!m?e.disable():!d&&m&&e.enable(),e.currentBreakpoint=o,e.emit("_beforeBreakpoint",c),f&&r&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}function one(e,t,r){if(t===void 0&&(t="window"),!e||t==="container"&&!r)return;let i=!1;const n=yi(),s=t==="window"?n.innerHeight:r.clientHeight,a=Object.keys(e).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];t==="window"?n.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=r.clientWidth&&(i=l)}return i||"max"}const lne={setBreakpoint:ane,getBreakpoint:one};function cne(e,t){const r=[];return e.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(n=>{i[n]&&r.push(t+n)}):typeof i=="string"&&r.push(t+i)}),r}function une(){const e=this,{classNames:t,params:r,rtl:i,$el:n,device:s,support:a}=e,o=cne(["initialized",r.direction,{"pointer-events":!a.touch},{"free-mode":e.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:i},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);t.push(...o),n.addClass([...t].join(" ")),e.emitContainerClasses()}function hne(){const e=this,{$el:t,classNames:r}=e;t.removeClass(r.join(" ")),e.emitContainerClasses()}const dne={addClasses:une,removeClasses:hne};function pne(e,t,r,i,n,s){const a=yi();let o;function l(){s&&s()}!je(e).parent("picture")[0]&&(!e.complete||!n)&&t?(o=new a.Image,o.onload=l,o.onerror=l,i&&(o.sizes=i),r&&(o.srcset=r),t&&(o.src=t)):l()}function fne(){const e=this;e.imagesToLoad=e.$el.find("img");function t(){typeof e>"u"||e===null||!e||e.destroyed||(e.imagesLoaded!==void 0&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}for(let r=0;r<e.imagesToLoad.length;r+=1){const i=e.imagesToLoad[r];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}const mne={loadImage:pne,preloadImages:fne};function gne(){const e=this,{isLocked:t,params:r}=e,{slidesOffsetBefore:i}=r;if(i){const n=e.slides.length-1,s=e.slidesGrid[n]+e.slidesSizesGrid[n]+i*2;e.isLocked=e.size>s}else e.isLocked=e.snapGrid.length===1;r.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),r.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const vne={checkOverflow:gne},BO={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function yne(e,t){return function(i){i===void 0&&(i={});const n=Object.keys(i)[0],s=i[n];if(typeof s!="object"||s===null){Wn(t,i);return}if(["navigation","pagination","scrollbar"].indexOf(n)>=0&&e[n]===!0&&(e[n]={auto:!0}),!(n in e&&"enabled"in s)){Wn(t,i);return}e[n]===!0&&(e[n]={enabled:!0}),typeof e[n]=="object"&&!("enabled"in e[n])&&(e[n].enabled=!0),e[n]||(e[n]={enabled:!1}),Wn(t,i)}}const xw={eventsEmitter:fie,update:Aie,translate:Die,transition:Rie,slide:Vie,loop:qie,grabCursor:Yie,events:sne,breakpoints:lne,checkOverflow:vne,classes:dne,images:mne},bw={};class Ki{constructor(){let t,r;for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];if(n.length===1&&n[0].constructor&&Object.prototype.toString.call(n[0]).slice(8,-1)==="Object"?r=n[0]:[t,r]=n,r||(r={}),r=Wn({},r),t&&!r.el&&(r.el=t),r.el&&je(r.el).length>1){const c=[];return je(r.el).each(h=>{const u=Wn({},r,{el:h});c.push(new Ki(u))}),c}const a=this;a.__swiper__=!0,a.support=YF(),a.device=cie({userAgent:r.userAgent}),a.browser=hie(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],r.modules&&Array.isArray(r.modules)&&a.modules.push(...r.modules);const o={};a.modules.forEach(c=>{c({swiper:a,extendParams:yne(r,o),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const l=Wn({},BO,o);return a.params=Wn({},l,bw,r),a.originalParams=Wn({},a.params),a.passedParams=Wn({},r),a.params&&a.params.on&&Object.keys(a.params.on).forEach(c=>{a.on(c,a.params.on[c])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),a.$=je,Object.assign(a,{enabled:a.params.enabled,el:t,classNames:[],slides:je(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEvents:function(){const h=["touchstart","touchmove","touchend","touchcancel"],u=["pointerdown","pointermove","pointerup"];return a.touchEventsTouch={start:h[0],move:h[1],end:h[2],cancel:h[3]},a.touchEventsDesktop={start:u[0],move:u[1],end:u[2]},a.support.touch||!a.params.simulateTouch?a.touchEventsTouch:a.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:eg(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;!t.enabled||(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,r){const i=this;t=Math.min(Math.max(t,0),1);const n=i.minTranslate(),a=(i.maxTranslate()-n)*t+n;i.translateTo(a,typeof r>"u"?0:r),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const r=t.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",r.join(" "))}getSlideClasses(t){const r=this;return r.destroyed?"":t.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const r=[];t.slides.each(i=>{const n=t.getSlideClasses(i);r.push({slideEl:i,classNames:n}),t.emit("_slideClass",i,n)}),t.emit("_slideClasses",r)}slidesPerViewDynamic(t,r){t===void 0&&(t="current"),r===void 0&&(r=!1);const i=this,{params:n,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let h=1;if(n.centeredSlides){let u=s[c].swiperSlideSize,d;for(let p=c+1;p<s.length;p+=1)s[p]&&!d&&(u+=s[p].swiperSlideSize,h+=1,u>l&&(d=!0));for(let p=c-1;p>=0;p-=1)s[p]&&!d&&(u+=s[p].swiperSlideSize,h+=1,u>l&&(d=!0))}else if(t==="current")for(let u=c+1;u<s.length;u+=1)(r?a[u]+o[u]-a[c]<l:a[u]-a[c]<l)&&(h+=1);else for(let u=c-1;u>=0;u-=1)a[c]-a[u]<l&&(h+=1);return h}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:r,params:i}=t;i.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function n(){const a=t.rtlTranslate?t.translate*-1:t.translate,o=Math.min(Math.max(a,t.maxTranslate()),t.minTranslate());t.setTranslate(o),t.updateActiveIndex(),t.updateSlidesClasses()}let s;t.params.freeMode&&t.params.freeMode.enabled?(n(),t.params.autoHeight&&t.updateAutoHeight()):((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?s=t.slideTo(t.slides.length-1,0,!1,!0):s=t.slideTo(t.activeIndex,0,!1,!0),s||n()),i.watchOverflow&&r!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,r){r===void 0&&(r=!0);const i=this,n=i.params.direction;return t||(t=n==="horizontal"?"vertical":"horizontal"),t===n||t!=="horizontal"&&t!=="vertical"||(i.$el.removeClass(`${i.params.containerModifierClass}${n}`).addClass(`${i.params.containerModifierClass}${t}`),i.emitContainerClasses(),i.params.direction=t,i.slides.each(s=>{t==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),r&&i.update()),i}changeLanguageDirection(t){const r=this;r.rtl&&t==="rtl"||!r.rtl&&t==="ltr"||(r.rtl=t==="rtl",r.rtlTranslate=r.params.direction==="horizontal"&&r.rtl,r.rtl?(r.$el.addClass(`${r.params.containerModifierClass}rtl`),r.el.dir="rtl"):(r.$el.removeClass(`${r.params.containerModifierClass}rtl`),r.el.dir="ltr"),r.update())}mount(t){const r=this;if(r.mounted)return!0;const i=je(t||r.params.el);if(t=i[0],!t)return!1;t.swiper=r;const n=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const o=je(t.shadowRoot.querySelector(n()));return o.children=l=>i.children(l),o}return i.children?i.children(n()):je(i).children(n())})();if(a.length===0&&r.params.createElements){const l=Ei().createElement("div");a=je(l),l.className=r.params.wrapperClass,i.append(l),i.children(`.${r.params.slideClass}`).each(c=>{a.append(c)})}return Object.assign(r,{$el:i,el:t,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:t.dir.toLowerCase()==="rtl"||i.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(t.dir.toLowerCase()==="rtl"||i.css("direction")==="rtl"),wrongRTL:a.css("display")==="-webkit-box"}),!0}init(t){const r=this;return r.initialized||r.mount(t)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r}destroy(t,r){t===void 0&&(t=!0),r===void 0&&(r=!0);const i=this,{params:n,$el:s,$wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),r&&(i.removeClasses(),s.removeAttr("style"),a.removeAttr("style"),o&&o.length&&o.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),t!==!1&&(i.$el[0].swiper=null,iie(i)),i.destroyed=!0),null}static extendDefaults(t){Wn(bw,t)}static get extendedDefaults(){return bw}static get defaults(){return BO}static installModule(t){Ki.prototype.__modules__||(Ki.prototype.__modules__=[]);const r=Ki.prototype.__modules__;typeof t=="function"&&r.indexOf(t)<0&&r.push(t)}static use(t){return Array.isArray(t)?(t.forEach(r=>Ki.installModule(r)),Ki):(Ki.installModule(t),Ki)}}Object.keys(xw).forEach(e=>{Object.keys(xw[e]).forEach(t=>{Ki.prototype[t]=xw[e][t]})});Ki.use([die,pie]);function ZF(e,t,r,i){const n=Ei();return e.params.createElements&&Object.keys(i).forEach(s=>{if(!r[s]&&r.auto===!0){let a=e.$el.children(`.${i[s]}`)[0];a||(a=n.createElement("div"),a.className=i[s],e.$el.append(a)),r[s]=a,t[s]=a}}),r}function xne(e){let{swiper:t,extendParams:r,on:i,emit:n}=e;r({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function s(f){let m;return f&&(m=je(f),t.params.uniqueNavElements&&typeof f=="string"&&m.length>1&&t.$el.find(f).length===1&&(m=t.$el.find(f))),m}function a(f,m){const g=t.params.navigation;f&&f.length>0&&(f[m?"addClass":"removeClass"](g.disabledClass),f[0]&&f[0].tagName==="BUTTON"&&(f[0].disabled=m),t.params.watchOverflow&&t.enabled&&f[t.isLocked?"addClass":"removeClass"](g.lockClass))}function o(){if(t.params.loop)return;const{$nextEl:f,$prevEl:m}=t.navigation;a(m,t.isBeginning&&!t.params.rewind),a(f,t.isEnd&&!t.params.rewind)}function l(f){f.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),n("navigationPrev"))}function c(f){f.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),n("navigationNext"))}function h(){const f=t.params.navigation;if(t.params.navigation=ZF(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(f.nextEl||f.prevEl))return;const m=s(f.nextEl),g=s(f.prevEl);m&&m.length>0&&m.on("click",c),g&&g.length>0&&g.on("click",l),Object.assign(t.navigation,{$nextEl:m,nextEl:m&&m[0],$prevEl:g,prevEl:g&&g[0]}),t.enabled||(m&&m.addClass(f.lockClass),g&&g.addClass(f.lockClass))}function u(){const{$nextEl:f,$prevEl:m}=t.navigation;f&&f.length&&(f.off("click",c),f.removeClass(t.params.navigation.disabledClass)),m&&m.length&&(m.off("click",l),m.removeClass(t.params.navigation.disabledClass))}i("init",()=>{t.params.navigation.enabled===!1?p():(h(),o())}),i("toEdge fromEdge lock unlock",()=>{o()}),i("destroy",()=>{u()}),i("enable disable",()=>{const{$nextEl:f,$prevEl:m}=t.navigation;f&&f[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),m&&m[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)}),i("click",(f,m)=>{const{$nextEl:g,$prevEl:v}=t.navigation,y=m.target;if(t.params.navigation.hideOnClick&&!je(y).is(v)&&!je(y).is(g)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===y||t.pagination.el.contains(y)))return;let x;g?x=g.hasClass(t.params.navigation.hiddenClass):v&&(x=v.hasClass(t.params.navigation.hiddenClass)),n(x===!0?"navigationShow":"navigationHide"),g&&g.toggleClass(t.params.navigation.hiddenClass),v&&v.toggleClass(t.params.navigation.hiddenClass)}});const d=()=>{t.$el.removeClass(t.params.navigation.navigationDisabledClass),h(),o()},p=()=>{t.$el.addClass(t.params.navigation.navigationDisabledClass),u()};Object.assign(t.navigation,{enable:d,disable:p,update:o,init:h,destroy:u})}function eh(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function bne(e){let{swiper:t,extendParams:r,on:i,emit:n}=e;const s="swiper-pagination";r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:g=>g,formatFractionTotal:g=>g,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),t.pagination={el:null,$el:null,bullets:[]};let a,o=0;function l(){return!t.params.pagination.el||!t.pagination.el||!t.pagination.$el||t.pagination.$el.length===0}function c(g,v){const{bulletActiveClass:y}=t.params.pagination;g[v]().addClass(`${y}-${v}`)[v]().addClass(`${y}-${v}-${v}`)}function h(){const g=t.rtl,v=t.params.pagination;if(l())return;const y=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,x=t.pagination.$el;let b;const S=t.params.loop?Math.ceil((y-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(b=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup),b>y-1-t.loopedSlides*2&&(b-=y-t.loopedSlides*2),b>S-1&&(b-=S),b<0&&t.params.paginationType!=="bullets"&&(b=S+b)):typeof t.snapIndex<"u"?b=t.snapIndex:b=t.activeIndex||0,v.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const w=t.pagination.bullets;let A,_,M;if(v.dynamicBullets&&(a=w.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),x.css(t.isHorizontal()?"width":"height",`${a*(v.dynamicMainBullets+4)}px`),v.dynamicMainBullets>1&&t.previousIndex!==void 0&&(o+=b-(t.previousIndex-t.loopedSlides||0),o>v.dynamicMainBullets-1?o=v.dynamicMainBullets-1:o<0&&(o=0)),A=Math.max(b-o,0),_=A+(Math.min(w.length,v.dynamicMainBullets)-1),M=(_+A)/2),w.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(E=>`${v.bulletActiveClass}${E}`).join(" ")),x.length>1)w.each(E=>{const T=je(E),P=T.index();P===b&&T.addClass(v.bulletActiveClass),v.dynamicBullets&&(P>=A&&P<=_&&T.addClass(`${v.bulletActiveClass}-main`),P===A&&c(T,"prev"),P===_&&c(T,"next"))});else{const E=w.eq(b),T=E.index();if(E.addClass(v.bulletActiveClass),v.dynamicBullets){const P=w.eq(A),D=w.eq(_);for(let L=A;L<=_;L+=1)w.eq(L).addClass(`${v.bulletActiveClass}-main`);if(t.params.loop)if(T>=w.length){for(let L=v.dynamicMainBullets;L>=0;L-=1)w.eq(w.length-L).addClass(`${v.bulletActiveClass}-main`);w.eq(w.length-v.dynamicMainBullets-1).addClass(`${v.bulletActiveClass}-prev`)}else c(P,"prev"),c(D,"next");else c(P,"prev"),c(D,"next")}}if(v.dynamicBullets){const E=Math.min(w.length,v.dynamicMainBullets+4),T=(a*E-a)/2-M*a,P=g?"right":"left";w.css(t.isHorizontal()?P:"top",`${T}px`)}}if(v.type==="fraction"&&(x.find(eh(v.currentClass)).text(v.formatFractionCurrent(b+1)),x.find(eh(v.totalClass)).text(v.formatFractionTotal(S))),v.type==="progressbar"){let w;v.progressbarOpposite?w=t.isHorizontal()?"vertical":"horizontal":w=t.isHorizontal()?"horizontal":"vertical";const A=(b+1)/S;let _=1,M=1;w==="horizontal"?_=A:M=A,x.find(eh(v.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${_}) scaleY(${M})`).transition(t.params.speed)}v.type==="custom"&&v.renderCustom?(x.html(v.renderCustom(t,b+1,S)),n("paginationRender",x[0])):n("paginationUpdate",x[0]),t.params.watchOverflow&&t.enabled&&x[t.isLocked?"addClass":"removeClass"](v.lockClass)}function u(){const g=t.params.pagination;if(l())return;const v=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,y=t.pagination.$el;let x="";if(g.type==="bullets"){let b=t.params.loop?Math.ceil((v-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&!t.params.loop&&b>v&&(b=v);for(let S=0;S<b;S+=1)g.renderBullet?x+=g.renderBullet.call(t,S,g.bulletClass):x+=`<${g.bulletElement} class="${g.bulletClass}"></${g.bulletElement}>`;y.html(x),t.pagination.bullets=y.find(eh(g.bulletClass))}g.type==="fraction"&&(g.renderFraction?x=g.renderFraction.call(t,g.currentClass,g.totalClass):x=`<span class="${g.currentClass}"></span> / <span class="${g.totalClass}"></span>`,y.html(x)),g.type==="progressbar"&&(g.renderProgressbar?x=g.renderProgressbar.call(t,g.progressbarFillClass):x=`<span class="${g.progressbarFillClass}"></span>`,y.html(x)),g.type!=="custom"&&n("paginationRender",t.pagination.$el[0])}function d(){t.params.pagination=ZF(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const g=t.params.pagination;if(!g.el)return;let v=je(g.el);v.length!==0&&(t.params.uniqueNavElements&&typeof g.el=="string"&&v.length>1&&(v=t.$el.find(g.el),v.length>1&&(v=v.filter(y=>je(y).parents(".swiper")[0]===t.el))),g.type==="bullets"&&g.clickable&&v.addClass(g.clickableClass),v.addClass(g.modifierClass+g.type),v.addClass(t.isHorizontal()?g.horizontalClass:g.verticalClass),g.type==="bullets"&&g.dynamicBullets&&(v.addClass(`${g.modifierClass}${g.type}-dynamic`),o=0,g.dynamicMainBullets<1&&(g.dynamicMainBullets=1)),g.type==="progressbar"&&g.progressbarOpposite&&v.addClass(g.progressbarOppositeClass),g.clickable&&v.on("click",eh(g.bulletClass),function(x){x.preventDefault();let b=je(this).index()*t.params.slidesPerGroup;t.params.loop&&(b+=t.loopedSlides),t.slideTo(b)}),Object.assign(t.pagination,{$el:v,el:v[0]}),t.enabled||v.addClass(g.lockClass))}function p(){const g=t.params.pagination;if(l())return;const v=t.pagination.$el;v.removeClass(g.hiddenClass),v.removeClass(g.modifierClass+g.type),v.removeClass(t.isHorizontal()?g.horizontalClass:g.verticalClass),t.pagination.bullets&&t.pagination.bullets.removeClass&&t.pagination.bullets.removeClass(g.bulletActiveClass),g.clickable&&v.off("click",eh(g.bulletClass))}i("init",()=>{t.params.pagination.enabled===!1?m():(d(),u(),h())}),i("activeIndexChange",()=>{(t.params.loop||typeof t.snapIndex>"u")&&h()}),i("snapIndexChange",()=>{t.params.loop||h()}),i("slidesLengthChange",()=>{t.params.loop&&(u(),h())}),i("snapGridLengthChange",()=>{t.params.loop||(u(),h())}),i("destroy",()=>{p()}),i("enable disable",()=>{const{$el:g}=t.pagination;g&&g[t.enabled?"removeClass":"addClass"](t.params.pagination.lockClass)}),i("lock unlock",()=>{h()}),i("click",(g,v)=>{const y=v.target,{$el:x}=t.pagination;if(t.params.pagination.el&&t.params.pagination.hideOnClick&&x&&x.length>0&&!je(y).hasClass(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&y===t.navigation.nextEl||t.navigation.prevEl&&y===t.navigation.prevEl))return;const b=x.hasClass(t.params.pagination.hiddenClass);n(b===!0?"paginationShow":"paginationHide"),x.toggleClass(t.params.pagination.hiddenClass)}});const f=()=>{t.$el.removeClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.removeClass(t.params.pagination.paginationDisabledClass),d(),u(),h()},m=()=>{t.$el.addClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.addClass(t.params.pagination.paginationDisabledClass),p()};Object.assign(t.pagination,{enable:f,disable:m,render:u,update:h,init:d,destroy:p})}function wne(e){let{swiper:t,extendParams:r,on:i,emit:n}=e,s;t.autoplay={running:!1,paused:!1},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function a(){if(!t.size){t.autoplay.running=!1,t.autoplay.paused=!1;return}const g=t.slides.eq(t.activeIndex);let v=t.params.autoplay.delay;g.attr("data-swiper-autoplay")&&(v=g.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(s),s=a1(()=>{let y;t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),y=t.slidePrev(t.params.speed,!0,!0),n("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?l():(y=t.slideTo(t.slides.length-1,t.params.speed,!0,!0),n("autoplay")):(y=t.slidePrev(t.params.speed,!0,!0),n("autoplay")):t.params.loop?(t.loopFix(),y=t.slideNext(t.params.speed,!0,!0),n("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?l():(y=t.slideTo(0,t.params.speed,!0,!0),n("autoplay")):(y=t.slideNext(t.params.speed,!0,!0),n("autoplay")),(t.params.cssMode&&t.autoplay.running||y===!1)&&a()},v)}function o(){return typeof s<"u"||t.autoplay.running?!1:(t.autoplay.running=!0,n("autoplayStart"),a(),!0)}function l(){return!t.autoplay.running||typeof s>"u"?!1:(s&&(clearTimeout(s),s=void 0),t.autoplay.running=!1,n("autoplayStop"),!0)}function c(g){!t.autoplay.running||t.autoplay.paused||(s&&clearTimeout(s),t.autoplay.paused=!0,g===0||!t.params.autoplay.waitForTransition?(t.autoplay.paused=!1,a()):["transitionend","webkitTransitionEnd"].forEach(v=>{t.$wrapperEl[0].addEventListener(v,u)}))}function h(){const g=Ei();g.visibilityState==="hidden"&&t.autoplay.running&&c(),g.visibilityState==="visible"&&t.autoplay.paused&&(a(),t.autoplay.paused=!1)}function u(g){!t||t.destroyed||!t.$wrapperEl||g.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(v=>{t.$wrapperEl[0].removeEventListener(v,u)}),t.autoplay.paused=!1,t.autoplay.running?a():l())}function d(){t.params.autoplay.disableOnInteraction?l():(n("autoplayPause"),c()),["transitionend","webkitTransitionEnd"].forEach(g=>{t.$wrapperEl[0].removeEventListener(g,u)})}function p(){t.params.autoplay.disableOnInteraction||(t.autoplay.paused=!1,n("autoplayResume"),a())}function f(){t.params.autoplay.pauseOnMouseEnter&&(t.$el.on("mouseenter",d),t.$el.on("mouseleave",p))}function m(){t.$el.off("mouseenter",d),t.$el.off("mouseleave",p)}i("init",()=>{t.params.autoplay.enabled&&(o(),Ei().addEventListener("visibilitychange",h),f())}),i("beforeTransitionStart",(g,v,y)=>{t.autoplay.running&&(y||!t.params.autoplay.disableOnInteraction?t.autoplay.pause(v):l())}),i("sliderFirstMove",()=>{t.autoplay.running&&(t.params.autoplay.disableOnInteraction?l():c())}),i("touchEnd",()=>{t.params.cssMode&&t.autoplay.paused&&!t.params.autoplay.disableOnInteraction&&a()}),i("destroy",()=>{m(),t.autoplay.running&&l(),Ei().removeEventListener("visibilitychange",h)}),Object.assign(t.autoplay,{pause:c,run:a,start:o,stop:l})}function Pu(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Rl(e,t){const r=["__proto__","constructor","prototype"];Object.keys(t).filter(i=>r.indexOf(i)<0).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:Pu(t[i])&&Pu(e[i])&&Object.keys(t[i]).length>0?t[i].__swiper__?e[i]=t[i]:Rl(e[i],t[i]):e[i]=t[i]})}function JF(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function eU(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function tU(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function rU(e){e===void 0&&(e="");const t=e.split(" ").map(i=>i.trim()).filter(i=>!!i),r=[];return t.forEach(i=>{r.indexOf(i)<0&&r.push(i)}),r.join(" ")}const iU=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function Sne(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const r={on:{}},i={},n={};Rl(r,Ki.defaults),Rl(r,Ki.extendedDefaults),r._emitClasses=!0,r.init=!1;const s={},a=iU.map(l=>l.replace(/_/,"")),o=Object.assign({},e);return Object.keys(o).forEach(l=>{typeof e[l]>"u"||(a.indexOf(l)>=0?Pu(e[l])?(r[l]={},n[l]={},Rl(r[l],e[l]),Rl(n[l],e[l])):(r[l]=e[l],n[l]=e[l]):l.search(/on[A-Z]/)===0&&typeof e[l]=="function"?t?i[`${l[2].toLowerCase()}${l.substr(3)}`]=e[l]:r.on[`${l[2].toLowerCase()}${l.substr(3)}`]=e[l]:s[l]=e[l])}),["navigation","pagination","scrollbar"].forEach(l=>{r[l]===!0&&(r[l]={}),r[l]===!1&&delete r[l]}),{params:r,passedParams:n,rest:s,events:i}}function _ne(e,t){let{el:r,nextEl:i,prevEl:n,paginationEl:s,scrollbarEl:a,swiper:o}=e;JF(t)&&i&&n&&(o.params.navigation.nextEl=i,o.originalParams.navigation.nextEl=i,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),eU(t)&&s&&(o.params.pagination.el=s,o.originalParams.pagination.el=s),tU(t)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(r)}function nU(e,t){let r=t.slidesPerView;if(t.breakpoints){const n=Ki.prototype.getBreakpoint(t.breakpoints),s=n in t.breakpoints?t.breakpoints[n]:void 0;s&&s.slidesPerView&&(r=s.slidesPerView)}let i=Math.ceil(parseFloat(t.loopedSlides||r,10));return i+=t.loopAdditionalSlides,i>e.length&&t.loopedSlidesLimit&&(i=e.length),i}function Ane(e,t,r){const i=t.map((l,c)=>sn.cloneElement(l,{swiper:e,"data-swiper-slide-index":c}));function n(l,c,h){return sn.cloneElement(l,{key:`${l.key}-duplicate-${c}-${h}`,className:`${l.props.className||""} ${r.slideDuplicateClass}`})}if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-i.length%r.slidesPerGroup;if(l!==r.slidesPerGroup)for(let c=0;c<l;c+=1){const h=H("div",{className:`${r.slideClass} ${r.slideBlankClass}`});i.push(h)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=i.length);const s=nU(i,r),a=[],o=[];for(let l=0;l<s;l+=1){const c=l-Math.floor(l/i.length)*i.length;o.push(n(i[c],l,"append")),a.unshift(n(i[i.length-c-1],l,"prepend"))}return e&&(e.loopedSlides=s),[...a,...i,...o]}function Mne(e,t,r,i,n){const s=[];if(!t)return s;const a=l=>{s.indexOf(l)<0&&s.push(l)};if(r&&i){const l=i.map(n),c=r.map(n);l.join("")!==c.join("")&&a("children"),i.length!==r.length&&a("children")}return iU.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in e&&l in t)if(Pu(e[l])&&Pu(t[l])){const c=Object.keys(e[l]),h=Object.keys(t[l]);c.length!==h.length?a(l):(c.forEach(u=>{e[l][u]!==t[l][u]&&a(l)}),h.forEach(u=>{e[l][u]!==t[l][u]&&a(l)}))}else e[l]!==t[l]&&a(l)}),s}function sU(e){const t=[];return sn.Children.toArray(e).forEach(r=>{r.type&&r.type.displayName==="SwiperSlide"?t.push(r):r.props&&r.props.children&&sU(r.props.children).forEach(i=>t.push(i))}),t}function Ene(e){const t=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return sn.Children.toArray(e).forEach(i=>{if(i.type&&i.type.displayName==="SwiperSlide")t.push(i);else if(i.props&&i.props.slot&&r[i.props.slot])r[i.props.slot].push(i);else if(i.props&&i.props.children){const n=sU(i.props.children);n.length>0?n.forEach(s=>t.push(s)):r["container-end"].push(i)}else r["container-end"].push(i)}),{slides:t,slots:r}}function Cne(e){let{swiper:t,slides:r,passedParams:i,changedParams:n,nextEl:s,prevEl:a,scrollbarEl:o,paginationEl:l}=e;const c=n.filter(w=>w!=="children"&&w!=="direction"),{params:h,pagination:u,navigation:d,scrollbar:p,virtual:f,thumbs:m}=t;let g,v,y,x,b;n.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&h.thumbs&&!h.thumbs.swiper&&(g=!0),n.includes("controller")&&i.controller&&i.controller.control&&h.controller&&!h.controller.control&&(v=!0),n.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(h.pagination||h.pagination===!1)&&u&&!u.el&&(y=!0),n.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||o)&&(h.scrollbar||h.scrollbar===!1)&&p&&!p.el&&(x=!0),n.includes("navigation")&&i.navigation&&(i.navigation.prevEl||a)&&(i.navigation.nextEl||s)&&(h.navigation||h.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(b=!0);const S=w=>{!t[w]||(t[w].destroy(),w==="navigation"?(h[w].prevEl=void 0,h[w].nextEl=void 0,t[w].prevEl=void 0,t[w].nextEl=void 0):(h[w].el=void 0,t[w].el=void 0))};c.forEach(w=>{if(Pu(h[w])&&Pu(i[w]))Rl(h[w],i[w]);else{const A=i[w];(A===!0||A===!1)&&(w==="navigation"||w==="pagination"||w==="scrollbar")?A===!1&&S(w):h[w]=i[w]}}),c.includes("controller")&&!v&&t.controller&&t.controller.control&&h.controller&&h.controller.control&&(t.controller.control=h.controller.control),n.includes("children")&&r&&f&&h.virtual.enabled?(f.slides=r,f.update(!0)):n.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),g&&m.init()&&m.update(!0),v&&(t.controller.control=h.controller.control),y&&(l&&(h.pagination.el=l),u.init(),u.render(),u.update()),x&&(o&&(h.scrollbar.el=o),p.init(),p.updateSize(),p.setTranslate()),b&&(s&&(h.navigation.nextEl=s),a&&(h.navigation.prevEl=a),d.init(),d.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=i.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=i.allowSlidePrev),n.includes("direction")&&t.changeDirection(i.direction,!1),t.update()}function Tne(e,t,r){if(!r)return null;const i=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return t.filter((n,s)=>s>=r.from&&s<=r.to).map(n=>sn.cloneElement(n,{swiper:e,style:i}))}const Pne=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function om(e,t){return typeof window>"u"?W.exports.useEffect(e,t):W.exports.useLayoutEffect(e,t)}const Dne=W.exports.createContext(null),One=W.exports.createContext(null),aU=W.exports.forwardRef(function(e,t){let{className:r,tag:i="div",wrapperTag:n="div",children:s,onSwiper:a,...o}=e===void 0?{}:e,l=!1;const[c,h]=W.exports.useState("swiper"),[u,d]=W.exports.useState(null),[p,f]=W.exports.useState(!1),m=W.exports.useRef(!1),g=W.exports.useRef(null),v=W.exports.useRef(null),y=W.exports.useRef(null),x=W.exports.useRef(null),b=W.exports.useRef(null),S=W.exports.useRef(null),w=W.exports.useRef(null),A=W.exports.useRef(null),{params:_,passedParams:M,rest:E,events:T}=Sne(o),{slides:P,slots:D}=Ene(s),L=()=>{f(!p)};Object.assign(_.on,{_containerClasses(k,z){h(z)}});const R=()=>{if(Object.assign(_.on,T),l=!0,v.current=new Ki(_),v.current.loopCreate=()=>{},v.current.loopDestroy=()=>{},_.loop&&(v.current.loopedSlides=nU(P,_)),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=P;const k={cache:!1,slides:P,renderExternal:d,renderExternalUpdate:!1};Rl(v.current.params.virtual,k),Rl(v.current.originalParams.virtual,k)}};g.current||R(),v.current&&v.current.on("_beforeBreakpoint",L);const V=()=>{l||!T||!v.current||Object.keys(T).forEach(k=>{v.current.on(k,T[k])})},F=()=>{!T||!v.current||Object.keys(T).forEach(k=>{v.current.off(k,T[k])})};W.exports.useEffect(()=>()=>{v.current&&v.current.off("_beforeBreakpoint",L)}),W.exports.useEffect(()=>{!m.current&&v.current&&(v.current.emitSlidesClasses(),m.current=!0)}),om(()=>{if(t&&(t.current=g.current),!!g.current)return v.current.destroyed&&R(),_ne({el:g.current,nextEl:b.current,prevEl:S.current,paginationEl:w.current,scrollbarEl:A.current,swiper:v.current},_),a&&a(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}},[]),om(()=>{V();const k=Mne(M,y.current,P,x.current,z=>z.key);return y.current=M,x.current=P,k.length&&v.current&&!v.current.destroyed&&Cne({swiper:v.current,slides:P,passedParams:M,changedParams:k,nextEl:b.current,prevEl:S.current,scrollbarEl:A.current,paginationEl:w.current}),()=>{F()}}),om(()=>{Pne(v.current)},[u]);function O(){return _.virtual?Tne(v.current,P,u):!_.loop||v.current&&v.current.destroyed?P.map(k=>sn.cloneElement(k,{swiper:v.current})):Ane(v.current,P,_)}return H(i,{ref:g,className:rU(`${c}${r?` ${r}`:""}`),...E,children:Me(One.Provider,{value:v.current,children:[D["container-start"],Me(n,{className:"swiper-wrapper",children:[D["wrapper-start"],O(),D["wrapper-end"]]}),JF(_)&&Me(on,{children:[H("div",{ref:S,className:"swiper-button-prev"}),H("div",{ref:b,className:"swiper-button-next"})]}),tU(_)&&H("div",{ref:A,className:"swiper-scrollbar"}),eU(_)&&H("div",{ref:w,className:"swiper-pagination"}),D["container-end"]]})})});aU.displayName="Swiper";const oU=W.exports.forwardRef(function(e,t){let{tag:r="div",children:i,className:n="",swiper:s,zoom:a,virtualIndex:o,...l}=e===void 0?{}:e;const c=W.exports.useRef(null),[h,u]=W.exports.useState("swiper-slide");function d(m,g,v){g===c.current&&u(v)}om(()=>{if(t&&(t.current=c.current),!(!c.current||!s)){if(s.destroyed){h!=="swiper-slide"&&u("swiper-slide");return}return s.on("_slideClass",d),()=>{!s||s.off("_slideClass",d)}}}),om(()=>{s&&c.current&&!s.destroyed&&u(s.getSlideClasses(c.current))},[s]);const p={isActive:h.indexOf("swiper-slide-active")>=0||h.indexOf("swiper-slide-duplicate-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isDuplicate:h.indexOf("swiper-slide-duplicate")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0||h.indexOf("swiper-slide-duplicate-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0||h.indexOf("swiper-slide-duplicate-next")>=0},f=()=>typeof i=="function"?i(p):i;return H(r,{ref:c,className:rU(`${h}${n?` ${n}`:""}`),"data-swiper-slide-index":o,...l,children:H(Dne.Provider,{value:p,children:a?H("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0,children:f()}):f()})})});oU.displayName="SwiperSlide";const Lne="/jeansyo/aws.png",Ine="/jeansyo/react.png",Rne="/jeansyo/swift.png",Bne="/jeansyo/python.png",kne=[{title:"Amazon Web Services",filename:"/skills/aws.svg"},{title:"CSS3",filename:"/skills/css.svg"},{title:"Docker",filename:"/skills/docker.svg"},{title:"FastAPI",filename:"/skills/fastapi.svg"},{title:"Figma",filename:"/skills/figma.svg"},{title:"Firebase",filename:"/skills/firebase.svg"},{title:"Git",filename:"/skills/git.svg"},{title:"Github",filename:"/skills/github.svg"},{title:"Gitlab",filename:"/skills/gitlab.svg"},{title:"HTML5",filename:"/skills/html.svg"},{title:"Java",filename:"/skills/java.svg"},{title:"Javascript",filename:"/skills/javascript.svg"},{title:"MongoDB",filename:"/skills/mongodb.svg"},{title:"MySQL",filename:"/skills/mysql.svg"},{title:"Next JS",filename:"/skills/nextjs.svg"},{title:"Nginx",filename:"/skills/nginx.svg"},{title:"Node",filename:"/skills/node.svg"},{title:"PostgreSQL",filename:"/skills/postgresql.svg"},{title:"Python",filename:"/skills/python.svg"},{title:"React",filename:"/skills/react.svg"},{title:"Typescript",filename:"/skills/typescript.svg"},{title:"Redis",filename:"/skills/redis.svg"},{title:"SocketIO",filename:"/skills/socketio.svg"},{title:"Spring Boot",filename:"/skills/spring.svg"}],Pv={begin:{opacity:1,transform:"translate(0px, 0px)"},animate:{opacity:1,transform:"translate(-30px, -30px) skewX(-10deg) rotateZ(-10deg) scaleX(0.9)",transition:{delay:.1,staggerChildren:.08}}},zne=()=>{const[e,t]=W.exports.useState(!1);return Me("div",{className:"d-flex flex-column",children:[Me(Ct,{display:"flex",flexDirection:{xs:"column",sm:"column",md:"column",lg:"row"},justifyContent:"center",alignItems:"center",children:[Me(Ct,{display:"flex",flexDirection:"column",maxWidth:500,width:"100%",order:{xs:0,sm:0,md:0,lg:4},px:{xs:0,sm:0,md:1,lg:2,xl:3},gap:2,children:[H(Ct,{className:"col-3 bg-dark ml-0 my-0 ",sx:{height:".05rem"},mx:{xs:"auto",sm:"auto",md:"auto",lg:0}}),H(Tt,{textTransform:"uppercase",variant:"subtitle2",fontWeight:400,sx:{mb:0},textAlign:{xs:"center",sm:"center",md:"center",lg:"left"},children:"We are a business transformation company led by technology."}),Me(Tt,{textTransform:"capitalize",variant:"h2",fontWeight:500,letterSpacing:1,textAlign:{xs:"center",sm:"center",md:"center",lg:"left"},children:["Digital ",H("span",{className:"text-gradient text-glow",children:"Solutions"})]}),H(Tt,{variant:"body2",fontWeight:400,textAlign:{xs:"center",sm:"center",md:"center",lg:"left"},children:"We focus on developing industry-leading platforms so you can be prepared for the future."})]}),H(Ct,{width:"100%",children:Me(Ct,{mr:"auto",component:ui.div,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignContent:"center",width:"1px",position:"relative",bgcolor:"transparent",className:"d-flex flex-row gap-2 overflow-visible",onMouseEnter:()=>{t(!0)},onMouseLeave:()=>{t(!1)},pt:5,sx:{marginLeft:{xs:"2.5%",sm:"15%",lg:"1px"}},children:[Me(Ct,{component:ui.div,display:"flex",flexDirection:"column",justifyContent:"space-between",p:{xs:1.25,sm:2,md:2.5,lg:4,xl:4.25},width:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},minWidth:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},height:{xs:"7.5rem",sm:"10rem",md:"12.5rem",lg:"15rem"},borderRadius:{xs:"1rem",sm:"1.75rem",md:"2rem",lg:"2rem"},left:{xs:0,sm:0,md:0,lg:0,xl:0},top:{xs:0,sm:0,md:0,lg:0,xl:0},variants:Pv,animate:e?"animate":"begin",sx:{position:"relative",zIndex:10,backdropFilter:"blur(20px)",overflow:"visible",boxShadow:"rgba(39, 77, 153, 0.2) 0px 30px 60px, rgba(255, 255, 255, 0.3) 0px 0px 0px 0.5px inset",background:"radial-gradient(218.51% 281.09% at 100% 100%, rgba(253, 63, 51, 0.6) 0%, rgba(76, 0, 200, 0.6) 45.83%, rgba(76, 0, 200, 0.6) 100%)"},whileHover:{elevation:2,marginTop:"-2.5rem"},children:[Me(Ct,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",children:[Me(Ct,{display:"flex",flexDirection:"column",children:[H(Tt,{textTransform:"uppercase",variant:"subtitle1",color:"white",mb:0,lineHeight:1,marginBottom:1.5,children:"Mobile Developer"}),H(Tt,{textTransform:"capitalize",variant:"caption",color:"white",fontWeight:200,children:"Professional"})]}),H(El,{src:Rne,sx:{background:"#18204d",p:1,pb:1.25,pr:1.25},component:Ct,width:{xs:32,sm:38,md:48,lg:52},height:{xs:32,sm:38,md:48,lg:52},m:0})]}),Me(Ct,{display:"flex",flexDirection:"column",mt:"auto",gap:.5,children:[H(Li,{animation:"wave",height:8,width:"25%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"35%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"30%",sx:{backgroundColor:"#ffffff22",display:{xs:"none",sm:"none",md:"inline-block"}}}),H(Li,{animation:"wave",height:12,width:"40%",sx:{backgroundColor:"#ffffff44",display:{xs:"none",sm:"none",md:"inline-block"}}})]})]}),Me(Ct,{p:{xs:1.25,sm:2,md:2.5,lg:3,xl:3},display:"flex",flexDirection:"column",justifyContent:"space-between",component:ui.div,whileHover:{elevation:2,marginTop:"-2.5rem"},variants:Pv,animate:e?"animate":"begin",width:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},minWidth:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},height:{xs:"7.5rem",sm:"10rem",md:"12.5rem",lg:"15rem"},borderRadius:{xs:"1rem",sm:"2rem",md:"2rem",lg:"2rem"},left:{xs:"-7rem",sm:"-9rem",md:"-10rem",lg:"-15rem"},top:{xs:"0.65rem",sm:"0.75rem",md:"0.95rem",lg:"1rem"},style:{zIndex:8,boxShadow:"rgba(39, 77, 153, 0.2) 0px 30px 60px, rgba(255, 255, 255, 0.3) 0px 0px 0px 0.5px inset",position:"relative",overflow:"visible",backdropFilter:"blur(20px)",background:"radial-gradient(100% 128.38% at 100% 100%, rgba(51, 168, 253, 0.2) 0%, rgba(76, 0, 200, 0.2) 100%)"},children:[Me(Ct,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",children:[Me(Ct,{children:[H(Tt,{textTransform:"uppercase",variant:"subtitle2",color:"white",mb:0,lineHeight:.75,children:"Web Developer"}),H(Tt,{textTransform:"capitalize",variant:"caption",color:"white",fontWeight:200,children:"Professional"})]}),H(El,{src:Ine,component:Ct,sx:{background:"#18204d",p:1},imgProps:{style:{paddingLeft:2}},width:{xs:32,sm:38,md:48,lg:52},height:{xs:32,sm:38,md:48,lg:52},m:0})]}),Me(Ct,{display:"flex",flexDirection:"column",mt:"auto",gap:.5,children:[H(Li,{animation:"wave",height:8,width:"25%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"35%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"30%",sx:{backgroundColor:"#ffffff22",display:{xs:"none",sm:"none",md:"inline-block"}}}),H(Li,{animation:"wave",height:12,width:"40%",sx:{backgroundColor:"#ffffff44",display:{xs:"none",sm:"none",md:"inline-block"}}})]})]}),Me(Ct,{p:{xs:1.25,sm:2,md:2.5,lg:3,xl:3},display:"flex",flexDirection:"column",justifyContent:"space-between",component:ui.div,whileHover:{elevation:2,marginTop:"-2.5rem"},variants:Pv,animate:e?"animate":"begin",top:{xs:"1.3rem",sm:"1.5rem",md:"1.9rem",lg:"2rem"},style:{zIndex:6,boxShadow:"rgba(39, 77, 153, 0.2) 0px 30px 60px, rgba(255, 255, 255, 0.3) 0px 0px 0px 0.5px inset",position:"relative",overflow:"visible",backdropFilter:"blur(20px)",background:"radial-gradient(120% 154.37% at 100% 100%, rgba(51, 253, 241, 0.1) 0%, rgba(200, 96, 0, 0.1) 100%)"},width:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},minWidth:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},height:{xs:"7.5rem",sm:"10rem",md:"12.5rem",lg:"15rem"},borderRadius:{xs:"1rem",sm:"2rem",md:"2rem",lg:"2rem"},left:{xs:"-16.5rem",sm:"-18.5rem",md:"-22.5rem",lg:"-33.5rem"},children:[Me(Ct,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",children:[Me(Ct,{children:[H(Tt,{textTransform:"uppercase",variant:"subtitle2",color:"white",mb:0,lineHeight:.75,children:"Serverless Developer"}),H(Tt,{textTransform:"capitalize",variant:"caption",color:"white",fontWeight:200,children:"Professional"})]}),H(El,{src:Bne,sx:{background:"#18204d",p:1},component:Ct,width:{xs:32,sm:38,md:48,lg:52},height:{xs:32,sm:38,md:48,lg:52},m:0})]}),Me(Ct,{display:"flex",flexDirection:"column",mt:"auto",gap:.5,children:[H(Li,{animation:"wave",height:8,width:"25%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"35%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"30%",sx:{backgroundColor:"#ffffff22",display:{xs:"none",sm:"none",md:"inline-block"}}}),H(Li,{animation:"wave",height:12,width:"40%",sx:{backgroundColor:"#ffffff44",display:{xs:"none",sm:"none",md:"inline-block"}}})]})]}),Me(Ct,{p:{xs:1.25,sm:2,md:2.5,lg:3,xl:3},display:"flex",flexDirection:"column",justifyContent:"space-between",component:ui.div,whileHover:{elevation:2,marginTop:"-2.5rem"},variants:Pv,animate:e?"animate":"begin",top:{xs:"1.95rem",sm:"2.25rem",md:"2.75rem",lg:"3rem"},style:{zIndex:4,boxShadow:"rgba(39, 77, 153, 0.2) 0px 30px 60px, rgba(255, 255, 255, 0.3) 0px 0px 0px 0.5px inset",position:"relative",overflow:"visible",backdropFilter:"blur(20px)",background:"linear-gradient(rgb(117, 224, 230) 0%, rgb(57, 19, 184) 100%)"},width:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},minWidth:{xs:"12.5rem",sm:"15rem",md:"17.5rem",lg:"22.5rem",xl:"22.5rem"},height:{xs:"7.5rem",sm:"10rem",md:"12.5rem",lg:"15rem"},borderRadius:{xs:"1rem",sm:"2rem",md:"2rem",lg:"2rem"},left:{xs:"-26.5rem",sm:"-30rem",md:"-36rem",lg:"-52.5rem"},children:[Me(Ct,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",children:[Me(Ct,{children:[H(Tt,{textTransform:"uppercase",variant:"subtitle2",color:"white",mb:0,lineHeight:.75,children:"Business Intelligence"}),H(Tt,{textTransform:"capitalize",variant:"caption",color:"white",fontWeight:200,children:"Professional"})]}),H(El,{src:Lne,sx:{background:"#18204d"},imgProps:{style:{objectFit:"contain"}},component:Ct,width:{xs:32,sm:38,md:48,lg:52},height:{xs:32,sm:38,md:48,lg:52},m:0})]}),Me(Ct,{display:"flex",flexDirection:"column",mt:"auto",gap:.5,children:[H(Li,{animation:"wave",height:8,width:"25%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"35%",sx:{backgroundColor:"#ffffff22"}}),H(Li,{animation:"wave",height:8,width:"30%",sx:{backgroundColor:"#ffffff22",display:{xs:"none",sm:"none",md:"inline-block"}}}),H(Li,{animation:"wave",height:12,width:"40%",sx:{backgroundColor:"#ffffff44",display:{xs:"none",sm:"none",md:"inline-block"}}})]})]})]})})]}),H(Ct,{className:"col-12 position-relative d-flex align-items-center justify-content-center px-0",sx:{height:"10rem",mt:10},children:H(aU,{slidesPerView:"auto",spaceBetween:0,autoplay:{delay:2500,disableOnInteraction:!1},centeredSlides:!0,loop:!0,pagination:!1,navigation:!1,modules:[xne,bne,wne],className:"mySwiper",loopedSlidesLimit:!0,loopAdditionalSlides:1,children:kne.map(({title:r,filename:i})=>H(oU,{className:"d-flex align-items-center justify-content-center flex-column",style:{cursor:"grab",width:"5rem",height:"5rem"},children:H(Gte,{title:r,children:H(El,{sx:{p:1.25,backgroundColor:"transparent",boxSizing:"content-box",width:48,height:48},imgProps:{style:{objectFit:"contain"}},src:i})})},r))})})]})};var PC={},Nne=Gi.exports;Object.defineProperty(PC,"__esModule",{value:!0});var lU=PC.default=void 0;jne(W.exports);var Fne=Nne(dn()),Une=pn;function cU(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(cU=function(i){return i?r:t})(e)}function jne(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=cU(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}var Vne=(0,Fne.default)((0,Une.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn");lU=PC.default=Vne;var DC={},Gne=Gi.exports;Object.defineProperty(DC,"__esModule",{value:!0});var uU=DC.default=void 0;qne(W.exports);var Hne=Gne(dn()),Wne=pn;function hU(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(hU=function(i){return i?r:t})(e)}function qne(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=hU(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}var $ne=(0,Hne.default)((0,Wne.jsx)("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}),"Instagram");uU=DC.default=$ne;var OC={},Xne=Gi.exports;Object.defineProperty(OC,"__esModule",{value:!0});var LC=OC.default=void 0,Yne=Xne(dn()),Qne=pn,Kne=(0,Yne.default)((0,Qne.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"Language");LC=OC.default=Kne;var IC={},Zne=Gi.exports;Object.defineProperty(IC,"__esModule",{value:!0});var dU=IC.default=void 0,Jne=Zne(dn()),ese=pn,tse=(0,Jne.default)((0,ese.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");dU=IC.default=tse;const kO=({className:e="d-none d-md-flex order-1 order-md-0 col-12 col-md-3 col-lg-2 d-flex flex-row flex-md-column align-items-center justify-content-center",rotate:t=!0})=>Me("div",{className:e,children:[Me("div",{className:`mx-3 mx-md-0 text-uppercase fs-6 my-md-5 d-flex align-items-center justify-content-center ${t?"flex-column":"flex-row"}`,style:{fontWeight:"500"},children:[H("a",{href:"https://www.linkedin.com/in/jeansyo/",target:"_blank",className:"text-dark hover-color cursor-pointer",children:H(lU,{className:`fs-2 ${t?"mb-2":"me-3"}`})}),H("a",{href:"https://www.instagram.com/jeannsyo/",target:"_blank",className:"text-dark hover-color cursor-pointer",children:H(uU,{className:`fs-2 ${t?"mb-2":"me-3"}`})}),H("a",{href:"https://www.jeansyo.com",target:"_blank",className:"text-dark hover-color cursor-pointer",children:H(dU,{className:`fs-2 ${t?"mb-2":"me-3"}`})}),H("a",{href:"https://www.jeansyo.com",target:"_blank",className:"text-dark hover-color cursor-pointer",children:H(LC,{className:"cursor-pointer fs-2"})})]}),Me(Tt,{variant:"button",fontWeight:700,className:"mx-3 mx-md-0 text-uppercase my-md-5 text-nowrap text-center d-flex align-items-center justify-content-center",style:{transform:t?"rotate(-90deg)":""},children:[H("span",{className:"text-gradient text-glow me-2",children:"Follow"})," Us"]}),H("div",{className:"mx-3 mx-md-0 text-lowercase fs-6 my-md-5 d-flex align-items-center justify-content-center",children:H("div",{style:{height:"0.05rem",width:"3rem",transform:t?"rotate(-90deg)":""},className:"bg-dark"})})]}),rse=()=>H(on,{children:Array.from(Array(8).keys()).map((e,t)=>H("div",{className:`circle-animated-static circle-animated__static${t+1}`},t))}),ise="modulepreload",nse=function(e){return"/jeansyo/"+e},zO={},jg=function(t,r,i){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=nse(n),n in zO)return;zO[n]=!0;const s=n.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":ise,s||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),s)return new Promise((l,c)=>{o.addEventListener("load",l),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};var sse=Object.create,RC=Object.defineProperty,ase=Object.getOwnPropertyDescriptor,ose=Object.getOwnPropertyNames,lse=Object.getPrototypeOf,cse=Object.prototype.hasOwnProperty,mp=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),use=(e,t)=>{for(var r in t)RC(e,r,{get:t[r],enumerable:!0})},hse=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ose(t))!cse.call(e,n)&&n!==r&&RC(e,n,{get:()=>t[n],enumerable:!(i=ase(t,n))||i.enumerable});return e},gp=(e,t,r)=>(r=e!=null?sse(lse(e)):{},hse(t||!e||!e.__esModule?RC(r,"default",{value:e,enumerable:!0}):r,e)),dse=mp((e,t)=>{(function(r,i){typeof e=="object"?t.exports=i():typeof define=="function"&&define.amd?define(i):r.Alea=i()})(e,function(){return r.importState=function(n){var s=new r;return s.importState(n),s},r;function r(){return function(n){var s=0,a=0,o=0,l=1;n.length==0&&(n=[+new Date]);var c=i();s=c(" "),a=c(" "),o=c(" ");for(var h=0;h<n.length;h++)s-=c(n[h]),s<0&&(s+=1),a-=c(n[h]),a<0&&(a+=1),o-=c(n[h]),o<0&&(o+=1);c=null;var u=function(){var d=2091639*s+l*23283064365386963e-26;return s=a,a=o,o=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=n,u.exportState=function(){return[s,a,o,l]},u.importState=function(d){s=+d[0]||0,a=+d[1]||0,o=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function i(){var n=4022871197,s=function(a){a=a.toString();for(var o=0;o<a.length;o++){n+=a.charCodeAt(o);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),pU=mp((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,s,a,o){if(n=n===void 0||n,s=s===void 0||s,o=1e-64/(a=a||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,h,u,d,p,f,m,g,v,y,x,b=i[0].length,S=i.length;if(S<b)throw new TypeError("Invalid matrix: m < n");for(var w=[],A=[],_=[],M=n==="f"?S:b,E=v=f=0;E<S;E++)A[E]=new Array(M).fill(0);for(E=0;E<b;E++)_[E]=new Array(b).fill(0);var T,P=new Array(b).fill(0);for(E=0;E<S;E++)for(l=0;l<b;l++)A[E][l]=i[E][l];for(E=0;E<b;E++){for(w[E]=f,g=0,h=E+1,l=E;l<S;l++)g+=Math.pow(A[l][E],2);if(g<o)f=0;else for(m=(p=A[E][E])*(f=p<0?Math.sqrt(g):-Math.sqrt(g))-g,A[E][E]=p-f,l=h;l<b;l++){for(g=0,c=E;c<S;c++)g+=A[c][E]*A[c][l];for(p=g/m,c=E;c<S;c++)A[c][l]=A[c][l]+p*A[c][E]}for(P[E]=f,g=0,l=h;l<b;l++)g+=Math.pow(A[E][l],2);if(g<o)f=0;else{for(m=(p=A[E][E+1])*(f=p<0?Math.sqrt(g):-Math.sqrt(g))-g,A[E][E+1]=p-f,l=h;l<b;l++)w[l]=A[E][l]/m;for(l=h;l<S;l++){for(g=0,c=h;c<b;c++)g+=A[l][c]*A[E][c];for(c=h;c<b;c++)A[l][c]=A[l][c]+g*w[c]}}v<(y=Math.abs(P[E])+Math.abs(w[E]))&&(v=y)}if(s)for(E=b-1;0<=E;E--){if(f!==0){for(m=A[E][E+1]*f,l=h;l<b;l++)_[l][E]=A[E][l]/m;for(l=h;l<b;l++){for(g=0,c=h;c<b;c++)g+=A[E][c]*_[c][l];for(c=h;c<b;c++)_[c][l]=_[c][l]+g*_[c][E]}}for(l=h;l<b;l++)_[E][l]=0,_[l][E]=0;_[E][E]=1,f=w[E],h=E}if(n){if(n==="f")for(E=b;E<S;E++){for(l=b;l<S;l++)A[E][l]=0;A[E][E]=1}for(E=b-1;0<=E;E--){for(h=E+1,f=P[E],l=h;l<M;l++)A[E][l]=0;if(f!==0){for(m=A[E][E]*f,l=h;l<M;l++){for(g=0,c=h;c<S;c++)g+=A[c][E]*A[c][l];for(p=g/m,c=E;c<S;c++)A[c][l]=A[c][l]+p*A[c][E]}for(l=E;l<S;l++)A[l][E]=A[l][E]/f}else for(l=E;l<S;l++)A[l][E]=0;A[E][E]=A[E][E]+1}}for(a*=v,c=b-1;0<=c;c--)for(var D=0;D<50;D++){for(T=!1,h=c;0<=h;h--){if(Math.abs(w[h])<=a){T=!0;break}if(Math.abs(P[h-1])<=a)break}if(!T){for(d=0,u=h-(g=1),E=h;E<c+1&&(p=g*w[E],w[E]=d*w[E],!(Math.abs(p)<=a));E++)if(f=P[E],P[E]=Math.sqrt(p*p+f*f),d=f/(m=P[E]),g=-p/m,n)for(l=0;l<S;l++)y=A[l][u],x=A[l][E],A[l][u]=y*d+x*g,A[l][E]=-y*g+x*d}if(x=P[c],h===c){if(x<0&&(P[c]=-x,s))for(l=0;l<b;l++)_[l][c]=-_[l][c];break}for(v=P[h],p=(((y=P[c-1])-x)*(y+x)+((f=w[c-1])-(m=w[c]))*(f+m))/(2*m*y),f=Math.sqrt(p*p+1),p=((v-x)*(v+x)+m*(y/(p<0?p-f:p+f)-m))/v,E=h+(g=d=1);E<c+1;E++){if(f=w[E],y=P[E],m=g*f,f*=d,x=Math.sqrt(p*p+m*m),p=v*(d=p/(w[E-1]=x))+f*(g=m/x),f=-v*g+f*d,m=y*g,y*=d,s)for(l=0;l<b;l++)v=_[l][E-1],x=_[l][E],_[l][E-1]=v*d+x*g,_[l][E]=-v*g+x*d;if(x=Math.sqrt(p*p+m*m),p=(d=p/(P[E-1]=x))*f+(g=m/x)*y,v=-g*f+d*y,n)for(l=0;l<S;l++)y=A[l][E-1],x=A[l][E],A[l][E-1]=y*d+x*g,A[l][E]=-y*g+x*d}w[h]=0,w[c]=p,P[c]=v}for(E=0;E<b;E++)P[E]<a&&(P[E]=0);return{u:A,q:P,v:_}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),pse=mp((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?t.exports=i():typeof define=="function"&&define.amd?define(i):(r=r||self,r.TinyQueue=i())})(e,function(){var r=function(n,s){if(n===void 0&&(n=[]),s===void 0&&(s=i),this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(var a=(this.length>>1)-1;a>=0;a--)this._down(a)};r.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(n){for(var s=this,a=s.data,o=s.compare,l=a[n];n>0;){var c=n-1>>1,h=a[c];if(o(l,h)>=0)break;a[n]=h,n=c}a[n]=l},r.prototype._down=function(n){for(var s=this,a=s.data,o=s.compare,l=this.length>>1,c=a[n];n<l;){var h=(n<<1)+1,u=a[h],d=h+1;if(d<this.length&&o(a[d],u)<0&&(h=d,u=a[d]),o(u,c)>=0)break;a[n]=u,n=h}a[n]=c};function i(n,s){return n<s?-1:n>s?1:0}return r})}),fse=mp((e,t)=>{var r=pse();r.default&&(r=r.default),t.exports=i,t.exports.default=i;function i(c,h,u){h=h||1;for(var d,p,f,m,g=0;g<c[0].length;g++){var v=c[0][g];(!g||v[0]<d)&&(d=v[0]),(!g||v[1]<p)&&(p=v[1]),(!g||v[0]>f)&&(f=v[0]),(!g||v[1]>m)&&(m=v[1])}var y=f-d,x=m-p,b=Math.min(y,x),S=b/2;if(b===0){var w=[d,p];return w.distance=0,w}for(var A=new r(void 0,n),_=d;_<f;_+=b)for(var M=p;M<m;M+=b)A.push(new s(_+S,M+S,S,c));var E=o(c),T=new s(d+y/2,p+x/2,0,c);T.d>E.d&&(E=T);for(var P=A.length;A.length;){var D=A.pop();D.d>E.d&&(E=D,u&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,P)),!(D.max-E.d<=h)&&(S=D.h/2,A.push(new s(D.x-S,D.y-S,S,c)),A.push(new s(D.x+S,D.y-S,S,c)),A.push(new s(D.x-S,D.y+S,S,c)),A.push(new s(D.x+S,D.y+S,S,c)),P+=4)}u&&(console.log("num probes: "+P),console.log("best distance: "+E.d));var L=[E.x,E.y];return L.distance=E.d,L}function n(c,h){return h.max-c.max}function s(c,h,u,d){this.x=c,this.y=h,this.h=u,this.d=a(c,h,d),this.max=this.d+this.h*Math.SQRT2}function a(c,h,u){for(var d=!1,p=1/0,f=0;f<u.length;f++)for(var m=u[f],g=0,v=m.length,y=v-1;g<v;y=g++){var x=m[g],b=m[y];x[1]>h!=b[1]>h&&c<(b[0]-x[0])*(h-x[1])/(b[1]-x[1])+x[0]&&(d=!d),p=Math.min(p,l(c,h,x,b))}return p===0?0:(d?1:-1)*Math.sqrt(p)}function o(c){for(var h=0,u=0,d=0,p=c[0],f=0,m=p.length,g=m-1;f<m;g=f++){var v=p[f],y=p[g],x=v[0]*y[1]-y[0]*v[1];u+=(v[0]+y[0])*x,d+=(v[1]+y[1])*x,h+=x*3}return h===0?new s(p[0][0],p[0][1],0,c):new s(u/h,d/h,0,c)}function l(c,h,u,d){var p=u[0],f=u[1],m=d[0]-p,g=d[1]-f;if(m!==0||g!==0){var v=((c-p)*m+(h-f)*g)/(m*m+g*g);v>1?(p=d[0],f=d[1]):v>0&&(p+=m*v,f+=g*v)}return m=c-p,g=h-f,m*m+g*g}}),mse=mp(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var u=this||r;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||r;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,r.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var f=d._howls[p]._getSoundIds(),m=0;m<f.length;m++){var g=d._howls[p]._soundById(f[m]);g&&g._node&&(g._node.volume=g._volume*u)}return d}return d._volume},mute:function(u){var d=this||r;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,r.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var f=d._howls[p]._getSoundIds(),m=0;m<f.length;m++){var g=d._howls[p]._soundById(f[m]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return d},stop:function(){for(var u=this||r,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||r,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||r)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||r;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||r,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var p=d.canPlayType("audio/mpeg;").replace(/^no$/,""),f=u._navigator?u._navigator.userAgent:"",m=f.match(/OPR\/([0-6].)/g),g=m&&parseInt(m[0].split("/")[1],10)<33,v=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,y=f.match(/Version\/(.*?) /),x=v&&y&&parseInt(y[1],10)<15;return u._codecs={mp3:!!(!g&&(p||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||r;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(p){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,u._releaseHtml5Audio(f)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var g=u._howls[m]._getSoundIds(),v=0;v<g.length;v++){var y=u._howls[m]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var b=0;b<u._howls.length;b++)u._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||r;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||r;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!r.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var p=0;p<u._howls[d]._sounds.length;p++)if(!u._howls[d]._sounds[p]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var f=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(f,f)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!r.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var r=new t,i=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};i.prototype={init:function(u){var d=this;return r.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=r.usingWebAudio&&!d._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(r.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var p=0;p<u._src.length;p++){var f,m;if(u._format&&u._format[p])f=u._format[p];else{if(m=u._src[p],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(m),f||(f=/\.([^.]+)$/.exec(m.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&r.codecs(f)){d=u._src[p];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new n(u),u._webAudio&&a(u),u},play:function(u,d){var p=this,f=null;if(typeof u=="number")f=u,u=null;else{if(typeof u=="string"&&p._state==="loaded"&&!p._sprite[u])return null;if(typeof u>"u"&&(u="__default",!p._playLock)){for(var m=0,g=0;g<p._sounds.length;g++)p._sounds[g]._paused&&!p._sounds[g]._ended&&(m++,f=p._sounds[g]._id);m===1?u=null:f=null}}var v=f?p._soundById(f):p._inactiveSound();if(!v)return null;if(f&&!u&&(u=v._sprite||"__default"),p._state!=="loaded"){v._sprite=u,v._ended=!1;var y=v._id;return p._queue.push({event:"play",action:function(){p.play(y)}}),y}if(f&&!v._paused)return d||p._loadQueue("play"),v._id;p._webAudio&&r._autoResume();var x=Math.max(0,v._seek>0?v._seek:p._sprite[u][0]/1e3),b=Math.max(0,(p._sprite[u][0]+p._sprite[u][1])/1e3-x),S=b*1e3/Math.abs(v._rate),w=p._sprite[u][0]/1e3,A=(p._sprite[u][0]+p._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var _=function(){v._paused=!1,v._seek=x,v._start=w,v._stop=A,v._loop=!!(v._loop||p._sprite[u][2])};if(x>=A){p._ended(v);return}var M=v._node;if(p._webAudio){var E=function(){p._playLock=!1,_(),p._refreshBuffer(v);var L=v._muted||p._muted?0:v._volume;M.gain.setValueAtTime(L,r.ctx.currentTime),v._playStart=r.ctx.currentTime,typeof M.bufferSource.start>"u"?v._loop?M.bufferSource.noteGrainOn(0,x,86400):M.bufferSource.noteGrainOn(0,x,b):v._loop?M.bufferSource.start(0,x,86400):M.bufferSource.start(0,x,b),S!==1/0&&(p._endTimers[v._id]=setTimeout(p._ended.bind(p,v),S)),d||setTimeout(function(){p._emit("play",v._id),p._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?E():(p._playLock=!0,p.once("resume",E),p._clearTimer(v._id))}else{var T=function(){M.currentTime=x,M.muted=v._muted||p._muted||r._muted||M.muted,M.volume=v._volume*r.volume(),M.playbackRate=v._rate;try{var L=M.play();if(L&&typeof Promise<"u"&&(L instanceof Promise||typeof L.then=="function")?(p._playLock=!0,_(),L.then(function(){p._playLock=!1,M._unlocked=!0,d?p._loadQueue():p._emit("play",v._id)}).catch(function(){p._playLock=!1,p._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):d||(p._playLock=!1,_(),p._emit("play",v._id)),M.playbackRate=v._rate,M.paused){p._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?p._endTimers[v._id]=setTimeout(p._ended.bind(p,v),S):(p._endTimers[v._id]=function(){p._ended(v),M.removeEventListener("ended",p._endTimers[v._id],!1)},M.addEventListener("ended",p._endTimers[v._id],!1))}catch(R){p._emit("playerror",v._id,R)}};M.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(M.src=p._src,M.load());var P=window&&window.ejecta||!M.readyState&&r._navigator.isCocoonJS;if(M.readyState>=3||P)T();else{p._playLock=!0,p._state="loading";var D=function(){p._state="loaded",T(),M.removeEventListener(r._canPlayEvent,D,!1)};M.addEventListener(r._canPlayEvent,D,!1),p._clearTimer(v._id)}}return v._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var p=d._getSoundIds(u),f=0;f<p.length;f++){d._clearTimer(p[f]);var m=d._soundById(p[f]);if(m&&!m._paused&&(m._seek=d.seek(p[f]),m._rateSeek=0,m._paused=!0,d._stopFade(p[f]),m._node))if(d._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),d._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||d._emit("pause",m?m._id:null)}return d},stop:function(u,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(u)}}),p;for(var f=p._getSoundIds(u),m=0;m<f.length;m++){p._clearTimer(f[m]);var g=p._soundById(f[m]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,p._stopFade(f[m]),g._node&&(p._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),p._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&p._clearSound(g._node))),d||p._emit("stop",g._id))}return p},mute:function(u,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(u,d)}}),p;if(typeof d>"u")if(typeof u=="boolean")p._muted=u;else return p._muted;for(var f=p._getSoundIds(d),m=0;m<f.length;m++){var g=p._soundById(f[m]);g&&(g._muted=u,g._interval&&p._stopFade(g._id),p._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:u),p._emit("mute",g._id))}return p},volume:function(){var u=this,d=arguments,p,f;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?f=parseInt(d[0],10):p=parseFloat(d[0])}else d.length>=2&&(p=parseFloat(d[0]),f=parseInt(d[1],10));var v;if(typeof p<"u"&&p>=0&&p<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof f>"u"&&(u._volume=p),f=u._getSoundIds(f);for(var y=0;y<f.length;y++)v=u._soundById(f[y]),v&&(v._volume=p,d[2]||u._stopFade(f[y]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(p,r.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=p*r.volume()),u._emit("volume",v._id))}else return v=f?u._soundById(f):u._sounds[0],v?v._volume:0;return u},fade:function(u,d,p,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,d,p,f)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),p=parseFloat(p),m.volume(u,f);for(var g=m._getSoundIds(f),v=0;v<g.length;v++){var y=m._soundById(g[v]);if(y){if(f||m._stopFade(g[v]),m._webAudio&&!y._muted){var x=r.ctx.currentTime,b=x+p/1e3;y._volume=u,y._node.gain.setValueAtTime(u,x),y._node.gain.linearRampToValueAtTime(d,b)}m._startFadeInterval(y,u,d,p,g[v],typeof f>"u")}}return m},_startFadeInterval:function(u,d,p,f,m,g){var v=this,y=d,x=p-d,b=Math.abs(x/.01),S=Math.max(4,b>0?f/b:f),w=Date.now();u._fadeTo=p,u._interval=setInterval(function(){var A=(Date.now()-w)/f;w=Date.now(),y+=x*A,y=Math.round(y*100)/100,x<0?y=Math.max(p,y):y=Math.min(p,y),v._webAudio?u._volume=y:v.volume(y,u._id,!0),g&&(v._volume=y),(p<d&&y<=p||p>d&&y>=p)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(p,u._id),v._emit("fade",u._id))},S)},_stopFade:function(u){var d=this,p=d._soundById(u);return p&&p._interval&&(d._webAudio&&p._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(p._interval),p._interval=null,d.volume(p._fadeTo,u),p._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,p,f,m;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")p=d[0],u._loop=p;else return m=u._soundById(parseInt(d[0],10)),m?m._loop:!1;else d.length===2&&(p=d[0],f=parseInt(d[1],10));for(var g=u._getSoundIds(f),v=0;v<g.length;v++)m=u._soundById(g[v]),m&&(m._loop=p,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=p,p&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(g[v])&&(u.pause(g[v],!0),u.play(g[v],!0)))));return u},rate:function(){var u=this,d=arguments,p,f;if(d.length===0)f=u._sounds[0]._id;else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?f=parseInt(d[0],10):p=parseFloat(d[0])}else d.length===2&&(p=parseFloat(d[0]),f=parseInt(d[1],10));var v;if(typeof p=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof f>"u"&&(u._rate=p),f=u._getSoundIds(f);for(var y=0;y<f.length;y++)if(v=u._soundById(f[y]),v){u.playing(f[y])&&(v._rateSeek=u.seek(f[y]),v._playStart=u._webAudio?r.ctx.currentTime:v._playStart),v._rate=p,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(p,r.ctx.currentTime):v._node&&(v._node.playbackRate=p);var x=u.seek(f[y]),b=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-x,S=b*1e3/Math.abs(v._rate);(u._endTimers[f[y]]||!v._paused)&&(u._clearTimer(f[y]),u._endTimers[f[y]]=setTimeout(u._ended.bind(u,v),S)),u._emit("rate",v._id)}}else return v=u._soundById(f),v?v._rate:u._rate;return u},seek:function(){var u=this,d=arguments,p,f;if(d.length===0)u._sounds.length&&(f=u._sounds[0]._id);else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?f=parseInt(d[0],10):u._sounds.length&&(f=u._sounds[0]._id,p=parseFloat(d[0]))}else d.length===2&&(p=parseFloat(d[0]),f=parseInt(d[1],10));if(typeof f>"u")return 0;if(typeof p=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var v=u._soundById(f);if(v)if(typeof p=="number"&&p>=0){var y=u.playing(f);y&&u.pause(f,!0),v._seek=p,v._ended=!1,u._clearTimer(f),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=p);var x=function(){y&&u.play(f,!0),u._emit("seek",f)};if(y&&!u._webAudio){var b=function(){u._playLock?setTimeout(b,0):x()};setTimeout(b,0)}else x()}else if(u._webAudio){var S=u.playing(f)?r.ctx.currentTime-v._playStart:0,w=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(w+S*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var p=d._soundById(u);return p?!p._paused:!1}for(var f=0;f<d._sounds.length;f++)if(!d._sounds[f]._paused)return!0;return!1},duration:function(u){var d=this,p=d._duration,f=d._soundById(u);return f&&(p=d._sprite[f._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,p=0;p<d.length;p++)d[p]._paused||u.stop(d[p]._id),u._webAudio||(u._clearSound(d[p]._node),d[p]._node.removeEventListener("error",d[p]._errorFn,!1),d[p]._node.removeEventListener(r._canPlayEvent,d[p]._loadFn,!1),d[p]._node.removeEventListener("ended",d[p]._endFn,!1),r._releaseHtml5Audio(d[p]._node)),delete d[p]._node,u._clearTimer(d[p]._id);var f=r._howls.indexOf(u);f>=0&&r._howls.splice(f,1);var m=!0;for(p=0;p<r._howls.length;p++)if(r._howls[p]._src===u._src||u._src.indexOf(r._howls[p]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],r.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,p,f){var m=this,g=m["_on"+u];return typeof d=="function"&&g.push(f?{id:p,fn:d,once:f}:{id:p,fn:d}),m},off:function(u,d,p){var f=this,m=f["_on"+u],g=0;if(typeof d=="number"&&(p=d,d=null),d||p)for(g=0;g<m.length;g++){var v=p===m[g].id;if(d===m[g].fn&&v||!d&&v){m.splice(g,1);break}}else if(u)f["_on"+u]=[];else{var y=Object.keys(f);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(f[y[g]])&&(f[y[g]]=[])}return f},once:function(u,d,p){var f=this;return f.on(u,d,p,1),f},_emit:function(u,d,p){for(var f=this,m=f["_on"+u],g=m.length-1;g>=0;g--)(!m[g].id||m[g].id===d||u==="load")&&(setTimeout(function(v){v.call(this,d,p)}.bind(f,m[g].fn),0),m[g].once&&f.off(u,m[g].fn,m[g].id));return f._loadQueue(u),f},_loadQueue:function(u){var d=this;if(d._queue.length>0){var p=d._queue[0];p.event===u&&(d._queue.shift(),d._loadQueue()),u||p.action()}return d},_ended:function(u){var d=this,p=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var f=!!(u._loop||d._sprite[p][2]);if(d._emit("end",u._id),!d._webAudio&&f&&d.stop(u._id,!0).play(u._id),d._webAudio&&f){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=r.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),m)}return d._webAudio&&!f&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),r._autoSuspend()),!d._webAudio&&!f&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var p=d._soundById(u);p&&p._node&&p._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,p=0;p<d._sounds.length;p++)if(u===d._sounds[p]._id)return d._sounds[p];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new n(u)},_drain:function(){var u=this,d=u._pool,p=0,f=0;if(!(u._sounds.length<d)){for(f=0;f<u._sounds.length;f++)u._sounds[f]._ended&&p++;for(f=u._sounds.length-1;f>=0;f--){if(p<=d)return;u._sounds[f]._ended&&(u._webAudio&&u._sounds[f]._node&&u._sounds[f]._node.disconnect(0),u._sounds.splice(f,1),p--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var p=[],f=0;f<d._sounds.length;f++)p.push(d._sounds[f]._id);return p}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=r.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,r.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,p=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),p))try{u.bufferSource.buffer=r._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(u){this._parent=u,this.init()};n.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,p=r._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),u._node.gain.setValueAtTime(p,r.ctx.currentTime),u._node.paused=!0,u._node.connect(r.masterGain)):r.noAudio||(u._node=r._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(r._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=p*r.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(r._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},a=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var p=atob(d.split(",")[1]),f=new Uint8Array(p.length),m=0;m<p.length;++m)f[m]=p.charCodeAt(m);l(f.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,d,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){g.setRequestHeader(v,u._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},o(g)}},o=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var p=function(){d._emit("loaderror",null,"Decoding audio data failed.")},f=function(m){m&&d._sounds.length>0?(s[d._src]=m,c(d,m)):p()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(u).then(f).catch(p):r.ctx.decodeAudioData(u,f,p)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),d=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=d?parseInt(d[1],10):null;if(u&&p&&p<9){var f=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!f&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:i}}),typeof e<"u"&&(e.Howler=r,e.Howl=i),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=r,global.Howl=i,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=i,window.Sound=n)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(r);return i},HowlerGlobal.prototype.pos=function(r,i,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,n=typeof n!="number"?s._pos[2]:n,typeof r=="number")s._pos=[r,i,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(r,i,n,s,a,o){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(i=typeof i!="number"?c[1]:i,n=typeof n!="number"?c[2]:n,s=typeof s!="number"?c[3]:s,a=typeof a!="number"?c[4]:a,o=typeof o!="number"?c[5]:o,typeof r=="number")l._orientation=[r,i,n,s,a,o],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,i,n,s,a,o);else return c;return l},Howl.prototype.init=function(r){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],r.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(r,i)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof r=="number")n._stereo=r,n._pos=[r,0,0];else return n._stereo;for(var a=n._getSoundIds(i),o=0;o<a.length;o++){var l=n._soundById(a[o]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(r,i,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(r,i,n,s)}}),a;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof r=="number")a._pos=[r,i,n];else return a._pos;for(var o=a._getSoundIds(s),l=0;l<o.length;l++){var c=a._soundById(o[l]);if(c)if(typeof r=="number")c._pos=[r,i,n],c._node&&((!c._panner||c._panner.pan)&&t(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setPosition(r,i,n)),a._emit("pos",c._id);else return c._pos}return a},Howl.prototype.orientation=function(r,i,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(r,i,n,s)}}),a;if(i=typeof i!="number"?a._orientation[1]:i,n=typeof n!="number"?a._orientation[2]:n,typeof s>"u")if(typeof r=="number")a._orientation=[r,i,n];else return a._orientation;for(var o=a._getSoundIds(s),l=0;l<o.length;l++){var c=a._soundById(o[l]);if(c)if(typeof r=="number")c._orientation=[r,i,n],c._node&&(c._panner||(c._pos||(c._pos=a._pos||[0,0,-.5]),t(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setOrientation(r,i,n)),a._emit("orientation",c._id);else return c._orientation}return a},Howl.prototype.pannerAttr=function(){var r=this,i=arguments,n,s,a;if(!r._webAudio)return r;if(i.length===0)return r._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),r._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:r._panningModel});else return a=r._soundById(parseInt(i[0],10)),a?a._pannerAttr:r._pannerAttr;else i.length===2&&(n=i[0],s=parseInt(i[1],10));for(var o=r._getSoundIds(s),l=0;l<o.length;l++)if(a=r._soundById(o[l]),a){var c=a._pannerAttr;c={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:c.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:c.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:c.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:c.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:c.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:c.panningModel};var h=a._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(a._pos||(a._pos=r._pos||[0,0,-.5]),t(a,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,r.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),r.call(this)}}(Sound.prototype.reset);var t=function(r,i){i=i||"spatial",i==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),gse=mp((e,t)=>{t.exports=function(r,i){for(var n=r.split("."),s=i.split("."),a=0;a<3;a++){var o=Number(n[a]),l=Number(s[a]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0}}),vp="149",us={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},vse=0,NO=1,yse=2,BC=1,xse=2,Bf=3,oa=0,di=1,Yn=2,Hr=0,yd=1,FO=2,UO=3,jO=4,bse=5,Rh=100,wse=101,Sse=102,VO=103,GO=104,_se=200,Ase=201,Mse=202,Ese=203,fU=204,mU=205,Cse=206,Tse=207,Pse=208,Dse=209,Ose=210,Lse=0,Ise=1,Rse=2,RA=3,Bse=4,kse=5,zse=6,Nse=7,gU=0,Fse=1,Use=2,jo=0,jse=1,Vse=2,Gse=3,Hse=4,Wse=5,vU=300,Du=301,Ou=302,BA=303,kA=304,Vg=306,Bo=1e3,Lr=1001,zA=1002,ir=1003,HO=1004,ww=1005,xt=1006,qse=1007,Yd=1008,Vi=1009,$se=1010,Xse=1011,yU=1012,Yse=1013,Bl=1014,Qn=1015,Qd=1016,Qse=1017,Kse=1018,mu=1020,Zse=1021,_s=1023,Jse=1024,eae=1025,gu=1026,Lu=1027,tae=1028,rae=1029,xU=1030,iae=1031,nae=1033,Sw=33776,_w=33777,Aw=33778,Mw=33779,WO=35840,qO=35841,$O=35842,XO=35843,sae=36196,YO=37492,QO=37496,KO=37808,ZO=37809,JO=37810,eL=37811,tL=37812,rL=37813,iL=37814,nL=37815,sL=37816,aL=37817,oL=37818,lL=37819,cL=37820,uL=37821,Ew=36492,aae=36283,hL=36284,dL=36285,pL=36286,bU=2200,wU=2201,kC=2202,o1=2300,l1=2301,Cw=2302,rd=2400,id=2401,c1=2402,zC=2500,oae=2501,Qa=3e3,dt=3001,rl=3200,SU=3201,lae=0,cae=1,Ta="srgb",u1="srgb-linear",Tw=7680,uae=519,NA=35044,fL="300 es",FA=1035,Ti=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},Ii=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],mL=1234567,lm=Math.PI/180,tg=180/Math.PI;function Ps(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ii[e&255]+Ii[e>>8&255]+Ii[e>>16&255]+Ii[e>>24&255]+"-"+Ii[t&255]+Ii[t>>8&255]+"-"+Ii[t>>16&15|64]+Ii[t>>24&255]+"-"+Ii[r&63|128]+Ii[r>>8&255]+"-"+Ii[r>>16&255]+Ii[r>>24&255]+Ii[i&255]+Ii[i>>8&255]+Ii[i>>16&255]+Ii[i>>24&255]).toLowerCase()}function Qr(e,t,r){return Math.max(t,Math.min(r,e))}function NC(e,t){return(e%t+t)%t}function hae(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function dae(e,t,r){return e!==t?(r-e)/(t-e):0}function cm(e,t,r){return(1-r)*e+r*t}function pae(e,t,r,i){return cm(e,t,1-Math.exp(-r*i))}function fae(e,t=1){return t-Math.abs(NC(e,t*2)-t)}function mae(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function gae(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function vae(e,t){return e+Math.floor(Math.random()*(t-e+1))}function yae(e,t){return e+Math.random()*(t-e)}function xae(e){return e*(.5-Math.random())}function bae(e){e!==void 0&&(mL=e);let t=mL+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function wae(e){return e*lm}function Sae(e){return e*tg}function UA(e){return(e&e-1)===0&&e!==0}function _U(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function h1(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function _ae(e,t,r,i,n){let s=Math.cos,a=Math.sin,o=s(r/2),l=a(r/2),c=s((t+i)/2),h=a((t+i)/2),u=s((t-i)/2),d=a((t-i)/2),p=s((i-t)/2),f=a((i-t)/2);switch(n){case"XYX":e.set(o*h,l*u,l*d,o*c);break;case"YZY":e.set(l*d,o*h,l*u,o*c);break;case"ZXZ":e.set(l*u,l*d,o*h,o*c);break;case"XZX":e.set(o*h,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*h,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*h,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function ko(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function rr(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var vt=Object.freeze({__proto__:null,DEG2RAD:lm,RAD2DEG:tg,ceilPowerOfTwo:_U,clamp:Qr,damp:pae,degToRad:wae,denormalize:ko,euclideanModulo:NC,floorPowerOfTwo:h1,generateUUID:Ps,inverseLerp:dae,isPowerOfTwo:UA,lerp:cm,mapLinear:hae,normalize:rr,pingpong:fae,radToDeg:Sae,randFloat:yae,randFloatSpread:xae,randInt:vae,seededRandom:bae,setQuaternionFromProperEuler:_ae,smootherstep:gae,smoothstep:mae}),$=class{constructor(e=0,t=0){$.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*r-s*i+e.x,this.y=n*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},pi=class{constructor(){pi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,n,s,a,o,l){let c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=n,c[5]=o,c[6]=r,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],c=r[4],h=r[7],u=r[2],d=r[5],p=r[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],S=i[5],w=i[8];return n[0]=s*f+a*v+o*b,n[3]=s*m+a*y+o*S,n[6]=s*g+a*x+o*w,n[1]=l*f+c*v+h*b,n[4]=l*m+c*y+h*S,n[7]=l*g+c*x+h*w,n[2]=u*f+d*v+p*b,n[5]=u*m+d*y+p*S,n[8]=u*g+d*x+p*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-r*n*c+r*a*o+i*n*l-i*s*o}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=c*s-a*l,u=a*o-c*n,d=l*n-s*o,p=t*h+r*u+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=h*f,e[1]=(i*l-c*r)*f,e[2]=(a*r-i*s)*f,e[3]=u*f,e[4]=(c*t-i*o)*f,e[5]=(i*n-a*t)*f,e[6]=d*f,e[7]=(r*o-l*t)*f,e[8]=(s*t-r*n)*f,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,s,a){let o=Math.cos(n),l=Math.sin(n);return this.set(r*o,r*l,-r*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Pw.makeScale(e,t)),this}rotate(e){return this.premultiply(Pw.makeRotation(-e)),this}translate(e,t){return this.premultiply(Pw.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Pw=new pi;function AU(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var Aae={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Dv(e,t){return new Aae[e](t)}function d1(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function vu(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function hy(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var Dw={[Ta]:{[u1]:vu},[u1]:{[Ta]:hy}},Hi={legacyMode:!0,get workingColorSpace(){return u1},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(Dw[t]&&Dw[t][r]!==void 0){let i=Dw[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},MU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wr={r:0,g:0,b:0},Us={h:0,s:0,l:0},Ov={h:0,s:0,l:0};function Ow(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function Lv(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var et=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ta){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Hi.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Hi.workingColorSpace){return this.r=e,this.g=t,this.b=r,Hi.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Hi.workingColorSpace){if(e=NC(e,1),t=Qr(t,0,1),r=Qr(r,0,1),t===0)this.r=this.g=this.b=r;else{let n=r<=.5?r*(1+t):r+t-r*t,s=2*r-n;this.r=Ow(s,n,e+1/3),this.g=Ow(s,n,e),this.b=Ow(s,n,e-1/3)}return Hi.toWorkingColorSpace(this,i),this}setStyle(e,t=Ta){function r(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,Hi.toWorkingColorSpace(this,t),r(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,Hi.toWorkingColorSpace(this,t),r(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let o=parseFloat(n[1])/360,l=parseFloat(n[2])/100,c=parseFloat(n[3])/100;return r(n[4]),this.setHSL(o,l,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=i[1],s=n.length;if(s===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,Hi.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,Hi.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ta){let r=MU[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=vu(e.r),this.g=vu(e.g),this.b=vu(e.b),this}copyLinearToSRGB(e){return this.r=hy(e.r),this.g=hy(e.g),this.b=hy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ta){return Hi.fromWorkingColorSpace(Lv(this,Wr),e),Qr(Wr.r*255,0,255)<<16^Qr(Wr.g*255,0,255)<<8^Qr(Wr.b*255,0,255)<<0}getHexString(e=Ta){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Hi.workingColorSpace){Hi.fromWorkingColorSpace(Lv(this,Wr),t);let r=Wr.r,i=Wr.g,n=Wr.b,s=Math.max(r,i,n),a=Math.min(r,i,n),o,l,c=(a+s)/2;if(a===s)o=0,l=0;else{let h=s-a;switch(l=c<=.5?h/(s+a):h/(2-s-a),s){case r:o=(i-n)/h+(i<n?6:0);break;case i:o=(n-r)/h+2;break;case n:o=(r-i)/h+4;break}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=Hi.workingColorSpace){return Hi.fromWorkingColorSpace(Lv(this,Wr),t),e.r=Wr.r,e.g=Wr.g,e.b=Wr.b,e}getStyle(e=Ta){return Hi.fromWorkingColorSpace(Lv(this,Wr),e),e!==Ta?`color(${e} ${Wr.r} ${Wr.g} ${Wr.b})`:`rgb(${Wr.r*255|0},${Wr.g*255|0},${Wr.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Us),Us.h+=e,Us.s+=t,Us.l+=r,this.setHSL(Us.h,Us.s,Us.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Us),e.getHSL(Ov);let r=cm(Us.h,Ov.h,t),i=cm(Us.s,Ov.s,t),n=cm(Us.l,Ov.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};et.NAMES=MU;var th,EU=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{th===void 0&&(th=d1("canvas")),th.width=e.width,th.height=e.height;let r=th.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=th}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=d1("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let s=0;s<n.length;s++)n[s]=vu(n[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(vu(t[r]/255)*255):t[r]=vu(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},CU=class{constructor(e=null){this.isSource=!0,this.uuid=Ps(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let n;if(Array.isArray(i)){n=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?n.push(Lw(i[s].image)):n.push(Lw(i[s]))}else n=Lw(i);r.url=n}return t||(e.images[this.uuid]=r),r}};function Lw(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?EU.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Mae=0,Jr=class extends Ti{constructor(e=Jr.DEFAULT_IMAGE,t=Jr.DEFAULT_MAPPING,r=Lr,i=Lr,n=xt,s=Yd,a=_s,o=Vi,l=Jr.DEFAULT_ANISOTROPY,c=Qa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Mae++}),this.uuid=Ps(),this.name="",this.source=new CU(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new $(0,0),this.repeat=new $(1,1),this.center=new $(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vU)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Bo:e.x=e.x-Math.floor(e.x);break;case Lr:e.x=e.x<0?0:1;break;case zA:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Bo:e.y=e.y-Math.floor(e.y);break;case Lr:e.y=e.y<0?0:1;break;case zA:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Jr.DEFAULT_IMAGE=null;Jr.DEFAULT_MAPPING=vU;Jr.DEFAULT_ANISOTROPY=1;var pt=class{constructor(e=0,t=0,r=0,i=1){pt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*n,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*n,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*n,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,s=e.elements,a=s[0],o=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(o-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(a+h+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(a+1)/2,v=(h+1)/2,y=(f+1)/2,x=(o+c)/4,b=(l+d)/4,S=(u+p)/4;return g>v&&g>y?g<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=x/r,n=b/r):v>y?v<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(v),r=x/i,n=S/i):y<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(y),r=b/n,i=S/n),this.set(r,i,n,t),this}let m=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(c-o)*(c-o));return Math.abs(m)<.001&&(m=1),this.x=(p-u)/m,this.y=(l-d)/m,this.z=(c-o)/m,this.w=Math.acos((a+h+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},$t=class extends Ti{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new pt(0,0,e,t),this.scissorTest=!1,this.viewport=new pt(0,0,e,t);let i={width:e,height:t,depth:1};this.texture=new Jr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:xt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new CU(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},TU=class extends Jr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ir,this.minFilter=ir,this.wrapR=Lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Eae=class extends Jr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ir,this.minFilter=ir,this.wrapR=Lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Cae=class extends $t{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;let n=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=n.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.texture.length;i<n;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},mt=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,n,s,a){let o=r[i+0],l=r[i+1],c=r[i+2],h=r[i+3],u=n[s+0],d=n[s+1],p=n[s+2],f=n[s+3];if(a===0){e[t+0]=o,e[t+1]=l,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=u,e[t+1]=d,e[t+2]=p,e[t+3]=f;return}if(h!==f||o!==u||l!==d||c!==p){let m=1-a,g=o*u+l*d+c*p+h*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let b=Math.sqrt(y),S=Math.atan2(b,g*v);m=Math.sin(m*S)/b,a=Math.sin(a*S)/b}let x=a*v;if(o=o*m+u*x,l=l*m+d*x,c=c*m+p*x,h=h*m+f*x,m===1-a){let b=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=b,l*=b,c*=b,h*=b}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,n,s){let a=r[i],o=r[i+1],l=r[i+2],c=r[i+3],h=n[s],u=n[s+1],d=n[s+2],p=n[s+3];return e[t]=a*p+c*h+o*d-l*u,e[t+1]=o*p+c*u+l*h-a*d,e[t+2]=l*p+c*d+a*u-o*h,e[t+3]=c*p-a*h-o*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,i=e._y,n=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(r/2),c=a(i/2),h=a(n/2),u=o(r/2),d=o(i/2),p=o(n/2);switch(s){case"XYZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"YXZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"ZXY":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"ZYX":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"YZX":this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p;break;case"XZY":this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],h=t[10],u=r+a+h;if(u>0){let d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(c-o)*d,this._y=(n-l)*d,this._z=(s-i)*d}else if(r>a&&r>h){let d=2*Math.sqrt(1+r-a-h);this._w=(c-o)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(n+l)/d}else if(a>h){let d=2*Math.sqrt(1+a-r-h);this._w=(n-l)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(o+c)/d}else{let d=2*Math.sqrt(1+h-r-a);this._w=(s-i)/d,this._x=(n+l)/d,this._y=(o+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qr(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=r*c+s*a+i*l-n*o,this._y=i*c+s*o+n*a-r*l,this._z=n*c+s*l+r*o-i*a,this._w=s*c-r*a-i*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,s=this._w,a=s*e._w+r*e._x+i*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=n,this;let o=1-a*a;if(o<=Number.EPSILON){let d=1-t;return this._w=d*s+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=s*h+this._w*u,this._x=r*h+this._x*u,this._y=i*h+this._y*u,this._z=n*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(n),r*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},C=class{constructor(e=0,t=0,r=0){C.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(gL.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(gL.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,s=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*s,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*s,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*s,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*r,c=o*r+a*t-n*i,h=o*i+n*r-s*t,u=-n*t-s*r-a*i;return this.x=l*o+u*-n+c*-a-h*-s,this.y=c*o+u*-s+h*-n-l*-a,this.z=h*o+u*-a+l*-s-c*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-n*a,this.y=n*s-r*o,this.z=r*a-i*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Iw.copy(this).projectOnVector(e),this.sub(Iw)}reflect(e){return this.sub(Iw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Qr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Iw=new C,gL=new mt,Br=class{constructor(e=new C(1/0,1/0,1/0),t=new C(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){let c=e[o],h=e[o+1],u=e[o+2];c<t&&(t=c),h<r&&(r=h),u<i&&(i=u),c>n&&(n=c),h>s&&(s=h),u>a&&(a=u)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){let c=e.getX(o),h=e.getY(o),u=e.getZ(o);c<t&&(t=c),h<r&&(r=h),u<i&&(i=u),c>n&&(n=c),h>s&&(s=h),u>a&&(a=u)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Oc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let n=r.attributes.position;for(let s=0,a=n.count;s<a;s++)Oc.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Oc)}else r.boundingBox===null&&r.computeBoundingBox(),Rw.copy(r.boundingBox),Rw.applyMatrix4(e.matrixWorld),this.union(Rw);let i=e.children;for(let n=0,s=i.length;n<s;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Oc),Oc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yp),Iv.subVectors(this.max,Yp),rh.subVectors(e.a,Yp),ih.subVectors(e.b,Yp),nh.subVectors(e.c,Yp),sl.subVectors(ih,rh),al.subVectors(nh,ih),Lc.subVectors(rh,nh);let t=[0,-sl.z,sl.y,0,-al.z,al.y,0,-Lc.z,Lc.y,sl.z,0,-sl.x,al.z,0,-al.x,Lc.z,0,-Lc.x,-sl.y,sl.x,0,-al.y,al.x,0,-Lc.y,Lc.x,0];return!Bw(t,rh,ih,nh,Iv)||(t=[1,0,0,0,1,0,0,0,1],!Bw(t,rh,ih,nh,Iv))?!1:(Rv.crossVectors(sl,al),t=[Rv.x,Rv.y,Rv.z],Bw(t,rh,ih,nh,Iv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Oc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Oc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},oo=[new C,new C,new C,new C,new C,new C,new C,new C],Oc=new C,Rw=new Br,rh=new C,ih=new C,nh=new C,sl=new C,al=new C,Lc=new C,Yp=new C,Iv=new C,Rv=new C,Ic=new C;function Bw(e,t,r,i,n){for(let s=0,a=e.length-3;s<=a;s+=3){Ic.fromArray(e,s);let o=n.x*Math.abs(Ic.x)+n.y*Math.abs(Ic.y)+n.z*Math.abs(Ic.z),l=t.dot(Ic),c=r.dot(Ic),h=i.dot(Ic);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>o)return!1}return!0}var Tae=new Br,Qp=new C,kw=new C,ns=class{constructor(e=new C,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):Tae.setFromPoints(e).getCenter(r);let i=0;for(let n=0,s=e.length;n<s;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qp.subVectors(e,this.center);let t=Qp.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Qp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(kw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qp.copy(e.center).add(kw)),this.expandByPoint(Qp.copy(e.center).sub(kw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},lo=new C,zw=new C,Bv=new C,ol=new C,Nw=new C,kv=new C,Fw=new C,yp=class{constructor(e=new C,t=new C(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=lo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(lo.copy(this.direction).multiplyScalar(t).add(this.origin),lo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){zw.copy(e).add(t).multiplyScalar(.5),Bv.copy(t).sub(e).normalize(),ol.copy(this.origin).sub(zw);let n=e.distanceTo(t)*.5,s=-this.direction.dot(Bv),a=ol.dot(this.direction),o=-ol.dot(Bv),l=ol.lengthSq(),c=Math.abs(1-s*s),h,u,d,p;if(c>0)if(h=s*o-a,u=s*a-o,p=n*c,h>=0)if(u>=-p)if(u<=p){let f=1/c;h*=f,u*=f,d=h*(h+s*u+2*a)+u*(s*h+u+2*o)+l}else u=n,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u=-n,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;else u<=-p?(h=Math.max(0,-(-s*n+a)),u=h>0?-n:Math.min(Math.max(-n,-o),n),d=-h*h+u*(u+2*o)+l):u<=p?(h=0,u=Math.min(Math.max(-n,-o),n),d=u*(u+2*o)+l):(h=Math.max(0,-(s*n+a)),u=h>0?n:Math.min(Math.max(-n,-o),n),d=-h*h+u*(u+2*o)+l);else u=s>0?-n:n,h=Math.max(0,-(s*u+a)),d=-h*h+u*(u+2*o)+l;return r&&r.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(Bv).multiplyScalar(u).add(zw),d}intersectSphere(e,t){lo.subVectors(e.center,this.origin);let r=lo.dot(this.direction),i=lo.dot(lo)-r*r,n=e.radius*e.radius;if(i>n)return null;let s=Math.sqrt(n-i),a=r-s,o=r+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,s,a,o,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(r=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(r=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),c>=0?(n=(e.min.y-u.y)*c,s=(e.max.y-u.y)*c):(n=(e.max.y-u.y)*c,s=(e.min.y-u.y)*c),r>s||n>i||((n>r||isNaN(r))&&(r=n),(s<i||isNaN(i))&&(i=s),h>=0?(a=(e.min.z-u.z)*h,o=(e.max.z-u.z)*h):(a=(e.max.z-u.z)*h,o=(e.min.z-u.z)*h),r>o||a>i)||((a>r||r!==r)&&(r=a),(o<i||i!==i)&&(i=o),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,lo)!==null}intersectTriangle(e,t,r,i,n){Nw.subVectors(t,e),kv.subVectors(r,e),Fw.crossVectors(Nw,kv);let s=this.direction.dot(Fw),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;ol.subVectors(this.origin,e);let o=a*this.direction.dot(kv.crossVectors(ol,kv));if(o<0)return null;let l=a*this.direction.dot(Nw.cross(ol));if(l<0||o+l>s)return null;let c=-a*ol.dot(Fw);return c<0?null:this.at(c/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},we=class{constructor(){we.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,n,s,a,o,l,c,h,u,d,p,f,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=n,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new we().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/sh.setFromMatrixColumn(e,0).length(),n=1/sh.setFromMatrixColumn(e,1).length(),s=1/sh.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,n=e.z,s=Math.cos(r),a=Math.sin(r),o=Math.cos(i),l=Math.sin(i),c=Math.cos(n),h=Math.sin(n);if(e.order==="XYZ"){let u=s*c,d=s*h,p=a*c,f=a*h;t[0]=o*c,t[4]=-o*h,t[8]=l,t[1]=d+p*l,t[5]=u-f*l,t[9]=-a*o,t[2]=f-u*l,t[6]=p+d*l,t[10]=s*o}else if(e.order==="YXZ"){let u=o*c,d=o*h,p=l*c,f=l*h;t[0]=u+f*a,t[4]=p*a-d,t[8]=s*l,t[1]=s*h,t[5]=s*c,t[9]=-a,t[2]=d*a-p,t[6]=f+u*a,t[10]=s*o}else if(e.order==="ZXY"){let u=o*c,d=o*h,p=l*c,f=l*h;t[0]=u-f*a,t[4]=-s*h,t[8]=p+d*a,t[1]=d+p*a,t[5]=s*c,t[9]=f-u*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if(e.order==="ZYX"){let u=s*c,d=s*h,p=a*c,f=a*h;t[0]=o*c,t[4]=p*l-d,t[8]=u*l+f,t[1]=o*h,t[5]=f*l+u,t[9]=d*l-p,t[2]=-l,t[6]=a*o,t[10]=s*o}else if(e.order==="YZX"){let u=s*o,d=s*l,p=a*o,f=a*l;t[0]=o*c,t[4]=f-u*h,t[8]=p*h+d,t[1]=h,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=d*h+p,t[10]=u-f*h}else if(e.order==="XZY"){let u=s*o,d=s*l,p=a*o,f=a*l;t[0]=o*c,t[4]=-h,t[8]=l*c,t[1]=u*h+f,t[5]=s*c,t[9]=d*h-p,t[2]=p*h-d,t[6]=a*c,t[10]=f*h+u}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Pae,e,Dae)}lookAt(e,t,r){let i=this.elements;return jn.subVectors(e,t),jn.lengthSq()===0&&(jn.z=1),jn.normalize(),ll.crossVectors(r,jn),ll.lengthSq()===0&&(Math.abs(r.z)===1?jn.x+=1e-4:jn.z+=1e-4,jn.normalize(),ll.crossVectors(r,jn)),ll.normalize(),zv.crossVectors(jn,ll),i[0]=ll.x,i[4]=zv.x,i[8]=jn.x,i[1]=ll.y,i[5]=zv.y,i[9]=jn.y,i[2]=ll.z,i[6]=zv.z,i[10]=jn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[4],o=r[8],l=r[12],c=r[1],h=r[5],u=r[9],d=r[13],p=r[2],f=r[6],m=r[10],g=r[14],v=r[3],y=r[7],x=r[11],b=r[15],S=i[0],w=i[4],A=i[8],_=i[12],M=i[1],E=i[5],T=i[9],P=i[13],D=i[2],L=i[6],R=i[10],V=i[14],F=i[3],O=i[7],k=i[11],z=i[15];return n[0]=s*S+a*M+o*D+l*F,n[4]=s*w+a*E+o*L+l*O,n[8]=s*A+a*T+o*R+l*k,n[12]=s*_+a*P+o*V+l*z,n[1]=c*S+h*M+u*D+d*F,n[5]=c*w+h*E+u*L+d*O,n[9]=c*A+h*T+u*R+d*k,n[13]=c*_+h*P+u*V+d*z,n[2]=p*S+f*M+m*D+g*F,n[6]=p*w+f*E+m*L+g*O,n[10]=p*A+f*T+m*R+g*k,n[14]=p*_+f*P+m*V+g*z,n[3]=v*S+y*M+x*D+b*F,n[7]=v*w+y*E+x*L+b*O,n[11]=v*A+y*T+x*R+b*k,n[15]=v*_+y*P+x*V+b*z,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14],p=e[3],f=e[7],m=e[11],g=e[15];return p*(+n*o*h-i*l*h-n*a*u+r*l*u+i*a*d-r*o*d)+f*(+t*o*d-t*l*u+n*s*u-i*s*d+i*l*c-n*o*c)+m*(+t*l*h-t*a*d-n*s*h+r*s*d+n*a*c-r*l*c)+g*(-i*a*c-t*o*h+t*a*u+i*s*h-r*s*u+r*o*c)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=h*m*l-f*u*l+f*o*d-a*m*d-h*o*g+a*u*g,y=p*u*l-c*m*l-p*o*d+s*m*d+c*o*g-s*u*g,x=c*f*l-p*h*l+p*a*d-s*f*d-c*a*g+s*h*g,b=p*h*o-c*f*o-p*a*u+s*f*u+c*a*m-s*h*m,S=t*v+r*y+i*x+n*b;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/S;return e[0]=v*w,e[1]=(f*u*n-h*m*n-f*i*d+r*m*d+h*i*g-r*u*g)*w,e[2]=(a*m*n-f*o*n+f*i*l-r*m*l-a*i*g+r*o*g)*w,e[3]=(h*o*n-a*u*n-h*i*l+r*u*l+a*i*d-r*o*d)*w,e[4]=y*w,e[5]=(c*m*n-p*u*n+p*i*d-t*m*d-c*i*g+t*u*g)*w,e[6]=(p*o*n-s*m*n-p*i*l+t*m*l+s*i*g-t*o*g)*w,e[7]=(s*u*n-c*o*n+c*i*l-t*u*l-s*i*d+t*o*d)*w,e[8]=x*w,e[9]=(p*h*n-c*f*n-p*r*d+t*f*d+c*r*g-t*h*g)*w,e[10]=(s*f*n-p*a*n+p*r*l-t*f*l-s*r*g+t*a*g)*w,e[11]=(c*a*n-s*h*n-c*r*l+t*h*l+s*r*d-t*a*d)*w,e[12]=b*w,e[13]=(c*f*i-p*h*i+p*r*u-t*f*u-c*r*m+t*h*m)*w,e[14]=(p*a*i-s*f*i-p*r*o+t*f*o+s*r*m-t*a*m)*w,e[15]=(s*h*i-c*a*i+c*r*o-t*h*o-s*r*u+t*a*u)*w,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,s=e.x,a=e.y,o=e.z,l=n*s,c=n*a;return this.set(l*s+r,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+r,c*o-i*s,0,l*o-i*a,c*o+i*s,n*o*o+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,s){return this.set(1,r,n,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,s=t._y,a=t._z,o=t._w,l=n+n,c=s+s,h=a+a,u=n*l,d=n*c,p=n*h,f=s*c,m=s*h,g=a*h,v=o*l,y=o*c,x=o*h,b=r.x,S=r.y,w=r.z;return i[0]=(1-(f+g))*b,i[1]=(d+x)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-x)*S,i[5]=(1-(u+g))*S,i[6]=(m+v)*S,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(u+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=sh.set(i[0],i[1],i[2]).length(),s=sh.set(i[4],i[5],i[6]).length(),a=sh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],js.copy(this);let o=1/n,l=1/s,c=1/a;return js.elements[0]*=o,js.elements[1]*=o,js.elements[2]*=o,js.elements[4]*=l,js.elements[5]*=l,js.elements[6]*=l,js.elements[8]*=c,js.elements[9]*=c,js.elements[10]*=c,t.setFromRotationMatrix(js),r.x=n,r.y=s,r.z=a,this}makePerspective(e,t,r,i,n,s){let a=this.elements,o=2*n/(t-e),l=2*n/(r-i),c=(t+e)/(t-e),h=(r+i)/(r-i),u=-(s+n)/(s-n),d=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,n,s){let a=this.elements,o=1/(t-e),l=1/(r-i),c=1/(s-n),h=(t+e)*o,u=(r+i)*l,d=(s+n)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},sh=new C,js=new we,Pae=new C(0,0,0),Dae=new C(1,1,1),ll=new C,zv=new C,jn=new C,vL=new we,yL=new mt,hi=class{constructor(e=0,t=0,r=0,i=hi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],h=i[2],u=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Qr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Qr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,n),this._z=0);break;case"ZXY":this._x=Math.asin(Qr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Qr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Qr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Qr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return vL.makeRotationFromQuaternion(e),this.setFromRotationMatrix(vL,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return yL.setFromEuler(this),this.setFromQuaternion(yL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};hi.DEFAULT_ORDER="XYZ";var FC=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Oae=0,xL=new C,ah=new mt,co=new we,Nv=new C,Kp=new C,Lae=new C,Iae=new mt,bL=new C(1,0,0),wL=new C(0,1,0),SL=new C(0,0,1),Rae={type:"added"},_L={type:"removed"},Yt=class extends Ti{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Oae++}),this.uuid=Ps(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yt.DEFAULT_UP.clone();let e=new C,t=new hi,r=new mt,i=new C(1,1,1);function n(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new we},normalMatrix:{value:new pi}}),this.matrix=new we,this.matrixWorld=new we,this.matrixAutoUpdate=Yt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Yt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new FC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ah.setFromAxisAngle(e,t),this.quaternion.multiply(ah),this}rotateOnWorldAxis(e,t){return ah.setFromAxisAngle(e,t),this.quaternion.premultiply(ah),this}rotateX(e){return this.rotateOnAxis(bL,e)}rotateY(e){return this.rotateOnAxis(wL,e)}rotateZ(e){return this.rotateOnAxis(SL,e)}translateOnAxis(e,t){return xL.copy(e).applyQuaternion(this.quaternion),this.position.add(xL.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bL,e)}translateY(e){return this.translateOnAxis(wL,e)}translateZ(e){return this.translateOnAxis(SL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(co.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Nv.copy(e):Nv.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),Kp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?co.lookAt(Kp,Nv,this.up):co.lookAt(Nv,Kp,this.up),this.quaternion.setFromRotationMatrix(co),i&&(co.extractRotation(i.matrixWorld),ah.setFromRotationMatrix(co),this.quaternion.premultiply(ah.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Rae)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_L)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(_L)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),co.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),co.multiply(e.parent.matrixWorld)),e.applyMatrix4(co),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,n=this.children.length;i<n;i++){let s=this.children[i].getObjectsByProperty(e,t);s.length>0&&(r=r.concat(s))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kp,e,Lae),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kp,Iae,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++){let n=t[r];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,s=i.length;n<s;n++){let a=i[n];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(a,o){return a[o.uuid]===void 0&&(a[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let o=a.shapes;if(Array.isArray(o))for(let l=0,c=o.length;l<c;l++){let h=o[l];n(e.shapes,h)}else n(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let o=0,l=this.material.length;o<l;o++)a.push(n(e.materials,this.material[o]));i.material=a}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){let o=this.animations[a];i.animations.push(n(e.animations,o))}}if(t){let a=s(e.geometries),o=s(e.materials),l=s(e.textures),c=s(e.images),h=s(e.shapes),u=s(e.skeletons),d=s(e.animations),p=s(e.nodes);a.length>0&&(r.geometries=a),o.length>0&&(r.materials=o),l.length>0&&(r.textures=l),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),u.length>0&&(r.skeletons=u),d.length>0&&(r.animations=d),p.length>0&&(r.nodes=p)}return r.object=i,r;function s(a){let o=[];for(let l in a){let c=a[l];delete c.metadata,o.push(c)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};Yt.DEFAULT_UP=new C(0,1,0);Yt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Yt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Vs=new C,uo=new C,Uw=new C,ho=new C,oh=new C,lh=new C,AL=new C,jw=new C,Vw=new C,Gw=new C,zi=class{constructor(e=new C,t=new C,r=new C){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Vs.subVectors(e,t),i.cross(Vs);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){Vs.subVectors(i,t),uo.subVectors(r,t),Uw.subVectors(e,t);let s=Vs.dot(Vs),a=Vs.dot(uo),o=Vs.dot(Uw),l=uo.dot(uo),c=uo.dot(Uw),h=s*l-a*a;if(h===0)return n.set(-2,-1,-1);let u=1/h,d=(l*o-a*c)*u,p=(s*c-a*o)*u;return n.set(1-d-p,p,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ho),ho.x>=0&&ho.y>=0&&ho.x+ho.y<=1}static getUV(e,t,r,i,n,s,a,o){return this.getBarycoord(e,t,r,i,ho),o.set(0,0),o.addScaledVector(n,ho.x),o.addScaledVector(s,ho.y),o.addScaledVector(a,ho.z),o}static isFrontFacing(e,t,r,i){return Vs.subVectors(r,t),uo.subVectors(e,t),Vs.cross(uo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Vs.subVectors(this.c,this.b),uo.subVectors(this.a,this.b),Vs.cross(uo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return zi.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return zi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,s,a;oh.subVectors(i,r),lh.subVectors(n,r),jw.subVectors(e,r);let o=oh.dot(jw),l=lh.dot(jw);if(o<=0&&l<=0)return t.copy(r);Vw.subVectors(e,i);let c=oh.dot(Vw),h=lh.dot(Vw);if(c>=0&&h<=c)return t.copy(i);let u=o*h-c*l;if(u<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(r).addScaledVector(oh,s);Gw.subVectors(e,n);let d=oh.dot(Gw),p=lh.dot(Gw);if(p>=0&&d<=p)return t.copy(n);let f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(r).addScaledVector(lh,a);let m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return AL.subVectors(n,i),a=(h-c)/(h-c+(d-p)),t.copy(i).addScaledVector(AL,a);let g=1/(m+f+u);return s=f*g,a=u*g,t.copy(r).addScaledVector(oh,s).addScaledVector(lh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Bae=0,Gg=class extends Ti{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Bae++}),this.uuid=Ps(),this.name="",this.type="Material",this.blending=yd,this.side=oa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=fU,this.blendDst=mU,this.blendEquation=Rh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=RA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=uae,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Tw,this.stencilZFail=Tw,this.stencilZPass=Tw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==yd&&(r.blending=this.blending),this.side!==oa&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(n){let s=[];for(let a in n){let o=n[a];delete o.metadata,s.push(o)}return s}if(t){let n=i(e.textures),s=i(e.images);n.length>0&&(r.textures=n),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Hg=class extends Gg{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gU,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},zr=new C,Fv=new $,st=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=NA,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Fv.fromBufferAttribute(this,t),Fv.applyMatrix3(e),this.setXY(t,Fv.x,Fv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)zr.fromBufferAttribute(this,t),zr.applyMatrix3(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)zr.fromBufferAttribute(this,t),zr.applyMatrix4(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)zr.fromBufferAttribute(this,t),zr.applyNormalMatrix(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)zr.fromBufferAttribute(this,t),zr.transformDirection(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ko(t,this.array)),t}setX(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ko(t,this.array)),t}setY(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ko(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ko(t,this.array)),t}setW(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),i=rr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),i=rr(i,this.array),n=rr(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==NA&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},PU=class extends st{constructor(e,t,r){super(new Uint16Array(e),t,r)}},xd=class extends st{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Ve=class extends st{constructor(e,t,r){super(new Float32Array(e),t,r)}},kae=0,hs=new we,Hw=new Yt,ch=new C,Vn=new Br,Zp=new Br,si=new C,nt=class extends Ti{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kae++}),this.uuid=Ps(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(AU(e)?xd:PU)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new pi().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hs.makeRotationFromQuaternion(e),this.applyMatrix4(hs),this}rotateX(e){return hs.makeRotationX(e),this.applyMatrix4(hs),this}rotateY(e){return hs.makeRotationY(e),this.applyMatrix4(hs),this}rotateZ(e){return hs.makeRotationZ(e),this.applyMatrix4(hs),this}translate(e,t,r){return hs.makeTranslation(e,t,r),this.applyMatrix4(hs),this}scale(e,t,r){return hs.makeScale(e,t,r),this.applyMatrix4(hs),this}lookAt(e){return Hw.lookAt(e),Hw.updateMatrix(),this.applyMatrix4(Hw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ch).negate(),this.translate(ch.x,ch.y,ch.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Ve(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Vn.setFromBufferAttribute(n),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,Vn.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,Vn.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint(Vn.min),this.boundingBox.expandByPoint(Vn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ns);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new C,1/0);return}if(e){let r=this.boundingSphere.center;if(Vn.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let a=t[n];Zp.setFromBufferAttribute(a),this.morphTargetsRelative?(si.addVectors(Vn.min,Zp.min),Vn.expandByPoint(si),si.addVectors(Vn.max,Zp.max),Vn.expandByPoint(si)):(Vn.expandByPoint(Zp.min),Vn.expandByPoint(Zp.max))}Vn.getCenter(r);let i=0;for(let n=0,s=e.count;n<s;n++)si.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(si));if(t)for(let n=0,s=t.length;n<s;n++){let a=t[n],o=this.morphTargetsRelative;for(let l=0,c=a.count;l<c;l++)si.fromBufferAttribute(a,l),o&&(ch.fromBufferAttribute(e,l),si.add(ch)),i=Math.max(i,r.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,s=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new st(new Float32Array(4*a),4));let o=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<a;M++)l[M]=new C,c[M]=new C;let h=new C,u=new C,d=new C,p=new $,f=new $,m=new $,g=new C,v=new C;function y(M,E,T){h.fromArray(i,M*3),u.fromArray(i,E*3),d.fromArray(i,T*3),p.fromArray(s,M*2),f.fromArray(s,E*2),m.fromArray(s,T*2),u.sub(h),d.sub(h),f.sub(p),m.sub(p);let P=1/(f.x*m.y-m.x*f.y);!isFinite(P)||(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(P),v.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(P),l[M].add(g),l[E].add(g),l[T].add(g),c[M].add(v),c[E].add(v),c[T].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let M=0,E=x.length;M<E;++M){let T=x[M],P=T.start,D=T.count;for(let L=P,R=P+D;L<R;L+=3)y(r[L+0],r[L+1],r[L+2])}let b=new C,S=new C,w=new C,A=new C;function _(M){w.fromArray(n,M*3),A.copy(w);let E=l[M];b.copy(E),b.sub(w.multiplyScalar(w.dot(E))).normalize(),S.crossVectors(A,E);let T=S.dot(c[M])<0?-1:1;o[M*4]=b.x,o[M*4+1]=b.y,o[M*4+2]=b.z,o[M*4+3]=T}for(let M=0,E=x.length;M<E;++M){let T=x[M],P=T.start,D=T.count;for(let L=P,R=P+D;L<R;L+=3)_(r[L+0]),_(r[L+1]),_(r[L+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new st(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let u=0,d=r.count;u<d;u++)r.setXYZ(u,0,0,0);let i=new C,n=new C,s=new C,a=new C,o=new C,l=new C,c=new C,h=new C;if(e)for(let u=0,d=e.count;u<d;u+=3){let p=e.getX(u+0),f=e.getX(u+1),m=e.getX(u+2);i.fromBufferAttribute(t,p),n.fromBufferAttribute(t,f),s.fromBufferAttribute(t,m),c.subVectors(s,n),h.subVectors(i,n),c.cross(h),a.fromBufferAttribute(r,p),o.fromBufferAttribute(r,f),l.fromBufferAttribute(r,m),a.add(c),o.add(c),l.add(c),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(f,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let u=0,d=t.count;u<d;u+=3)i.fromBufferAttribute(t,u+0),n.fromBufferAttribute(t,u+1),s.fromBufferAttribute(t,u+2),c.subVectors(s,n),h.subVectors(i,n),c.cross(h),r.setXYZ(u+0,c.x,c.y,c.z),r.setXYZ(u+1,c.x,c.y,c.z),r.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)si.fromBufferAttribute(e,t),si.normalize(),e.setXYZ(t,si.x,si.y,si.z)}toNonIndexed(){function e(a,o){let l=a.array,c=a.itemSize,h=a.normalized,u=new l.constructor(o.length*c),d=0,p=0;for(let f=0,m=o.length;f<m;f++){a.isInterleavedBufferAttribute?d=o[f]*a.data.stride+a.offset:d=o[f]*c;for(let g=0;g<c;g++)u[p++]=l[d++]}return new st(u,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new nt,r=this.index.array,i=this.attributes;for(let a in i){let o=i[a],l=e(o,r);t.setAttribute(a,l)}let n=this.morphAttributes;for(let a in n){let o=[],l=n[a];for(let c=0,h=l.length;c<h;c++){let u=l[c],d=e(u,r);o.push(d)}t.morphAttributes[a]=o}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,o=s.length;a<o;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let o in r){let l=r[o];e.data.attributes[o]=l.toJSON(e.data)}let i={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],c=[];for(let h=0,u=l.length;h<u;h++){let d=l[h];c.push(d.toJSON(e.data))}c.length>0&&(i[o]=c,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let c=i[l];this.setAttribute(l,c.clone(t))}let n=e.morphAttributes;for(let l in n){let c=[],h=n[l];for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,c=s.length;l<c;l++){let h=s[l];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},ML=new we,uh=new yp,Ww=new ns,Jp=new C,ef=new C,tf=new C,qw=new C,Uv=new C,jv=new $,Vv=new $,Gv=new $,$w=new C,Hv=new C,Sn=class extends Yt{constructor(e=new nt,t=new Hg){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let a=this.morphTargetInfluences;if(n&&a){Uv.set(0,0,0);for(let o=0,l=n.length;o<l;o++){let c=a[o],h=n[o];c!==0&&(qw.fromBufferAttribute(h,e),s?Uv.addScaledVector(qw,c):Uv.addScaledVector(qw.sub(t),c))}t.add(Uv)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Ww.copy(r.boundingSphere),Ww.applyMatrix4(n),e.ray.intersectsSphere(Ww)===!1)||(ML.copy(n).invert(),uh.copy(e.ray).applyMatrix4(ML),r.boundingBox!==null&&uh.intersectsBox(r.boundingBox)===!1))return;let s,a=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv2,h=r.groups,u=r.drawRange;if(a!==null)if(Array.isArray(i))for(let d=0,p=h.length;d<p;d++){let f=h[d],m=i[f.materialIndex],g=Math.max(f.start,u.start),v=Math.min(a.count,Math.min(f.start+f.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let b=a.getX(y),S=a.getX(y+1),w=a.getX(y+2);s=Wv(this,m,e,uh,l,c,b,S,w),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=f.materialIndex,t.push(s))}}else{let d=Math.max(0,u.start),p=Math.min(a.count,u.start+u.count);for(let f=d,m=p;f<m;f+=3){let g=a.getX(f),v=a.getX(f+1),y=a.getX(f+2);s=Wv(this,i,e,uh,l,c,g,v,y),s&&(s.faceIndex=Math.floor(f/3),t.push(s))}}else if(o!==void 0)if(Array.isArray(i))for(let d=0,p=h.length;d<p;d++){let f=h[d],m=i[f.materialIndex],g=Math.max(f.start,u.start),v=Math.min(o.count,Math.min(f.start+f.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let b=y,S=y+1,w=y+2;s=Wv(this,m,e,uh,l,c,b,S,w),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=f.materialIndex,t.push(s))}}else{let d=Math.max(0,u.start),p=Math.min(o.count,u.start+u.count);for(let f=d,m=p;f<m;f+=3){let g=f,v=f+1,y=f+2;s=Wv(this,i,e,uh,l,c,g,v,y),s&&(s.faceIndex=Math.floor(f/3),t.push(s))}}}};function zae(e,t,r,i,n,s,a,o){let l;if(t.side===di?l=i.intersectTriangle(a,s,n,!0,o):l=i.intersectTriangle(n,s,a,t.side===oa,o),l===null)return null;Hv.copy(o),Hv.applyMatrix4(e.matrixWorld);let c=r.ray.origin.distanceTo(Hv);return c<r.near||c>r.far?null:{distance:c,point:Hv.clone(),object:e}}function Wv(e,t,r,i,n,s,a,o,l){e.getVertexPosition(a,Jp),e.getVertexPosition(o,ef),e.getVertexPosition(l,tf);let c=zae(e,t,r,i,Jp,ef,tf,$w);if(c){n&&(jv.fromBufferAttribute(n,a),Vv.fromBufferAttribute(n,o),Gv.fromBufferAttribute(n,l),c.uv=zi.getUV($w,Jp,ef,tf,jv,Vv,Gv,new $)),s&&(jv.fromBufferAttribute(s,a),Vv.fromBufferAttribute(s,o),Gv.fromBufferAttribute(s,l),c.uv2=zi.getUV($w,Jp,ef,tf,jv,Vv,Gv,new $));let h={a,b:o,c:l,normal:new C,materialIndex:0};zi.getNormal(Jp,ef,tf,h.normal),c.face=h}return c}var Ka=class extends nt{constructor(e=1,t=1,r=1,i=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:s};let a=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s);let o=[],l=[],c=[],h=[],u=0,d=0;p("z","y","x",-1,-1,r,t,e,s,n,0),p("z","y","x",1,-1,r,t,-e,s,n,1),p("x","z","y",1,1,e,r,t,i,s,2),p("x","z","y",1,-1,e,r,-t,i,s,3),p("x","y","z",1,-1,e,t,r,i,n,4),p("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(o),this.setAttribute("position",new Ve(l,3)),this.setAttribute("normal",new Ve(c,3)),this.setAttribute("uv",new Ve(h,2));function p(f,m,g,v,y,x,b,S,w,A,_){let M=x/w,E=b/A,T=x/2,P=b/2,D=S/2,L=w+1,R=A+1,V=0,F=0,O=new C;for(let k=0;k<R;k++){let z=k*E-P;for(let N=0;N<L;N++){let j=N*M-T;O[f]=j*v,O[m]=z*y,O[g]=D,l.push(O.x,O.y,O.z),O[f]=0,O[m]=0,O[g]=S>0?1:-1,c.push(O.x,O.y,O.z),h.push(N/w),h.push(1-k/A),V+=1}}for(let k=0;k<A;k++)for(let z=0;z<w;z++){let N=u+z+L*k,j=u+z+L*(k+1),Y=u+(z+1)+L*(k+1),q=u+(z+1)+L*k;o.push(N,j,q),o.push(j,Y,q),F+=6}a.addGroup(d,F,_),d+=F,u+=V}}static fromJSON(e){return new Ka(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Kd(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function Xi(e){let t={};for(let r=0;r<e.length;r++){let i=Kd(e[r]);for(let n in i)t[n]=i[n]}return t}function Nae(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function DU(e){return e.getRenderTarget()===null&&e.outputEncoding===dt?Ta:u1}var xp={clone:Kd,merge:Xi},Fae=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Uae=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,nr=class extends Gg{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Fae,this.fragmentShader=Uae,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Kd(e.uniforms),this.uniformsGroups=Nae(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},bp=class extends Yt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new we,this.projectionMatrix=new we,this.projectionMatrixInverse=new we}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ki=class extends bp{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=tg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(lm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return tg*2*Math.atan(Math.tan(lm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(lm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let o=s.fullWidth,l=s.fullHeight;n+=s.offsetX*i/o,t-=s.offsetY*r/l,i*=s.width/o,r*=s.height/l}let a=this.filmOffset;a!==0&&(n+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},hh=-90,dh=1,jae=class extends Yt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;let i=new ki(hh,dh,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let n=new ki(hh,dh,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);let s=new ki(hh,dh,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let a=new ki(hh,dh,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let o=new ki(hh,dh,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new ki(hh,dh,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,s,a,o,l]=this.children,c=e.getRenderTarget(),h=e.toneMapping,u=e.xr.enabled;e.toneMapping=jo,e.xr.enabled=!1;let d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,o),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=u,r.texture.needsPMREMUpdate=!0}},UC=class extends Jr{constructor(e,t,r,i,n,s,a,o,l,c){e=e!==void 0?e:[],t=t!==void 0?t:Du,super(e,t,r,i,n,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Vae=class extends $t{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new UC(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:xt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ka(5,5,5),n=new nr({name:"CubemapFromEquirect",uniforms:Kd(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:di,blending:Hr});n.uniforms.tEquirect.value=t;let s=new Sn(i,n),a=t.minFilter;return t.minFilter===Yd&&(t.minFilter=xt),new jae(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(n)}},Xw=new C,Gae=new C,Hae=new pi,$n=class{constructor(e=new C(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=Xw.subVectors(r,t).cross(Gae.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(Xw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||Hae.getNormalMatrix(e),i=this.coplanarPoint(Xw).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},ph=new ns,qv=new C,jC=class{constructor(e=new $n,t=new $n,r=new $n,i=new $n,n=new $n,s=new $n){this.planes=[e,t,r,i,n,s]}set(e,t,r,i,n,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(n),a[5].copy(s),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],l=r[5],c=r[6],h=r[7],u=r[8],d=r[9],p=r[10],f=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(a-i,h-o,f-u,y-m).normalize(),t[1].setComponents(a+i,h+o,f+u,y+m).normalize(),t[2].setComponents(a+n,h+l,f+d,y+g).normalize(),t[3].setComponents(a-n,h-l,f-d,y-g).normalize(),t[4].setComponents(a-s,h-c,f-p,y-v).normalize(),t[5].setComponents(a+s,h+c,f+p,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),ph.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ph)}intersectsSprite(e){return ph.center.set(0,0,0),ph.radius=.7071067811865476,ph.applyMatrix4(e.matrixWorld),this.intersectsSphere(ph)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(qv.x=i.normal.x>0?e.max.x:e.min.x,qv.y=i.normal.y>0?e.max.y:e.min.y,qv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(qv)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function OU(){let e=null,t=!1,r=null,i=null;function n(s,a){r(s,a),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){r=s},setContext:function(s){e=s}}}function Wae(e,t){let r=t.isWebGL2,i=new WeakMap;function n(c,h){let u=c.array,d=c.usage,p=e.createBuffer();e.bindBuffer(h,p),e.bufferData(h,u,d),c.onUploadCallback();let f;if(u instanceof Float32Array)f=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(r)f=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else f=5123;else if(u instanceof Int16Array)f=5122;else if(u instanceof Uint32Array)f=5125;else if(u instanceof Int32Array)f=5124;else if(u instanceof Int8Array)f=5120;else if(u instanceof Uint8Array)f=5121;else if(u instanceof Uint8ClampedArray)f=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:f,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){let d=h.array,p=h.updateRange;e.bindBuffer(u,c),p.count===-1?e.bufferSubData(u,0,d):(r?e.bufferSubData(u,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):e.bufferSubData(u,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1),h.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);let h=i.get(c);h&&(e.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){let d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let u=i.get(c);u===void 0?i.set(c,n(c,h)):u.version<c.version&&(s(u.buffer,c,h),u.version=c.version)}return{get:a,remove:o,update:l}}var $x=class extends nt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,s=t/2,a=Math.floor(r),o=Math.floor(i),l=a+1,c=o+1,h=e/a,u=t/o,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){let v=g*u-s;for(let y=0;y<l;y++){let x=y*h-n;p.push(x,-v,0),f.push(0,0,1),m.push(y/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let v=0;v<a;v++){let y=v+l*g,x=v+l*(g+1),b=v+1+l*(g+1),S=v+1+l*g;d.push(y,x,S),d.push(x,b,S)}this.setIndex(d),this.setAttribute("position",new Ve(p,3)),this.setAttribute("normal",new Ve(f,3)),this.setAttribute("uv",new Ve(m,2))}static fromJSON(e){return new $x(e.width,e.height,e.widthSegments,e.heightSegments)}},qae=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,$ae=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Xae=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Yae=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Qae=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Kae=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Zae="vec3 transformed = vec3( position );",Jae=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,eoe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,toe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,roe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ioe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,noe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,soe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,aoe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ooe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,loe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,coe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,uoe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,hoe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,doe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,poe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,foe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,moe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,goe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,voe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yoe="gl_FragColor = linearToOutputTexel( gl_FragColor );",xoe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,boe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,woe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Soe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_oe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Aoe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Moe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Eoe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Coe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Toe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Poe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Doe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Ooe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Loe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ioe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Roe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Boe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,koe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zoe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Noe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Foe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Uoe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,joe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Voe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Goe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Hoe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Woe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,qoe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$oe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Xoe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Yoe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Qoe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Koe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Zoe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Joe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ele=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tle=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,rle=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,ile=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,nle=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,sle=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,ale=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ole=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lle=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cle=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ule=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,hle=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dle=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,ple=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,fle=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mle=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gle=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,vle=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,yle=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,xle=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ble=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,wle=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Sle=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_le=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ale=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Mle=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Ele=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Cle=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Tle=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Ple=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Dle=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ole=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Lle=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ile=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Rle=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ble=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,kle=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,zle=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Nle=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Fle=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Ule=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,jle=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Vle=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Gle=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Hle=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Wle=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$le=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Xle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Yle=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Qle=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Kle=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Zle=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Jle=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,ece=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,tce=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,rce=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ice=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nce=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,sce=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ace=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oce=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lce=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,cce=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uce=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,hce=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,dce=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pce=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fce=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,mce=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gce=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vce=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yce=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,xce=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bce=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wce=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Sce=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_ce=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ft={alphamap_fragment:qae,alphamap_pars_fragment:$ae,alphatest_fragment:Xae,alphatest_pars_fragment:Yae,aomap_fragment:Qae,aomap_pars_fragment:Kae,begin_vertex:Zae,beginnormal_vertex:Jae,bsdfs:eoe,iridescence_fragment:toe,bumpmap_pars_fragment:roe,clipping_planes_fragment:ioe,clipping_planes_pars_fragment:noe,clipping_planes_pars_vertex:soe,clipping_planes_vertex:aoe,color_fragment:ooe,color_pars_fragment:loe,color_pars_vertex:coe,color_vertex:uoe,common:hoe,cube_uv_reflection_fragment:doe,defaultnormal_vertex:poe,displacementmap_pars_vertex:foe,displacementmap_vertex:moe,emissivemap_fragment:goe,emissivemap_pars_fragment:voe,encodings_fragment:yoe,encodings_pars_fragment:xoe,envmap_fragment:boe,envmap_common_pars_fragment:woe,envmap_pars_fragment:Soe,envmap_pars_vertex:_oe,envmap_physical_pars_fragment:Boe,envmap_vertex:Aoe,fog_vertex:Moe,fog_pars_vertex:Eoe,fog_fragment:Coe,fog_pars_fragment:Toe,gradientmap_pars_fragment:Poe,lightmap_fragment:Doe,lightmap_pars_fragment:Ooe,lights_lambert_fragment:Loe,lights_lambert_pars_fragment:Ioe,lights_pars_begin:Roe,lights_toon_fragment:koe,lights_toon_pars_fragment:zoe,lights_phong_fragment:Noe,lights_phong_pars_fragment:Foe,lights_physical_fragment:Uoe,lights_physical_pars_fragment:joe,lights_fragment_begin:Voe,lights_fragment_maps:Goe,lights_fragment_end:Hoe,logdepthbuf_fragment:Woe,logdepthbuf_pars_fragment:qoe,logdepthbuf_pars_vertex:$oe,logdepthbuf_vertex:Xoe,map_fragment:Yoe,map_pars_fragment:Qoe,map_particle_fragment:Koe,map_particle_pars_fragment:Zoe,metalnessmap_fragment:Joe,metalnessmap_pars_fragment:ele,morphcolor_vertex:tle,morphnormal_vertex:rle,morphtarget_pars_vertex:ile,morphtarget_vertex:nle,normal_fragment_begin:sle,normal_fragment_maps:ale,normal_pars_fragment:ole,normal_pars_vertex:lle,normal_vertex:cle,normalmap_pars_fragment:ule,clearcoat_normal_fragment_begin:hle,clearcoat_normal_fragment_maps:dle,clearcoat_pars_fragment:ple,iridescence_pars_fragment:fle,output_fragment:mle,packing:gle,premultiplied_alpha_fragment:vle,project_vertex:yle,dithering_fragment:xle,dithering_pars_fragment:ble,roughnessmap_fragment:wle,roughnessmap_pars_fragment:Sle,shadowmap_pars_fragment:_le,shadowmap_pars_vertex:Ale,shadowmap_vertex:Mle,shadowmask_pars_fragment:Ele,skinbase_vertex:Cle,skinning_pars_vertex:Tle,skinning_vertex:Ple,skinnormal_vertex:Dle,specularmap_fragment:Ole,specularmap_pars_fragment:Lle,tonemapping_fragment:Ile,tonemapping_pars_fragment:Rle,transmission_fragment:Ble,transmission_pars_fragment:kle,uv_pars_fragment:zle,uv_pars_vertex:Nle,uv_vertex:Fle,uv2_pars_fragment:Ule,uv2_pars_vertex:jle,uv2_vertex:Vle,worldpos_vertex:Gle,background_vert:Hle,background_frag:Wle,backgroundCube_vert:qle,backgroundCube_frag:$le,cube_vert:Xle,cube_frag:Yle,depth_vert:Qle,depth_frag:Kle,distanceRGBA_vert:Zle,distanceRGBA_frag:Jle,equirect_vert:ece,equirect_frag:tce,linedashed_vert:rce,linedashed_frag:ice,meshbasic_vert:nce,meshbasic_frag:sce,meshlambert_vert:ace,meshlambert_frag:oce,meshmatcap_vert:lce,meshmatcap_frag:cce,meshnormal_vert:uce,meshnormal_frag:hce,meshphong_vert:dce,meshphong_frag:pce,meshphysical_vert:fce,meshphysical_frag:mce,meshtoon_vert:gce,meshtoon_frag:vce,points_vert:yce,points_frag:xce,shadow_vert:bce,shadow_frag:wce,sprite_vert:Sce,sprite_frag:_ce},Pe={common:{diffuse:{value:new et(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new pi},uv2Transform:{value:new pi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new $(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pi}},sprite:{diffuse:{value:new et(16777215)},opacity:{value:1},center:{value:new $(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pi}}},Oa={basic:{uniforms:Xi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:ft.meshbasic_vert,fragmentShader:ft.meshbasic_frag},lambert:{uniforms:Xi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new et(0)}}]),vertexShader:ft.meshlambert_vert,fragmentShader:ft.meshlambert_frag},phong:{uniforms:Xi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new et(0)},specular:{value:new et(1118481)},shininess:{value:30}}]),vertexShader:ft.meshphong_vert,fragmentShader:ft.meshphong_frag},standard:{uniforms:Xi([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag},toon:{uniforms:Xi([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new et(0)}}]),vertexShader:ft.meshtoon_vert,fragmentShader:ft.meshtoon_frag},matcap:{uniforms:Xi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:ft.meshmatcap_vert,fragmentShader:ft.meshmatcap_frag},points:{uniforms:Xi([Pe.points,Pe.fog]),vertexShader:ft.points_vert,fragmentShader:ft.points_frag},dashed:{uniforms:Xi([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ft.linedashed_vert,fragmentShader:ft.linedashed_frag},depth:{uniforms:Xi([Pe.common,Pe.displacementmap]),vertexShader:ft.depth_vert,fragmentShader:ft.depth_frag},normal:{uniforms:Xi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:ft.meshnormal_vert,fragmentShader:ft.meshnormal_frag},sprite:{uniforms:Xi([Pe.sprite,Pe.fog]),vertexShader:ft.sprite_vert,fragmentShader:ft.sprite_frag},background:{uniforms:{uvTransform:{value:new pi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ft.background_vert,fragmentShader:ft.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ft.backgroundCube_vert,fragmentShader:ft.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ft.cube_vert,fragmentShader:ft.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ft.equirect_vert,fragmentShader:ft.equirect_frag},distanceRGBA:{uniforms:Xi([Pe.common,Pe.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ft.distanceRGBA_vert,fragmentShader:ft.distanceRGBA_frag},shadow:{uniforms:Xi([Pe.lights,Pe.fog,{color:{value:new et(0)},opacity:{value:1}}]),vertexShader:ft.shadow_vert,fragmentShader:ft.shadow_frag}};Oa.physical={uniforms:Xi([Oa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new $(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new et(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new $},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new et(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new et(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag};var $v={r:0,b:0,g:0};function Ace(e,t,r,i,n,s,a){let o=new et(0),l=s===!0?0:1,c,h,u=null,d=0,p=null;function f(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?r:t).get(x));let b=e.xr,S=b.getSession&&b.getSession();S&&S.environmentBlendMode==="additive"&&(x=null),x===null?m(o,l):x&&x.isColor&&(m(x,1),y=!0),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Vg)?(h===void 0&&(h=new Sn(new Ka(1,1,1),new nr({name:"BackgroundCubeMaterial",uniforms:Kd(Oa.backgroundCube.uniforms),vertexShader:Oa.backgroundCube.vertexShader,fragmentShader:Oa.backgroundCube.fragmentShader,side:di,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(w,A,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(h)),h.material.uniforms.envMap.value=x,h.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=x.encoding!==dt,(u!==x||d!==x.version||p!==e.toneMapping)&&(h.material.needsUpdate=!0,u=x,d=x.version,p=e.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Sn(new $x(2,2),new nr({name:"BackgroundMaterial",uniforms:Kd(Oa.background.uniforms),vertexShader:Oa.background.vertexShader,fragmentShader:Oa.background.fragmentShader,side:oa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=x.encoding!==dt,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||d!==x.version||p!==e.toneMapping)&&(c.material.needsUpdate=!0,u=x,d=x.version,p=e.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function m(g,v){g.getRGB($v,DU(e)),i.buffers.color.setClear($v.r,$v.g,$v.b,v,a)}return{getClearColor:function(){return o},setClearColor:function(g,v=1){o.set(g),l=v,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(o,l)},render:f}}function Mce(e,t,r,i){let n=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=g(null),c=l,h=!1;function u(L,R,V,F,O){let k=!1;if(a){let z=m(F,V,R);c!==z&&(c=z,p(c.object)),k=v(L,F,V,O),k&&y(L,F,V,O)}else{let z=R.wireframe===!0;(c.geometry!==F.id||c.program!==V.id||c.wireframe!==z)&&(c.geometry=F.id,c.program=V.id,c.wireframe=z,k=!0)}O!==null&&r.update(O,34963),(k||h)&&(h=!1,_(L,R,V,F),O!==null&&e.bindBuffer(34963,r.get(O).buffer))}function d(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function p(L){return i.isWebGL2?e.bindVertexArray(L):s.bindVertexArrayOES(L)}function f(L){return i.isWebGL2?e.deleteVertexArray(L):s.deleteVertexArrayOES(L)}function m(L,R,V){let F=V.wireframe===!0,O=o[L.id];O===void 0&&(O={},o[L.id]=O);let k=O[R.id];k===void 0&&(k={},O[R.id]=k);let z=k[F];return z===void 0&&(z=g(d()),k[F]=z),z}function g(L){let R=[],V=[],F=[];for(let O=0;O<n;O++)R[O]=0,V[O]=0,F[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:V,attributeDivisors:F,object:L,attributes:{},index:null}}function v(L,R,V,F){let O=c.attributes,k=R.attributes,z=0,N=V.getAttributes();for(let j in N)if(N[j].location>=0){let Y=O[j],q=k[j];if(q===void 0&&(j==="instanceMatrix"&&L.instanceMatrix&&(q=L.instanceMatrix),j==="instanceColor"&&L.instanceColor&&(q=L.instanceColor)),Y===void 0||Y.attribute!==q||q&&Y.data!==q.data)return!0;z++}return c.attributesNum!==z||c.index!==F}function y(L,R,V,F){let O={},k=R.attributes,z=0,N=V.getAttributes();for(let j in N)if(N[j].location>=0){let Y=k[j];Y===void 0&&(j==="instanceMatrix"&&L.instanceMatrix&&(Y=L.instanceMatrix),j==="instanceColor"&&L.instanceColor&&(Y=L.instanceColor));let q={};q.attribute=Y,Y&&Y.data&&(q.data=Y.data),O[j]=q,z++}c.attributes=O,c.attributesNum=z,c.index=F}function x(){let L=c.newAttributes;for(let R=0,V=L.length;R<V;R++)L[R]=0}function b(L){S(L,0)}function S(L,R){let V=c.newAttributes,F=c.enabledAttributes,O=c.attributeDivisors;V[L]=1,F[L]===0&&(e.enableVertexAttribArray(L),F[L]=1),O[L]!==R&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,R),O[L]=R)}function w(){let L=c.newAttributes,R=c.enabledAttributes;for(let V=0,F=R.length;V<F;V++)R[V]!==L[V]&&(e.disableVertexAttribArray(V),R[V]=0)}function A(L,R,V,F,O,k){i.isWebGL2===!0&&(V===5124||V===5125)?e.vertexAttribIPointer(L,R,V,O,k):e.vertexAttribPointer(L,R,V,F,O,k)}function _(L,R,V,F){if(i.isWebGL2===!1&&(L.isInstancedMesh||F.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;x();let O=F.attributes,k=V.getAttributes(),z=R.defaultAttributeValues;for(let N in k){let j=k[N];if(j.location>=0){let Y=O[N];if(Y===void 0&&(N==="instanceMatrix"&&L.instanceMatrix&&(Y=L.instanceMatrix),N==="instanceColor"&&L.instanceColor&&(Y=L.instanceColor)),Y!==void 0){let q=Y.normalized,X=Y.itemSize,G=r.get(Y);if(G===void 0)continue;let te=G.buffer,Z=G.type,Q=G.bytesPerElement;if(Y.isInterleavedBufferAttribute){let re=Y.data,ae=re.stride,ce=Y.offset;if(re.isInstancedInterleavedBuffer){for(let pe=0;pe<j.locationSize;pe++)S(j.location+pe,re.meshPerAttribute);L.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let pe=0;pe<j.locationSize;pe++)b(j.location+pe);e.bindBuffer(34962,te);for(let pe=0;pe<j.locationSize;pe++)A(j.location+pe,X/j.locationSize,Z,q,ae*Q,(ce+X/j.locationSize*pe)*Q)}else{if(Y.isInstancedBufferAttribute){for(let re=0;re<j.locationSize;re++)S(j.location+re,Y.meshPerAttribute);L.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let re=0;re<j.locationSize;re++)b(j.location+re);e.bindBuffer(34962,te);for(let re=0;re<j.locationSize;re++)A(j.location+re,X/j.locationSize,Z,q,X*Q,X/j.locationSize*re*Q)}}else if(z!==void 0){let q=z[N];if(q!==void 0)switch(q.length){case 2:e.vertexAttrib2fv(j.location,q);break;case 3:e.vertexAttrib3fv(j.location,q);break;case 4:e.vertexAttrib4fv(j.location,q);break;default:e.vertexAttrib1fv(j.location,q)}}}}w()}function M(){P();for(let L in o){let R=o[L];for(let V in R){let F=R[V];for(let O in F)f(F[O].object),delete F[O];delete R[V]}delete o[L]}}function E(L){if(o[L.id]===void 0)return;let R=o[L.id];for(let V in R){let F=R[V];for(let O in F)f(F[O].object),delete F[O];delete R[V]}delete o[L.id]}function T(L){for(let R in o){let V=o[R];if(V[L.id]===void 0)continue;let F=V[L.id];for(let O in F)f(F[O].object),delete F[O];delete V[L.id]}}function P(){D(),h=!0,c!==l&&(c=l,p(c.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:P,resetDefaultState:D,dispose:M,releaseStatesOfGeometry:E,releaseStatesOfProgram:T,initAttributes:x,enableAttribute:b,disableUnusedAttributes:w}}function Ece(e,t,r,i){let n=i.isWebGL2,s;function a(c){s=c}function o(c,h){e.drawArrays(s,c,h),r.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,p;if(n)d=e,p="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](s,c,h,u),r.update(h,s,u)}this.setMode=a,this.render=o,this.renderInstances=l}function Cce(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let A=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(A){if(A==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=r.precision!==void 0?r.precision:"highp",l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let c=a||t.has("WEBGL_draw_buffers"),h=r.logarithmicDepthBuffer===!0,u=e.getParameter(34930),d=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),m=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),x=d>0,b=a||t.has("OES_texture_float"),S=x&&b,w=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:S,maxSamples:w}}function Tce(e){let t=this,r=null,i=0,n=!1,s=!1,a=new $n,o=new pi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){let p=u.length!==0||d||i!==0||n;return n=d,i=u.length,p},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){r=h(u,d,0)},this.setState=function(u,d,p){let f=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,v=e.get(u);if(!n||f===null||f.length===0||s&&!g)s?h(null):c();else{let y=s?0:i,x=y*4,b=v.clippingState||null;l.value=b,b=h(f,d,x,p);for(let S=0;S!==x;++S)b[S]=r[S];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function h(u,d,p,f){let m=u!==null?u.length:0,g=null;if(m!==0){if(g=l.value,f!==!0||g===null){let v=p+m*4,y=d.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,b=p;x!==m;++x,b+=4)a.copy(u[x]).applyMatrix4(y,o),a.normal.toArray(g,b),g[b+3]=a.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}}function Pce(e){let t=new WeakMap;function r(a,o){return o===BA?a.mapping=Du:o===kA&&(a.mapping=Ou),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===BA||o===kA)if(t.has(a)){let l=t.get(a).texture;return r(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let c=new Vae(l.height/2);return c.fromEquirectangularTexture(e,a),t.set(a,c),a.addEventListener("dispose",n),r(c.texture,a.mapping)}else return null}}return a}function n(a){let o=a.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var VC=class extends bp{constructor(e=-1,t=1,r=1,i=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,s=r+e,a=i+t,o=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,a-=c*this.view.offsetY,o=a-c*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},nd=4,EL=[.125,.215,.35,.446,.526,.582],Yc=20,Yw=new VC,CL=new et,Qw=null,Wc=(1+Math.sqrt(5))/2,fh=1/Wc,TL=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,Wc,fh),new C(0,Wc,-fh),new C(fh,0,Wc),new C(-fh,0,Wc),new C(Wc,fh,0),new C(-Wc,fh,0)],PL=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Qw=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=LL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=OL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Qw),e.scissorTest=!1,Xv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Du||e.mapping===Ou?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Qw=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:xt,minFilter:xt,generateMipmaps:!1,type:Qd,format:_s,encoding:Qa,depthBuffer:!1},i=DL(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DL(e,t,r);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Dce(n)),this._blurMaterial=Oce(n,e,t)}return i}_compileMaterial(e){let t=new Sn(this._lodPlanes[0],e);this._renderer.compile(t,Yw)}_sceneToCubeUV(e,t,r,i){let n=new ki(90,1,t,r),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(CL),o.toneMapping=jo,o.autoClear=!1;let h=new Hg({name:"PMREM.Background",side:di,depthWrite:!1,depthTest:!1}),u=new Sn(new Ka,h),d=!1,p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,d=!0):(h.color.copy(CL),d=!0);for(let f=0;f<6;f++){let m=f%3;m===0?(n.up.set(0,s[f],0),n.lookAt(a[f],0,0)):m===1?(n.up.set(0,0,s[f]),n.lookAt(0,a[f],0)):(n.up.set(0,s[f],0),n.lookAt(0,0,a[f]));let g=this._cubeSize;Xv(i,m*g,f>2?g:0,g,g),o.setRenderTarget(i),d&&o.render(u,n),o.render(e,n)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===Du||e.mapping===Ou;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=LL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=OL());let n=i?this._cubemapMaterial:this._equirectMaterial,s=new Sn(this._lodPlanes[0],n),a=n.uniforms;a.envMap.value=e;let o=this._cubeSize;Xv(t,0,0,3*o,2*o),r.setRenderTarget(t),r.render(s,Yw)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let n=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=TL[(i-1)%TL.length];this._blur(e,i-1,i,n,s)}t.autoClear=r}_blur(e,t,r,i,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",n),this._halfBlur(s,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,s,a){let o=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,h=new Sn(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[r]-1,p=isFinite(n)?Math.PI/(2*d):2*Math.PI/(2*Yc-1),f=n/p,m=isFinite(n)?1+Math.floor(c*f):Yc;m>Yc&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Yc}`);let g=[],v=0;for(let w=0;w<Yc;++w){let A=w/f,_=Math.exp(-A*A/2);g.push(_),w===0?v+=_:w<m&&(v+=2*_)}for(let w=0;w<g.length;w++)g[w]=g[w]/v;u.envMap.value=e.texture,u.samples.value=m,u.weights.value=g,u.latitudinal.value=s==="latitudinal",a&&(u.poleAxis.value=a);let{_lodMax:y}=this;u.dTheta.value=p,u.mipInt.value=y-r;let x=this._sizeLods[i],b=3*x*(i>y-nd?i-y+nd:0),S=4*(this._cubeSize-x);Xv(t,b,S,3*x,2*x),o.setRenderTarget(t),o.render(h,Yw)}};function Dce(e){let t=[],r=[],i=[],n=e,s=e-nd+1+EL.length;for(let a=0;a<s;a++){let o=Math.pow(2,n);r.push(o);let l=1/o;a>e-nd?l=EL[a-e+nd-1]:a===0&&(l=0),i.push(l);let c=1/(o-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],p=6,f=6,m=3,g=2,v=1,y=new Float32Array(m*f*p),x=new Float32Array(g*f*p),b=new Float32Array(v*f*p);for(let w=0;w<p;w++){let A=w%3*2/3-1,_=w>2?0:-1,M=[A,_,0,A+2/3,_,0,A+2/3,_+1,0,A,_,0,A+2/3,_+1,0,A,_+1,0];y.set(M,m*f*w),x.set(d,g*f*w);let E=[w,w,w,w,w,w];b.set(E,v*f*w)}let S=new nt;S.setAttribute("position",new st(y,m)),S.setAttribute("uv",new st(x,g)),S.setAttribute("faceIndex",new st(b,v)),t.push(S),n>nd&&n--}return{lodPlanes:t,sizeLods:r,sigmas:i}}function DL(e,t,r){let i=new $t(e,t,r);return i.texture.mapping=Vg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Xv(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function Oce(e,t,r){let i=new Float32Array(Yc),n=new C(0,1,0);return new nr({name:"SphericalGaussianBlur",defines:{n:Yc,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:GC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function OL(){return new nr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:GC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function LL(){return new nr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:GC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function GC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Lce(e){let t=new WeakMap,r=null;function i(o){if(o&&o.isTexture){let l=o.mapping,c=l===BA||l===kA,h=l===Du||l===Ou;if(c||h)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let u=t.get(o);return r===null&&(r=new PL(e)),u=c?r.fromEquirectangular(o,u):r.fromCubemap(o,u),t.set(o,u),u.texture}else{if(t.has(o))return t.get(o).texture;{let u=o.image;if(c&&u&&u.height>0||h&&u&&n(u)){r===null&&(r=new PL(e));let d=c?r.fromEquirectangular(o):r.fromCubemap(o);return t.set(o,d),o.addEventListener("dispose",s),d.texture}else return null}}}return o}function n(o){let l=0,c=6;for(let h=0;h<c;h++)o[h]!==void 0&&l++;return l===c}function s(o){let l=o.target;l.removeEventListener("dispose",s);let c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:a}}function Ice(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function Rce(e,t,r,i){let n={},s=new WeakMap;function a(u){let d=u.target;d.index!==null&&t.remove(d.index);for(let f in d.attributes)t.remove(d.attributes[f]);d.removeEventListener("dispose",a),delete n[d.id];let p=s.get(d);p&&(t.remove(p),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,r.memory.geometries--}function o(u,d){return n[d.id]===!0||(d.addEventListener("dispose",a),n[d.id]=!0,r.memory.geometries++),d}function l(u){let d=u.attributes;for(let f in d)t.update(d[f],34962);let p=u.morphAttributes;for(let f in p){let m=p[f];for(let g=0,v=m.length;g<v;g++)t.update(m[g],34962)}}function c(u){let d=[],p=u.index,f=u.attributes.position,m=0;if(p!==null){let y=p.array;m=p.version;for(let x=0,b=y.length;x<b;x+=3){let S=y[x+0],w=y[x+1],A=y[x+2];d.push(S,w,w,A,A,S)}}else{let y=f.array;m=f.version;for(let x=0,b=y.length/3-1;x<b;x+=3){let S=x+0,w=x+1,A=x+2;d.push(S,w,w,A,A,S)}}let g=new(AU(d)?xd:PU)(d,1);g.version=m;let v=s.get(u);v&&t.remove(v),s.set(u,g)}function h(u){let d=s.get(u);if(d){let p=u.index;p!==null&&d.version<p.version&&c(u)}else c(u);return s.get(u)}return{get:o,update:l,getWireframeAttribute:h}}function Bce(e,t,r,i){let n=i.isWebGL2,s;function a(d){s=d}let o,l;function c(d){o=d.type,l=d.bytesPerElement}function h(d,p){e.drawElements(s,p,o,d*l),r.update(p,s,1)}function u(d,p,f){if(f===0)return;let m,g;if(n)m=e,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,p,o,d*l,f),r.update(p,s,f)}this.setMode=a,this.setIndex=c,this.render=h,this.renderInstances=u}function kce(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(r.calls++,a){case 4:r.triangles+=o*(s/3);break;case 1:r.lines+=o*(s/2);break;case 3:r.lines+=o*(s-1);break;case 2:r.lines+=o*s;break;case 0:r.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function zce(e,t){return e[0]-t[0]}function Nce(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Fce(e,t,r){let i={},n=new Float32Array(8),s=new WeakMap,a=new pt,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,h,u,d){let p=c.morphTargetInfluences;if(t.isWebGL2===!0){let f=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,m=f!==void 0?f.length:0,g=s.get(h);if(g===void 0||g.count!==m){let x=function(){L.dispose(),s.delete(h),h.removeEventListener("dispose",x)};g!==void 0&&g.texture.dispose();let b=h.morphAttributes.position!==void 0,S=h.morphAttributes.normal!==void 0,w=h.morphAttributes.color!==void 0,A=h.morphAttributes.position||[],_=h.morphAttributes.normal||[],M=h.morphAttributes.color||[],E=0;b===!0&&(E=1),S===!0&&(E=2),w===!0&&(E=3);let T=h.attributes.position.count*E,P=1;T>t.maxTextureSize&&(P=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);let D=new Float32Array(T*P*4*m),L=new TU(D,T,P,m);L.type=Qn,L.needsUpdate=!0;let R=E*4;for(let V=0;V<m;V++){let F=A[V],O=_[V],k=M[V],z=T*P*4*V;for(let N=0;N<F.count;N++){let j=N*R;b===!0&&(a.fromBufferAttribute(F,N),D[z+j+0]=a.x,D[z+j+1]=a.y,D[z+j+2]=a.z,D[z+j+3]=0),S===!0&&(a.fromBufferAttribute(O,N),D[z+j+4]=a.x,D[z+j+5]=a.y,D[z+j+6]=a.z,D[z+j+7]=0),w===!0&&(a.fromBufferAttribute(k,N),D[z+j+8]=a.x,D[z+j+9]=a.y,D[z+j+10]=a.z,D[z+j+11]=k.itemSize===4?a.w:1)}}g={count:m,texture:L,size:new $(T,P)},s.set(h,g),h.addEventListener("dispose",x)}let v=0;for(let x=0;x<p.length;x++)v+=p[x];let y=h.morphTargetsRelative?1:1-v;d.getUniforms().setValue(e,"morphTargetBaseInfluence",y),d.getUniforms().setValue(e,"morphTargetInfluences",p),d.getUniforms().setValue(e,"morphTargetsTexture",g.texture,r),d.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let f=p===void 0?0:p.length,m=i[h.id];if(m===void 0||m.length!==f){m=[];for(let b=0;b<f;b++)m[b]=[b,0];i[h.id]=m}for(let b=0;b<f;b++){let S=m[b];S[0]=b,S[1]=p[b]}m.sort(Nce);for(let b=0;b<8;b++)b<f&&m[b][1]?(o[b][0]=m[b][0],o[b][1]=m[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(zce);let g=h.morphAttributes.position,v=h.morphAttributes.normal,y=0;for(let b=0;b<8;b++){let S=o[b],w=S[0],A=S[1];w!==Number.MAX_SAFE_INTEGER&&A?(g&&h.getAttribute("morphTarget"+b)!==g[w]&&h.setAttribute("morphTarget"+b,g[w]),v&&h.getAttribute("morphNormal"+b)!==v[w]&&h.setAttribute("morphNormal"+b,v[w]),n[b]=A,y+=A):(g&&h.hasAttribute("morphTarget"+b)===!0&&h.deleteAttribute("morphTarget"+b),v&&h.hasAttribute("morphNormal"+b)===!0&&h.deleteAttribute("morphNormal"+b),n[b]=0)}let x=h.morphTargetsRelative?1:1-y;d.getUniforms().setValue(e,"morphTargetBaseInfluence",x),d.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function Uce(e,t,r,i){let n=new WeakMap;function s(l){let c=i.render.frame,h=l.geometry,u=t.get(l,h);return n.get(u)!==c&&(t.update(u),n.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),u}function a(){n=new WeakMap}function o(l){let c=l.target;c.removeEventListener("dispose",o),r.remove(c.instanceMatrix),c.instanceColor!==null&&r.remove(c.instanceColor)}return{update:s,dispose:a}}var LU=new Jr,IU=new TU,RU=new Eae,BU=new UC,IL=[],RL=[],BL=new Float32Array(16),kL=new Float32Array(9),zL=new Float32Array(4);function wp(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,s=IL[n];if(s===void 0&&(s=new Float32Array(n),IL[n]=s),t!==0){i.toArray(s,0);for(let a=1,o=0;a!==t;++a)o+=r,e[a].toArray(s,o)}return s}function ti(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function ri(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function Xx(e,t){let r=RL[t];r===void 0&&(r=new Int32Array(t),RL[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function jce(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function Vce(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ti(r,t))return;e.uniform2fv(this.addr,t),ri(r,t)}}function Gce(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(ti(r,t))return;e.uniform3fv(this.addr,t),ri(r,t)}}function Hce(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ti(r,t))return;e.uniform4fv(this.addr,t),ri(r,t)}}function Wce(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(ti(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),ri(r,t)}else{if(ti(r,i))return;zL.set(i),e.uniformMatrix2fv(this.addr,!1,zL),ri(r,i)}}function qce(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(ti(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),ri(r,t)}else{if(ti(r,i))return;kL.set(i),e.uniformMatrix3fv(this.addr,!1,kL),ri(r,i)}}function $ce(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(ti(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),ri(r,t)}else{if(ti(r,i))return;BL.set(i),e.uniformMatrix4fv(this.addr,!1,BL),ri(r,i)}}function Xce(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Yce(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ti(r,t))return;e.uniform2iv(this.addr,t),ri(r,t)}}function Qce(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ti(r,t))return;e.uniform3iv(this.addr,t),ri(r,t)}}function Kce(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ti(r,t))return;e.uniform4iv(this.addr,t),ri(r,t)}}function Zce(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function Jce(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ti(r,t))return;e.uniform2uiv(this.addr,t),ri(r,t)}}function eue(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ti(r,t))return;e.uniform3uiv(this.addr,t),ri(r,t)}}function tue(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ti(r,t))return;e.uniform4uiv(this.addr,t),ri(r,t)}}function rue(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||LU,n)}function iue(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||RU,n)}function nue(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||BU,n)}function sue(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||IU,n)}function aue(e){switch(e){case 5126:return jce;case 35664:return Vce;case 35665:return Gce;case 35666:return Hce;case 35674:return Wce;case 35675:return qce;case 35676:return $ce;case 5124:case 35670:return Xce;case 35667:case 35671:return Yce;case 35668:case 35672:return Qce;case 35669:case 35673:return Kce;case 5125:return Zce;case 36294:return Jce;case 36295:return eue;case 36296:return tue;case 35678:case 36198:case 36298:case 36306:case 35682:return rue;case 35679:case 36299:case 36307:return iue;case 35680:case 36300:case 36308:case 36293:return nue;case 36289:case 36303:case 36311:case 36292:return sue}}function oue(e,t){e.uniform1fv(this.addr,t)}function lue(e,t){let r=wp(t,this.size,2);e.uniform2fv(this.addr,r)}function cue(e,t){let r=wp(t,this.size,3);e.uniform3fv(this.addr,r)}function uue(e,t){let r=wp(t,this.size,4);e.uniform4fv(this.addr,r)}function hue(e,t){let r=wp(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function due(e,t){let r=wp(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function pue(e,t){let r=wp(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function fue(e,t){e.uniform1iv(this.addr,t)}function mue(e,t){e.uniform2iv(this.addr,t)}function gue(e,t){e.uniform3iv(this.addr,t)}function vue(e,t){e.uniform4iv(this.addr,t)}function yue(e,t){e.uniform1uiv(this.addr,t)}function xue(e,t){e.uniform2uiv(this.addr,t)}function bue(e,t){e.uniform3uiv(this.addr,t)}function wue(e,t){e.uniform4uiv(this.addr,t)}function Sue(e,t,r){let i=this.cache,n=t.length,s=Xx(r,n);ti(i,s)||(e.uniform1iv(this.addr,s),ri(i,s));for(let a=0;a!==n;++a)r.setTexture2D(t[a]||LU,s[a])}function _ue(e,t,r){let i=this.cache,n=t.length,s=Xx(r,n);ti(i,s)||(e.uniform1iv(this.addr,s),ri(i,s));for(let a=0;a!==n;++a)r.setTexture3D(t[a]||RU,s[a])}function Aue(e,t,r){let i=this.cache,n=t.length,s=Xx(r,n);ti(i,s)||(e.uniform1iv(this.addr,s),ri(i,s));for(let a=0;a!==n;++a)r.setTextureCube(t[a]||BU,s[a])}function Mue(e,t,r){let i=this.cache,n=t.length,s=Xx(r,n);ti(i,s)||(e.uniform1iv(this.addr,s),ri(i,s));for(let a=0;a!==n;++a)r.setTexture2DArray(t[a]||IU,s[a])}function Eue(e){switch(e){case 5126:return oue;case 35664:return lue;case 35665:return cue;case 35666:return uue;case 35674:return hue;case 35675:return due;case 35676:return pue;case 5124:case 35670:return fue;case 35667:case 35671:return mue;case 35668:case 35672:return gue;case 35669:case 35673:return vue;case 5125:return yue;case 36294:return xue;case 36295:return bue;case 36296:return wue;case 35678:case 36198:case 36298:case 36306:case 35682:return Sue;case 35679:case 36299:case 36307:return _ue;case 35680:case 36300:case 36308:case 36293:return Aue;case 36289:case 36303:case 36311:case 36292:return Mue}}var Cue=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=aue(t.type)}},Tue=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Eue(t.type)}},Pue=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let n=0,s=i.length;n!==s;++n){let a=i[n];a.setValue(e,t[a.id],r)}}},Kw=/(\w+)(\])?(\[|\.)?/g;function NL(e,t){e.seq.push(t),e.map[t.id]=t}function Due(e,t,r){let i=e.name,n=i.length;for(Kw.lastIndex=0;;){let s=Kw.exec(i),a=Kw.lastIndex,o=s[1],l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===n){NL(r,c===void 0?new Cue(o,e,t):new Tue(o,e,t));break}else{let h=r.map[o];h===void 0&&(h=new Pue(o),NL(r,h)),r=h}}}var dy=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),s=e.getUniformLocation(t,n.name);Due(n,s,this)}}setValue(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let n=0,s=t.length;n!==s;++n){let a=t[n],o=r[a.id];o.needsUpdate!==!1&&a.setValue(e,o.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let s=e[i];s.id in t&&r.push(s)}return r}};function FL(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var Oue=0;function Lue(e,t){let r=e.split(`
`),i=[],n=Math.max(t-6,0),s=Math.min(t+6,r.length);for(let a=n;a<s;a++){let o=a+1;i.push(`${o===t?">":" "} ${o}: ${r[a]}`)}return i.join(`
`)}function Iue(e){switch(e){case Qa:return["Linear","( value )"];case dt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function UL(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let s=/ERROR: 0:(\d+)/.exec(n);if(s){let a=parseInt(s[1]);return r.toUpperCase()+`

`+n+`

`+Lue(e.getShaderSource(t),a)}else return n}function Rue(e,t){let r=Iue(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Bue(e,t){let r;switch(t){case jse:r="Linear";break;case Vse:r="Reinhard";break;case Gse:r="OptimizedCineon";break;case Hse:r="ACESFilmic";break;case Wse:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function kue(e){return[e.extensionDerivatives||!!e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(kf).join(`
`)}function zue(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function Nue(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let s=e.getActiveAttrib(t,n),a=s.name,o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),r[a]={type:s.type,location:e.getAttribLocation(t,a),locationSize:o}}return r}function kf(e){return e!==""}function jL(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function VL(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Fue=/^[ \t]*#include +<([\w\d./]+)>/gm;function jA(e){return e.replace(Fue,Uue)}function Uue(e,t){let r=ft[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return jA(r)}var jue=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function GL(e){return e.replace(jue,Vue)}function Vue(e,t,r,i){let n="";for(let s=parseInt(t);s<parseInt(r);s++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function HL(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Gue(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===BC?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===xse?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Bf&&(t="SHADOWMAP_TYPE_VSM"),t}function Hue(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Du:case Ou:t="ENVMAP_TYPE_CUBE";break;case Vg:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Wue(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Ou:t="ENVMAP_MODE_REFRACTION";break}return t}function que(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case gU:t="ENVMAP_BLENDING_MULTIPLY";break;case Fse:t="ENVMAP_BLENDING_MIX";break;case Use:t="ENVMAP_BLENDING_ADD";break}return t}function $ue(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function Xue(e,t,r,i){let n=e.getContext(),s=r.defines,a=r.vertexShader,o=r.fragmentShader,l=Gue(r),c=Hue(r),h=Wue(r),u=que(r),d=$ue(r),p=r.isWebGL2?"":kue(r),f=zue(s),m=n.createProgram(),g,v,y=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=[f].filter(kf).join(`
`),g.length>0&&(g+=`
`),v=[p,f].filter(kf).join(`
`),v.length>0&&(v+=`
`)):(g=[HL(r),"#define SHADER_NAME "+r.shaderName,f,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kf).join(`
`),v=[p,HL(r),"#define SHADER_NAME "+r.shaderName,f,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.envMap?"#define "+h:"",r.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==jo?"#define TONE_MAPPING":"",r.toneMapping!==jo?ft.tonemapping_pars_fragment:"",r.toneMapping!==jo?Bue("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",ft.encodings_pars_fragment,Rue("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(kf).join(`
`)),a=jA(a),a=jL(a,r),a=VL(a,r),o=jA(o),o=jL(o,r),o=VL(o,r),a=GL(a),o=GL(o),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",r.glslVersion===fL?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===fL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let x=y+g+a,b=y+v+o,S=FL(n,35633,x),w=FL(n,35632,b);if(n.attachShader(m,S),n.attachShader(m,w),r.index0AttributeName!==void 0?n.bindAttribLocation(m,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(m,0,"position"),n.linkProgram(m),e.debug.checkShaderErrors){let M=n.getProgramInfoLog(m).trim(),E=n.getShaderInfoLog(S).trim(),T=n.getShaderInfoLog(w).trim(),P=!0,D=!0;if(n.getProgramParameter(m,35714)===!1){P=!1;let L=UL(n,S,"vertex"),R=UL(n,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(m,35715)+`

Program Info Log: `+M+`
`+L+`
`+R)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(E===""||T==="")&&(D=!1);D&&(this.diagnostics={runnable:P,programLog:M,vertexShader:{log:E,prefix:g},fragmentShader:{log:T,prefix:v}})}n.deleteShader(S),n.deleteShader(w);let A;this.getUniforms=function(){return A===void 0&&(A=new dy(n,m)),A};let _;return this.getAttributes=function(){return _===void 0&&(_=Nue(n,m)),_},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(m),this.program=void 0},this.name=r.shaderName,this.id=Oue++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=w,this}var Yue=0,Que=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(n)===!1&&(s.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new Kue(e),t.set(e,r)),r}},Kue=class{constructor(e){this.id=Yue++,this.code=e,this.usedTimes=0}};function Zue(e,t,r,i,n,s,a){let o=new FC,l=new Que,c=[],h=n.isWebGL2,u=n.logarithmicDepthBuffer,d=n.vertexTextures,p=n.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(_,M,E,T,P){let D=T.fog,L=P.geometry,R=_.isMeshStandardMaterial?T.environment:null,V=(_.isMeshStandardMaterial?r:t).get(_.envMap||R),F=!!V&&V.mapping===Vg?V.image.height:null,O=f[_.type];_.precision!==null&&(p=n.getMaxPrecision(_.precision),p!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",p,"instead."));let k=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,z=k!==void 0?k.length:0,N=0;L.morphAttributes.position!==void 0&&(N=1),L.morphAttributes.normal!==void 0&&(N=2),L.morphAttributes.color!==void 0&&(N=3);let j,Y,q,X;if(O){let re=Oa[O];j=re.vertexShader,Y=re.fragmentShader}else j=_.vertexShader,Y=_.fragmentShader,l.update(_),q=l.getVertexShaderID(_),X=l.getFragmentShaderID(_);let G=e.getRenderTarget(),te=_.alphaTest>0,Z=_.clearcoat>0,Q=_.iridescence>0;return{isWebGL2:h,shaderID:O,shaderName:_.type,vertexShader:j,fragmentShader:Y,defines:_.defines,customVertexShaderID:q,customFragmentShaderID:X,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:p,instancing:P.isInstancedMesh===!0,instancingColor:P.isInstancedMesh===!0&&P.instanceColor!==null,supportsVertexTextures:d,outputEncoding:G===null?e.outputEncoding:G.isXRRenderTarget===!0?G.texture.encoding:Qa,map:!!_.map,matcap:!!_.matcap,envMap:!!V,envMapMode:V&&V.mapping,envMapCubeUVHeight:F,lightMap:!!_.lightMap,aoMap:!!_.aoMap,emissiveMap:!!_.emissiveMap,bumpMap:!!_.bumpMap,normalMap:!!_.normalMap,objectSpaceNormalMap:_.normalMapType===cae,tangentSpaceNormalMap:_.normalMapType===lae,decodeVideoTexture:!!_.map&&_.map.isVideoTexture===!0&&_.map.encoding===dt,clearcoat:Z,clearcoatMap:Z&&!!_.clearcoatMap,clearcoatRoughnessMap:Z&&!!_.clearcoatRoughnessMap,clearcoatNormalMap:Z&&!!_.clearcoatNormalMap,iridescence:Q,iridescenceMap:Q&&!!_.iridescenceMap,iridescenceThicknessMap:Q&&!!_.iridescenceThicknessMap,displacementMap:!!_.displacementMap,roughnessMap:!!_.roughnessMap,metalnessMap:!!_.metalnessMap,specularMap:!!_.specularMap,specularIntensityMap:!!_.specularIntensityMap,specularColorMap:!!_.specularColorMap,opaque:_.transparent===!1&&_.blending===yd,alphaMap:!!_.alphaMap,alphaTest:te,gradientMap:!!_.gradientMap,sheen:_.sheen>0,sheenColorMap:!!_.sheenColorMap,sheenRoughnessMap:!!_.sheenRoughnessMap,transmission:_.transmission>0,transmissionMap:!!_.transmissionMap,thicknessMap:!!_.thicknessMap,combine:_.combine,vertexTangents:!!_.normalMap&&!!L.attributes.tangent,vertexColors:_.vertexColors,vertexAlphas:_.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,vertexUvs:!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatMap||!!_.clearcoatRoughnessMap||!!_.clearcoatNormalMap||!!_.iridescenceMap||!!_.iridescenceThicknessMap||!!_.displacementMap||!!_.transmissionMap||!!_.thicknessMap||!!_.specularIntensityMap||!!_.specularColorMap||!!_.sheenColorMap||!!_.sheenRoughnessMap,uvsVertexOnly:!(!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatNormalMap||!!_.iridescenceMap||!!_.iridescenceThicknessMap||_.transmission>0||!!_.transmissionMap||!!_.thicknessMap||!!_.specularIntensityMap||!!_.specularColorMap||_.sheen>0||!!_.sheenColorMap||!!_.sheenRoughnessMap)&&!!_.displacementMap,fog:!!D,useFog:_.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:!!_.flatShading,sizeAttenuation:_.sizeAttenuation,logarithmicDepthBuffer:u,skinning:P.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:N,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:_.dithering,shadowMapEnabled:e.shadowMap.enabled&&E.length>0,shadowMapType:e.shadowMap.type,toneMapping:_.toneMapped?e.toneMapping:jo,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:_.premultipliedAlpha,doubleSided:_.side===Yn,flipSided:_.side===di,useDepthPacking:!!_.depthPacking,depthPacking:_.depthPacking||0,index0AttributeName:_.index0AttributeName,extensionDerivatives:_.extensions&&_.extensions.derivatives,extensionFragDepth:_.extensions&&_.extensions.fragDepth,extensionDrawBuffers:_.extensions&&_.extensions.drawBuffers,extensionShaderTextureLOD:_.extensions&&_.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:_.customProgramCacheKey()}}function g(_){let M=[];if(_.shaderID?M.push(_.shaderID):(M.push(_.customVertexShaderID),M.push(_.customFragmentShaderID)),_.defines!==void 0)for(let E in _.defines)M.push(E),M.push(_.defines[E]);return _.isRawShaderMaterial===!1&&(v(M,_),y(M,_),M.push(e.outputEncoding)),M.push(_.customProgramCacheKey),M.join()}function v(_,M){_.push(M.precision),_.push(M.outputEncoding),_.push(M.envMapMode),_.push(M.envMapCubeUVHeight),_.push(M.combine),_.push(M.vertexUvs),_.push(M.fogExp2),_.push(M.sizeAttenuation),_.push(M.morphTargetsCount),_.push(M.morphAttributeCount),_.push(M.numDirLights),_.push(M.numPointLights),_.push(M.numSpotLights),_.push(M.numSpotLightMaps),_.push(M.numHemiLights),_.push(M.numRectAreaLights),_.push(M.numDirLightShadows),_.push(M.numPointLightShadows),_.push(M.numSpotLightShadows),_.push(M.numSpotLightShadowsWithMaps),_.push(M.shadowMapType),_.push(M.toneMapping),_.push(M.numClippingPlanes),_.push(M.numClipIntersection),_.push(M.depthPacking)}function y(_,M){o.disableAll(),M.isWebGL2&&o.enable(0),M.supportsVertexTextures&&o.enable(1),M.instancing&&o.enable(2),M.instancingColor&&o.enable(3),M.map&&o.enable(4),M.matcap&&o.enable(5),M.envMap&&o.enable(6),M.lightMap&&o.enable(7),M.aoMap&&o.enable(8),M.emissiveMap&&o.enable(9),M.bumpMap&&o.enable(10),M.normalMap&&o.enable(11),M.objectSpaceNormalMap&&o.enable(12),M.tangentSpaceNormalMap&&o.enable(13),M.clearcoat&&o.enable(14),M.clearcoatMap&&o.enable(15),M.clearcoatRoughnessMap&&o.enable(16),M.clearcoatNormalMap&&o.enable(17),M.iridescence&&o.enable(18),M.iridescenceMap&&o.enable(19),M.iridescenceThicknessMap&&o.enable(20),M.displacementMap&&o.enable(21),M.specularMap&&o.enable(22),M.roughnessMap&&o.enable(23),M.metalnessMap&&o.enable(24),M.gradientMap&&o.enable(25),M.alphaMap&&o.enable(26),M.alphaTest&&o.enable(27),M.vertexColors&&o.enable(28),M.vertexAlphas&&o.enable(29),M.vertexUvs&&o.enable(30),M.vertexTangents&&o.enable(31),M.uvsVertexOnly&&o.enable(32),_.push(o.mask),o.disableAll(),M.fog&&o.enable(0),M.useFog&&o.enable(1),M.flatShading&&o.enable(2),M.logarithmicDepthBuffer&&o.enable(3),M.skinning&&o.enable(4),M.morphTargets&&o.enable(5),M.morphNormals&&o.enable(6),M.morphColors&&o.enable(7),M.premultipliedAlpha&&o.enable(8),M.shadowMapEnabled&&o.enable(9),M.physicallyCorrectLights&&o.enable(10),M.doubleSided&&o.enable(11),M.flipSided&&o.enable(12),M.useDepthPacking&&o.enable(13),M.dithering&&o.enable(14),M.specularIntensityMap&&o.enable(15),M.specularColorMap&&o.enable(16),M.transmission&&o.enable(17),M.transmissionMap&&o.enable(18),M.thicknessMap&&o.enable(19),M.sheen&&o.enable(20),M.sheenColorMap&&o.enable(21),M.sheenRoughnessMap&&o.enable(22),M.decodeVideoTexture&&o.enable(23),M.opaque&&o.enable(24),_.push(o.mask)}function x(_){let M=f[_.type],E;if(M){let T=Oa[M];E=xp.clone(T.uniforms)}else E=_.uniforms;return E}function b(_,M){let E;for(let T=0,P=c.length;T<P;T++){let D=c[T];if(D.cacheKey===M){E=D,++E.usedTimes;break}}return E===void 0&&(E=new Xue(e,M,_,s),c.push(E)),E}function S(_){if(--_.usedTimes===0){let M=c.indexOf(_);c[M]=c[c.length-1],c.pop(),_.destroy()}}function w(_){l.remove(_)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:b,releaseProgram:S,releaseShaderCache:w,programs:c,dispose:A}}function Jue(){let e=new WeakMap;function t(s){let a=e.get(s);return a===void 0&&(a={},e.set(s,a)),a}function r(s){e.delete(s)}function i(s,a,o){e.get(s)[a]=o}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function ehe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function WL(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function qL(){let e=[],t=0,r=[],i=[],n=[];function s(){t=0,r.length=0,i.length=0,n.length=0}function a(u,d,p,f,m,g){let v=e[t];return v===void 0?(v={id:u.id,object:u,geometry:d,material:p,groupOrder:f,renderOrder:u.renderOrder,z:m,group:g},e[t]=v):(v.id=u.id,v.object=u,v.geometry=d,v.material=p,v.groupOrder=f,v.renderOrder=u.renderOrder,v.z=m,v.group=g),t++,v}function o(u,d,p,f,m,g){let v=a(u,d,p,f,m,g);p.transmission>0?i.push(v):p.transparent===!0?n.push(v):r.push(v)}function l(u,d,p,f,m,g){let v=a(u,d,p,f,m,g);p.transmission>0?i.unshift(v):p.transparent===!0?n.unshift(v):r.unshift(v)}function c(u,d){r.length>1&&r.sort(u||ehe),i.length>1&&i.sort(d||WL),n.length>1&&n.sort(d||WL)}function h(){for(let u=t,d=e.length;u<d;u++){let p=e[u];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:r,transmissive:i,transparent:n,init:s,push:o,unshift:l,finish:h,sort:c}}function the(){let e=new WeakMap;function t(i,n){let s=e.get(i),a;return s===void 0?(a=new qL,e.set(i,[a])):n>=s.length?(a=new qL,s.push(a)):a=s[n],a}function r(){e=new WeakMap}return{get:t,dispose:r}}function rhe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new C,color:new et};break;case"SpotLight":r={position:new C,direction:new C,color:new et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new C,color:new et,distance:0,decay:0};break;case"HemisphereLight":r={direction:new C,skyColor:new et,groundColor:new et};break;case"RectAreaLight":r={color:new et,position:new C,halfWidth:new C,halfHeight:new C};break}return e[t.id]=r,r}}}function ihe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var nhe=0;function she(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ahe(e,t){let r=new rhe,i=ihe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)n.probe.push(new C);let s=new C,a=new we,o=new we;function l(h,u){let d=0,p=0,f=0;for(let T=0;T<9;T++)n.probe[T].set(0,0,0);let m=0,g=0,v=0,y=0,x=0,b=0,S=0,w=0,A=0,_=0;h.sort(she);let M=u!==!0?Math.PI:1;for(let T=0,P=h.length;T<P;T++){let D=h[T],L=D.color,R=D.intensity,V=D.distance,F=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)d+=L.r*R*M,p+=L.g*R*M,f+=L.b*R*M;else if(D.isLightProbe)for(let O=0;O<9;O++)n.probe[O].addScaledVector(D.sh.coefficients[O],R);else if(D.isDirectionalLight){let O=r.get(D);if(O.color.copy(D.color).multiplyScalar(D.intensity*M),D.castShadow){let k=D.shadow,z=i.get(D);z.shadowBias=k.bias,z.shadowNormalBias=k.normalBias,z.shadowRadius=k.radius,z.shadowMapSize=k.mapSize,n.directionalShadow[m]=z,n.directionalShadowMap[m]=F,n.directionalShadowMatrix[m]=D.shadow.matrix,b++}n.directional[m]=O,m++}else if(D.isSpotLight){let O=r.get(D);O.position.setFromMatrixPosition(D.matrixWorld),O.color.copy(L).multiplyScalar(R*M),O.distance=V,O.coneCos=Math.cos(D.angle),O.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),O.decay=D.decay,n.spot[v]=O;let k=D.shadow;if(D.map&&(n.spotLightMap[A]=D.map,A++,k.updateMatrices(D),D.castShadow&&_++),n.spotLightMatrix[v]=k.matrix,D.castShadow){let z=i.get(D);z.shadowBias=k.bias,z.shadowNormalBias=k.normalBias,z.shadowRadius=k.radius,z.shadowMapSize=k.mapSize,n.spotShadow[v]=z,n.spotShadowMap[v]=F,w++}v++}else if(D.isRectAreaLight){let O=r.get(D);O.color.copy(L).multiplyScalar(R),O.halfWidth.set(D.width*.5,0,0),O.halfHeight.set(0,D.height*.5,0),n.rectArea[y]=O,y++}else if(D.isPointLight){let O=r.get(D);if(O.color.copy(D.color).multiplyScalar(D.intensity*M),O.distance=D.distance,O.decay=D.decay,D.castShadow){let k=D.shadow,z=i.get(D);z.shadowBias=k.bias,z.shadowNormalBias=k.normalBias,z.shadowRadius=k.radius,z.shadowMapSize=k.mapSize,z.shadowCameraNear=k.camera.near,z.shadowCameraFar=k.camera.far,n.pointShadow[g]=z,n.pointShadowMap[g]=F,n.pointShadowMatrix[g]=D.shadow.matrix,S++}n.point[g]=O,g++}else if(D.isHemisphereLight){let O=r.get(D);O.skyColor.copy(D.color).multiplyScalar(R*M),O.groundColor.copy(D.groundColor).multiplyScalar(R*M),n.hemi[x]=O,x++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Pe.LTC_FLOAT_1,n.rectAreaLTC2=Pe.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Pe.LTC_HALF_1,n.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=p,n.ambient[2]=f;let E=n.hash;(E.directionalLength!==m||E.pointLength!==g||E.spotLength!==v||E.rectAreaLength!==y||E.hemiLength!==x||E.numDirectionalShadows!==b||E.numPointShadows!==S||E.numSpotShadows!==w||E.numSpotMaps!==A)&&(n.directional.length=m,n.spot.length=v,n.rectArea.length=y,n.point.length=g,n.hemi.length=x,n.directionalShadow.length=b,n.directionalShadowMap.length=b,n.pointShadow.length=S,n.pointShadowMap.length=S,n.spotShadow.length=w,n.spotShadowMap.length=w,n.directionalShadowMatrix.length=b,n.pointShadowMatrix.length=S,n.spotLightMatrix.length=w+A-_,n.spotLightMap.length=A,n.numSpotLightShadowsWithMaps=_,E.directionalLength=m,E.pointLength=g,E.spotLength=v,E.rectAreaLength=y,E.hemiLength=x,E.numDirectionalShadows=b,E.numPointShadows=S,E.numSpotShadows=w,E.numSpotMaps=A,n.version=nhe++)}function c(h,u){let d=0,p=0,f=0,m=0,g=0,v=u.matrixWorldInverse;for(let y=0,x=h.length;y<x;y++){let b=h[y];if(b.isDirectionalLight){let S=n.directional[d];S.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),d++}else if(b.isSpotLight){let S=n.spot[f];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),f++}else if(b.isRectAreaLight){let S=n.rectArea[m];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),o.identity(),a.copy(b.matrixWorld),a.premultiply(v),o.extractRotation(a),S.halfWidth.set(b.width*.5,0,0),S.halfHeight.set(0,b.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),m++}else if(b.isPointLight){let S=n.point[p];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),p++}else if(b.isHemisphereLight){let S=n.hemi[g];S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:n}}function $L(e,t){let r=new ahe(e,t),i=[],n=[];function s(){i.length=0,n.length=0}function a(h){i.push(h)}function o(h){n.push(h)}function l(h){r.setup(i,h)}function c(h){r.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function ohe(e,t){let r=new WeakMap;function i(s,a=0){let o=r.get(s),l;return o===void 0?(l=new $L(e,t),r.set(s,[l])):a>=o.length?(l=new $L(e,t),o.push(l)):l=o[a],l}function n(){r=new WeakMap}return{get:i,dispose:n}}var kU=class extends Gg{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=rl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},lhe=class extends Gg{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},che=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uhe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hhe(e,t,r){let i=new jC,n=new $,s=new $,a=new pt,o=new kU({depthPacking:SU}),l=new lhe,c={},h=r.maxTextureSize,u={[oa]:di,[di]:oa,[Yn]:Yn},d=new nr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $},radius:{value:4}},vertexShader:che,fragmentShader:uhe}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let f=new nt;f.setAttribute("position",new st(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new Sn(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=BC,this.render=function(b,S,w){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;let A=e.getRenderTarget(),_=e.getActiveCubeFace(),M=e.getActiveMipmapLevel(),E=e.state;E.setBlending(Hr),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(let T=0,P=b.length;T<P;T++){let D=b[T],L=D.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;n.copy(L.mapSize);let R=L.getFrameExtents();if(n.multiply(R),s.copy(L.mapSize),(n.x>h||n.y>h)&&(n.x>h&&(s.x=Math.floor(h/R.x),n.x=s.x*R.x,L.mapSize.x=s.x),n.y>h&&(s.y=Math.floor(h/R.y),n.y=s.y*R.y,L.mapSize.y=s.y)),L.map===null){let F=this.type!==Bf?{minFilter:ir,magFilter:ir}:{};L.map=new $t(n.x,n.y,F),L.map.texture.name=D.name+".shadowMap",L.camera.updateProjectionMatrix()}e.setRenderTarget(L.map),e.clear();let V=L.getViewportCount();for(let F=0;F<V;F++){let O=L.getViewport(F);a.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),E.viewport(a),L.updateMatrices(D,F),i=L.getFrustum(),x(S,w,L.camera,D,this.type)}L.isPointLightShadow!==!0&&this.type===Bf&&v(L,w),L.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(A,_,M)};function v(b,S){let w=t.update(m);d.defines.VSM_SAMPLES!==b.blurSamples&&(d.defines.VSM_SAMPLES=b.blurSamples,p.defines.VSM_SAMPLES=b.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new $t(n.x,n.y)),d.uniforms.shadow_pass.value=b.map.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,e.setRenderTarget(b.mapPass),e.clear(),e.renderBufferDirect(S,null,w,d,m,null),p.uniforms.shadow_pass.value=b.mapPass.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,e.setRenderTarget(b.map),e.clear(),e.renderBufferDirect(S,null,w,p,m,null)}function y(b,S,w,A,_,M){let E=null,T=w.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(T!==void 0)E=T;else if(E=w.isPointLight===!0?l:o,e.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){let P=E.uuid,D=S.uuid,L=c[P];L===void 0&&(L={},c[P]=L);let R=L[D];R===void 0&&(R=E.clone(),L[D]=R),E=R}return E.visible=S.visible,E.wireframe=S.wireframe,M===Bf?E.side=S.shadowSide!==null?S.shadowSide:S.side:E.side=S.shadowSide!==null?S.shadowSide:u[S.side],E.alphaMap=S.alphaMap,E.alphaTest=S.alphaTest,E.map=S.map,E.clipShadows=S.clipShadows,E.clippingPlanes=S.clippingPlanes,E.clipIntersection=S.clipIntersection,E.displacementMap=S.displacementMap,E.displacementScale=S.displacementScale,E.displacementBias=S.displacementBias,E.wireframeLinewidth=S.wireframeLinewidth,E.linewidth=S.linewidth,w.isPointLight===!0&&E.isMeshDistanceMaterial===!0&&(E.referencePosition.setFromMatrixPosition(w.matrixWorld),E.nearDistance=A,E.farDistance=_),E}function x(b,S,w,A,_){if(b.visible===!1)return;if(b.layers.test(S.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&_===Bf)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);let E=t.update(b),T=b.material;if(Array.isArray(T)){let P=E.groups;for(let D=0,L=P.length;D<L;D++){let R=P[D],V=T[R.materialIndex];if(V&&V.visible){let F=y(b,V,A,w.near,w.far,_);e.renderBufferDirect(w,null,E,F,b,R)}}}else if(T.visible){let P=y(b,T,A,w.near,w.far,_);e.renderBufferDirect(w,null,E,P,b,null)}}let M=b.children;for(let E=0,T=M.length;E<T;E++)x(M[E],S,w,A,_)}}function dhe(e,t,r){let i=r.isWebGL2;function n(){let K=!1,he=new pt,oe=null,de=new pt(0,0,0,0);return{setMask:function(_e){oe!==_e&&!K&&(e.colorMask(_e,_e,_e,_e),oe=_e)},setLocked:function(_e){K=_e},setClear:function(_e,ke,at,ot,bt){bt===!0&&(_e*=ot,ke*=ot,at*=ot),he.set(_e,ke,at,ot),de.equals(he)===!1&&(e.clearColor(_e,ke,at,ot),de.copy(he))},reset:function(){K=!1,oe=null,de.set(-1,0,0,0)}}}function s(){let K=!1,he=null,oe=null,de=null;return{setTest:function(_e){_e?te(2929):Z(2929)},setMask:function(_e){he!==_e&&!K&&(e.depthMask(_e),he=_e)},setFunc:function(_e){if(oe!==_e){switch(_e){case Lse:e.depthFunc(512);break;case Ise:e.depthFunc(519);break;case Rse:e.depthFunc(513);break;case RA:e.depthFunc(515);break;case Bse:e.depthFunc(514);break;case kse:e.depthFunc(518);break;case zse:e.depthFunc(516);break;case Nse:e.depthFunc(517);break;default:e.depthFunc(515)}oe=_e}},setLocked:function(_e){K=_e},setClear:function(_e){de!==_e&&(e.clearDepth(_e),de=_e)},reset:function(){K=!1,he=null,oe=null,de=null}}}function a(){let K=!1,he=null,oe=null,de=null,_e=null,ke=null,at=null,ot=null,bt=null;return{setTest:function(Qe){K||(Qe?te(2960):Z(2960))},setMask:function(Qe){he!==Qe&&!K&&(e.stencilMask(Qe),he=Qe)},setFunc:function(Qe,At,yt){(oe!==Qe||de!==At||_e!==yt)&&(e.stencilFunc(Qe,At,yt),oe=Qe,de=At,_e=yt)},setOp:function(Qe,At,yt){(ke!==Qe||at!==At||ot!==yt)&&(e.stencilOp(Qe,At,yt),ke=Qe,at=At,ot=yt)},setLocked:function(Qe){K=Qe},setClear:function(Qe){bt!==Qe&&(e.clearStencil(Qe),bt=Qe)},reset:function(){K=!1,he=null,oe=null,de=null,_e=null,ke=null,at=null,ot=null,bt=null}}}let o=new n,l=new s,c=new a,h=new WeakMap,u=new WeakMap,d={},p={},f=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,S=null,w=null,A=null,_=null,M=!1,E=null,T=null,P=null,D=null,L=null,R=e.getParameter(35661),V=!1,F=0,O=e.getParameter(7938);O.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(O)[1]),V=F>=1):O.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),V=F>=2);let k=null,z={},N=e.getParameter(3088),j=e.getParameter(2978),Y=new pt().fromArray(N),q=new pt().fromArray(j);function X(K,he,oe){let de=new Uint8Array(4),_e=e.createTexture();e.bindTexture(K,_e),e.texParameteri(K,10241,9728),e.texParameteri(K,10240,9728);for(let ke=0;ke<oe;ke++)e.texImage2D(he+ke,0,6408,1,1,0,6408,5121,de);return _e}let G={};G[3553]=X(3553,3553,1),G[34067]=X(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),te(2929),l.setFunc(RA),Ie(!1),Oe(NO),te(2884),Te(Hr);function te(K){d[K]!==!0&&(e.enable(K),d[K]=!0)}function Z(K){d[K]!==!1&&(e.disable(K),d[K]=!1)}function Q(K,he){return p[K]!==he?(e.bindFramebuffer(K,he),p[K]=he,i&&(K===36009&&(p[36160]=he),K===36160&&(p[36009]=he)),!0):!1}function re(K,he){let oe=m,de=!1;if(K)if(oe=f.get(he),oe===void 0&&(oe=[],f.set(he,oe)),K.isWebGLMultipleRenderTargets){let _e=K.texture;if(oe.length!==_e.length||oe[0]!==36064){for(let ke=0,at=_e.length;ke<at;ke++)oe[ke]=36064+ke;oe.length=_e.length,de=!0}}else oe[0]!==36064&&(oe[0]=36064,de=!0);else oe[0]!==1029&&(oe[0]=1029,de=!0);de&&(r.isWebGL2?e.drawBuffers(oe):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(oe))}function ae(K){return g!==K?(e.useProgram(K),g=K,!0):!1}let ce={[Rh]:32774,[wse]:32778,[Sse]:32779};if(i)ce[VO]=32775,ce[GO]=32776;else{let K=t.get("EXT_blend_minmax");K!==null&&(ce[VO]=K.MIN_EXT,ce[GO]=K.MAX_EXT)}let pe={[_se]:0,[Ase]:1,[Mse]:768,[fU]:770,[Ose]:776,[Pse]:774,[Cse]:772,[Ese]:769,[mU]:771,[Dse]:775,[Tse]:773};function Te(K,he,oe,de,_e,ke,at,ot){if(K===Hr){v===!0&&(Z(3042),v=!1);return}if(v===!1&&(te(3042),v=!0),K!==bse){if(K!==y||ot!==M){if((x!==Rh||w!==Rh)&&(e.blendEquation(32774),x=Rh,w=Rh),ot)switch(K){case yd:e.blendFuncSeparate(1,771,1,771);break;case FO:e.blendFunc(1,1);break;case UO:e.blendFuncSeparate(0,769,0,1);break;case jO:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}else switch(K){case yd:e.blendFuncSeparate(770,771,1,771);break;case FO:e.blendFunc(770,1);break;case UO:e.blendFuncSeparate(0,769,0,1);break;case jO:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}b=null,S=null,A=null,_=null,y=K,M=ot}return}_e=_e||he,ke=ke||oe,at=at||de,(he!==x||_e!==w)&&(e.blendEquationSeparate(ce[he],ce[_e]),x=he,w=_e),(oe!==b||de!==S||ke!==A||at!==_)&&(e.blendFuncSeparate(pe[oe],pe[de],pe[ke],pe[at]),b=oe,S=de,A=ke,_=at),y=K,M=!1}function xe(K,he){K.side===Yn?Z(2884):te(2884);let oe=K.side===di;he&&(oe=!oe),Ie(oe),K.blending===yd&&K.transparent===!1?Te(Hr):Te(K.blending,K.blendEquation,K.blendSrc,K.blendDst,K.blendEquationAlpha,K.blendSrcAlpha,K.blendDstAlpha,K.premultipliedAlpha),l.setFunc(K.depthFunc),l.setTest(K.depthTest),l.setMask(K.depthWrite),o.setMask(K.colorWrite);let de=K.stencilWrite;c.setTest(de),de&&(c.setMask(K.stencilWriteMask),c.setFunc(K.stencilFunc,K.stencilRef,K.stencilFuncMask),c.setOp(K.stencilFail,K.stencilZFail,K.stencilZPass)),be(K.polygonOffset,K.polygonOffsetFactor,K.polygonOffsetUnits),K.alphaToCoverage===!0?te(32926):Z(32926)}function Ie(K){E!==K&&(K?e.frontFace(2304):e.frontFace(2305),E=K)}function Oe(K){K!==vse?(te(2884),K!==T&&(K===NO?e.cullFace(1029):K===yse?e.cullFace(1028):e.cullFace(1032))):Z(2884),T=K}function Se(K){K!==P&&(V&&e.lineWidth(K),P=K)}function be(K,he,oe){K?(te(32823),(D!==he||L!==oe)&&(e.polygonOffset(he,oe),D=he,L=oe)):Z(32823)}function Re(K){K?te(3089):Z(3089)}function Be(K){K===void 0&&(K=33984+R-1),k!==K&&(e.activeTexture(K),k=K)}function U(K,he,oe){oe===void 0&&(k===null?oe=33984+R-1:oe=k);let de=z[oe];de===void 0&&(de={type:void 0,texture:void 0},z[oe]=de),(de.type!==K||de.texture!==he)&&(k!==oe&&(e.activeTexture(oe),k=oe),e.bindTexture(K,he||G[K]),de.type=K,de.texture=he)}function I(){let K=z[k];K!==void 0&&K.type!==void 0&&(e.bindTexture(K.type,null),K.type=void 0,K.texture=void 0)}function ne(){try{e.compressedTexImage2D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ge(){try{e.compressedTexImage3D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ve(){try{e.texSubImage2D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ae(){try{e.texSubImage3D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ne(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Le(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function J(){try{e.texStorage2D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Fe(){try{e.texStorage3D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function We(){try{e.texImage2D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ge(){try{e.texImage3D.apply(e,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ye(K){Y.equals(K)===!1&&(e.scissor(K.x,K.y,K.z,K.w),Y.copy(K))}function Xe(K){q.equals(K)===!1&&(e.viewport(K.x,K.y,K.z,K.w),q.copy(K))}function wt(K,he){let oe=u.get(he);oe===void 0&&(oe=new WeakMap,u.set(he,oe));let de=oe.get(K);de===void 0&&(de=e.getUniformBlockIndex(he,K.name),oe.set(K,de))}function Ot(K,he){let oe=u.get(he).get(K);h.get(he)!==oe&&(e.uniformBlockBinding(he,oe,K.__bindingPointIndex),h.set(he,oe))}function er(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},k=null,z={},p={},f=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,S=null,w=null,A=null,_=null,M=!1,E=null,T=null,P=null,D=null,L=null,Y.set(0,0,e.canvas.width,e.canvas.height),q.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:te,disable:Z,bindFramebuffer:Q,drawBuffers:re,useProgram:ae,setBlending:Te,setMaterial:xe,setFlipSided:Ie,setCullFace:Oe,setLineWidth:Se,setPolygonOffset:be,setScissorTest:Re,activeTexture:Be,bindTexture:U,unbindTexture:I,compressedTexImage2D:ne,compressedTexImage3D:ge,texImage2D:We,texImage3D:Ge,updateUBOMapping:wt,uniformBlockBinding:Ot,texStorage2D:J,texStorage3D:Fe,texSubImage2D:ve,texSubImage3D:Ae,compressedTexSubImage2D:Ne,compressedTexSubImage3D:Le,scissor:Ye,viewport:Xe,reset:er}}function phe(e,t,r,i,n,s,a){let o=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,h=n.maxTextureSize,u=n.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap,m,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(U,I){return v?new OffscreenCanvas(U,I):d1("canvas")}function x(U,I,ne,ge){let ve=1;if((U.width>ge||U.height>ge)&&(ve=ge/Math.max(U.width,U.height)),ve<1||I===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){let Ae=I?h1:Math.floor,Ne=Ae(ve*U.width),Le=Ae(ve*U.height);m===void 0&&(m=y(Ne,Le));let J=ne?y(Ne,Le):m;return J.width=Ne,J.height=Le,J.getContext("2d").drawImage(U,0,0,Ne,Le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Ne+"x"+Le+")."),J}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function b(U){return UA(U.width)&&UA(U.height)}function S(U){return o?!1:U.wrapS!==Lr||U.wrapT!==Lr||U.minFilter!==ir&&U.minFilter!==xt}function w(U,I){return U.generateMipmaps&&I&&U.minFilter!==ir&&U.minFilter!==xt}function A(U){e.generateMipmap(U)}function _(U,I,ne,ge,ve=!1){if(o===!1)return I;if(U!==null){if(e[U]!==void 0)return e[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Ae=I;return I===6403&&(ne===5126&&(Ae=33326),ne===5131&&(Ae=33325),ne===5121&&(Ae=33321)),I===33319&&(ne===5126&&(Ae=33328),ne===5131&&(Ae=33327),ne===5121&&(Ae=33323)),I===6408&&(ne===5126&&(Ae=34836),ne===5131&&(Ae=34842),ne===5121&&(Ae=ge===dt&&ve===!1?35907:32856),ne===32819&&(Ae=32854),ne===32820&&(Ae=32855)),(Ae===33325||Ae===33326||Ae===33327||Ae===33328||Ae===34842||Ae===34836)&&t.get("EXT_color_buffer_float"),Ae}function M(U,I,ne){return w(U,ne)===!0||U.isFramebufferTexture&&U.minFilter!==ir&&U.minFilter!==xt?Math.log2(Math.max(I.width,I.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?I.mipmaps.length:1}function E(U){return U===ir||U===HO||U===ww?9728:9729}function T(U){let I=U.target;I.removeEventListener("dispose",T),D(I),I.isVideoTexture&&f.delete(I)}function P(U){let I=U.target;I.removeEventListener("dispose",P),R(I)}function D(U){let I=i.get(U);if(I.__webglInit===void 0)return;let ne=U.source,ge=g.get(ne);if(ge){let ve=ge[I.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&L(U),Object.keys(ge).length===0&&g.delete(ne)}i.remove(U)}function L(U){let I=i.get(U);e.deleteTexture(I.__webglTexture);let ne=U.source,ge=g.get(ne);delete ge[I.__cacheKey],a.memory.textures--}function R(U){let I=U.texture,ne=i.get(U),ge=i.get(I);if(ge.__webglTexture!==void 0&&(e.deleteTexture(ge.__webglTexture),a.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)e.deleteFramebuffer(ne.__webglFramebuffer[ve]),ne.__webglDepthbuffer&&e.deleteRenderbuffer(ne.__webglDepthbuffer[ve]);else{if(e.deleteFramebuffer(ne.__webglFramebuffer),ne.__webglDepthbuffer&&e.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let ve=0;ve<ne.__webglColorRenderbuffer.length;ve++)ne.__webglColorRenderbuffer[ve]&&e.deleteRenderbuffer(ne.__webglColorRenderbuffer[ve]);ne.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let ve=0,Ae=I.length;ve<Ae;ve++){let Ne=i.get(I[ve]);Ne.__webglTexture&&(e.deleteTexture(Ne.__webglTexture),a.memory.textures--),i.remove(I[ve])}i.remove(I),i.remove(U)}let V=0;function F(){V=0}function O(){let U=V;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),V+=1,U}function k(U){let I=[];return I.push(U.wrapS),I.push(U.wrapT),I.push(U.wrapR||0),I.push(U.magFilter),I.push(U.minFilter),I.push(U.anisotropy),I.push(U.internalFormat),I.push(U.format),I.push(U.type),I.push(U.generateMipmaps),I.push(U.premultiplyAlpha),I.push(U.flipY),I.push(U.unpackAlignment),I.push(U.encoding),I.join()}function z(U,I){let ne=i.get(U);if(U.isVideoTexture&&Re(U),U.isRenderTargetTexture===!1&&U.version>0&&ne.__version!==U.version){let ge=U.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(ne,U,I);return}}r.bindTexture(3553,ne.__webglTexture,33984+I)}function N(U,I){let ne=i.get(U);if(U.version>0&&ne.__version!==U.version){Z(ne,U,I);return}r.bindTexture(35866,ne.__webglTexture,33984+I)}function j(U,I){let ne=i.get(U);if(U.version>0&&ne.__version!==U.version){Z(ne,U,I);return}r.bindTexture(32879,ne.__webglTexture,33984+I)}function Y(U,I){let ne=i.get(U);if(U.version>0&&ne.__version!==U.version){Q(ne,U,I);return}r.bindTexture(34067,ne.__webglTexture,33984+I)}let q={[Bo]:10497,[Lr]:33071,[zA]:33648},X={[ir]:9728,[HO]:9984,[ww]:9986,[xt]:9729,[qse]:9985,[Yd]:9987};function G(U,I,ne){if(ne?(e.texParameteri(U,10242,q[I.wrapS]),e.texParameteri(U,10243,q[I.wrapT]),(U===32879||U===35866)&&e.texParameteri(U,32882,q[I.wrapR]),e.texParameteri(U,10240,X[I.magFilter]),e.texParameteri(U,10241,X[I.minFilter])):(e.texParameteri(U,10242,33071),e.texParameteri(U,10243,33071),(U===32879||U===35866)&&e.texParameteri(U,32882,33071),(I.wrapS!==Lr||I.wrapT!==Lr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(U,10240,E(I.magFilter)),e.texParameteri(U,10241,E(I.minFilter)),I.minFilter!==ir&&I.minFilter!==xt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let ge=t.get("EXT_texture_filter_anisotropic");if(I.magFilter===ir||I.minFilter!==ww&&I.minFilter!==Yd||I.type===Qn&&t.has("OES_texture_float_linear")===!1||o===!1&&I.type===Qd&&t.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(e.texParameterf(U,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,n.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function te(U,I){let ne=!1;U.__webglInit===void 0&&(U.__webglInit=!0,I.addEventListener("dispose",T));let ge=I.source,ve=g.get(ge);ve===void 0&&(ve={},g.set(ge,ve));let Ae=k(I);if(Ae!==U.__cacheKey){ve[Ae]===void 0&&(ve[Ae]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,ne=!0),ve[Ae].usedTimes++;let Ne=ve[U.__cacheKey];Ne!==void 0&&(ve[U.__cacheKey].usedTimes--,Ne.usedTimes===0&&L(I)),U.__cacheKey=Ae,U.__webglTexture=ve[Ae].texture}return ne}function Z(U,I,ne){let ge=3553;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(ge=35866),I.isData3DTexture&&(ge=32879);let ve=te(U,I),Ae=I.source;r.bindTexture(ge,U.__webglTexture,33984+ne);let Ne=i.get(Ae);if(Ae.version!==Ne.__version||ve===!0){r.activeTexture(33984+ne),e.pixelStorei(37440,I.flipY),e.pixelStorei(37441,I.premultiplyAlpha),e.pixelStorei(3317,I.unpackAlignment),e.pixelStorei(37443,0);let Le=S(I)&&b(I.image)===!1,J=x(I.image,Le,!1,h);J=Be(I,J);let Fe=b(J)||o,We=s.convert(I.format,I.encoding),Ge=s.convert(I.type),Ye=_(I.internalFormat,We,Ge,I.encoding,I.isVideoTexture);G(ge,I,Fe);let Xe,wt=I.mipmaps,Ot=o&&I.isVideoTexture!==!0,er=Ne.__version===void 0||ve===!0,K=M(I,J,Fe);if(I.isDepthTexture)Ye=6402,o?I.type===Qn?Ye=36012:I.type===Bl?Ye=33190:I.type===mu?Ye=35056:Ye=33189:I.type===Qn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===gu&&Ye===6402&&I.type!==yU&&I.type!==Bl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Bl,Ge=s.convert(I.type)),I.format===Lu&&Ye===6402&&(Ye=34041,I.type!==mu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=mu,Ge=s.convert(I.type))),er&&(Ot?r.texStorage2D(3553,1,Ye,J.width,J.height):r.texImage2D(3553,0,Ye,J.width,J.height,0,We,Ge,null));else if(I.isDataTexture)if(wt.length>0&&Fe){Ot&&er&&r.texStorage2D(3553,K,Ye,wt[0].width,wt[0].height);for(let he=0,oe=wt.length;he<oe;he++)Xe=wt[he],Ot?r.texSubImage2D(3553,he,0,0,Xe.width,Xe.height,We,Ge,Xe.data):r.texImage2D(3553,he,Ye,Xe.width,Xe.height,0,We,Ge,Xe.data);I.generateMipmaps=!1}else Ot?(er&&r.texStorage2D(3553,K,Ye,J.width,J.height),r.texSubImage2D(3553,0,0,0,J.width,J.height,We,Ge,J.data)):r.texImage2D(3553,0,Ye,J.width,J.height,0,We,Ge,J.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){Ot&&er&&r.texStorage3D(35866,K,Ye,wt[0].width,wt[0].height,J.depth);for(let he=0,oe=wt.length;he<oe;he++)Xe=wt[he],I.format!==_s?We!==null?Ot?r.compressedTexSubImage3D(35866,he,0,0,0,Xe.width,Xe.height,J.depth,We,Xe.data,0,0):r.compressedTexImage3D(35866,he,Ye,Xe.width,Xe.height,J.depth,0,Xe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ot?r.texSubImage3D(35866,he,0,0,0,Xe.width,Xe.height,J.depth,We,Ge,Xe.data):r.texImage3D(35866,he,Ye,Xe.width,Xe.height,J.depth,0,We,Ge,Xe.data)}else{Ot&&er&&r.texStorage2D(3553,K,Ye,wt[0].width,wt[0].height);for(let he=0,oe=wt.length;he<oe;he++)Xe=wt[he],I.format!==_s?We!==null?Ot?r.compressedTexSubImage2D(3553,he,0,0,Xe.width,Xe.height,We,Xe.data):r.compressedTexImage2D(3553,he,Ye,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ot?r.texSubImage2D(3553,he,0,0,Xe.width,Xe.height,We,Ge,Xe.data):r.texImage2D(3553,he,Ye,Xe.width,Xe.height,0,We,Ge,Xe.data)}else if(I.isDataArrayTexture)Ot?(er&&r.texStorage3D(35866,K,Ye,J.width,J.height,J.depth),r.texSubImage3D(35866,0,0,0,0,J.width,J.height,J.depth,We,Ge,J.data)):r.texImage3D(35866,0,Ye,J.width,J.height,J.depth,0,We,Ge,J.data);else if(I.isData3DTexture)Ot?(er&&r.texStorage3D(32879,K,Ye,J.width,J.height,J.depth),r.texSubImage3D(32879,0,0,0,0,J.width,J.height,J.depth,We,Ge,J.data)):r.texImage3D(32879,0,Ye,J.width,J.height,J.depth,0,We,Ge,J.data);else if(I.isFramebufferTexture){if(er)if(Ot)r.texStorage2D(3553,K,Ye,J.width,J.height);else{let he=J.width,oe=J.height;for(let de=0;de<K;de++)r.texImage2D(3553,de,Ye,he,oe,0,We,Ge,null),he>>=1,oe>>=1}}else if(wt.length>0&&Fe){Ot&&er&&r.texStorage2D(3553,K,Ye,wt[0].width,wt[0].height);for(let he=0,oe=wt.length;he<oe;he++)Xe=wt[he],Ot?r.texSubImage2D(3553,he,0,0,We,Ge,Xe):r.texImage2D(3553,he,Ye,We,Ge,Xe);I.generateMipmaps=!1}else Ot?(er&&r.texStorage2D(3553,K,Ye,J.width,J.height),r.texSubImage2D(3553,0,0,0,We,Ge,J)):r.texImage2D(3553,0,Ye,We,Ge,J);w(I,Fe)&&A(ge),Ne.__version=Ae.version,I.onUpdate&&I.onUpdate(I)}U.__version=I.version}function Q(U,I,ne){if(I.image.length!==6)return;let ge=te(U,I),ve=I.source;r.bindTexture(34067,U.__webglTexture,33984+ne);let Ae=i.get(ve);if(ve.version!==Ae.__version||ge===!0){r.activeTexture(33984+ne),e.pixelStorei(37440,I.flipY),e.pixelStorei(37441,I.premultiplyAlpha),e.pixelStorei(3317,I.unpackAlignment),e.pixelStorei(37443,0);let Ne=I.isCompressedTexture||I.image[0].isCompressedTexture,Le=I.image[0]&&I.image[0].isDataTexture,J=[];for(let he=0;he<6;he++)!Ne&&!Le?J[he]=x(I.image[he],!1,!0,c):J[he]=Le?I.image[he].image:I.image[he],J[he]=Be(I,J[he]);let Fe=J[0],We=b(Fe)||o,Ge=s.convert(I.format,I.encoding),Ye=s.convert(I.type),Xe=_(I.internalFormat,Ge,Ye,I.encoding),wt=o&&I.isVideoTexture!==!0,Ot=Ae.__version===void 0||ge===!0,er=M(I,Fe,We);G(34067,I,We);let K;if(Ne){wt&&Ot&&r.texStorage2D(34067,er,Xe,Fe.width,Fe.height);for(let he=0;he<6;he++){K=J[he].mipmaps;for(let oe=0;oe<K.length;oe++){let de=K[oe];I.format!==_s?Ge!==null?wt?r.compressedTexSubImage2D(34069+he,oe,0,0,de.width,de.height,Ge,de.data):r.compressedTexImage2D(34069+he,oe,Xe,de.width,de.height,0,de.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wt?r.texSubImage2D(34069+he,oe,0,0,de.width,de.height,Ge,Ye,de.data):r.texImage2D(34069+he,oe,Xe,de.width,de.height,0,Ge,Ye,de.data)}}}else{K=I.mipmaps,wt&&Ot&&(K.length>0&&er++,r.texStorage2D(34067,er,Xe,J[0].width,J[0].height));for(let he=0;he<6;he++)if(Le){wt?r.texSubImage2D(34069+he,0,0,0,J[he].width,J[he].height,Ge,Ye,J[he].data):r.texImage2D(34069+he,0,Xe,J[he].width,J[he].height,0,Ge,Ye,J[he].data);for(let oe=0;oe<K.length;oe++){let de=K[oe].image[he].image;wt?r.texSubImage2D(34069+he,oe+1,0,0,de.width,de.height,Ge,Ye,de.data):r.texImage2D(34069+he,oe+1,Xe,de.width,de.height,0,Ge,Ye,de.data)}}else{wt?r.texSubImage2D(34069+he,0,0,0,Ge,Ye,J[he]):r.texImage2D(34069+he,0,Xe,Ge,Ye,J[he]);for(let oe=0;oe<K.length;oe++){let de=K[oe];wt?r.texSubImage2D(34069+he,oe+1,0,0,Ge,Ye,de.image[he]):r.texImage2D(34069+he,oe+1,Xe,Ge,Ye,de.image[he])}}}w(I,We)&&A(34067),Ae.__version=ve.version,I.onUpdate&&I.onUpdate(I)}U.__version=I.version}function re(U,I,ne,ge,ve){let Ae=s.convert(ne.format,ne.encoding),Ne=s.convert(ne.type),Le=_(ne.internalFormat,Ae,Ne,ne.encoding);i.get(I).__hasExternalTextures||(ve===32879||ve===35866?r.texImage3D(ve,0,Le,I.width,I.height,I.depth,0,Ae,Ne,null):r.texImage2D(ve,0,Le,I.width,I.height,0,Ae,Ne,null)),r.bindFramebuffer(36160,U),be(I)?d.framebufferTexture2DMultisampleEXT(36160,ge,ve,i.get(ne).__webglTexture,0,Se(I)):(ve===3553||ve>=34069&&ve<=34074)&&e.framebufferTexture2D(36160,ge,ve,i.get(ne).__webglTexture,0),r.bindFramebuffer(36160,null)}function ae(U,I,ne){if(e.bindRenderbuffer(36161,U),I.depthBuffer&&!I.stencilBuffer){let ge=33189;if(ne||be(I)){let ve=I.depthTexture;ve&&ve.isDepthTexture&&(ve.type===Qn?ge=36012:ve.type===Bl&&(ge=33190));let Ae=Se(I);be(I)?d.renderbufferStorageMultisampleEXT(36161,Ae,ge,I.width,I.height):e.renderbufferStorageMultisample(36161,Ae,ge,I.width,I.height)}else e.renderbufferStorage(36161,ge,I.width,I.height);e.framebufferRenderbuffer(36160,36096,36161,U)}else if(I.depthBuffer&&I.stencilBuffer){let ge=Se(I);ne&&be(I)===!1?e.renderbufferStorageMultisample(36161,ge,35056,I.width,I.height):be(I)?d.renderbufferStorageMultisampleEXT(36161,ge,35056,I.width,I.height):e.renderbufferStorage(36161,34041,I.width,I.height),e.framebufferRenderbuffer(36160,33306,36161,U)}else{let ge=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let ve=0;ve<ge.length;ve++){let Ae=ge[ve],Ne=s.convert(Ae.format,Ae.encoding),Le=s.convert(Ae.type),J=_(Ae.internalFormat,Ne,Le,Ae.encoding),Fe=Se(I);ne&&be(I)===!1?e.renderbufferStorageMultisample(36161,Fe,J,I.width,I.height):be(I)?d.renderbufferStorageMultisampleEXT(36161,Fe,J,I.width,I.height):e.renderbufferStorage(36161,J,I.width,I.height)}}e.bindRenderbuffer(36161,null)}function ce(U,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,U),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),z(I.depthTexture,0);let ne=i.get(I.depthTexture).__webglTexture,ge=Se(I);if(I.depthTexture.format===gu)be(I)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,ne,0,ge):e.framebufferTexture2D(36160,36096,3553,ne,0);else if(I.depthTexture.format===Lu)be(I)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,ne,0,ge):e.framebufferTexture2D(36160,33306,3553,ne,0);else throw new Error("Unknown depthTexture format")}function pe(U){let I=i.get(U),ne=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!I.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");ce(I.__webglFramebuffer,U)}else if(ne){I.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)r.bindFramebuffer(36160,I.__webglFramebuffer[ge]),I.__webglDepthbuffer[ge]=e.createRenderbuffer(),ae(I.__webglDepthbuffer[ge],U,!1)}else r.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=e.createRenderbuffer(),ae(I.__webglDepthbuffer,U,!1);r.bindFramebuffer(36160,null)}function Te(U,I,ne){let ge=i.get(U);I!==void 0&&re(ge.__webglFramebuffer,U,U.texture,36064,3553),ne!==void 0&&pe(U)}function xe(U){let I=U.texture,ne=i.get(U),ge=i.get(I);U.addEventListener("dispose",P),U.isWebGLMultipleRenderTargets!==!0&&(ge.__webglTexture===void 0&&(ge.__webglTexture=e.createTexture()),ge.__version=I.version,a.memory.textures++);let ve=U.isWebGLCubeRenderTarget===!0,Ae=U.isWebGLMultipleRenderTargets===!0,Ne=b(U)||o;if(ve){ne.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)ne.__webglFramebuffer[Le]=e.createFramebuffer()}else{if(ne.__webglFramebuffer=e.createFramebuffer(),Ae)if(n.drawBuffers){let Le=U.texture;for(let J=0,Fe=Le.length;J<Fe;J++){let We=i.get(Le[J]);We.__webglTexture===void 0&&(We.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&U.samples>0&&be(U)===!1){let Le=Ae?I:[I];ne.__webglMultisampledFramebuffer=e.createFramebuffer(),ne.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,ne.__webglMultisampledFramebuffer);for(let J=0;J<Le.length;J++){let Fe=Le[J];ne.__webglColorRenderbuffer[J]=e.createRenderbuffer(),e.bindRenderbuffer(36161,ne.__webglColorRenderbuffer[J]);let We=s.convert(Fe.format,Fe.encoding),Ge=s.convert(Fe.type),Ye=_(Fe.internalFormat,We,Ge,Fe.encoding,U.isXRRenderTarget===!0),Xe=Se(U);e.renderbufferStorageMultisample(36161,Xe,Ye,U.width,U.height),e.framebufferRenderbuffer(36160,36064+J,36161,ne.__webglColorRenderbuffer[J])}e.bindRenderbuffer(36161,null),U.depthBuffer&&(ne.__webglDepthRenderbuffer=e.createRenderbuffer(),ae(ne.__webglDepthRenderbuffer,U,!0)),r.bindFramebuffer(36160,null)}}if(ve){r.bindTexture(34067,ge.__webglTexture),G(34067,I,Ne);for(let Le=0;Le<6;Le++)re(ne.__webglFramebuffer[Le],U,I,36064,34069+Le);w(I,Ne)&&A(34067),r.unbindTexture()}else if(Ae){let Le=U.texture;for(let J=0,Fe=Le.length;J<Fe;J++){let We=Le[J],Ge=i.get(We);r.bindTexture(3553,Ge.__webglTexture),G(3553,We,Ne),re(ne.__webglFramebuffer,U,We,36064+J,3553),w(We,Ne)&&A(3553)}r.unbindTexture()}else{let Le=3553;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(o?Le=U.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(Le,ge.__webglTexture),G(Le,I,Ne),re(ne.__webglFramebuffer,U,I,36064,Le),w(I,Ne)&&A(Le),r.unbindTexture()}U.depthBuffer&&pe(U)}function Ie(U){let I=b(U)||o,ne=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let ge=0,ve=ne.length;ge<ve;ge++){let Ae=ne[ge];if(w(Ae,I)){let Ne=U.isWebGLCubeRenderTarget?34067:3553,Le=i.get(Ae).__webglTexture;r.bindTexture(Ne,Le),A(Ne),r.unbindTexture()}}}function Oe(U){if(o&&U.samples>0&&be(U)===!1){let I=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],ne=U.width,ge=U.height,ve=16384,Ae=[],Ne=U.stencilBuffer?33306:36096,Le=i.get(U),J=U.isWebGLMultipleRenderTargets===!0;if(J)for(let Fe=0;Fe<I.length;Fe++)r.bindFramebuffer(36160,Le.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Fe,36161,null),r.bindFramebuffer(36160,Le.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Fe,3553,null,0);r.bindFramebuffer(36008,Le.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,Le.__webglFramebuffer);for(let Fe=0;Fe<I.length;Fe++){Ae.push(36064+Fe),U.depthBuffer&&Ae.push(Ne);let We=Le.__ignoreDepthValues!==void 0?Le.__ignoreDepthValues:!1;if(We===!1&&(U.depthBuffer&&(ve|=256),U.stencilBuffer&&(ve|=1024)),J&&e.framebufferRenderbuffer(36008,36064,36161,Le.__webglColorRenderbuffer[Fe]),We===!0&&(e.invalidateFramebuffer(36008,[Ne]),e.invalidateFramebuffer(36009,[Ne])),J){let Ge=i.get(I[Fe]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,Ge,0)}e.blitFramebuffer(0,0,ne,ge,0,0,ne,ge,ve,9728),p&&e.invalidateFramebuffer(36008,Ae)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),J)for(let Fe=0;Fe<I.length;Fe++){r.bindFramebuffer(36160,Le.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Fe,36161,Le.__webglColorRenderbuffer[Fe]);let We=i.get(I[Fe]).__webglTexture;r.bindFramebuffer(36160,Le.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Fe,3553,We,0)}r.bindFramebuffer(36009,Le.__webglMultisampledFramebuffer)}}function Se(U){return Math.min(u,U.samples)}function be(U){let I=i.get(U);return o&&U.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Re(U){let I=a.render.frame;f.get(U)!==I&&(f.set(U,I),U.update())}function Be(U,I){let ne=U.encoding,ge=U.format,ve=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||U.format===FA||ne!==Qa&&(ne===dt?o===!1?t.has("EXT_sRGB")===!0&&ge===_s?(U.format=FA,U.minFilter=xt,U.generateMipmaps=!1):I=EU.sRGBToLinear(I):(ge!==_s||ve!==Vi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ne)),I}this.allocateTextureUnit=O,this.resetTextureUnits=F,this.setTexture2D=z,this.setTexture2DArray=N,this.setTexture3D=j,this.setTextureCube=Y,this.rebindTextures=Te,this.setupRenderTarget=xe,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=Oe,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=re,this.useMultisampledRTT=be}function fhe(e,t,r){let i=r.isWebGL2;function n(s,a=null){let o;if(s===Vi)return 5121;if(s===Qse)return 32819;if(s===Kse)return 32820;if(s===$se)return 5120;if(s===Xse)return 5122;if(s===yU)return 5123;if(s===Yse)return 5124;if(s===Bl)return 5125;if(s===Qn)return 5126;if(s===Qd)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===Zse)return 6406;if(s===_s)return 6408;if(s===Jse)return 6409;if(s===eae)return 6410;if(s===gu)return 6402;if(s===Lu)return 34041;if(s===FA)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===tae)return 6403;if(s===rae)return 36244;if(s===xU)return 33319;if(s===iae)return 33320;if(s===nae)return 36249;if(s===Sw||s===_w||s===Aw||s===Mw)if(a===dt)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===Sw)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===_w)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Aw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Mw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Sw)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===_w)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Aw)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Mw)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===WO||s===qO||s===$O||s===XO)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===WO)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===qO)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$O)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===XO)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===sae)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===YO||s===QO)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(s===YO)return a===dt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===QO)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===KO||s===ZO||s===JO||s===eL||s===tL||s===rL||s===iL||s===nL||s===sL||s===aL||s===oL||s===lL||s===cL||s===uL)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(s===KO)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ZO)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===JO)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===eL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===tL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===rL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===iL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===nL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===sL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===aL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===oL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===lL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===cL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===uL)return a===dt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Ew)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(s===Ew)return a===dt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===aae||s===hL||s===dL||s===pL)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(s===Ew)return o.COMPRESSED_RED_RGTC1_EXT;if(s===hL)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===dL)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===pL)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===mu?i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[s]!==void 0?e[s]:null}return{convert:n}}var mhe=class extends ki{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},sd=class extends Yt{constructor(){super(),this.isGroup=!0,this.type="Group"}},ghe={type:"move"},Zw=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let f of e.hand.values()){let m=t.getJointPose(f,r),g=this._getHandJoint(l,f);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}let c=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],u=c.position.distanceTo(h.position),d=.02,p=.005;l.inputState.pinching&&u>d+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&u<=d-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&n!==null&&(i=n),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ghe)))}return a!==null&&(a.visible=i!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new sd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},Zd=class extends Jr{constructor(e,t,r,i,n,s,a,o,l,c){if(c=c!==void 0?c:gu,c!==gu&&c!==Lu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===gu&&(r=Bl),r===void 0&&c===Lu&&(r=mu),super(null,i,n,s,a,o,c,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ir,this.minFilter=o!==void 0?o:ir,this.flipY=!1,this.generateMipmaps=!1}},vhe=class extends Ti{constructor(e,t){super();let r=this,i=null,n=1,s=null,a="local-floor",o=1,l=null,c=null,h=null,u=null,d=null,p=null,f=t.getContextAttributes(),m=null,g=null,v=[],y=[],x=new Set,b=new Map,S=new ki;S.layers.enable(1),S.viewport=new pt;let w=new ki;w.layers.enable(2),w.viewport=new pt;let A=[S,w],_=new mhe;_.layers.enable(1),_.layers.enable(2);let M=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(N){let j=v[N];return j===void 0&&(j=new Zw,v[N]=j),j.getTargetRaySpace()},this.getControllerGrip=function(N){let j=v[N];return j===void 0&&(j=new Zw,v[N]=j),j.getGripSpace()},this.getHand=function(N){let j=v[N];return j===void 0&&(j=new Zw,v[N]=j),j.getHandSpace()};function T(N){let j=y.indexOf(N.inputSource);if(j===-1)return;let Y=v[j];Y!==void 0&&Y.dispatchEvent({type:N.type,data:N.inputSource})}function P(){i.removeEventListener("select",T),i.removeEventListener("selectstart",T),i.removeEventListener("selectend",T),i.removeEventListener("squeeze",T),i.removeEventListener("squeezestart",T),i.removeEventListener("squeezeend",T),i.removeEventListener("end",P),i.removeEventListener("inputsourceschange",D);for(let N=0;N<v.length;N++){let j=y[N];j!==null&&(y[N]=null,v[N].disconnect(j))}M=null,E=null,e.setRenderTarget(m),d=null,u=null,h=null,i=null,g=null,z.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(N){n=N,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(N){a=N,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(N){l=N},this.getBaseLayer=function(){return u!==null?u:d},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(N){if(i=N,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",T),i.addEventListener("selectstart",T),i.addEventListener("selectend",T),i.addEventListener("squeeze",T),i.addEventListener("squeezestart",T),i.addEventListener("squeezeend",T),i.addEventListener("end",P),i.addEventListener("inputsourceschange",D),f.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let j={antialias:i.renderState.layers===void 0?f.antialias:!0,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:n};d=new XRWebGLLayer(i,t,j),i.updateRenderState({baseLayer:d}),g=new $t(d.framebufferWidth,d.framebufferHeight,{format:_s,type:Vi,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let j=null,Y=null,q=null;f.depth&&(q=f.stencil?35056:33190,j=f.stencil?Lu:gu,Y=f.stencil?mu:Bl);let X={colorFormat:32856,depthFormat:q,scaleFactor:n};h=new XRWebGLBinding(i,t),u=h.createProjectionLayer(X),i.updateRenderState({layers:[u]}),g=new $t(u.textureWidth,u.textureHeight,{format:_s,type:Vi,depthTexture:new Zd(u.textureWidth,u.textureHeight,Y,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});let G=e.properties.get(g);G.__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),z.setContext(i),z.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function D(N){for(let j=0;j<N.removed.length;j++){let Y=N.removed[j],q=y.indexOf(Y);q>=0&&(y[q]=null,v[q].disconnect(Y))}for(let j=0;j<N.added.length;j++){let Y=N.added[j],q=y.indexOf(Y);if(q===-1){for(let G=0;G<v.length;G++)if(G>=y.length){y.push(Y),q=G;break}else if(y[G]===null){y[G]=Y,q=G;break}if(q===-1)break}let X=v[q];X&&X.connect(Y)}}let L=new C,R=new C;function V(N,j,Y){L.setFromMatrixPosition(j.matrixWorld),R.setFromMatrixPosition(Y.matrixWorld);let q=L.distanceTo(R),X=j.projectionMatrix.elements,G=Y.projectionMatrix.elements,te=X[14]/(X[10]-1),Z=X[14]/(X[10]+1),Q=(X[9]+1)/X[5],re=(X[9]-1)/X[5],ae=(X[8]-1)/X[0],ce=(G[8]+1)/G[0],pe=te*ae,Te=te*ce,xe=q/(-ae+ce),Ie=xe*-ae;j.matrixWorld.decompose(N.position,N.quaternion,N.scale),N.translateX(Ie),N.translateZ(xe),N.matrixWorld.compose(N.position,N.quaternion,N.scale),N.matrixWorldInverse.copy(N.matrixWorld).invert();let Oe=te+xe,Se=Z+xe,be=pe-Ie,Re=Te+(q-Ie),Be=Q*Z/Se*Oe,U=re*Z/Se*Oe;N.projectionMatrix.makePerspective(be,Re,Be,U,Oe,Se)}function F(N,j){j===null?N.matrixWorld.copy(N.matrix):N.matrixWorld.multiplyMatrices(j.matrixWorld,N.matrix),N.matrixWorldInverse.copy(N.matrixWorld).invert()}this.updateCamera=function(N){if(i===null)return;_.near=w.near=S.near=N.near,_.far=w.far=S.far=N.far,(M!==_.near||E!==_.far)&&(i.updateRenderState({depthNear:_.near,depthFar:_.far}),M=_.near,E=_.far);let j=N.parent,Y=_.cameras;F(_,j);for(let X=0;X<Y.length;X++)F(Y[X],j);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),N.matrix.copy(_.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale);let q=N.children;for(let X=0,G=q.length;X<G;X++)q[X].updateMatrixWorld(!0);Y.length===2?V(_,S,w):_.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){if(!(u===null&&d===null))return o},this.setFoveation=function(N){o=N,u!==null&&(u.fixedFoveation=N),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=N)},this.getPlanes=function(){return x};let O=null;function k(N,j){if(c=j.getViewerPose(l||s),p=j,c!==null){let Y=c.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let q=!1;Y.length!==_.cameras.length&&(_.cameras.length=0,q=!0);for(let X=0;X<Y.length;X++){let G=Y[X],te=null;if(d!==null)te=d.getViewport(G);else{let Q=h.getViewSubImage(u,G);te=Q.viewport,X===0&&(e.setRenderTargetTextures(g,Q.colorTexture,u.ignoreDepthValues?void 0:Q.depthStencilTexture),e.setRenderTarget(g))}let Z=A[X];Z===void 0&&(Z=new ki,Z.layers.enable(X),Z.viewport=new pt,A[X]=Z),Z.matrix.fromArray(G.transform.matrix),Z.projectionMatrix.fromArray(G.projectionMatrix),Z.viewport.set(te.x,te.y,te.width,te.height),X===0&&_.matrix.copy(Z.matrix),q===!0&&_.cameras.push(Z)}}for(let Y=0;Y<v.length;Y++){let q=y[Y],X=v[Y];q!==null&&X!==void 0&&X.update(q,j,l||s)}if(O&&O(N,j),j.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:j.detectedPlanes});let Y=null;for(let q of x)j.detectedPlanes.has(q)||(Y===null&&(Y=[]),Y.push(q));if(Y!==null)for(let q of Y)x.delete(q),b.delete(q),r.dispatchEvent({type:"planeremoved",data:q});for(let q of j.detectedPlanes)if(!x.has(q))x.add(q),b.set(q,j.lastChangedTime),r.dispatchEvent({type:"planeadded",data:q});else{let X=b.get(q);q.lastChangedTime>X&&(b.set(q,q.lastChangedTime),r.dispatchEvent({type:"planechanged",data:q}))}}p=null}let z=new OU;z.setAnimationLoop(k),this.setAnimationLoop=function(N){O=N},this.dispose=function(){}}};function yhe(e,t){function r(m,g){g.color.getRGB(m.fogColor.value,DU(e)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?n(m,g):g.isMeshToonMaterial?(n(m,g),h(m,g)):g.isMeshPhongMaterial?(n(m,g),c(m,g)):g.isMeshStandardMaterial?(n(m,g),u(m,g),g.isMeshPhysicalMaterial&&d(m,g,x)):g.isMeshMatcapMaterial?(n(m,g),p(m,g)):g.isMeshDepthMaterial?n(m,g):g.isMeshDistanceMaterial?(n(m,g),f(m,g)):g.isMeshNormalMaterial?n(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?o(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function n(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===di&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===di&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v=t.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;let b=e.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function o(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function h(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===di&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}function f(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function xhe(e,t,r,i){let n={},s={},a=[],o=r.isWebGL2?e.getParameter(35375):0;function l(y,x){let b=x.program;i.uniformBlockBinding(y,b)}function c(y,x){let b=n[y.id];b===void 0&&(f(y),b=h(y),n[y.id]=b,y.addEventListener("dispose",g));let S=x.program;i.updateUBOMapping(y,S);let w=t.render.frame;s[y.id]!==w&&(d(y),s[y.id]=w)}function h(y){let x=u();y.__bindingPointIndex=x;let b=e.createBuffer(),S=y.__size,w=y.usage;return e.bindBuffer(35345,b),e.bufferData(35345,S,w),e.bindBuffer(35345,null),e.bindBufferBase(35345,x,b),b}function u(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){let x=n[y.id],b=y.uniforms,S=y.__cache;e.bindBuffer(35345,x);for(let w=0,A=b.length;w<A;w++){let _=b[w];if(p(_,w,S)===!0){let M=_.__offset,E=Array.isArray(_.value)?_.value:[_.value],T=0;for(let P=0;P<E.length;P++){let D=E[P],L=m(D);typeof D=="number"?(_.__data[0]=D,e.bufferSubData(35345,M+T,_.__data)):D.isMatrix3?(_.__data[0]=D.elements[0],_.__data[1]=D.elements[1],_.__data[2]=D.elements[2],_.__data[3]=D.elements[0],_.__data[4]=D.elements[3],_.__data[5]=D.elements[4],_.__data[6]=D.elements[5],_.__data[7]=D.elements[0],_.__data[8]=D.elements[6],_.__data[9]=D.elements[7],_.__data[10]=D.elements[8],_.__data[11]=D.elements[0]):(D.toArray(_.__data,T),T+=L.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,M,_.__data)}}e.bindBuffer(35345,null)}function p(y,x,b){let S=y.value;if(b[x]===void 0){if(typeof S=="number")b[x]=S;else{let w=Array.isArray(S)?S:[S],A=[];for(let _=0;_<w.length;_++)A.push(w[_].clone());b[x]=A}return!0}else if(typeof S=="number"){if(b[x]!==S)return b[x]=S,!0}else{let w=Array.isArray(b[x])?b[x]:[b[x]],A=Array.isArray(S)?S:[S];for(let _=0;_<w.length;_++){let M=w[_];if(M.equals(A[_])===!1)return M.copy(A[_]),!0}}return!1}function f(y){let x=y.uniforms,b=0,S=16,w=0;for(let A=0,_=x.length;A<_;A++){let M=x[A],E={boundary:0,storage:0},T=Array.isArray(M.value)?M.value:[M.value];for(let P=0,D=T.length;P<D;P++){let L=T[P],R=m(L);E.boundary+=R.boundary,E.storage+=R.storage}if(M.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=b,A>0){w=b%S;let P=S-w;w!==0&&P-E.boundary<0&&(b+=S-w,M.__offset=b)}b+=E.storage}return w=b%S,w>0&&(b+=S-w),y.__size=b,y.__cache={},this}function m(y){let x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){let x=y.target;x.removeEventListener("dispose",g);let b=a.indexOf(x.__bindingPointIndex);a.splice(b,1),e.deleteBuffer(n[x.id]),delete n[x.id],delete s[x.id]}function v(){for(let y in n)e.deleteBuffer(n[y]);a=[],n={},s={}}return{bind:l,update:c,dispose:v}}function bhe(){let e=d1("canvas");return e.style.display="block",e}function zU(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:bhe(),r=e.context!==void 0?e.context:null,i=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",c=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,h;r!==null?h=r.getContextAttributes().alpha:h=e.alpha!==void 0?e.alpha:!1;let u=null,d=null,p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Qa,this.physicallyCorrectLights=!1,this.toneMapping=jo,this.toneMappingExposure=1;let m=this,g=!1,v=0,y=0,x=null,b=-1,S=null,w=new pt,A=new pt,_=null,M=t.width,E=t.height,T=1,P=null,D=null,L=new pt(0,0,M,E),R=new pt(0,0,M,E),V=!1,F=new jC,O=!1,k=!1,z=null,N=new we,j=new $,Y=new C,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return x===null?T:1}let G=r;function te(B,ee){for(let ue=0;ue<B.length;ue++){let ie=B[ue],fe=t.getContext(ie,ee);if(fe!==null)return fe}return null}try{let B={alpha:!0,depth:i,stencil:n,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${vp}`),t.addEventListener("webglcontextlost",Ye,!1),t.addEventListener("webglcontextrestored",Xe,!1),t.addEventListener("webglcontextcreationerror",wt,!1),G===null){let ee=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&ee.shift(),G=te(ee,B),G===null)throw te(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let Z,Q,re,ae,ce,pe,Te,xe,Ie,Oe,Se,be,Re,Be,U,I,ne,ge,ve,Ae,Ne,Le,J,Fe;function We(){Z=new Ice(G),Q=new Cce(G,Z,e),Z.init(Q),Le=new fhe(G,Z,Q),re=new dhe(G,Z,Q),ae=new kce,ce=new Jue,pe=new phe(G,Z,re,ce,Q,Le,ae),Te=new Pce(m),xe=new Lce(m),Ie=new Wae(G,Q),J=new Mce(G,Z,Ie,Q),Oe=new Rce(G,Ie,ae,J),Se=new Uce(G,Oe,Ie,ae),ve=new Fce(G,Q,pe),I=new Tce(ce),be=new Zue(m,Te,xe,Z,Q,J,I),Re=new yhe(m,ce),Be=new the,U=new ohe(Z,Q),ge=new Ace(m,Te,xe,re,Se,h,a),ne=new hhe(m,Se,Q),Fe=new xhe(G,ae,Q,re),Ae=new Ece(G,Z,ae,Q),Ne=new Bce(G,Z,ae,Q),ae.programs=be.programs,m.capabilities=Q,m.extensions=Z,m.properties=ce,m.renderLists=Be,m.shadowMap=ne,m.state=re,m.info=ae}We();let Ge=new vhe(m,G);this.xr=Ge,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){let B=Z.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){let B=Z.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(B){B!==void 0&&(T=B,this.setSize(M,E,!1))},this.getSize=function(B){return B.set(M,E)},this.setSize=function(B,ee,ue){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=B,E=ee,t.width=Math.floor(B*T),t.height=Math.floor(ee*T),ue!==!1&&(t.style.width=B+"px",t.style.height=ee+"px"),this.setViewport(0,0,B,ee)},this.getDrawingBufferSize=function(B){return B.set(M*T,E*T).floor()},this.setDrawingBufferSize=function(B,ee,ue){M=B,E=ee,T=ue,t.width=Math.floor(B*ue),t.height=Math.floor(ee*ue),this.setViewport(0,0,B,ee)},this.getCurrentViewport=function(B){return B.copy(w)},this.getViewport=function(B){return B.copy(L)},this.setViewport=function(B,ee,ue,ie){B.isVector4?L.set(B.x,B.y,B.z,B.w):L.set(B,ee,ue,ie),re.viewport(w.copy(L).multiplyScalar(T).floor())},this.getScissor=function(B){return B.copy(R)},this.setScissor=function(B,ee,ue,ie){B.isVector4?R.set(B.x,B.y,B.z,B.w):R.set(B,ee,ue,ie),re.scissor(A.copy(R).multiplyScalar(T).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(B){re.setScissorTest(V=B)},this.setOpaqueSort=function(B){P=B},this.setTransparentSort=function(B){D=B},this.getClearColor=function(B){return B.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor.apply(ge,arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha.apply(ge,arguments)},this.clear=function(B=!0,ee=!0,ue=!0){let ie=0;B&&(ie|=16384),ee&&(ie|=256),ue&&(ie|=1024),G.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ye,!1),t.removeEventListener("webglcontextrestored",Xe,!1),t.removeEventListener("webglcontextcreationerror",wt,!1),Be.dispose(),U.dispose(),ce.dispose(),Te.dispose(),xe.dispose(),Se.dispose(),J.dispose(),Fe.dispose(),be.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",de),Ge.removeEventListener("sessionend",_e),z&&(z.dispose(),z=null),ke.stop()};function Ye(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Xe(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let B=ae.autoReset,ee=ne.enabled,ue=ne.autoUpdate,ie=ne.needsUpdate,fe=ne.type;We(),ae.autoReset=B,ne.enabled=ee,ne.autoUpdate=ue,ne.needsUpdate=ie,ne.type=fe}function wt(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Ot(B){let ee=B.target;ee.removeEventListener("dispose",Ot),er(ee)}function er(B){K(B),ce.remove(B)}function K(B){let ee=ce.get(B).programs;ee!==void 0&&(ee.forEach(function(ue){be.releaseProgram(ue)}),B.isShaderMaterial&&be.releaseShaderCache(B))}this.renderBufferDirect=function(B,ee,ue,ie,fe,$e){ee===null&&(ee=q);let gt=fe.isMesh&&fe.matrixWorld.determinant()<0,Mt=ni(B,ee,ue,ie,fe);re.setMaterial(ie,gt);let Pt=ue.index,tr=1;ie.wireframe===!0&&(Pt=Oe.getWireframeAttribute(ue),tr=2);let Nt=ue.drawRange,Bt=ue.attributes.position,Pi=Nt.start*tr,Fn=(Nt.start+Nt.count)*tr;$e!==null&&(Pi=Math.max(Pi,$e.start*tr),Fn=Math.min(Fn,($e.start+$e.count)*tr)),Pt!==null?(Pi=Math.max(Pi,0),Fn=Math.min(Fn,Pt.count)):Bt!=null&&(Pi=Math.max(Pi,0),Fn=Math.min(Fn,Bt.count));let ao=Fn-Pi;if(ao<0||ao===1/0)return;J.setup(fe,ie,Mt,ue,Pt);let Cc,kr=Ae;if(Pt!==null&&(Cc=Ie.get(Pt),kr=Ne,kr.setIndex(Cc)),fe.isMesh)ie.wireframe===!0?(re.setLineWidth(ie.wireframeLinewidth*X()),kr.setMode(1)):kr.setMode(4);else if(fe.isLine){let kt=ie.linewidth;kt===void 0&&(kt=1),re.setLineWidth(kt*X()),fe.isLineSegments?kr.setMode(1):fe.isLineLoop?kr.setMode(2):kr.setMode(3)}else fe.isPoints?kr.setMode(0):fe.isSprite&&kr.setMode(4);if(fe.isInstancedMesh)kr.renderInstances(Pi,ao,fe.count);else if(ue.isInstancedBufferGeometry){let kt=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,yb=Math.min(ue.instanceCount,kt);kr.renderInstances(Pi,ao,yb)}else kr.render(Pi,ao)},this.compile=function(B,ee){function ue(ie,fe,$e){ie.transparent===!0&&ie.side===Yn&&ie.forceSinglePass===!1?(ie.side=di,ie.needsUpdate=!0,yt(ie,fe,$e),ie.side=oa,ie.needsUpdate=!0,yt(ie,fe,$e),ie.side=Yn):yt(ie,fe,$e)}d=U.get(B),d.init(),f.push(d),B.traverseVisible(function(ie){ie.isLight&&ie.layers.test(ee.layers)&&(d.pushLight(ie),ie.castShadow&&d.pushShadow(ie))}),d.setupLights(m.physicallyCorrectLights),B.traverse(function(ie){let fe=ie.material;if(fe)if(Array.isArray(fe))for(let $e=0;$e<fe.length;$e++){let gt=fe[$e];ue(gt,B,ie)}else ue(fe,B,ie)}),f.pop(),d=null};let he=null;function oe(B){he&&he(B)}function de(){ke.stop()}function _e(){ke.start()}let ke=new OU;ke.setAnimationLoop(oe),typeof self<"u"&&ke.setContext(self),this.setAnimationLoop=function(B){he=B,Ge.setAnimationLoop(B),B===null?ke.stop():ke.start()},Ge.addEventListener("sessionstart",de),Ge.addEventListener("sessionend",_e),this.render=function(B,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(ee),ee=Ge.getCamera()),B.isScene===!0&&B.onBeforeRender(m,B,ee,x),d=U.get(B,f.length),d.init(),f.push(d),N.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),F.setFromProjectionMatrix(N),k=this.localClippingEnabled,O=I.init(this.clippingPlanes,k),u=Be.get(B,p.length),u.init(),p.push(u),at(B,ee,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(P,D),O===!0&&I.beginShadows();let ue=d.state.shadowsArray;if(ne.render(ue,B,ee),O===!0&&I.endShadows(),this.info.autoReset===!0&&this.info.reset(),ge.render(u,B),d.setupLights(m.physicallyCorrectLights),ee.isArrayCamera){let ie=ee.cameras;for(let fe=0,$e=ie.length;fe<$e;fe++){let gt=ie[fe];ot(u,B,gt,gt.viewport)}}else ot(u,B,ee);x!==null&&(pe.updateMultisampleRenderTarget(x),pe.updateRenderTargetMipmap(x)),B.isScene===!0&&B.onAfterRender(m,B,ee),J.resetDefaultState(),b=-1,S=null,f.pop(),f.length>0?d=f[f.length-1]:d=null,p.pop(),p.length>0?u=p[p.length-1]:u=null};function at(B,ee,ue,ie){if(B.visible===!1)return;if(B.layers.test(ee.layers)){if(B.isGroup)ue=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(ee);else if(B.isLight)d.pushLight(B),B.castShadow&&d.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||F.intersectsSprite(B)){ie&&Y.setFromMatrixPosition(B.matrixWorld).applyMatrix4(N);let $e=Se.update(B),gt=B.material;gt.visible&&u.push(B,$e,gt,ue,Y.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(B.isSkinnedMesh&&B.skeleton.frame!==ae.render.frame&&(B.skeleton.update(),B.skeleton.frame=ae.render.frame),!B.frustumCulled||F.intersectsObject(B))){ie&&Y.setFromMatrixPosition(B.matrixWorld).applyMatrix4(N);let $e=Se.update(B),gt=B.material;if(Array.isArray(gt)){let Mt=$e.groups;for(let Pt=0,tr=Mt.length;Pt<tr;Pt++){let Nt=Mt[Pt],Bt=gt[Nt.materialIndex];Bt&&Bt.visible&&u.push(B,$e,Bt,ue,Y.z,Nt)}}else gt.visible&&u.push(B,$e,gt,ue,Y.z,null)}}let fe=B.children;for(let $e=0,gt=fe.length;$e<gt;$e++)at(fe[$e],ee,ue,ie)}function ot(B,ee,ue,ie){let fe=B.opaque,$e=B.transmissive,gt=B.transparent;d.setupLightsView(ue),O===!0&&I.setGlobalState(m.clippingPlanes,ue),$e.length>0&&bt(fe,ee,ue),ie&&re.viewport(w.copy(ie)),fe.length>0&&Qe(fe,ee,ue),$e.length>0&&Qe($e,ee,ue),gt.length>0&&Qe(gt,ee,ue),re.buffers.depth.setTest(!0),re.buffers.depth.setMask(!0),re.buffers.color.setMask(!0),re.setPolygonOffset(!1)}function bt(B,ee,ue){let ie=Q.isWebGL2;z===null&&(z=new $t(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")?Qd:Vi,minFilter:Yd,samples:ie&&s===!0?4:0})),m.getDrawingBufferSize(j),ie?z.setSize(j.x,j.y):z.setSize(h1(j.x),h1(j.y));let fe=m.getRenderTarget();m.setRenderTarget(z),m.clear();let $e=m.toneMapping;m.toneMapping=jo,Qe(B,ee,ue),m.toneMapping=$e,pe.updateMultisampleRenderTarget(z),pe.updateRenderTargetMipmap(z),m.setRenderTarget(fe)}function Qe(B,ee,ue){let ie=ee.isScene===!0?ee.overrideMaterial:null;for(let fe=0,$e=B.length;fe<$e;fe++){let gt=B[fe],Mt=gt.object,Pt=gt.geometry,tr=ie===null?gt.material:ie,Nt=gt.group;Mt.layers.test(ue.layers)&&At(Mt,ee,ue,Pt,tr,Nt)}}function At(B,ee,ue,ie,fe,$e){B.onBeforeRender(m,ee,ue,ie,fe,$e),B.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),fe.onBeforeRender(m,ee,ue,ie,B,$e),fe.transparent===!0&&fe.side===Yn&&fe.forceSinglePass===!1?(fe.side=di,fe.needsUpdate=!0,m.renderBufferDirect(ue,ee,ie,fe,B,$e),fe.side=oa,fe.needsUpdate=!0,m.renderBufferDirect(ue,ee,ie,fe,B,$e),fe.side=Yn):m.renderBufferDirect(ue,ee,ie,fe,B,$e),B.onAfterRender(m,ee,ue,ie,fe,$e)}function yt(B,ee,ue){ee.isScene!==!0&&(ee=q);let ie=ce.get(B),fe=d.state.lights,$e=d.state.shadowsArray,gt=fe.state.version,Mt=be.getParameters(B,fe.state,$e,ee,ue),Pt=be.getProgramCacheKey(Mt),tr=ie.programs;ie.environment=B.isMeshStandardMaterial?ee.environment:null,ie.fog=ee.fog,ie.envMap=(B.isMeshStandardMaterial?xe:Te).get(B.envMap||ie.environment),tr===void 0&&(B.addEventListener("dispose",Ot),tr=new Map,ie.programs=tr);let Nt=tr.get(Pt);if(Nt!==void 0){if(ie.currentProgram===Nt&&ie.lightsStateVersion===gt)return cr(B,Mt),Nt}else Mt.uniforms=be.getUniforms(B),B.onBuild(ue,Mt,m),B.onBeforeCompile(Mt,m),Nt=be.acquireProgram(Mt,Pt),tr.set(Pt,Nt),ie.uniforms=Mt.uniforms;let Bt=ie.uniforms;(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(Bt.clippingPlanes=I.uniform),cr(B,Mt),ie.needsLights=Ns(B),ie.lightsStateVersion=gt,ie.needsLights&&(Bt.ambientLightColor.value=fe.state.ambient,Bt.lightProbe.value=fe.state.probe,Bt.directionalLights.value=fe.state.directional,Bt.directionalLightShadows.value=fe.state.directionalShadow,Bt.spotLights.value=fe.state.spot,Bt.spotLightShadows.value=fe.state.spotShadow,Bt.rectAreaLights.value=fe.state.rectArea,Bt.ltc_1.value=fe.state.rectAreaLTC1,Bt.ltc_2.value=fe.state.rectAreaLTC2,Bt.pointLights.value=fe.state.point,Bt.pointLightShadows.value=fe.state.pointShadow,Bt.hemisphereLights.value=fe.state.hemi,Bt.directionalShadowMap.value=fe.state.directionalShadowMap,Bt.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,Bt.spotShadowMap.value=fe.state.spotShadowMap,Bt.spotLightMatrix.value=fe.state.spotLightMatrix,Bt.spotLightMap.value=fe.state.spotLightMap,Bt.pointShadowMap.value=fe.state.pointShadowMap,Bt.pointShadowMatrix.value=fe.state.pointShadowMatrix);let Pi=Nt.getUniforms(),Fn=dy.seqWithValue(Pi.seq,Bt);return ie.currentProgram=Nt,ie.uniformsList=Fn,Nt}function cr(B,ee){let ue=ce.get(B);ue.outputEncoding=ee.outputEncoding,ue.instancing=ee.instancing,ue.skinning=ee.skinning,ue.morphTargets=ee.morphTargets,ue.morphNormals=ee.morphNormals,ue.morphColors=ee.morphColors,ue.morphTargetsCount=ee.morphTargetsCount,ue.numClippingPlanes=ee.numClippingPlanes,ue.numIntersection=ee.numClipIntersection,ue.vertexAlphas=ee.vertexAlphas,ue.vertexTangents=ee.vertexTangents,ue.toneMapping=ee.toneMapping}function ni(B,ee,ue,ie,fe){ee.isScene!==!0&&(ee=q),pe.resetTextureUnits();let $e=ee.fog,gt=ie.isMeshStandardMaterial?ee.environment:null,Mt=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:Qa,Pt=(ie.isMeshStandardMaterial?xe:Te).get(ie.envMap||gt),tr=ie.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,Nt=!!ie.normalMap&&!!ue.attributes.tangent,Bt=!!ue.morphAttributes.position,Pi=!!ue.morphAttributes.normal,Fn=!!ue.morphAttributes.color,ao=ie.toneMapped?m.toneMapping:jo,Cc=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,kr=Cc!==void 0?Cc.length:0,kt=ce.get(ie),yb=d.state.lights;if(O===!0&&(k===!0||B!==S)){let Un=B===S&&ie.id===b;I.setState(ie,B,Un)}let xb=!1;ie.version===kt.__version?(kt.needsLights&&kt.lightsStateVersion!==yb.state.version||kt.outputEncoding!==Mt||fe.isInstancedMesh&&kt.instancing===!1||!fe.isInstancedMesh&&kt.instancing===!0||fe.isSkinnedMesh&&kt.skinning===!1||!fe.isSkinnedMesh&&kt.skinning===!0||kt.envMap!==Pt||ie.fog===!0&&kt.fog!==$e||kt.numClippingPlanes!==void 0&&(kt.numClippingPlanes!==I.numPlanes||kt.numIntersection!==I.numIntersection)||kt.vertexAlphas!==tr||kt.vertexTangents!==Nt||kt.morphTargets!==Bt||kt.morphNormals!==Pi||kt.morphColors!==Fn||kt.toneMapping!==ao||Q.isWebGL2===!0&&kt.morphTargetsCount!==kr)&&(xb=!0):(xb=!0,kt.__version=ie.version);let Tc=kt.currentProgram;xb===!0&&(Tc=yt(ie,ee,fe));let vP=!1,Rp=!1,bb=!1,xi=Tc.getUniforms(),Pc=kt.uniforms;if(re.useProgram(Tc.program)&&(vP=!0,Rp=!0,bb=!0),ie.id!==b&&(b=ie.id,Rp=!0),vP||S!==B){if(xi.setValue(G,"projectionMatrix",B.projectionMatrix),Q.logarithmicDepthBuffer&&xi.setValue(G,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),S!==B&&(S=B,Rp=!0,bb=!0),ie.isShaderMaterial||ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshStandardMaterial||ie.envMap){let Un=xi.map.cameraPosition;Un!==void 0&&Un.setValue(G,Y.setFromMatrixPosition(B.matrixWorld))}(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&xi.setValue(G,"isOrthographic",B.isOrthographicCamera===!0),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial||ie.isShadowMaterial||fe.isSkinnedMesh)&&xi.setValue(G,"viewMatrix",B.matrixWorldInverse)}if(fe.isSkinnedMesh){xi.setOptional(G,fe,"bindMatrix"),xi.setOptional(G,fe,"bindMatrixInverse");let Un=fe.skeleton;Un&&(Q.floatVertexTextures?(Un.boneTexture===null&&Un.computeBoneTexture(),xi.setValue(G,"boneTexture",Un.boneTexture,pe),xi.setValue(G,"boneTextureSize",Un.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let wb=ue.morphAttributes;if((wb.position!==void 0||wb.normal!==void 0||wb.color!==void 0&&Q.isWebGL2===!0)&&ve.update(fe,ue,ie,Tc),(Rp||kt.receiveShadow!==fe.receiveShadow)&&(kt.receiveShadow=fe.receiveShadow,xi.setValue(G,"receiveShadow",fe.receiveShadow)),ie.isMeshGouraudMaterial&&ie.envMap!==null&&(Pc.envMap.value=Pt,Pc.flipEnvMap.value=Pt.isCubeTexture&&Pt.isRenderTargetTexture===!1?-1:1),Rp&&(xi.setValue(G,"toneMappingExposure",m.toneMappingExposure),kt.needsLights&&Nn(Pc,bb),$e&&ie.fog===!0&&Re.refreshFogUniforms(Pc,$e),Re.refreshMaterialUniforms(Pc,ie,T,E,z),dy.upload(G,kt.uniformsList,Pc,pe)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(dy.upload(G,kt.uniformsList,Pc,pe),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&xi.setValue(G,"center",fe.center),xi.setValue(G,"modelViewMatrix",fe.modelViewMatrix),xi.setValue(G,"normalMatrix",fe.normalMatrix),xi.setValue(G,"modelMatrix",fe.matrixWorld),fe.previousModelViewMatrix&&xi.setValue(G,"previousModelViewMatrix",fe.previousModelViewMatrix),B.previousProjectionMatrix&&xi.setValue(G,"previousProjectionMatrix",B.previousProjectionMatrix),ie.isShaderMaterial||ie.isRawShaderMaterial){let Un=ie.uniformsGroups;for(let Sb=0,FG=Un.length;Sb<FG;Sb++)if(Q.isWebGL2){let yP=Un[Sb];Fe.update(yP,Tc),Fe.bind(yP,Tc)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tc}function Nn(B,ee){B.ambientLightColor.needsUpdate=ee,B.lightProbe.needsUpdate=ee,B.directionalLights.needsUpdate=ee,B.directionalLightShadows.needsUpdate=ee,B.pointLights.needsUpdate=ee,B.pointLightShadows.needsUpdate=ee,B.spotLights.needsUpdate=ee,B.spotLightShadows.needsUpdate=ee,B.rectAreaLights.needsUpdate=ee,B.hemisphereLights.needsUpdate=ee}function Ns(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(B,ee,ue){ce.get(B.texture).__webglTexture=ee,ce.get(B.depthTexture).__webglTexture=ue;let ie=ce.get(B);ie.__hasExternalTextures=!0,ie.__hasExternalTextures&&(ie.__autoAllocateDepthBuffer=ue===void 0,ie.__autoAllocateDepthBuffer||Z.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ie.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(B,ee){let ue=ce.get(B);ue.__webglFramebuffer=ee,ue.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(B,ee=0,ue=0){x=B,v=ee,y=ue;let ie=!0,fe=null,$e=!1,gt=!1;if(B){let Mt=ce.get(B);Mt.__useDefaultFramebuffer!==void 0?(re.bindFramebuffer(36160,null),ie=!1):Mt.__webglFramebuffer===void 0?pe.setupRenderTarget(B):Mt.__hasExternalTextures&&pe.rebindTextures(B,ce.get(B.texture).__webglTexture,ce.get(B.depthTexture).__webglTexture);let Pt=B.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(gt=!0);let tr=ce.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(fe=tr[ee],$e=!0):Q.isWebGL2&&B.samples>0&&pe.useMultisampledRTT(B)===!1?fe=ce.get(B).__webglMultisampledFramebuffer:fe=tr,w.copy(B.viewport),A.copy(B.scissor),_=B.scissorTest}else w.copy(L).multiplyScalar(T).floor(),A.copy(R).multiplyScalar(T).floor(),_=V;if(re.bindFramebuffer(36160,fe)&&Q.drawBuffers&&ie&&re.drawBuffers(B,fe),re.viewport(w),re.scissor(A),re.setScissorTest(_),$e){let Mt=ce.get(B.texture);G.framebufferTexture2D(36160,36064,34069+ee,Mt.__webglTexture,ue)}else if(gt){let Mt=ce.get(B.texture),Pt=ee||0;G.framebufferTextureLayer(36160,36064,Mt.__webglTexture,ue||0,Pt)}b=-1},this.readRenderTargetPixels=function(B,ee,ue,ie,fe,$e,gt){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mt=ce.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&gt!==void 0&&(Mt=Mt[gt]),Mt){re.bindFramebuffer(36160,Mt);try{let Pt=B.texture,tr=Pt.format,Nt=Pt.type;if(tr!==_s&&Le.convert(tr)!==G.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Bt=Nt===Qd&&(Z.has("EXT_color_buffer_half_float")||Q.isWebGL2&&Z.has("EXT_color_buffer_float"));if(Nt!==Vi&&Le.convert(Nt)!==G.getParameter(35738)&&!(Nt===Qn&&(Q.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float")))&&!Bt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=B.width-ie&&ue>=0&&ue<=B.height-fe&&G.readPixels(ee,ue,ie,fe,Le.convert(tr),Le.convert(Nt),$e)}finally{let Pt=x!==null?ce.get(x).__webglFramebuffer:null;re.bindFramebuffer(36160,Pt)}}},this.copyFramebufferToTexture=function(B,ee,ue=0){let ie=Math.pow(2,-ue),fe=Math.floor(ee.image.width*ie),$e=Math.floor(ee.image.height*ie);pe.setTexture2D(ee,0),G.copyTexSubImage2D(3553,ue,0,0,B.x,B.y,fe,$e),re.unbindTexture()},this.copyTextureToTexture=function(B,ee,ue,ie=0){let fe=ee.image.width,$e=ee.image.height,gt=Le.convert(ue.format),Mt=Le.convert(ue.type);pe.setTexture2D(ue,0),G.pixelStorei(37440,ue.flipY),G.pixelStorei(37441,ue.premultiplyAlpha),G.pixelStorei(3317,ue.unpackAlignment),ee.isDataTexture?G.texSubImage2D(3553,ie,B.x,B.y,fe,$e,gt,Mt,ee.image.data):ee.isCompressedTexture?G.compressedTexSubImage2D(3553,ie,B.x,B.y,ee.mipmaps[0].width,ee.mipmaps[0].height,gt,ee.mipmaps[0].data):G.texSubImage2D(3553,ie,B.x,B.y,gt,Mt,ee.image),ie===0&&ue.generateMipmaps&&G.generateMipmap(3553),re.unbindTexture()},this.copyTextureToTexture3D=function(B,ee,ue,ie,fe=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let $e=B.max.x-B.min.x+1,gt=B.max.y-B.min.y+1,Mt=B.max.z-B.min.z+1,Pt=Le.convert(ie.format),tr=Le.convert(ie.type),Nt;if(ie.isData3DTexture)pe.setTexture3D(ie,0),Nt=32879;else if(ie.isDataArrayTexture)pe.setTexture2DArray(ie,0),Nt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(37440,ie.flipY),G.pixelStorei(37441,ie.premultiplyAlpha),G.pixelStorei(3317,ie.unpackAlignment);let Bt=G.getParameter(3314),Pi=G.getParameter(32878),Fn=G.getParameter(3316),ao=G.getParameter(3315),Cc=G.getParameter(32877),kr=ue.isCompressedTexture?ue.mipmaps[0]:ue.image;G.pixelStorei(3314,kr.width),G.pixelStorei(32878,kr.height),G.pixelStorei(3316,B.min.x),G.pixelStorei(3315,B.min.y),G.pixelStorei(32877,B.min.z),ue.isDataTexture||ue.isData3DTexture?G.texSubImage3D(Nt,fe,ee.x,ee.y,ee.z,$e,gt,Mt,Pt,tr,kr.data):ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(Nt,fe,ee.x,ee.y,ee.z,$e,gt,Mt,Pt,kr.data)):G.texSubImage3D(Nt,fe,ee.x,ee.y,ee.z,$e,gt,Mt,Pt,tr,kr),G.pixelStorei(3314,Bt),G.pixelStorei(32878,Pi),G.pixelStorei(3316,Fn),G.pixelStorei(3315,ao),G.pixelStorei(32877,Cc),fe===0&&ie.generateMipmaps&&G.generateMipmap(Nt),re.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?pe.setTextureCube(B,0):B.isData3DTexture?pe.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?pe.setTexture2DArray(B,0):pe.setTexture2D(B,0),re.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,re.reset(),J.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var whe=class extends zU{};whe.prototype.isWebGL1Renderer=!0;var NU=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new et(e),this.near=t,this.far=r}clone(){return new NU(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},ec=class extends Yt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},She=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=NA,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ps()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Wi=new C,VA=class{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix4(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Wi.fromBufferAttribute(this,t),Wi.applyNormalMatrix(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Wi.fromBufferAttribute(this,t),Wi.transformDirection(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}setX(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ko(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ko(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ko(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ko(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),i=rr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),i=rr(i,this.array),n=rr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new st(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new VA(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},FU=class extends Yt{constructor(){super(),this.isBone=!0,this.type="Bone"}},p1=class extends Jr{constructor(e=null,t=1,r=1,i,n,s,a,o,l=ir,c=ir,h,u){super(null,s,a,o,l,c,i,n,h,u),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},XL=new we,_he=new we,HC=class{constructor(e=[],t=[]){this.uuid=Ps(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new we)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new we;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let n=0,s=e.length;n<s;n++){let a=e[n]?e[n].matrixWorld:_he;XL.multiplyMatrices(a,t[n]),XL.toArray(r,n*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new HC(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=_U(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new p1(t,e,e,_s,Qn);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let n=e.bones[r],s=t[n];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),s=new FU),this.bones.push(s),this.boneInverses.push(new we().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,n=t.length;i<n;i++){let s=t[i];e.bones.push(s.uuid);let a=r[i];e.boneInverses.push(a.toArray())}return e}},Ahe=class extends st{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Ac=class extends Gg{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new et(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},YL=new C,QL=new C,KL=new we,Jw=new yp,Yv=new ns,f1=class extends Yt{constructor(e=new nt,t=new Ac){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)YL.fromBufferAttribute(t,i-1),QL.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=YL.distanceTo(QL);e.setAttribute("lineDistance",new Ve(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Yv.copy(r.boundingSphere),Yv.applyMatrix4(i),Yv.radius+=n,e.ray.intersectsSphere(Yv)===!1)return;KL.copy(i).invert(),Jw.copy(e.ray).applyMatrix4(KL);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new C,c=new C,h=new C,u=new C,d=this.isLineSegments?2:1,p=r.index,f=r.attributes.position;if(p!==null){let m=Math.max(0,s.start),g=Math.min(p.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=d){let x=p.getX(v),b=p.getX(v+1);if(l.fromBufferAttribute(f,x),c.fromBufferAttribute(f,b),Jw.distanceSqToSegment(l,c,u,h)>o)continue;u.applyMatrix4(this.matrixWorld);let S=e.ray.origin.distanceTo(u);S<e.near||S>e.far||t.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let m=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=d){if(l.fromBufferAttribute(f,v),c.fromBufferAttribute(f,v+1),Jw.distanceSqToSegment(l,c,u,h)>o)continue;u.applyMatrix4(this.matrixWorld);let x=e.ray.origin.distanceTo(u);x<e.near||x>e.far||t.push({distance:x,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}},ZL=new C,JL=new C,Wg=class extends f1{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)ZL.fromBufferAttribute(t,i),JL.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ZL.distanceTo(JL);e.setAttribute("lineDistance",new Ve(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Mhe=class extends Jr{constructor(e,t,r,i,n,s,a,o,l){super(e,t,r,i,n,s,a,o,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:xt,this.magFilter=n!==void 0?n:xt,this.generateMipmaps=!1;let c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},ro=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,s;t?s=t:s=e*r[n-1];let a=0,o=n-1,l;for(;a<=o;)if(i=Math.floor(a+(o-a)/2),l=r[i]-s,l<0)a=i+1;else if(l>0)o=i-1;else{o=i;break}if(i=o,r[i]===s)return i/(n-1);let c=r[i],h=r[i+1]-c,u=(s-c)/h;return(i+u)/(n-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),s=this.getPoint(i),a=t||(n.isVector2?new $:new C);return a.copy(s).sub(n).normalize(),a}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new C,i=[],n=[],s=[],a=new C,o=new we;for(let d=0;d<=e;d++){let p=d/e;i[d]=this.getTangentAt(p,new C)}n[0]=new C,s[0]=new C;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,r.set(1,0,0)),h<=l&&(l=h,r.set(0,1,0)),u<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],a),s[0].crossVectors(i[0],n[0]);for(let d=1;d<=e;d++){if(n[d]=n[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();let p=Math.acos(Qr(i[d-1].dot(i[d]),-1,1));n[d].applyMatrix4(o.makeRotationAxis(a,p))}s[d].crossVectors(i[d],n[d])}if(t===!0){let d=Math.acos(Qr(n[0].dot(n[e]),-1,1));d/=e,i[0].dot(a.crossVectors(n[0],n[e]))>0&&(d=-d);for(let p=1;p<=e;p++)n[p].applyMatrix4(o.makeRotationAxis(i[p],d*p)),s[p].crossVectors(i[p],n[p])}return{tangents:i,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Yx=class extends ro{constructor(e=0,t=0,r=1,i=1,n=0,s=Math.PI*2,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){let r=t||new $,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(s?n=0:n=i),this.aClockwise===!0&&!s&&(n===i?n=-i:n=n-i);let a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=o-this.aX,d=l-this.aY;o=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return r.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Ehe=class extends Yx{constructor(e,t,r,i,n,s){super(e,t,r,r,i,n,s),this.isArcCurve=!0,this.type="ArcCurve"}};function WC(){let e=0,t=0,r=0,i=0;function n(s,a,o,l){e=s,t=o,r=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){n(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,h,u){let d=(a-s)/c-(o-s)/(c+h)+(o-a)/h,p=(o-a)/h-(l-a)/(h+u)+(l-o)/u;d*=h,p*=h,n(a,o,d,p)},calc:function(s){let a=s*s,o=a*s;return e+t*s+r*a+i*o}}}var Qv=new C,eS=new WC,tS=new WC,rS=new WC,Che=class extends ro{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new C){let r=t,i=this.points,n=i.length,s=(n-(this.closed?0:1))*e,a=Math.floor(s),o=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:o===0&&a===n-1&&(a=n-2,o=1);let l,c;this.closed||a>0?l=i[(a-1)%n]:(Qv.subVectors(i[0],i[1]).add(i[0]),l=Qv);let h=i[a%n],u=i[(a+1)%n];if(this.closed||a+2<n?c=i[(a+2)%n]:(Qv.subVectors(i[n-1],i[n-2]).add(i[n-1]),c=Qv),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,p=Math.pow(l.distanceToSquared(h),d),f=Math.pow(h.distanceToSquared(u),d),m=Math.pow(u.distanceToSquared(c),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),eS.initNonuniformCatmullRom(l.x,h.x,u.x,c.x,p,f,m),tS.initNonuniformCatmullRom(l.y,h.y,u.y,c.y,p,f,m),rS.initNonuniformCatmullRom(l.z,h.z,u.z,c.z,p,f,m)}else this.curveType==="catmullrom"&&(eS.initCatmullRom(l.x,h.x,u.x,c.x,this.tension),tS.initCatmullRom(l.y,h.y,u.y,c.y,this.tension),rS.initCatmullRom(l.z,h.z,u.z,c.z,this.tension));return r.set(eS.calc(o),tS.calc(o),rS.calc(o)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new C().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function eI(e,t,r,i,n){let s=(i-t)*.5,a=(n-r)*.5,o=e*e,l=e*o;return(2*r-2*i+s+a)*l+(-3*r+3*i-2*s-a)*o+s*e+r}function The(e,t){let r=1-e;return r*r*t}function Phe(e,t){return 2*(1-e)*e*t}function Dhe(e,t){return e*e*t}function um(e,t,r,i){return The(e,t)+Phe(e,r)+Dhe(e,i)}function Ohe(e,t){let r=1-e;return r*r*r*t}function Lhe(e,t){let r=1-e;return 3*r*r*e*t}function Ihe(e,t){return 3*(1-e)*e*e*t}function Rhe(e,t){return e*e*e*t}function hm(e,t,r,i,n){return Ohe(e,t)+Lhe(e,r)+Ihe(e,i)+Rhe(e,n)}var Zs=class extends ro{constructor(e=new $,t=new $,r=new $,i=new $){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new $){let r=t,i=this.v0,n=this.v1,s=this.v2,a=this.v3;return r.set(hm(e,i.x,n.x,s.x,a.x),hm(e,i.y,n.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},py=class extends ro{constructor(e=new C,t=new C,r=new C,i=new C){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new C){let r=t,i=this.v0,n=this.v1,s=this.v2,a=this.v3;return r.set(hm(e,i.x,n.x,s.x,a.x),hm(e,i.y,n.y,s.y,a.y),hm(e,i.z,n.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},sa=class extends ro{constructor(e=new $,t=new $){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new $){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new $;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},UU=class extends ro{constructor(e=new C,t=new C){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new C){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},hc=class extends ro{constructor(e=new $,t=new $,r=new $){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new $){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(um(e,i.x,n.x,s.x),um(e,i.y,n.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Bhe=class extends ro{constructor(e=new C,t=new C,r=new C){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new C){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(um(e,i.x,n.x,s.x),um(e,i.y,n.y,s.y),um(e,i.z,n.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},qC=class extends ro{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new $){let r=t,i=this.points,n=(i.length-1)*e,s=Math.floor(n),a=n-s,o=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return r.set(eI(a,o.x,l.x,c.x,h.x),eI(a,o.y,l.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new $().fromArray(i))}return this}},khe=Object.freeze({__proto__:null,ArcCurve:Ehe,CatmullRomCurve3:Che,CubicBezierCurve:Zs,CubicBezierCurve3:py,EllipseCurve:Yx,LineCurve:sa,LineCurve3:UU,QuadraticBezierCurve:hc,QuadraticBezierCurve3:Bhe,SplineCurve:qC}),jU=class extends ro{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new sa(t,e))}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let s=i[n]-r,a=this.curves[n],o=a.getLength(),l=o===0?0:1-s/o;return a.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let s=n[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let l=0;l<o.length;l++){let c=o[l];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new khe[i.type]().fromJSON(i))}return this}},m1=class extends jU{constructor(e){super(),this.type="Path",this.currentPoint=new $,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new sa(this.currentPoint.clone(),new $(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new hc(this.currentPoint.clone(),new $(e,t),new $(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,s){let a=new Zs(this.currentPoint.clone(),new $(e,t),new $(r,i),new $(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new qC(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,s){let a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,r,i,n,s),this}absarc(e,t,r,i,n,s){return this.absellipse(e,t,r,r,i,n,s),this}ellipse(e,t,r,i,n,s,a,o){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,r,i,n,s,a,o),this}absellipse(e,t,r,i,n,s,a,o){let l=new Yx(e,t,r,i,n,s,a,o);if(this.curves.length>0){let h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},VU=class extends nt{constructor(e=[new $(0,-.5),new $(.5,0),new $(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Qr(i,0,Math.PI*2);let n=[],s=[],a=[],o=[],l=[],c=1/t,h=new C,u=new $,d=new C,p=new C,f=new C,m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-m,d.z=g*0,f.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-m,d.z=g*0,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),o.push(d.x,d.y,d.z),f.copy(p)}for(let v=0;v<=t;v++){let y=r+v*c*i,x=Math.sin(y),b=Math.cos(y);for(let S=0;S<=e.length-1;S++){h.x=e[S].x*x,h.y=e[S].y,h.z=e[S].x*b,s.push(h.x,h.y,h.z),u.x=v/t,u.y=S/(e.length-1),a.push(u.x,u.y);let w=o[3*S+0]*x,A=o[3*S+1],_=o[3*S+0]*b;l.push(w,A,_)}}for(let v=0;v<t;v++)for(let y=0;y<e.length-1;y++){let x=y+v*e.length,b=x,S=x+e.length,w=x+e.length+1,A=x+1;n.push(b,S,A),n.push(w,A,S)}this.setIndex(n),this.setAttribute("position",new Ve(s,3)),this.setAttribute("uv",new Ve(a,2)),this.setAttribute("normal",new Ve(l,3))}static fromJSON(e){return new VU(e.points,e.segments,e.phiStart,e.phiLength)}},$C=class extends nt{constructor(e=1,t=1,r=1,i=32,n=1,s=!1,a=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:o};let l=this;i=Math.floor(i),n=Math.floor(n);let c=[],h=[],u=[],d=[],p=0,f=[],m=r/2,g=0;v(),s===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Ve(h,3)),this.setAttribute("normal",new Ve(u,3)),this.setAttribute("uv",new Ve(d,2));function v(){let x=new C,b=new C,S=0,w=(t-e)/r;for(let A=0;A<=n;A++){let _=[],M=A/n,E=M*(t-e)+e;for(let T=0;T<=i;T++){let P=T/i,D=P*o+a,L=Math.sin(D),R=Math.cos(D);b.x=E*L,b.y=-M*r+m,b.z=E*R,h.push(b.x,b.y,b.z),x.set(L,w,R).normalize(),u.push(x.x,x.y,x.z),d.push(P,1-M),_.push(p++)}f.push(_)}for(let A=0;A<i;A++)for(let _=0;_<n;_++){let M=f[_][A],E=f[_+1][A],T=f[_+1][A+1],P=f[_][A+1];c.push(M,E,P),c.push(E,T,P),S+=6}l.addGroup(g,S,0),g+=S}function y(x){let b=p,S=new $,w=new C,A=0,_=x===!0?e:t,M=x===!0?1:-1;for(let T=1;T<=i;T++)h.push(0,m*M,0),u.push(0,M,0),d.push(.5,.5),p++;let E=p;for(let T=0;T<=i;T++){let P=T/i*o+a,D=Math.cos(P),L=Math.sin(P);w.x=_*L,w.y=m*M,w.z=_*D,h.push(w.x,w.y,w.z),u.push(0,M,0),S.x=D*.5+.5,S.y=L*.5*M+.5,d.push(S.x,S.y),p++}for(let T=0;T<i;T++){let P=b+T,D=E+T;x===!0?c.push(D,D+1,P):c.push(D+1,D,P),A+=3}l.addGroup(g,A,x===!0?1:2),g+=A}}static fromJSON(e){return new $C(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},GU=class extends $C{constructor(e=1,t=1,r=32,i=1,n=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,n,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:s,thetaLength:a}}static fromJSON(e){return new GU(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},XC=class extends nt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],s=[];a(i),l(r),c(),this.setAttribute("position",new Ve(n,3)),this.setAttribute("normal",new Ve(n.slice(),3)),this.setAttribute("uv",new Ve(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let y=new C,x=new C,b=new C;for(let S=0;S<t.length;S+=3)d(t[S+0],y),d(t[S+1],x),d(t[S+2],b),o(y,x,b,v)}function o(v,y,x,b){let S=b+1,w=[];for(let A=0;A<=S;A++){w[A]=[];let _=v.clone().lerp(x,A/S),M=y.clone().lerp(x,A/S),E=S-A;for(let T=0;T<=E;T++)T===0&&A===S?w[A][T]=_:w[A][T]=_.clone().lerp(M,T/E)}for(let A=0;A<S;A++)for(let _=0;_<2*(S-A)-1;_++){let M=Math.floor(_/2);_%2===0?(u(w[A][M+1]),u(w[A+1][M]),u(w[A][M])):(u(w[A][M+1]),u(w[A+1][M+1]),u(w[A+1][M]))}}function l(v){let y=new C;for(let x=0;x<n.length;x+=3)y.x=n[x+0],y.y=n[x+1],y.z=n[x+2],y.normalize().multiplyScalar(v),n[x+0]=y.x,n[x+1]=y.y,n[x+2]=y.z}function c(){let v=new C;for(let y=0;y<n.length;y+=3){v.x=n[y+0],v.y=n[y+1],v.z=n[y+2];let x=m(v)/2/Math.PI+.5,b=g(v)/Math.PI+.5;s.push(x,1-b)}p(),h()}function h(){for(let v=0;v<s.length;v+=6){let y=s[v+0],x=s[v+2],b=s[v+4],S=Math.max(y,x,b),w=Math.min(y,x,b);S>.9&&w<.1&&(y<.2&&(s[v+0]+=1),x<.2&&(s[v+2]+=1),b<.2&&(s[v+4]+=1))}}function u(v){n.push(v.x,v.y,v.z)}function d(v,y){let x=v*3;y.x=e[x+0],y.y=e[x+1],y.z=e[x+2]}function p(){let v=new C,y=new C,x=new C,b=new C,S=new $,w=new $,A=new $;for(let _=0,M=0;_<n.length;_+=9,M+=6){v.set(n[_+0],n[_+1],n[_+2]),y.set(n[_+3],n[_+4],n[_+5]),x.set(n[_+6],n[_+7],n[_+8]),S.set(s[M+0],s[M+1]),w.set(s[M+2],s[M+3]),A.set(s[M+4],s[M+5]),b.copy(v).add(y).add(x).divideScalar(3);let E=m(b);f(S,M+0,v,E),f(w,M+2,y,E),f(A,M+4,x,E)}}function f(v,y,x,b){b<0&&v.x===1&&(s[y]=v.x-1),x.x===0&&x.z===0&&(s[y]=b/2/Math.PI+.5)}function m(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new XC(e.vertices,e.indices,e.radius,e.details)}},HU=class extends XC{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new HU(e.radius,e.detail)}},g1=class extends m1{constructor(e){super(e),this.uuid=Ps(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new m1().fromJSON(i))}return this}},zhe={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,s=WU(e,0,n,r,!0),a=[];if(!s||s.next===s.prev)return a;let o,l,c,h,u,d,p;if(i&&(s=Vhe(e,t,s,r)),e.length>80*r){o=c=e[0],l=h=e[1];for(let f=r;f<n;f+=r)u=e[f],d=e[f+1],u<o&&(o=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);p=Math.max(c-o,h-l),p=p!==0?32767/p:0}return rg(s,a,r,o,l,p,0),a}};function WU(e,t,r,i,n){let s,a;if(n===Jhe(e,t,r,i)>0)for(s=t;s<r;s+=i)a=tI(s,e[s],e[s+1],a);else for(s=r-i;s>=t;s-=i)a=tI(s,e[s],e[s+1],a);return a&&Qx(a,a.next)&&(ng(a),a=a.next),a}function Iu(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(Qx(r,r.next)||yr(r.prev,r,r.next)===0)){if(ng(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function rg(e,t,r,i,n,s,a){if(!e)return;!a&&s&&$he(e,i,n,s);let o=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,s?Fhe(e,i,n,s):Nhe(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(c.i/r|0),ng(e),e=c.next,o=c.next;continue}if(e=c,e===o){a?a===1?(e=Uhe(Iu(e),t,r),rg(e,t,r,i,n,s,2)):a===2&&jhe(e,t,r,i,n,s):rg(Iu(e),t,r,i,n,s,1);break}}}function Nhe(e){let t=e.prev,r=e,i=e.next;if(yr(t,r,i)>=0)return!1;let n=t.x,s=r.x,a=i.x,o=t.y,l=r.y,c=i.y,h=n<s?n<a?n:a:s<a?s:a,u=o<l?o<c?o:c:l<c?l:c,d=n>s?n>a?n:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c,f=i.next;for(;f!==t;){if(f.x>=h&&f.x<=d&&f.y>=u&&f.y<=p&&ad(n,o,s,l,a,c,f.x,f.y)&&yr(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Fhe(e,t,r,i){let n=e.prev,s=e,a=e.next;if(yr(n,s,a)>=0)return!1;let o=n.x,l=s.x,c=a.x,h=n.y,u=s.y,d=a.y,p=o<l?o<c?o:c:l<c?l:c,f=h<u?h<d?h:d:u<d?u:d,m=o>l?o>c?o:c:l>c?l:c,g=h>u?h>d?h:d:u>d?u:d,v=GA(p,f,t,r,i),y=GA(m,g,t,r,i),x=e.prevZ,b=e.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&ad(o,h,l,u,c,d,x.x,x.y)&&yr(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==a&&ad(o,h,l,u,c,d,b.x,b.y)&&yr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&ad(o,h,l,u,c,d,x.x,x.y)&&yr(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==a&&ad(o,h,l,u,c,d,b.x,b.y)&&yr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Uhe(e,t,r){let i=e;do{let n=i.prev,s=i.next.next;!Qx(n,s)&&qU(n,i,i.next,s)&&ig(n,s)&&ig(s,n)&&(t.push(n.i/r|0),t.push(i.i/r|0),t.push(s.i/r|0),ng(i),ng(i.next),i=e=s),i=i.next}while(i!==e);return Iu(i)}function jhe(e,t,r,i,n,s){let a=e;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Qhe(a,o)){let l=$U(a,o);a=Iu(a,a.next),l=Iu(l,l.next),rg(a,t,r,i,n,s,0),rg(l,t,r,i,n,s,0);return}o=o.next}a=a.next}while(a!==e)}function Vhe(e,t,r,i){let n=[],s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,c=WU(e,o,l,i,!1),c===c.next&&(c.steiner=!0),n.push(Yhe(c));for(n.sort(Ghe),s=0;s<n.length;s++)r=Hhe(n[s],r);return r}function Ghe(e,t){return e.x-t.x}function Hhe(e,t){let r=Whe(e,t);if(!r)return t;let i=$U(r,e);return Iu(i,i.next),Iu(r,r.next)}function Whe(e,t){let r=t,i=-1/0,n,s=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){let d=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(d<=s&&d>i&&(i=d,n=r.x<r.next.x?r:r.next,d===s))return n}r=r.next}while(r!==t);if(!n)return null;let o=n,l=n.x,c=n.y,h=1/0,u;r=n;do s>=r.x&&r.x>=l&&s!==r.x&&ad(a<c?s:i,a,l,c,a<c?i:s,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(s-r.x),ig(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&qhe(n,r)))&&(n=r,h=u)),r=r.next;while(r!==o);return n}function qhe(e,t){return yr(e.prev,e,t.prev)<0&&yr(t.next,e,e.next)<0}function $he(e,t,r,i){let n=e;do n.z===0&&(n.z=GA(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Xhe(n)}function Xhe(e){let t,r,i,n,s,a,o,l,c=1;do{for(r=e,e=null,s=null,a=0;r;){for(a++,i=r,o=0,t=0;t<c&&(o++,i=i.nextZ,!!i);t++);for(l=c;o>0||l>0&&i;)o!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,c*=2}while(a>1);return e}function GA(e,t,r,i,n){return e=(e-r)*n|0,t=(t-i)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Yhe(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function ad(e,t,r,i,n,s,a,o){return(n-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(i-o)>=(r-a)*(t-o)&&(r-a)*(s-o)>=(n-a)*(i-o)}function Qhe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Khe(e,t)&&(ig(e,t)&&ig(t,e)&&Zhe(e,t)&&(yr(e.prev,e,t.prev)||yr(e,t.prev,t))||Qx(e,t)&&yr(e.prev,e,e.next)>0&&yr(t.prev,t,t.next)>0)}function yr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Qx(e,t){return e.x===t.x&&e.y===t.y}function qU(e,t,r,i){let n=Zv(yr(e,t,r)),s=Zv(yr(e,t,i)),a=Zv(yr(r,i,e)),o=Zv(yr(r,i,t));return!!(n!==s&&a!==o||n===0&&Kv(e,r,t)||s===0&&Kv(e,i,t)||a===0&&Kv(r,e,i)||o===0&&Kv(r,t,i))}function Kv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Zv(e){return e>0?1:e<0?-1:0}function Khe(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&qU(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function ig(e,t){return yr(e.prev,e,e.next)<0?yr(e,t,e.next)>=0&&yr(e,e.prev,t)>=0:yr(e,t,e.prev)<0||yr(e,e.next,t)<0}function Zhe(e,t){let r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function $U(e,t){let r=new HA(e.i,e.x,e.y),i=new HA(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function tI(e,t,r,i){let n=new HA(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function ng(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function HA(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jhe(e,t,r,i){let n=0;for(let s=t,a=r-i;s<r;s+=i)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}var XU=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return XU.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];rI(e),iI(r,e);let s=e.length;t.forEach(rI);for(let o=0;o<t.length;o++)i.push(s),s+=t[o].length,iI(r,t[o]);let a=zhe.triangulate(r,i);for(let o=0;o<a.length;o+=3)n.push(a.slice(o,o+3));return n}};function rI(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function iI(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var YU=class extends XC{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new YU(e.radius,e.detail)}},YC=class extends nt{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let o=Math.min(s+a,Math.PI),l=0,c=[],h=new C,u=new C,d=[],p=[],f=[],m=[];for(let g=0;g<=r;g++){let v=[],y=g/r,x=0;g==0&&s==0?x=.5/t:g==r&&o==Math.PI&&(x=-.5/t);for(let b=0;b<=t;b++){let S=b/t;h.x=-e*Math.cos(i+S*n)*Math.sin(s+y*a),h.y=e*Math.cos(s+y*a),h.z=e*Math.sin(i+S*n)*Math.sin(s+y*a),p.push(h.x,h.y,h.z),u.copy(h).normalize(),f.push(u.x,u.y,u.z),m.push(S+x,1-y),v.push(l++)}c.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){let y=c[g][v+1],x=c[g][v],b=c[g+1][v],S=c[g+1][v+1];(g!==0||s>0)&&d.push(y,x,S),(g!==r-1||o<Math.PI)&&d.push(x,b,S)}this.setIndex(d),this.setAttribute("position",new Ve(p,3)),this.setAttribute("normal",new Ve(f,3)),this.setAttribute("uv",new Ve(m,2))}static fromJSON(e){return new YC(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},QU=class extends nt{constructor(e=1,t=.4,r=64,i=8,n=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:s},r=Math.floor(r),i=Math.floor(i);let a=[],o=[],l=[],c=[],h=new C,u=new C,d=new C,p=new C,f=new C,m=new C,g=new C;for(let y=0;y<=r;++y){let x=y/r*n*Math.PI*2;v(x,n,s,e,d),v(x+.01,n,s,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let b=0;b<=i;++b){let S=b/i*Math.PI*2,w=-t*Math.cos(S),A=t*Math.sin(S);h.x=d.x+(w*g.x+A*f.x),h.y=d.y+(w*g.y+A*f.y),h.z=d.z+(w*g.z+A*f.z),o.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(y/r),c.push(b/i)}}for(let y=1;y<=r;y++)for(let x=1;x<=i;x++){let b=(i+1)*(y-1)+(x-1),S=(i+1)*y+(x-1),w=(i+1)*y+x,A=(i+1)*(y-1)+x;a.push(b,S,A),a.push(S,w,A)}this.setIndex(a),this.setAttribute("position",new Ve(o,3)),this.setAttribute("normal",new Ve(l,3)),this.setAttribute("uv",new Ve(c,2));function v(y,x,b,S,w){let A=Math.cos(y),_=Math.sin(y),M=b/x*y,E=Math.cos(M);w.x=S*(2+E)*.5*A,w.y=S*(2+E)*_*.5,w.z=S*Math.sin(M)*.5}}static fromJSON(e){return new QU(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function cl(e,t,r){return KU(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)}function Jv(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function KU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ede(e){function t(n,s){return e[n]-e[s]}let r=e.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i}function nI(e,t,r){let i=e.length,n=new e.constructor(i);for(let s=0,a=0;a!==i;++s){let o=r[s]*t;for(let l=0;l!==t;++l)n[a++]=e[o+l]}return n}function ZU(e,t,r,i){let n=1,s=e[0];for(;s!==void 0&&s[i]===void 0;)s=e[n++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(t.push(s.time),r.push.apply(r,a)),s=e[n++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(t.push(s.time),a.toArray(r,r.length)),s=e[n++];while(s!==void 0);else do a=s[i],a!==void 0&&(t.push(s.time),r.push(a)),s=e[n++];while(s!==void 0)}var Kx=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{let s;r:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(n=i,i=t[++r],e<i)break t}s=t.length;break r}if(!(e>=n)){let a=t[1];e<a&&(r=2,n=a);for(let o=r-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===o)break;if(i=n,n=t[--r-1],e>=n)break t}s=r,r=0;break r}break e}for(;r<s;){let a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],n=t[r-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let s=0;s!==i;++s)t[s]=r[n+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},tde=class extends Kx{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rd,endingEnd:rd}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,s=e+1,a=i[n],o=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case id:n=e,a=2*t-r;break;case c1:n=i.length-2,a=t+i[n]-i[n+1];break;default:n=e,a=r}if(o===void 0)switch(this.getSettings_().endingEnd){case id:s=e,o=2*r-t;break;case c1:s=1,o=r+i[1]-i[0];break;default:s=e-1,o=t}let l=(r-t)*.5,c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-r),this._offsetPrev=n*c,this._offsetNext=s*c}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(r-t)/(i-t),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let b=0;b!==a;++b)n[b]=g*s[c+b]+v*s[l+b]+y*s[o+b]+x*s[h+b];return n}},JU=class extends Kx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(r-t)/(i-t),h=1-c;for(let u=0;u!==a;++u)n[u]=s[l+u]*h+s[o+u]*c;return n}},rde=class extends Kx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},io=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jv(t,this.TimeBufferType),this.values=Jv(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Jv(e.times,Array),values:Jv(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new rde(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new JU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new tde(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case o1:t=this.InterpolantFactoryMethodDiscrete;break;case l1:t=this.InterpolantFactoryMethodLinear;break;case Cw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return o1;case this.InterpolantFactoryMethodLinear:return l1;case this.InterpolantFactoryMethodSmooth:return Cw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,s=i-1;for(;n!==i&&r[n]<e;)++n;for(;s!==-1&&r[s]>t;)--s;if(++s,n!==0||s!==i){n>=s&&(s=Math.max(s,1),n=s-1);let a=this.getValueSize();this.times=cl(r,n,s),this.values=cl(this.values,n*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==n;a++){let o=r[a];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),e=!1;break}if(s!==null&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),e=!1;break}s=o}if(i!==void 0&&KU(i))for(let a=0,o=i.length;a!==o;++a){let l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=cl(this.times),t=cl(this.values),r=this.getValueSize(),i=this.getInterpolation()===Cw,n=e.length-1,s=1;for(let a=1;a<n;++a){let o=!1,l=e[a],c=e[a+1];if(l!==c&&(a!==1||l!==e[0]))if(i)o=!0;else{let h=a*r,u=h-r,d=h+r;for(let p=0;p!==r;++p){let f=t[h+p];if(f!==t[u+p]||f!==t[d+p]){o=!0;break}}}if(o){if(a!==s){e[s]=e[a];let h=a*r,u=s*r;for(let d=0;d!==r;++d)t[u+d]=t[h+d]}++s}}if(n>0){e[s]=e[n];for(let a=n*r,o=s*r,l=0;l!==r;++l)t[o+l]=t[a+l];++s}return s!==e.length?(this.times=cl(e,0,s),this.values=cl(t,0,s*r)):(this.times=e,this.values=t),this}clone(){let e=cl(this.times,0),t=cl(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};io.prototype.TimeBufferType=Float32Array;io.prototype.ValueBufferType=Float32Array;io.prototype.DefaultInterpolation=l1;var Sp=class extends io{};Sp.prototype.ValueTypeName="bool";Sp.prototype.ValueBufferType=Array;Sp.prototype.DefaultInterpolation=o1;Sp.prototype.InterpolantFactoryMethodLinear=void 0;Sp.prototype.InterpolantFactoryMethodSmooth=void 0;var ej=class extends io{};ej.prototype.ValueTypeName="color";var v1=class extends io{};v1.prototype.ValueTypeName="number";var ide=class extends Kx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(r-t)/(i-t),l=e*a;for(let c=l+a;l!==c;l+=4)mt.slerpFlat(n,0,s,l-a,s,l,o);return n}},qg=class extends io{InterpolantFactoryMethodLinear(e){return new ide(this.times,this.values,this.getValueSize(),e)}};qg.prototype.ValueTypeName="quaternion";qg.prototype.DefaultInterpolation=l1;qg.prototype.InterpolantFactoryMethodSmooth=void 0;var _p=class extends io{};_p.prototype.ValueTypeName="string";_p.prototype.ValueBufferType=Array;_p.prototype.DefaultInterpolation=o1;_p.prototype.InterpolantFactoryMethodLinear=void 0;_p.prototype.InterpolantFactoryMethodSmooth=void 0;var y1=class extends io{};y1.prototype.ValueTypeName="vector";var WA=class{constructor(e,t=-1,r,i=zC){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ps(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(sde(r[s]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,s=r.length;n!==s;++n)t.push(io.toJSON(r[n]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,s=[];for(let a=0;a<n;a++){let o=[],l=[];o.push((a+n-1)%n,a,(a+1)%n),l.push(0,1,0);let c=ede(o);o=nI(o,1,c),l=nI(l,1,c),!i&&o[0]===0&&(o.push(n),l.push(l[0])),s.push(new v1(".morphTargetInfluences["+t[a].name+"]",o,l).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){let l=e[a],c=l.name.match(n);if(c&&c.length>1){let h=c[1],u=i[h];u||(i[h]=u=[]),u.push(l)}}let s=[];for(let a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(c,h,u,d,p){if(u.length!==0){let f=[],m=[];ZU(u,f,m,d),f.length!==0&&p.push(new c(h,f,m))}},i=[],n=e.name||"default",s=e.fps||30,a=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let c=0;c<l.length;c++){let h=l[c].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let u={},d;for(d=0;d<h.length;d++)if(h[d].morphTargets)for(let p=0;p<h[d].morphTargets.length;p++)u[h[d].morphTargets[p]]=-1;for(let p in u){let f=[],m=[];for(let g=0;g!==h[d].morphTargets.length;++g){let v=h[d];f.push(v.time),m.push(v.morphTarget===p?1:0)}i.push(new v1(".morphTargetInfluence["+p+"]",f,m))}o=u.length*s}else{let u=".bones["+t[c].name+"]";r(y1,u+".position",h,"pos",i),r(qg,u+".quaternion",h,"rot",i),r(y1,u+".scale",h,"scl",i)}}return i.length===0?null:new this(n,o,i,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function nde(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return v1;case"vector":case"vector2":case"vector3":case"vector4":return y1;case"color":return ej;case"quaternion":return qg;case"bool":case"boolean":return Sp;case"string":return _p}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function sde(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=nde(e.type);if(e.times===void 0){let r=[],i=[];ZU(e.keys,r,i,"value"),e.times=r,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var sI={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},tj=class{constructor(e,t,r){let i=this,n=!1,s=0,a=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,n===!1&&i.onStart!==void 0&&i.onStart(c,s,a),n=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,a),s===a&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return o?o(c):c},this.setURLModifier=function(c){return o=c,this},this.addHandler=function(c,h){return l.push(c,h),this},this.removeHandler=function(c){let h=l.indexOf(c);return h!==-1&&l.splice(h,2),this},this.getHandler=function(c){for(let h=0,u=l.length;h<u;h+=2){let d=l[h],p=l[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}},ade=new tj,QC=class{constructor(e){this.manager=e!==void 0?e:ade,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},po={},ode=class extends Error{constructor(e,t){super(e),this.response=t}},qA=class extends QC{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=sI.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(po[e]!==void 0){po[e].push({onLoad:t,onProgress:r,onError:i});return}po[e]=[],po[e].push({onLoad:t,onProgress:r,onError:i});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=po[e],h=l.body.getReader(),u=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=u?parseInt(u):0,p=d!==0,f=0,m=new ReadableStream({start(g){v();function v(){h.read().then(({done:y,value:x})=>{if(y)g.close();else{f+=x.byteLength;let b=new ProgressEvent("progress",{lengthComputable:p,loaded:f,total:d});for(let S=0,w=c.length;S<w;S++){let A=c[S];A.onProgress&&A.onProgress(b)}g.enqueue(x),v()}})}}});return new Response(m)}else throw new ode(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return l.json();default:if(a===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(a),h=c&&c[1]?c[1].toLowerCase():void 0,u=new TextDecoder(h);return l.arrayBuffer().then(d=>u.decode(d))}}}).then(l=>{sI.add(e,l);let c=po[e];delete po[e];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onLoad&&d.onLoad(l)}}).catch(l=>{let c=po[e];if(c===void 0)throw this.manager.itemError(e),l;delete po[e];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},$g=class extends Yt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},lde=class extends $g{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Yt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},iS=new we,aI=new C,oI=new C,KC=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $(512,512),this.map=null,this.mapPass=null,this.matrix=new we,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jC,this._frameExtents=new $(1,1),this._viewportCount=1,this._viewports=[new pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;aI.setFromMatrixPosition(e.matrixWorld),t.position.copy(aI),oI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(oI),t.updateMatrixWorld(),iS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iS),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(iS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},cde=class extends KC{constructor(){super(new ki(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=tg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},ude=class extends $g{constructor(e,t,r=0,i=Math.PI/3,n=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Yt.DEFAULT_UP),this.updateMatrix(),this.target=new Yt,this.distance=r,this.angle=i,this.penumbra=n,this.decay=s,this.map=null,this.shadow=new cde}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},lI=new we,rf=new C,nS=new C,hde=class extends KC{constructor(){super(new ki(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $(4,2),this._viewportCount=6,this._viewports=[new pt(2,1,1,1),new pt(0,1,1,1),new pt(3,1,1,1),new pt(1,1,1,1),new pt(3,0,1,1),new pt(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),rf.setFromMatrixPosition(e.matrixWorld),r.position.copy(rf),nS.copy(r.position),nS.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(nS),r.updateMatrixWorld(),i.makeTranslation(-rf.x,-rf.y,-rf.z),lI.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lI)}},dde=class extends $g{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new hde}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},pde=class extends KC{constructor(){super(new VC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},fde=class extends $g{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yt.DEFAULT_UP),this.updateMatrix(),this.target=new Yt,this.shadow=new pde}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},mde=class extends nt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},rj=class extends QC{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new qA(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(o){i?i(o):console.error(o),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(u,d){if(t[d]!==void 0)return t[d];let p=u.interleavedBuffers[d],f=n(u,p.buffer),m=Dv(p.type,f),g=new She(m,p.stride);return g.uuid=p.uuid,t[d]=g,g}function n(u,d){if(r[d]!==void 0)return r[d];let p=u.arrayBuffers[d],f=new Uint32Array(p).buffer;return r[d]=f,f}let s=e.isInstancedBufferGeometry?new mde:new nt,a=e.data.index;if(a!==void 0){let u=Dv(a.type,a.array);s.setIndex(new st(u,1))}let o=e.data.attributes;for(let u in o){let d=o[u],p;if(d.isInterleavedBufferAttribute){let f=i(e.data,d.data);p=new VA(f,d.itemSize,d.offset,d.normalized)}else{let f=Dv(d.type,d.array),m=d.isInstancedBufferAttribute?Ahe:st;p=new m(f,d.itemSize,d.normalized)}d.name!==void 0&&(p.name=d.name),d.usage!==void 0&&p.setUsage(d.usage),d.updateRange!==void 0&&(p.updateRange.offset=d.updateRange.offset,p.updateRange.count=d.updateRange.count),s.setAttribute(u,p)}let l=e.data.morphAttributes;if(l)for(let u in l){let d=l[u],p=[];for(let f=0,m=d.length;f<m;f++){let g=d[f],v;if(g.isInterleavedBufferAttribute){let y=i(e.data,g.data);v=new VA(y,g.itemSize,g.offset,g.normalized)}else{let y=Dv(g.type,g.array);v=new st(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),p.push(v)}s.morphAttributes[u]=p}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let u=0,d=c.length;u!==d;++u){let p=c[u];s.addGroup(p.start,p.count,p.materialIndex)}let h=e.data.boundingSphere;if(h!==void 0){let u=new C;h.center!==void 0&&u.fromArray(h.center),s.boundingSphere=new ns(u,h.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},gde=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=cI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=cI();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function cI(){return(typeof performance>"u"?Date:performance).now()}var vde=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,n,s;switch(t){case"quaternion":i=this._slerp,n=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,n=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[n+a]=r[a];s=t}else{s+=t;let a=t/s;this._mixBufferRegion(r,n,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let o=t*this._origIndex;this._mixBufferRegion(r,i,o,1-n,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(r[o]!==r[o+t]){a.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let n=r,s=i;n!==s;++n)t[n]=t[i+n%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let s=0;s!==n;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){mt.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let s=this._workIndex*n;mt.multiplyQuaternionsFlat(e,s,e,t,e,r),mt.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,n){let s=1-i;for(let a=0;a!==n;++a){let o=t+a;e[o]=e[o]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,n){for(let s=0;s!==n;++s){let a=t+s;e[a]=e[a]+e[r+s]*i}}},ZC="\\[\\]\\.:\\/",yde=new RegExp("["+ZC+"]","g"),JC="[^"+ZC+"]",xde="[^"+ZC.replace("\\.","")+"]",bde=/((?:WC+[\/:])*)/.source.replace("WC",JC),wde=/(WCOD+)?/.source.replace("WCOD",xde),Sde=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",JC),_de=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",JC),Ade=new RegExp("^"+bde+wde+Sde+_de+"$"),Mde=["material","materials","bones","map"],Ede=class{constructor(e,t,r){let i=r||Zt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Zt=class{constructor(e,t,r){this.path=t,this.parsedPath=r||Zt.parseTrackName(t),this.node=Zt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Zt.Composite(e,t,r):new Zt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(yde,"")}static parseTrackName(e){let t=Ade.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let n=r.nodeName.substring(i+1);Mde.indexOf(n)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(n){for(let s=0;s<n.length;s++){let a=n[s];if(a.name===t||a.uuid===t)return a;let o=r(a.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=Zt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let s=e[i];if(s===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(n!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else s.fromArray!==void 0&&s.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Zt.Composite=Ede;Zt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Zt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Zt.prototype.GetterByBindingType=[Zt.prototype._getValue_direct,Zt.prototype._getValue_array,Zt.prototype._getValue_arrayElement,Zt.prototype._getValue_toArray];Zt.prototype.SetterByBindingTypeAndVersioning=[[Zt.prototype._setValue_direct,Zt.prototype._setValue_direct_setNeedsUpdate,Zt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_array,Zt.prototype._setValue_array_setNeedsUpdate,Zt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_arrayElement,Zt.prototype._setValue_arrayElement_setNeedsUpdate,Zt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_fromArray,Zt.prototype._setValue_fromArray_setNeedsUpdate,Zt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Cde=class{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;let n=t.tracks,s=n.length,a=new Array(s),o={endingStart:rd,endingEnd:rd};for(let l=0;l!==s;++l){let c=n[l].createInterpolant(null);a[l]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=wU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let i=this._clip.duration,n=e._clip.duration,s=n/i,a=i/n;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);let o=a.parameterPositions,l=a.sampleValues;return o[0]=n,o[1]=n+r,l[0]=e/s,l[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let o=(e-n)*r;o<0||r===0?t=0:(this._startTime=null,t=r*o)}t*=this._updateTimeScale(e);let s=this._updateTime(t),a=this._updateWeight(e);if(a>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case oae:for(let c=0,h=o.length;c!==h;++c)o[c].evaluate(s),l[c].accumulateAdditive(a);break;case zC:default:for(let c=0,h=o.length;c!==h;++c)o[c].evaluate(s),l[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,s=r===kC;if(e===0)return n===-1?i:s&&(n&1)===1?t-i:i;if(r===bU){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){let a=Math.floor(i/t);i-=t*a,n+=Math.abs(a);let o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(n&1)===1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=id,i.endingEnd=id):(e?i.endingStart=this.zeroSlopeAtStart?id:rd:i.endingStart=c1,t?i.endingEnd=this.zeroSlopeAtEnd?id:rd:i.endingEnd=c1)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,o=s.sampleValues;return a[0]=n,o[0]=t,a[1]=n+e,o[1]=r,this}},Tde=new Float32Array(1),Pde=class extends Ti{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,s=e._propertyBindings,a=e._interpolants,o=r.uuid,l=this._bindingsByRootAndName,c=l[o];c===void 0&&(c={},l[o]=c);for(let h=0;h!==n;++h){let u=i[h],d=u.name,p=c[d];if(p!==void 0)++p.referenceCount,s[h]=p;else{if(p=s[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,o,d));continue}let f=t&&t._propertyBindings[h].binding.parsedPath;p=new vde(Zt.create(r,d,f),u.ValueTypeName,u.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,o,d),s[h]=p}a[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,r)}let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,s=n[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,s=this._actionsByClip,a=s[n],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;let h=a.actionByRoot,u=(e._localRoot||this._root).uuid;delete h[u],o.length===0&&delete s[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[n],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new JU(new Float32Array(2),new Float32Array(2),1,Tde),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,s=typeof e=="string"?WA.findByName(i,e):e,a=s!==null?s.uuid:e,o=this._actionsByClip[a],l=null;if(r===void 0&&(s!==null?r=s.blendMode:r=zC),o!==void 0){let h=o.actionByRoot[n];if(h!==void 0&&h.blendMode===r)return h;l=o.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let c=new Cde(this,s,t,r);return this._bindAction(c,l),this._addInactiveAction(c,a,n),c}existingAction(e,t){let r=t||this._root,i=r.uuid,n=typeof e=="string"?WA.findByName(r,e):e,s=n?n.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,n,s);let a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(n!==void 0){let s=n.knownActions;for(let a=0,o=s.length;a!==o;++a){let l=s[a];this._deactivateAction(l);let c=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let s in r){let a=r[s].actionByRoot,o=a[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let i=this._bindingsByRootAndName,n=i[t];if(n!==void 0)for(let s in n){let a=n[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},ye=class{constructor(e){this.value=e}clone(){return new ye(this.value.clone===void 0?this.value:this.value.clone())}},ij=class{constructor(e,t,r=0,i=1/0){this.ray=new yp(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new FC,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return $A(e,this,r,t),r.sort(uI),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)$A(e[i],this,r,t);return r.sort(uI),r}};function uI(e,t){return e.distance-t.distance}function $A(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let s=0,a=n.length;s<a;s++)$A(n[s],t,r,!0)}}var hI=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Qr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},dI=new $,Dde=class{constructor(e=new $(1/0,1/0),t=new $(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=dI.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return dI.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},pI=new C,e0=new C,Ds=class{constructor(e=new C,t=new C){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){pI.subVectors(e,this.start),e0.subVectors(this.end,this.start);let r=e0.dot(e0),i=e0.dot(pI)/r;return t&&(i=Qr(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},fI=new C,Ode=class extends Yt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new nt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){let l=s/o*Math.PI*2,c=a/o*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Ve(i,3));let n=new Ac({fog:!1,toneMapped:!1});this.cone=new Wg(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fI.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fI),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Lde=class extends Sn{constructor(e,t,r){let i=new YC(t,4,2),n=new Hg({wireframe:!0,fog:!1,toneMapped:!1});super(i,n),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},mI=new C,t0=new C,gI=new C,Ide=class extends Yt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new nt;i.setAttribute("position",new Ve([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Ac({fog:!1,toneMapped:!1});this.lightPlane=new f1(i,n),this.add(this.lightPlane),i=new nt,i.setAttribute("position",new Ve([0,0,0,0,0,1],3)),this.targetLine=new f1(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),mI.setFromMatrixPosition(this.light.matrixWorld),t0.setFromMatrixPosition(this.light.target.matrixWorld),gI.subVectors(t0,mI),this.lightPlane.lookAt(t0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t0),this.targetLine.scale.z=gI.length()}},r0=new C,wr=new bp,x1=class extends Wg{constructor(e){let t=new nt,r=new Ac({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,f){o(p),o(f)}function o(p){i.push(0,0,0),n.push(0,0,0),s[p]===void 0&&(s[p]=[]),s[p].push(i.length/3-1)}t.setAttribute("position",new Ve(i,3)),t.setAttribute("color",new Ve(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new et(16755200),c=new et(16711680),h=new et(43775),u=new et(16777215),d=new et(3355443);this.setColors(l,c,h,u,d)}setColors(e,t,r,i,n){let s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,r.r,r.g,r.b),s.setXYZ(33,r.r,r.g,r.b),s.setXYZ(34,r.r,r.g,r.b),s.setXYZ(35,r.r,r.g,r.b),s.setXYZ(36,r.r,r.g,r.b),s.setXYZ(37,r.r,r.g,r.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b),s.setXYZ(43,n.r,n.g,n.b),s.setXYZ(44,n.r,n.g,n.b),s.setXYZ(45,n.r,n.g,n.b),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;wr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Tr("c",t,e,wr,0,0,-1),Tr("t",t,e,wr,0,0,1),Tr("n1",t,e,wr,-r,-i,-1),Tr("n2",t,e,wr,r,-i,-1),Tr("n3",t,e,wr,-r,i,-1),Tr("n4",t,e,wr,r,i,-1),Tr("f1",t,e,wr,-r,-i,1),Tr("f2",t,e,wr,r,-i,1),Tr("f3",t,e,wr,-r,i,1),Tr("f4",t,e,wr,r,i,1),Tr("u1",t,e,wr,r*.7,i*1.1,-1),Tr("u2",t,e,wr,-r*.7,i*1.1,-1),Tr("u3",t,e,wr,0,i*2,-1),Tr("cf1",t,e,wr,-r,0,1),Tr("cf2",t,e,wr,r,0,1),Tr("cf3",t,e,wr,0,-i,1),Tr("cf4",t,e,wr,0,i,1),Tr("cn1",t,e,wr,-r,0,-1),Tr("cn2",t,e,wr,r,0,-1),Tr("cn3",t,e,wr,0,-i,-1),Tr("cn4",t,e,wr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Tr(e,t,r,i,n,s,a){r0.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let c=0,h=o.length;c<h;c++)l.setXYZ(o[c],r0.x,r0.y,r0.z)}}var b1=class extends Wg{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new nt;n.setIndex(new st(r,1)),n.setAttribute("position",new Ve(i,3)),super(n,new Ac({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},Rde=class extends Wg{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new nt;i.setAttribute("position",new Ve(t,3)),i.setAttribute("color",new Ve(r,3));let n=new Ac({vertexColors:!0,toneMapped:!1});super(i,n),this.type="AxesHelper"}setColors(e,t,r){let i=new et,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vp);var nf=".",eT=Symbol("target"),nj=Symbol("unsubscribe");function XA(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function Bde(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var Ba=Array.isArray;function tT(e){return typeof e=="symbol"}var kde={after:(e,t)=>Ba(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>Ba(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=nf),tT(t)?e+t.toString():e+t):e,initial:e=>{if(Ba(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(nf);return t===-1?"":e.slice(0,t)},last:e=>{if(Ba(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(nf);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(Ba(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(nf);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(nf,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},vs=kde;function zde(e){return typeof e=="object"&&typeof e.next=="function"}function Nde(e,t,r,i,n){let s=e.next;if(t.name==="entries")e.next=function(){let a=s.call(this);return a.done===!1&&(a.value[0]=n(a.value[0],t,a.value[0],i),a.value[1]=n(a.value[1],t,a.value[0],i)),a};else if(t.name==="values"){let a=r[eT].keys();e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,a.next().value,i)),o}}else e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,a.value,i)),a};return e}function vI(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&tT(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var Fde=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],s=n||e;this._pathCache.set(s,t);let a=this._proxyCache.get(s);return a===void 0&&(a=n===void 0?new Proxy(e,r):e,this._proxyCache.set(s,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,vs.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function YA(e){return toString.call(e)==="[object Object]"}function i0(){return!0}function mh(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var sj=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Ude=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),aj={push:i0,pop:i0,shift:i0,unshift:i0,copyWithin:mh,reverse:mh,sort:mh,splice:mh,flat:mh,fill:mh},jde=new Set([...sj,...Ude,...Object.keys(aj)]);function n0(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var oj=["keys","values","entries"],lj=new Set(["has","toString"]),cj={add:n0,clear:n0,delete:n0,forEach:n0},Vde=new Set([...lj,...Object.keys(cj),...oj]);function s0(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var Gde=new Set([...lj,"get"]),uj={set:s0,clear:s0,delete:s0,forEach:s0},Hde=new Set([...Gde,...Object.keys(uj),...oj]),dc=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return sj.has(e)}_shallowClone(e){let t=e;if(YA(e))t={...e};else if(Ba(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(Ba(i)?this._onIsChanged=aj[t]:i instanceof Set?this._onIsChanged=cj[t]:i instanceof Map&&(this._onIsChanged=uj[t]),i):r}update(e,t,r){let i=vs.after(e,this._path);if(t!=="length"){let n=this.clone;vs.walk(i,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],vs.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},yI=class extends dc{static isHandledMethod(e){return jde.has(e)}},Wde=class extends dc{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},xI=class extends dc{static isHandledMethod(e){return Vde.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},bI=class extends dc{static isHandledMethod(e){return Hde.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},qde=class extends dc{constructor(e,t,r,i){super(void 0,t,r,i),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},$de=class extends dc{constructor(e,t,r,i){super(void 0,t,r,i),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Bh=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return YA(e)||Ba(e)||XA(e)}static isHandledMethod(e,t){return YA(e)?dc.isHandledMethod(t):Ba(e)?yI.isHandledMethod(t):e instanceof Set?xI.isHandledMethod(t):e instanceof Map?bI.isHandledMethod(t):XA(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=dc;Ba(e)?i=yI:e instanceof Date?i=Wde:e instanceof Set?i=xI:e instanceof Map?i=bI:e instanceof WeakSet?i=qde:e instanceof WeakMap&&(i=$de),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=Bh.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},Xde={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},rT=(e,t,r={})=>{r={...Xde,...r};let i=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:a,details:o}=r,l=new Fde(n),c=typeof r.onValidate=="function",h=new Bh(c),u=(y,x,b,S,w)=>!c||h.isCloning||r.onValidate(vs.concat(l.getPath(y),x),b,S,w)===!0,d=(y,x,b,S)=>{!vI(l,r,x)&&!(a&&l.isDetached(y,e))&&p(l.getPath(y),x,b,S)},p=(y,x,b,S,w)=>{h.isCloning?h.update(y,x,S):t(vs.concat(y,x),b,S,w)},f=y=>y&&(y[i]||y),m=(y,x,b,S)=>Bde(y)||b==="constructor"||s&&!Bh.isHandledMethod(x,b)||vI(l,r,b)||l.isGetInvariant(x,b)||a&&l.isDetached(x,e)?y:(S===void 0&&(S=l.getPath(x)),l.getProxy(y,vs.concat(S,b),g,i)),g={get(y,x,b){if(tT(x)){if(x===i||x===eT)return y;if(x===nj&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let S=XA(y)?Reflect.get(y,x):Reflect.get(y,x,b);return m(S,y,x)},set(y,x,b,S){b=f(b);let w=y[i]||y,A=w[x];if(n(A,b)&&x in y)return!0;let _=u(y,x,b,A);return _&&l.setProperty(w,x,b,S,A)?(d(y,x,y[x],A),!0):!_},defineProperty(y,x,b){if(!l.isSameDescriptor(b,y,x)){let S=y[x];u(y,x,b.value,S)&&l.defineProperty(y,x,b,S)&&d(y,x,b.value,S)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let b=Reflect.get(y,x),S=u(y,x,void 0,b);return S&&l.deleteProperty(y,x,b)?(d(y,x,void 0,b),!0):!S},apply(y,x,b){let S=x[i]||x;if(l.isUnsubscribed)return Reflect.apply(y,S,b);if((o===!1||o!==!0&&!o.includes(y.name))&&Bh.isHandledType(S)){let w=vs.initial(l.getPath(y)),A=Bh.isHandledMethod(S,y.name);h.start(S,w,b);let _=Reflect.apply(y,h.preferredThisArg(y,x,S),A?b.map(T=>f(T)):b),M=h.isChanged(S,n),E=h.stop();if(Bh.isHandledType(_)&&A&&(x instanceof Map&&y.name==="get"&&(w=vs.concat(w,b[0])),_=l.getProxy(_,w,g)),M){let T={name:y.name,args:b,result:_},P=h.isCloning?vs.initial(w):w,D=h.isCloning?vs.last(w):"";u(vs.get(e,P),D,S,E,T)?p(P,D,S,E,T):h.undo(S)}return(x instanceof Map||x instanceof Set)&&zde(_)?Nde(_,y,x,w,m):_}return Reflect.apply(y,x,b)}},v=l.getProxy(e,r.pathAsArray?[]:"",g);return t=t.bind(v),c&&(r.onValidate=r.onValidate.bind(v)),v};rT.target=e=>e&&e[eT]||e;rT.unsubscribe=e=>e[nj]||e;var wI=rT,Yde=typeof global=="object"&&global&&global.Object===Object&&global,hj=Yde,Qde=typeof self=="object"&&self&&self.Object===Object&&self,Kde=hj||Qde||Function("return this")(),ua=Kde,Zde=ua.Symbol,ks=Zde,dj=Object.prototype,Jde=dj.hasOwnProperty,epe=dj.toString,sf=ks?ks.toStringTag:void 0;function tpe(e){var t=Jde.call(e,sf),r=e[sf];try{e[sf]=void 0;var i=!0}catch{}var n=epe.call(e);return i&&(t?e[sf]=r:delete e[sf]),n}var rpe=tpe,ipe=Object.prototype,npe=ipe.toString;function spe(e){return npe.call(e)}var ape=spe,ope="[object Null]",lpe="[object Undefined]",SI=ks?ks.toStringTag:void 0;function cpe(e){return e==null?e===void 0?lpe:ope:SI&&SI in Object(e)?rpe(e):ape(e)}var Vu=cpe;function upe(e){return e!=null&&typeof e=="object"}var Ko=upe,hpe="[object Symbol]";function dpe(e){return typeof e=="symbol"||Ko(e)&&Vu(e)==hpe}var Zx=dpe;function ppe(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var pj=ppe,fpe=Array.isArray,Za=fpe,mpe=1/0,_I=ks?ks.prototype:void 0,AI=_I?_I.toString:void 0;function fj(e){if(typeof e=="string")return e;if(Za(e))return pj(e,fj)+"";if(Zx(e))return AI?AI.call(e):"";var t=e+"";return t=="0"&&1/e==-mpe?"-0":t}var gpe=fj,vpe=/\s/;function ype(e){for(var t=e.length;t--&&vpe.test(e.charAt(t)););return t}var xpe=ype,bpe=/^\s+/;function wpe(e){return e&&e.slice(0,xpe(e)+1).replace(bpe,"")}var Spe=wpe;function _pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var la=_pe,MI=0/0,Ape=/^[-+]0x[0-9a-f]+$/i,Mpe=/^0b[01]+$/i,Epe=/^0o[0-7]+$/i,Cpe=parseInt;function Tpe(e){if(typeof e=="number")return e;if(Zx(e))return MI;if(la(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=la(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Spe(e);var r=Mpe.test(e);return r||Epe.test(e)?Cpe(e.slice(2),r?2:8):Ape.test(e)?MI:+e}var EI=Tpe;function Ppe(e){return e}var Dpe=Ppe,Ope="[object AsyncFunction]",Lpe="[object Function]",Ipe="[object GeneratorFunction]",Rpe="[object Proxy]";function Bpe(e){if(!la(e))return!1;var t=Vu(e);return t==Lpe||t==Ipe||t==Ope||t==Rpe}var mj=Bpe,kpe=ua["__core-js_shared__"],sS=kpe,CI=function(){var e=/[^.]+$/.exec(sS&&sS.keys&&sS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function zpe(e){return!!CI&&CI in e}var Npe=zpe,Fpe=Function.prototype,Upe=Fpe.toString;function jpe(e){if(e!=null){try{return Upe.call(e)}catch{}try{return e+""}catch{}}return""}var Gu=jpe,Vpe=/[\\^$.*+?()[\]{}|]/g,Gpe=/^\[object .+?Constructor\]$/,Hpe=Function.prototype,Wpe=Object.prototype,qpe=Hpe.toString,$pe=Wpe.hasOwnProperty,Xpe=RegExp("^"+qpe.call($pe).replace(Vpe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ype(e){if(!la(e)||Npe(e))return!1;var t=mj(e)?Xpe:Gpe;return t.test(Gu(e))}var Qpe=Ype;function Kpe(e,t){return e==null?void 0:e[t]}var Zpe=Kpe;function Jpe(e,t){var r=Zpe(e,t);return Qpe(r)?r:void 0}var Hu=Jpe,efe=Hu(ua,"WeakMap"),QA=efe,TI=Object.create,tfe=function(){function e(){}return function(t){if(!la(t))return{};if(TI)return TI(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),rfe=tfe;function ife(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var nfe=ife;function sfe(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var afe=sfe,ofe=800,lfe=16,cfe=Date.now;function ufe(e){var t=0,r=0;return function(){var i=cfe(),n=lfe-(i-r);if(r=i,n>0){if(++t>=ofe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hfe=ufe;function dfe(e){return function(){return e}}var pfe=dfe,ffe=function(){try{var e=Hu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),w1=ffe,mfe=w1?function(e,t){return w1(e,"toString",{configurable:!0,enumerable:!1,value:pfe(t),writable:!0})}:Dpe,gfe=mfe,vfe=hfe(gfe),yfe=vfe;function xfe(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var bfe=xfe,wfe=9007199254740991,Sfe=/^(?:0|[1-9]\d*)$/;function _fe(e,t){var r=typeof e;return t=t!=null?t:wfe,!!t&&(r=="number"||r!="symbol"&&Sfe.test(e))&&e>-1&&e%1==0&&e<t}var iT=_fe;function Afe(e,t,r){t=="__proto__"&&w1?w1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var gj=Afe;function Mfe(e,t){return e===t||e!==e&&t!==t}var nT=Mfe,Efe=Object.prototype,Cfe=Efe.hasOwnProperty;function Tfe(e,t,r){var i=e[t];(!(Cfe.call(e,t)&&nT(i,r))||r===void 0&&!(t in e))&&gj(e,t,r)}var sT=Tfe;function Pfe(e,t,r,i){var n=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=i?i(r[o],e[o],o,r,e):void 0;l===void 0&&(l=e[o]),n?gj(r,o,l):sT(r,o,l)}return r}var Xg=Pfe,PI=Math.max;function Dfe(e,t,r){return t=PI(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=PI(i.length-t,0),a=Array(s);++n<s;)a[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(a),nfe(e,this,o)}}var Ofe=Dfe,Lfe=9007199254740991;function Ife(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Lfe}var aT=Ife;function Rfe(e){return e!=null&&aT(e.length)&&!mj(e)}var vj=Rfe,Bfe=Object.prototype;function kfe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Bfe;return e===r}var oT=kfe;function zfe(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Nfe=zfe,Ffe="[object Arguments]";function Ufe(e){return Ko(e)&&Vu(e)==Ffe}var DI=Ufe,yj=Object.prototype,jfe=yj.hasOwnProperty,Vfe=yj.propertyIsEnumerable,Gfe=DI(function(){return arguments}())?DI:function(e){return Ko(e)&&jfe.call(e,"callee")&&!Vfe.call(e,"callee")},lT=Gfe;function Hfe(){return!1}var Wfe=Hfe,xj=typeof Zn=="object"&&Zn&&!Zn.nodeType&&Zn,OI=xj&&typeof Jn=="object"&&Jn&&!Jn.nodeType&&Jn,qfe=OI&&OI.exports===xj,LI=qfe?ua.Buffer:void 0,$fe=LI?LI.isBuffer:void 0,Xfe=$fe||Wfe,S1=Xfe,Yfe="[object Arguments]",Qfe="[object Array]",Kfe="[object Boolean]",Zfe="[object Date]",Jfe="[object Error]",eme="[object Function]",tme="[object Map]",rme="[object Number]",ime="[object Object]",nme="[object RegExp]",sme="[object Set]",ame="[object String]",ome="[object WeakMap]",lme="[object ArrayBuffer]",cme="[object DataView]",ume="[object Float32Array]",hme="[object Float64Array]",dme="[object Int8Array]",pme="[object Int16Array]",fme="[object Int32Array]",mme="[object Uint8Array]",gme="[object Uint8ClampedArray]",vme="[object Uint16Array]",yme="[object Uint32Array]",hr={};hr[ume]=hr[hme]=hr[dme]=hr[pme]=hr[fme]=hr[mme]=hr[gme]=hr[vme]=hr[yme]=!0;hr[Yfe]=hr[Qfe]=hr[lme]=hr[Kfe]=hr[cme]=hr[Zfe]=hr[Jfe]=hr[eme]=hr[tme]=hr[rme]=hr[ime]=hr[nme]=hr[sme]=hr[ame]=hr[ome]=!1;function xme(e){return Ko(e)&&aT(e.length)&&!!hr[Vu(e)]}var bme=xme;function wme(e){return function(t){return e(t)}}var cT=wme,bj=typeof Zn=="object"&&Zn&&!Zn.nodeType&&Zn,dm=bj&&typeof Jn=="object"&&Jn&&!Jn.nodeType&&Jn,Sme=dm&&dm.exports===bj,aS=Sme&&hj.process,_me=function(){try{var e=dm&&dm.require&&dm.require("util").types;return e||aS&&aS.binding&&aS.binding("util")}catch{}}(),Jd=_me,II=Jd&&Jd.isTypedArray,Ame=II?cT(II):bme,wj=Ame,Mme=Object.prototype,Eme=Mme.hasOwnProperty;function Cme(e,t){var r=Za(e),i=!r&&lT(e),n=!r&&!i&&S1(e),s=!r&&!i&&!n&&wj(e),a=r||i||n||s,o=a?Nfe(e.length,String):[],l=o.length;for(var c in e)(t||Eme.call(e,c))&&!(a&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||iT(c,l)))&&o.push(c);return o}var Sj=Cme;function Tme(e,t){return function(r){return e(t(r))}}var _j=Tme,Pme=_j(Object.keys,Object),Dme=Pme,Ome=Object.prototype,Lme=Ome.hasOwnProperty;function Ime(e){if(!oT(e))return Dme(e);var t=[];for(var r in Object(e))Lme.call(e,r)&&r!="constructor"&&t.push(r);return t}var Rme=Ime;function Bme(e){return vj(e)?Sj(e):Rme(e)}var uT=Bme;function kme(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var zme=kme,Nme=Object.prototype,Fme=Nme.hasOwnProperty;function Ume(e){if(!la(e))return zme(e);var t=oT(e),r=[];for(var i in e)i=="constructor"&&(t||!Fme.call(e,i))||r.push(i);return r}var jme=Ume;function Vme(e){return vj(e)?Sj(e,!0):jme(e)}var hT=Vme,Gme=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hme=/^\w*$/;function Wme(e,t){if(Za(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Zx(e)?!0:Hme.test(e)||!Gme.test(e)||t!=null&&e in Object(t)}var qme=Wme,$me=Hu(Object,"create"),sg=$me;function Xme(){this.__data__=sg?sg(null):{},this.size=0}var Yme=Xme;function Qme(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Kme=Qme,Zme="__lodash_hash_undefined__",Jme=Object.prototype,ege=Jme.hasOwnProperty;function tge(e){var t=this.__data__;if(sg){var r=t[e];return r===Zme?void 0:r}return ege.call(t,e)?t[e]:void 0}var rge=tge,ige=Object.prototype,nge=ige.hasOwnProperty;function sge(e){var t=this.__data__;return sg?t[e]!==void 0:nge.call(t,e)}var age=sge,oge="__lodash_hash_undefined__";function lge(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=sg&&t===void 0?oge:t,this}var cge=lge;function Ap(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ap.prototype.clear=Yme;Ap.prototype.delete=Kme;Ap.prototype.get=rge;Ap.prototype.has=age;Ap.prototype.set=cge;var RI=Ap;function uge(){this.__data__=[],this.size=0}var hge=uge;function dge(e,t){for(var r=e.length;r--;)if(nT(e[r][0],t))return r;return-1}var Jx=dge,pge=Array.prototype,fge=pge.splice;function mge(e){var t=this.__data__,r=Jx(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():fge.call(t,r,1),--this.size,!0}var gge=mge;function vge(e){var t=this.__data__,r=Jx(t,e);return r<0?void 0:t[r][1]}var yge=vge;function xge(e){return Jx(this.__data__,e)>-1}var bge=xge;function wge(e,t){var r=this.__data__,i=Jx(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var Sge=wge;function Mp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Mp.prototype.clear=hge;Mp.prototype.delete=gge;Mp.prototype.get=yge;Mp.prototype.has=bge;Mp.prototype.set=Sge;var eb=Mp,_ge=Hu(ua,"Map"),ag=_ge;function Age(){this.size=0,this.__data__={hash:new RI,map:new(ag||eb),string:new RI}}var Mge=Age;function Ege(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Cge=Ege;function Tge(e,t){var r=e.__data__;return Cge(t)?r[typeof t=="string"?"string":"hash"]:r.map}var tb=Tge;function Pge(e){var t=tb(this,e).delete(e);return this.size-=t?1:0,t}var Dge=Pge;function Oge(e){return tb(this,e).get(e)}var Lge=Oge;function Ige(e){return tb(this,e).has(e)}var Rge=Ige;function Bge(e,t){var r=tb(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var kge=Bge;function Ep(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ep.prototype.clear=Mge;Ep.prototype.delete=Dge;Ep.prototype.get=Lge;Ep.prototype.has=Rge;Ep.prototype.set=kge;var rb=Ep,zge="Expected a function";function dT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(zge);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(dT.Cache||rb),r}dT.Cache=rb;var Nge=dT,Fge=500;function Uge(e){var t=Nge(e,function(i){return r.size===Fge&&r.clear(),i}),r=t.cache;return t}var jge=Uge,Vge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gge=/\\(\\)?/g,Hge=jge(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Vge,function(r,i,n,s){t.push(n?s.replace(Gge,"$1"):i||r)}),t}),Wge=Hge;function qge(e){return e==null?"":gpe(e)}var $ge=qge;function Xge(e,t){return Za(e)?e:qme(e,t)?[e]:Wge($ge(e))}var Cp=Xge,Yge=1/0;function Qge(e){if(typeof e=="string"||Zx(e))return e;var t=e+"";return t=="0"&&1/e==-Yge?"-0":t}var ib=Qge;function Kge(e,t){t=Cp(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[ib(t[r++])];return r&&r==i?e:void 0}var Aj=Kge;function Zge(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var pT=Zge,BI=ks?ks.isConcatSpreadable:void 0;function Jge(e){return Za(e)||lT(e)||!!(BI&&e&&e[BI])}var eve=Jge;function Mj(e,t,r,i,n){var s=-1,a=e.length;for(r||(r=eve),n||(n=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?Mj(o,t-1,r,i,n):pT(n,o):i||(n[n.length]=o)}return n}var tve=Mj;function rve(e){var t=e==null?0:e.length;return t?tve(e,1):[]}var ive=rve;function nve(e){return yfe(Ofe(e,void 0,ive),e+"")}var Ej=nve,sve=_j(Object.getPrototypeOf,Object),fT=sve,ave="[object Object]",ove=Function.prototype,lve=Object.prototype,Cj=ove.toString,cve=lve.hasOwnProperty,uve=Cj.call(Object);function hve(e){if(!Ko(e)||Vu(e)!=ave)return!1;var t=fT(e);if(t===null)return!0;var r=cve.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Cj.call(r)==uve}var dve=hve;function pve(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++i<n;)s[i]=e[i+t];return s}var fve=pve;function mve(){this.__data__=new eb,this.size=0}var gve=mve;function vve(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var yve=vve;function xve(e){return this.__data__.get(e)}var bve=xve;function wve(e){return this.__data__.has(e)}var Sve=wve,_ve=200;function Ave(e,t){var r=this.__data__;if(r instanceof eb){var i=r.__data__;if(!ag||i.length<_ve-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new rb(i)}return r.set(e,t),this.size=r.size,this}var Mve=Ave;function Tp(e){var t=this.__data__=new eb(e);this.size=t.size}Tp.prototype.clear=gve;Tp.prototype.delete=yve;Tp.prototype.get=bve;Tp.prototype.has=Sve;Tp.prototype.set=Mve;var fy=Tp;function Eve(e,t){return e&&Xg(t,uT(t),e)}var Cve=Eve;function Tve(e,t){return e&&Xg(t,hT(t),e)}var Pve=Tve,Tj=typeof Zn=="object"&&Zn&&!Zn.nodeType&&Zn,kI=Tj&&typeof Jn=="object"&&Jn&&!Jn.nodeType&&Jn,Dve=kI&&kI.exports===Tj,zI=Dve?ua.Buffer:void 0,NI=zI?zI.allocUnsafe:void 0;function Ove(e,t){if(t)return e.slice();var r=e.length,i=NI?NI(r):new e.constructor(r);return e.copy(i),i}var Lve=Ove;function Ive(e,t){for(var r=-1,i=e==null?0:e.length,n=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[n++]=a)}return s}var Rve=Ive;function Bve(){return[]}var Pj=Bve,kve=Object.prototype,zve=kve.propertyIsEnumerable,FI=Object.getOwnPropertySymbols,Nve=FI?function(e){return e==null?[]:(e=Object(e),Rve(FI(e),function(t){return zve.call(e,t)}))}:Pj,mT=Nve;function Fve(e,t){return Xg(e,mT(e),t)}var Uve=Fve,jve=Object.getOwnPropertySymbols,Vve=jve?function(e){for(var t=[];e;)pT(t,mT(e)),e=fT(e);return t}:Pj,Dj=Vve;function Gve(e,t){return Xg(e,Dj(e),t)}var Hve=Gve;function Wve(e,t,r){var i=t(e);return Za(e)?i:pT(i,r(e))}var Oj=Wve;function qve(e){return Oj(e,uT,mT)}var KA=qve;function $ve(e){return Oj(e,hT,Dj)}var Lj=$ve,Xve=Hu(ua,"DataView"),ZA=Xve,Yve=Hu(ua,"Promise"),JA=Yve,Qve=Hu(ua,"Set"),eM=Qve,UI="[object Map]",Kve="[object Object]",jI="[object Promise]",VI="[object Set]",GI="[object WeakMap]",HI="[object DataView]",Zve=Gu(ZA),Jve=Gu(ag),e0e=Gu(JA),t0e=Gu(eM),r0e=Gu(QA),qc=Vu;(ZA&&qc(new ZA(new ArrayBuffer(1)))!=HI||ag&&qc(new ag)!=UI||JA&&qc(JA.resolve())!=jI||eM&&qc(new eM)!=VI||QA&&qc(new QA)!=GI)&&(qc=function(e){var t=Vu(e),r=t==Kve?e.constructor:void 0,i=r?Gu(r):"";if(i)switch(i){case Zve:return HI;case Jve:return UI;case e0e:return jI;case t0e:return VI;case r0e:return GI}return t});var og=qc,i0e=Object.prototype,n0e=i0e.hasOwnProperty;function s0e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&n0e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var a0e=s0e,o0e=ua.Uint8Array,_1=o0e;function l0e(e){var t=new e.constructor(e.byteLength);return new _1(t).set(new _1(e)),t}var gT=l0e;function c0e(e,t){var r=t?gT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var u0e=c0e,h0e=/\w*$/;function d0e(e){var t=new e.constructor(e.source,h0e.exec(e));return t.lastIndex=e.lastIndex,t}var p0e=d0e,WI=ks?ks.prototype:void 0,qI=WI?WI.valueOf:void 0;function f0e(e){return qI?Object(qI.call(e)):{}}var m0e=f0e;function g0e(e,t){var r=t?gT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var v0e=g0e,y0e="[object Boolean]",x0e="[object Date]",b0e="[object Map]",w0e="[object Number]",S0e="[object RegExp]",_0e="[object Set]",A0e="[object String]",M0e="[object Symbol]",E0e="[object ArrayBuffer]",C0e="[object DataView]",T0e="[object Float32Array]",P0e="[object Float64Array]",D0e="[object Int8Array]",O0e="[object Int16Array]",L0e="[object Int32Array]",I0e="[object Uint8Array]",R0e="[object Uint8ClampedArray]",B0e="[object Uint16Array]",k0e="[object Uint32Array]";function z0e(e,t,r){var i=e.constructor;switch(t){case E0e:return gT(e);case y0e:case x0e:return new i(+e);case C0e:return u0e(e,r);case T0e:case P0e:case D0e:case O0e:case L0e:case I0e:case R0e:case B0e:case k0e:return v0e(e,r);case b0e:return new i;case w0e:case A0e:return new i(e);case S0e:return p0e(e);case _0e:return new i;case M0e:return m0e(e)}}var N0e=z0e;function F0e(e){return typeof e.constructor=="function"&&!oT(e)?rfe(fT(e)):{}}var U0e=F0e,j0e="[object Map]";function V0e(e){return Ko(e)&&og(e)==j0e}var G0e=V0e,$I=Jd&&Jd.isMap,H0e=$I?cT($I):G0e,W0e=H0e,q0e="[object Set]";function $0e(e){return Ko(e)&&og(e)==q0e}var X0e=$0e,XI=Jd&&Jd.isSet,Y0e=XI?cT(XI):X0e,Q0e=Y0e,K0e=1,Z0e=2,J0e=4,Ij="[object Arguments]",eye="[object Array]",tye="[object Boolean]",rye="[object Date]",iye="[object Error]",Rj="[object Function]",nye="[object GeneratorFunction]",sye="[object Map]",aye="[object Number]",Bj="[object Object]",oye="[object RegExp]",lye="[object Set]",cye="[object String]",uye="[object Symbol]",hye="[object WeakMap]",dye="[object ArrayBuffer]",pye="[object DataView]",fye="[object Float32Array]",mye="[object Float64Array]",gye="[object Int8Array]",vye="[object Int16Array]",yye="[object Int32Array]",xye="[object Uint8Array]",bye="[object Uint8ClampedArray]",wye="[object Uint16Array]",Sye="[object Uint32Array]",sr={};sr[Ij]=sr[eye]=sr[dye]=sr[pye]=sr[tye]=sr[rye]=sr[fye]=sr[mye]=sr[gye]=sr[vye]=sr[yye]=sr[sye]=sr[aye]=sr[Bj]=sr[oye]=sr[lye]=sr[cye]=sr[uye]=sr[xye]=sr[bye]=sr[wye]=sr[Sye]=!0;sr[iye]=sr[Rj]=sr[hye]=!1;function my(e,t,r,i,n,s){var a,o=t&K0e,l=t&Z0e,c=t&J0e;if(r&&(a=n?r(e,i,n,s):r(e)),a!==void 0)return a;if(!la(e))return e;var h=Za(e);if(h){if(a=a0e(e),!o)return afe(e,a)}else{var u=og(e),d=u==Rj||u==nye;if(S1(e))return Lve(e,o);if(u==Bj||u==Ij||d&&!n){if(a=l||d?{}:U0e(e),!o)return l?Hve(e,Pve(a,e)):Uve(e,Cve(a,e))}else{if(!sr[u])return n?e:{};a=N0e(e,u,o)}}s||(s=new fy);var p=s.get(e);if(p)return p;s.set(e,a),Q0e(e)?e.forEach(function(g){a.add(my(g,t,r,g,e,s))}):W0e(e)&&e.forEach(function(g,v){a.set(v,my(g,t,r,v,e,s))});var f=c?l?Lj:KA:l?hT:uT,m=h?void 0:f(e);return bfe(m||e,function(g,v){m&&(v=g,g=e[v]),sT(a,v,my(g,t,r,v,e,s))}),a}var kj=my,_ye=1,Aye=4;function Mye(e){return kj(e,_ye|Aye)}var nb=Mye,Eye="__lodash_hash_undefined__";function Cye(e){return this.__data__.set(e,Eye),this}var Tye=Cye;function Pye(e){return this.__data__.has(e)}var Dye=Pye;function A1(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new rb;++t<r;)this.add(e[t])}A1.prototype.add=A1.prototype.push=Tye;A1.prototype.has=Dye;var Oye=A1;function Lye(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var Iye=Lye;function Rye(e,t){return e.has(t)}var Bye=Rye,kye=1,zye=2;function Nye(e,t,r,i,n,s){var a=r&kye,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(e),h=s.get(t);if(c&&h)return c==t&&h==e;var u=-1,d=!0,p=r&zye?new Oye:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var f=e[u],m=t[u];if(i)var g=a?i(m,f,u,t,e,s):i(f,m,u,e,t,s);if(g!==void 0){if(g)continue;d=!1;break}if(p){if(!Iye(t,function(v,y){if(!Bye(p,y)&&(f===v||n(f,v,r,i,s)))return p.push(y)})){d=!1;break}}else if(!(f===m||n(f,m,r,i,s))){d=!1;break}}return s.delete(e),s.delete(t),d}var zj=Nye;function Fye(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var Uye=Fye;function jye(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var Vye=jye,Gye=1,Hye=2,Wye="[object Boolean]",qye="[object Date]",$ye="[object Error]",Xye="[object Map]",Yye="[object Number]",Qye="[object RegExp]",Kye="[object Set]",Zye="[object String]",Jye="[object Symbol]",e1e="[object ArrayBuffer]",t1e="[object DataView]",YI=ks?ks.prototype:void 0,oS=YI?YI.valueOf:void 0;function r1e(e,t,r,i,n,s,a){switch(r){case t1e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case e1e:return!(e.byteLength!=t.byteLength||!s(new _1(e),new _1(t)));case Wye:case qye:case Yye:return nT(+e,+t);case $ye:return e.name==t.name&&e.message==t.message;case Qye:case Zye:return e==t+"";case Xye:var o=Uye;case Kye:var l=i&Gye;if(o||(o=Vye),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;i|=Hye,a.set(e,t);var h=zj(o(e),o(t),i,n,s,a);return a.delete(e),h;case Jye:if(oS)return oS.call(e)==oS.call(t)}return!1}var i1e=r1e,n1e=1,s1e=Object.prototype,a1e=s1e.hasOwnProperty;function o1e(e,t,r,i,n,s){var a=r&n1e,o=KA(e),l=o.length,c=KA(t),h=c.length;if(l!=h&&!a)return!1;for(var u=l;u--;){var d=o[u];if(!(a?d in t:a1e.call(t,d)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=a;++u<l;){d=o[u];var v=e[d],y=t[d];if(i)var x=a?i(y,v,d,t,e,s):i(v,y,d,e,t,s);if(!(x===void 0?v===y||n(v,y,r,i,s):x)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var b=e.constructor,S=t.constructor;b!=S&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(e),s.delete(t),m}var l1e=o1e,c1e=1,QI="[object Arguments]",KI="[object Array]",a0="[object Object]",u1e=Object.prototype,ZI=u1e.hasOwnProperty;function h1e(e,t,r,i,n,s){var a=Za(e),o=Za(t),l=a?KI:og(e),c=o?KI:og(t);l=l==QI?a0:l,c=c==QI?a0:c;var h=l==a0,u=c==a0,d=l==c;if(d&&S1(e)){if(!S1(t))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new fy),a||wj(e)?zj(e,t,r,i,n,s):i1e(e,t,l,r,i,n,s);if(!(r&c1e)){var p=h&&ZI.call(e,"__wrapped__"),f=u&&ZI.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return s||(s=new fy),n(m,g,r,i,s)}}return d?(s||(s=new fy),l1e(e,t,r,i,n,s)):!1}var d1e=h1e;function Nj(e,t,r,i,n){return e===t?!0:e==null||t==null||!Ko(e)&&!Ko(t)?e!==e&&t!==t:d1e(e,t,r,i,Nj,n)}var p1e=Nj;function f1e(e,t){return e!=null&&t in Object(e)}var m1e=f1e;function g1e(e,t,r){t=Cp(t,e);for(var i=-1,n=t.length,s=!1;++i<n;){var a=ib(t[i]);if(!(s=e!=null&&r(e,a)))break;e=e[a]}return s||++i!=n?s:(n=e==null?0:e.length,!!n&&aT(n)&&iT(a,n)&&(Za(e)||lT(e)))}var v1e=g1e;function y1e(e,t){return e!=null&&v1e(e,t,m1e)}var x1e=y1e,b1e=function(){return ua.Date.now()},lS=b1e,w1e="Expected a function",S1e=Math.max,_1e=Math.min;function A1e(e,t,r){var i,n,s,a,o,l,c=0,h=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(w1e);t=EI(t)||0,la(r)&&(h=!!r.leading,u="maxWait"in r,s=u?S1e(EI(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d);function p(w){var A=i,_=n;return i=n=void 0,c=w,a=e.apply(_,A),a}function f(w){return c=w,o=setTimeout(v,t),h?p(w):a}function m(w){var A=w-l,_=w-c,M=t-A;return u?_1e(M,s-_):M}function g(w){var A=w-l,_=w-c;return l===void 0||A>=t||A<0||u&&_>=s}function v(){var w=lS();if(g(w))return y(w);o=setTimeout(v,m(w))}function y(w){return o=void 0,d&&i?p(w):(i=n=void 0,a)}function x(){o!==void 0&&clearTimeout(o),c=0,i=l=n=o=void 0}function b(){return o===void 0?a:y(lS())}function S(){var w=lS(),A=g(w);if(i=arguments,n=this,l=w,A){if(o===void 0)return f(l);if(u)return clearTimeout(o),o=setTimeout(v,t),p(l)}return o===void 0&&(o=setTimeout(v,t)),a}return S.cancel=x,S.flush=b,S}var vT=A1e;function M1e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var E1e=M1e;function C1e(e,t){return t.length<2?e:Aj(e,fve(t,0,-1))}var T1e=C1e;function P1e(e,t){return p1e(e,t)}var yT=P1e;function D1e(e,t){return t=Cp(t,e),e=T1e(e,t),e==null||delete e[ib(E1e(t))]}var O1e=D1e;function L1e(e){return dve(e)?void 0:e}var I1e=L1e,R1e=1,B1e=2,k1e=4,z1e=Ej(function(e,t){var r={};if(e==null)return r;var i=!1;t=pj(t,function(s){return s=Cp(s,e),i||(i=s.length>1),s}),Xg(e,Lj(e),r),i&&(r=kj(r,R1e|B1e|k1e,I1e));for(var n=t.length;n--;)O1e(r,t[n]);return r}),tM=z1e;function N1e(e,t,r,i){if(!la(e))return e;t=Cp(t,e);for(var n=-1,s=t.length,a=s-1,o=e;o!=null&&++n<s;){var l=ib(t[n]),c=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=a){var h=o[l];c=i?i(h,l,o):void 0,c===void 0&&(c=la(h)?h:iT(t[n+1])?[]:{})}sT(o,l,c),o=o[l]}return e}var F1e=N1e;function U1e(e,t,r){for(var i=-1,n=t.length,s={};++i<n;){var a=t[i],o=Aj(e,a);r(o,a)&&F1e(s,Cp(a,e),o)}return s}var j1e=U1e;function V1e(e,t){return j1e(e,t,function(r,i){return x1e(e,i)})}var G1e=V1e,H1e=Ej(function(e,t){return e==null?{}:G1e(e,t)}),Vo=H1e,W1e="Expected a function";function q1e(e,t,r){var i=!0,n=!0;if(typeof e!="function")throw new TypeError(W1e);return la(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),vT(e,t,{leading:i,maxWait:t,trailing:n})}var $1e=q1e;function X1e(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function Ru(e,t){return Object.setPrototypeOf(e,t),e}var Y1e=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),Q1e=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),K1e=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||sb&&"ontouchend"in document,Z1e=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,J1e=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,exe=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},txe=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},rxe=()=>{var t;if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):(t=window.localStorage.getItem("desktop-app-version"))!=null?t:"0.0.6"},ixe=Y1e();ixe&&rxe();var sb=Q1e(),Fj=K1e(),nxe=Z1e(),Kn=J1e(),JI=exe(),eR=Number(txe());function Uj(e){return Array.isArray(e)?e:[e]}function sxe(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}function o0(e){return sb?e.metaKey:e.ctrlKey}var tt=[],M1={},zf={},gy={};function jj(e){tt.includes(e)||tt.push(e)}function bd(e){delete M1[e.pointerId];for(let t=0;t<tt.length;t++)if(tt[t].pointerId===e.pointerId){tt.splice(t,1);break}}function axe(){tt.splice(0,tt.length)}function E1(e){if(e.pointerType!=="touch")return;let t=M1[e.pointerId];t===void 0&&(t={x:0,y:0},M1[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function cS(e){let t=e.pointerId===tt[0].pointerId?tt[1]:tt[0];return M1[t.pointerId]}function Vj(e){zf[e.key]=!0,gy[e.key]=gy[e.key]===void 0?1:gy[e.key]+1}function Gj(e){if(sb&&zf.Meta)for(let t in zf)zf[t]=!1;else zf[e.key]=!1;gy={}}function oxe(e){e.addEventListener("pointerdown",jj,!0),e.addEventListener("pointerdown",E1,!0),e.addEventListener("pointermove",E1,!0),e.addEventListener("pointerup",bd,!0),e.addEventListener("pointercancel",bd,!0),e.addEventListener("pointerleave",bd,!0),window.addEventListener("keydown",Vj,!0),window.addEventListener("keyup",Gj,!0)}function lxe(e){e.removeEventListener("pointerdown",jj,!0),e.removeEventListener("pointerdown",E1,!0),e.removeEventListener("pointermove",E1,!0),e.removeEventListener("pointerup",bd,!0),e.removeEventListener("pointercancel",bd,!0),e.removeEventListener("pointerleave",bd,!0),window.removeEventListener("keydown",Vj,!0),window.removeEventListener("keyup",Gj,!0)}var Hj,cxe=new Promise(e=>{Hj=e}),l0;function uxe(){if(l0)return l0;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@0.9.453/build",r=jg(()=>import("./navmesh.4b2bf60e.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/navmesh.wasm`).then(o=>o.arrayBuffer())]),s=i.default,a=await s({wasmBinary:n});Hj(a)}return l0=e(),l0}var Wj,hxe=new Promise(e=>{Wj=e}),c0;function dxe(){if(c0)return c0;async function e(){let t=await jg(()=>import("./physics.f729b102.js"),[]);await t.init(),Wj(t)}return c0=e(),c0}var _t=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i={...r,[e]:t};return Object.setPrototypeOf(i,_t.prototype),i}}add(e,t){var r,i;return(i=(r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)!=null?i:this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],i;r===void 0?i={type:2,id:e.id}:i={type:1,id:e.id,data:r};let{id:n,data:s}=e,a={...t,[n]:s};return Object.setPrototypeOf(a,_t.prototype),{data:a,actual:e,reverse:i}}else if(e.type===2){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,_t.prototype),delete n[r],{data:n,actual:e,reverse:{type:1,id:r,data:i}}}}return null}};function xT(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&xT(i)}return Object.freeze(e)}function pxe(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var qj=class extends Error{};function uS(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function kl(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let i=[],n=1/(r+1);for(let s=0;s<r;s++){let a=e+(t-e)*(s+.75+Math.random()*.5)*n;i.push(a)}return i}function bT(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function fxe(){return typeof process<"u"}function $j(e,t){for(let r of e)t(r.id,r.data)!==!0&&$j(r.children,t)}function Xj(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)Xj(r,t)}var Dn=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Dn.prototype)}deepFreeze(){let e=0;for(;e<this.length;)xT(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&Xj(r,t)}}traverse(e){$j(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(a=>a.id===e);if(n<0)throw new Error("not expected");let s=i[n];return i=[...i],i[n]={...s,data:t},this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let s=i,a=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let o=i.findIndex(l=>l.id===a);if(o<0)throw new Error;i=[...i],i[o]={...i[o],children:s}}Object.setPrototypeOf(i,Dn.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:i,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=t,o=this.childrenArray(a),l={fi:r,id:i,data:n,children:s};return o=[...o,l],o.sort((c,h)=>c.fi-h.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(a,o),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(a=>a.id===t);e.localIndex=n,i=[...i];let s=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:{type:7,...s,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:i});if(t!==null){let u=t;for(;u!==null;){if(u===void 0)throw new Error;if(u===i)throw new qj("cyclic tree");u=this.parent(u)}}let n=this.parent(i);if(n===void 0)return null;let s=n,a=this.childrenArray(n),o=a.findIndex(u=>u.id===i);a=[...a];let l=a.splice(o,1)[0],c=this.modifyArrayBy(n,a);n=t,a=c.childrenArray(n);let h=l.fi;return l={...l,fi:r},a=[...a,l],a.sort((u,d)=>u.fi-d.fi),e.localIndex=a.indexOf(l),c=c.modifyArrayBy(n,a),{data:c,actual:e,reverse:{type:9,parent:s,fi:h,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push({...r,...i})}t.sort((r,i)=>pxe(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return{...n,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return kl(0,r,r);{let n=i[0].fi;return kl(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=i.find(a=>a.fi>n.fi);if(s===void 0){let a=i[i.length-1].fi;return kl(a,a+r,r)}else return kl(n.fi,s.fi,r)}}},C1;(e=>{function t(r,i){if(i.type!==0)return null;if(Array.isArray(r)){let n=i.props,s={},a=[...r],o=!1;if(n)for(let l of Object.keys(n)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=a[c],a[c]=n[l],o=!0}return o?{data:a,actual:i,reverse:{type:0,props:s}}:null}else{let n=i.props,s={},a={...r},o=!1;if(n)for(let l of Object.keys(n)){s[l]=a[l];let c=n[l];c===void 0?delete a[l]:a[l]=c,o=!0}return o?{data:a,actual:i,reverse:{type:0,props:s}}:null}}e.runOp=t})(C1||(C1={}));var lt=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,lt.prototype)}deepFreeze(){let e=0;for(;e<this.length;)xT(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(s=>s.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]={...n,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,lt.prototype);let t=e;return fxe()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:r,data:i}=e,n=this,s={fi:t,id:r,data:i};return n=[...n,s],n.sort((a,o)=>a.fi-o.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(s=>s.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(o=>o.id===r);if(n===-1)return null;let s=i[n].fi,a={...i[n],fi:t};return i[n]=a,i.sort((o,l)=>o.fi-l.fi),e.localIndex=i.indexOf(a),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:s,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return kl(0,t,t);{let i=r[0].fi;return kl(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(s=>s.fi>i.fi);if(n===void 0){let s=r[r.length-1].fi;return kl(s,s+t,t)}else return kl(i.fi,n.fi,t)}}};function ep(e){return e&&typeof e=="object"&&e instanceof ei}var ei=class{unusedFunOverridesTable(e){}runOp(e){let t=[],r=this,i=0,n={};for(;i<e.path.length;){if(t.push(r),r=r===void 0?void 0:r[e.path[i]],r!==void 0&&!ep(r))return null;i+=1}r=r?uS(r):new ei;for(let[o,l]of Object.entries(e.props)){let c=r[o];n[o]=c,l===void 0?delete r[o]:r[o]=l}for(;i>0;){if(Object.keys(r).length===0){let o=t[i-1];o&&(r=uS(o),delete r[e.path[i-1]])}else{let o=t[i-1];if(o){let l=uS(o);l[e.path[i-1]]=r,r=l}else{let l=new ei;l[e.path[i-1]]=r,r=l}}i-=1}let s=Object.setPrototypeOf(r,ei.prototype),a={...e,props:n};return{data:s,actual:e,reverse:a}}},tc;(e=>{function t(n,s){var a;return(a=lg(n,s))!=null?a:n}e.apply=t;function r(n,s){return ST(n,s)}e.merge=r;function i(n,s){let a=0,o=s.path,l=n;for(;a<o.length&&l!==void 0;){if(l=qa.zoomOnce(l,o[a]),l===void 0)return s;if(!ep(l))return;a+=1}if(l===void 0)return s;if(ep(l))if(s.type===0){let c={...s.props};for(let h of Object.keys(l))delete c[h];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=wT([s],l);return c?(console.log(c),c):s}else return s}e.filterOp=i})(tc||(tc={}));function wT(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let s=n.id,a=lg(n.data,t[s]);if(r=r||a!==void 0,a===void 0&&(a=n.data),n.children){let o=wT(n.children,t);return o!==void 0?r=!0:o=n.children,{...n,id:s,data:a,children:o}}else return{...n,id:s,data:a}});if(r)return i}function mxe(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let s=n.id,a=lg(n.data,t[s]);return r=r||a!==void 0,a===void 0&&(a=n.data),{...n,id:s,data:a}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function lg(e,t){if(!ep(t))return t;if(e instanceof Dn){let r=wT(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof lt)return mxe(e,t);if(Array.isArray(e)){let r=!1,i=e.map((n,s)=>{let a=lg(n,t[s]);return r=r||a!==void 0,a===void 0&&(a=n),a});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else{if(e instanceof ei)return ST(e,t);if(e&&typeof e=="object"){let r={},i=!1;for(let[n,s]of Object.entries(e)){let a=lg(s,t[n]);i=i||a!==void 0,a===void 0&&(a=s),r[n]=a}return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function ST(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!ep(t))return t;if(!ep(e))return tc.apply(e,t);let r=new Set;for(let n of Object.keys(e))r.add(n);for(let n of Object.keys(t))r.add(n);let i=new ei;for(let n of r){let s=ST(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);i[n]=s}return i}function gxe(e,t){var i;let r={cur:[],result:[],len:0};return e=(i=cg(e,t,r))!=null?i:e,[e,r.result]}function T1(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function P1(e){e&&(e.len-=1)}function vxe(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function Yj(e,t,r){let i=!1,n=e.map(s=>{let a=s.id,o=t[a];if(o!==void 0&&typeof o=="string"&&(i=!0,a=o,r!==null))throw new Error("not supported");let l=cg(s.data,t,T1(r,a));P1(r),i=i||l!==void 0,l===void 0&&(l=s.data);let c=Yj(s.children,t,r);return c!==void 0?i=!0:c=s.children,{...s,id:a,data:l,children:c}});if(i)return n}function yxe(e,t,r){let i=!1,n=e.map(s=>{let a=s.id,o=t[a];if(o!==void 0&&typeof o=="string"&&(i=!0,a=o,r!==null))throw new Error("not supported");let l=cg(s.data,t,T1(r,a));return P1(r),i=i||l!==void 0,l===void 0&&(l=s.data),{...s,id:a,data:l}});if(i)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function cg(e,t,r){if(e instanceof Dn){let i=Yj(e,t,r);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof lt)return yxe(e,t,r);if(Array.isArray(e)){let i=!1,n=e.map((s,a)=>{let o=cg(s,t,T1(r,a));return P1(r),i=i||o!==void 0,o===void 0&&(o=s),o});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!bT(e)){let i={},n=!1;for(let[s,a]of Object.entries(e))if(s!=="name"&&s!=="text"){let o=t[s];if(typeof o=="string"){if(r!==null)throw new Error("not supported");n=!0,s=o}let l=cg(a,t,T1(r,s));P1(r),n=n||l!==void 0,l===void 0&&(l=a),i[s]=l}else i[s]=a;return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(typeof e=="string"){let i=t[e];return i!==void 0&&vxe(r),i}else return}}var rM;(e=>{function t(r,i){let n=qa.zoom(i,r.path);if(typeof n=="object"){let s={};for(let a of Object.keys(r.props))s[a]=n[a];return{...r,props:s}}else return{...r,props:{}}}e.replaceProps=t})(rM||(rM={}));var tn;(e=>{function t(l,c){return{...l,path:l.path.slice(c)}}e.drop=t;function r(l,c){var h,u;return(u=(h=i(l,c))==null?void 0:h.data)!=null?u:l}e.applySimple=r;function i(l,c){var d,p;let h=c.path;for(var u=[];;){let f;if(l instanceof ei&&c.type===0&&(f=l.runOp({...c,path:h.slice(u.length)}),f===null&&(f=void 0)),f===void 0&&u.length===h.length&&(l instanceof Dn||l instanceof lt||l instanceof _t?f=l.runOp(c):f=C1.runOp(l,c)),f!==void 0)if(f!==null){let v=f.data;for(let y=u.length-1;y>=0;y--){let x=h[y],b=u[y];if(b instanceof Dn){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof lt){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof _t){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof ei){let S={...b,[x]:v};v=Object.setPrototypeOf(S,ei.prototype)}else if(typeof b=="object")if(Array.isArray(b)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let S=v;v=[...b],v[x]=S}else v={...b,[x]:v};else return null}return{data:v,actual:{...f.actual,path:h},reverse:{...f.reverse,path:h}}}else return null;let m=h[u.length],g;if(l instanceof Dn){if(typeof m=="number")throw new Error("");g=(d=l.get(m))==null?void 0:d.data}else if(l instanceof lt){if(typeof m=="number")throw new Error("");g=(p=l.get(m))==null?void 0:p.data}else l!==null&&(g=l[m]);if(g!==void 0)u.push(l),l=g;else return null}}e.apply=i;function n(l,c){for(let h=0;h<l.length&&h<c.length;h++)if(l[h]!==c[h])return!0;return!1}e.pathDisjoint=n;function s(l,c){if(l.length!==c.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==c[h])return!1;return!0}e.pathEq=s;function a(l,c){return n(l.path,c.path)}e.commutative=a;function o(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(h=>c.props[h]!==void 0):!1}e.subsumed=o})(tn||(tn={}));var iM;(e=>{function t(){return[]}e.empty=t;function r(c,h){let u=[];for(let d of c){let[p,...f]=d.path;p===h&&u.push({...d,path:f})}return u}e.removePrefix=r;function i(c,h){return c.map(u=>({...u,path:[h,...u.path]}))}e.addPrefix=i;function n(c,h){return[...c,...h]}e.concat=n;function s(c,h){return[...c.filter(u=>!h.some(d=>tn.subsumed(u,d))),...h]}e.compress=s;function a(c,h){return c.every(u=>h.every(d=>tn.commutative(u,d)))}e.commutative=a;function o(c,h){for(let u of h){let d=l(c,u);d!==null&&(c=d.data)}return c}e.applyAll=o;function l(c,h){var u=c;let d=[],p=[];for(let f of h)try{if(f.type===3){let m=qa.zoom(u,[...f.path,f.id]),g=tn.apply(u,{...f,type:2});if(g!==null){u=g.data;let[v,y]=gxe(u,{[f.id]:m});u=v;for(let x of y){let b=x[x.length-1];x.splice(x.length-1,1),d.push({type:0,path:x,props:{[b]:m}}),p.push({type:0,path:x,props:{[b]:f.id}})}p.push(g.reverse),d.push(g.actual)}}else{let m=tn.apply(u,f);m!==null&&(d.push(m.actual),u=m.data,p.push(m.reverse))}}catch(m){if(m instanceof qj)return null;throw m}return{data:u,actual:d,reverse:p.reverse()}}e.apply=l})(iM||(iM={}));var Qj=Symbol(),xxe=Symbol(),ab=Symbol(),Yg=class{reportOp(e,t,r=[]){let i=this;if(t===null)return;i._current=t.data;let n=r;for(;!(i instanceof Zj);){let s=i._path,a=i._current;if(s!==""&&n.splice(0,0,s),i=i._parent,i===null)return;i.update(s,a)}i.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[ab];r&&r(),delete this._children[e]}}}},bxe=class extends Yg{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,C1.runOp(this._current,e),e.path)}},wxe=class extends Yg{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,_t.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},Kj={get(e,t){if(t===ab)return()=>{e._parent=null};if(t===Qj)return e._current;if(t===xxe)return e;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let s=r[t],a=ob(e,t,s);return a!==s?(i===void 0&&(i={},e._children=i),i[t]=a,a):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},Sxe={...Kj,set(e,t,r){var n;let i={type:0,props:{[t]:(n=mi(r))!=null?n:r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},_xe={...Kj,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},_T=class extends Yg{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[ab]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var a;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(a=t.get(e))==null?void 0:a.data,s=ob(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}add(e,t,r,i,n){this.runOp({type:7,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},AT=class extends Yg{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[ab]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id,n=this._current[r].fi;e(this.data(this._current[r].id),i,n)}}find(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(a=t.get(e))==null?void 0:a.data,s=ob(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function hS(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===0&&t.type===0&&qa.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push({...t,path:r})}var Zj=class extends Yg{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){hS(this.ts,t,e),hS(this.actual,r,e),hS(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function ob(e,t,r){return r instanceof Dn?new _T(e,t,r):r instanceof lt?new AT(e,t,r):r instanceof _t?new Proxy(new wxe(e,t,r),_xe):r!==null&&typeof r=="object"?bT(r)?r:new Proxy(new bxe(e,t,r),Sxe):r}function Jj(e){let t=new Zj(e);return[ob(t,"",e),t]}function ug(e,t){let[r,i]=Jj(e);return t(r),i.result()}function mi(e){return e instanceof _T||e instanceof AT?e._current:e!==null&&typeof e=="object"?e[Qj]:e}var qa;(e=>{function t(s,a){if(a.length===s.length)for(var o=0;o<s.length;){if(s[o]!==a[o])return!1;o+=1}else return!1;return!0}e.equal=t;function r(s,a,o){let l=n(o,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...a};return Object.keys(l).forEach(h=>{delete c[h]}),c}else return a}e.removeOverridden=r;function i(s,a){if((s instanceof Dn||s instanceof _T)&&typeof a=="string"||(s instanceof lt||s instanceof AT)&&typeof a=="string")return s.data(a);if(typeof a=="number"&&Array.isArray(s)||typeof a=="string"&&typeof s=="object"&&s!==null)return s[a]}e.zoomOnce=i;function n(s,a,o=0){for(;o<a.length&&s!==void 0;)s=i(s,a[o]),o+=1;return s}e.zoom=n})(qa||(qa={}));function Axe(e,t){let r=[];if(t.length===e.length)for(var i=0;i<e.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}function As(e,t){let r=[];if(t.length<=e.length)for(var i=0;i<t.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}var eV=class{},tR=class extends eV{constructor(e){super(),this.id=e}},rR=class extends eV{constructor(e){super(),this.data=e}},nM;try{nM=new TextDecoder}catch{}var Ue,rc,se=0,xn={},Ft,zl,ys=0,ka=0,qn,Go,cn=[],Gt,iR={useRecords:!1,mapsAsObjects:!0},tV=class{},rV=new tV;rV.name="MessagePack 0xC1";var tp=!1,D1=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Ue)return lV(()=>(aM(),this?this.unpack(e,t):D1.prototype.unpack.call(iR,e,t)));rc=t>-1?t:e.length,se=0,ka=0,zl=null,qn=null,Ue=e;try{Gt=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw Ue=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof D1){if(xn=this,this.structures)return Ft=this.structures,u0();(!Ft||Ft.length>0)&&(Ft=[])}else xn=iR,(!Ft||Ft.length>0)&&(Ft=[]);return u0()}unpackMultiple(e,t){let r,i=0;try{tp=!0;let n=e.length,s=this?this.unpack(e,n):cb.unpack(e,n);if(t){for(t(s);se<n;)if(i=se,t(u0())===!1)return}else{for(r=[s];se<n;)i=se,r.push(u0());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{tp=!1,aM()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function u0(){try{if(!xn.trusted&&!tp){let t=Ft.sharedLength||0;t<Ft.length&&(Ft.length=t)}let e=Ar();if(se==rc)Ft.restoreStructures&&nR(),Ft=null,Ue=null,Go&&(Go=null);else if(se>rc){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!tp)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Ft.restoreStructures&&nR(),aM(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function nR(){for(let e in Ft.restoreStructures)Ft[e]=Ft.restoreStructures[e];Ft.restoreStructures=null}function Ar(){let e=Ue[se++];if(e<160)if(e<128){if(e<64)return e;{let t=Ft[e&63]||xn.getStructures&&iV()[e&63];return t?(t.read||(t.read=MT(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,xn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[sV()]=Ar();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ar(),Ar());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ar();return t}else if(e<192){let t=e-160;if(ka>=se)return zl.slice(se-ys,(se+=t)-ys);if(ka==0&&rc<140){let r=t<16?ET(t):nV(t);if(r!=null)return r}return sM(t)}else{let t;switch(e){case 192:return null;case 193:return qn?(t=Ar(),t>0?qn[1].slice(qn.position1,qn.position1+=t):qn[0].slice(qn.position0,qn.position0-=t)):rV;case 194:return!1;case 195:return!0;case 196:return dS(Ue[se++]);case 197:return t=Gt.getUint16(se),se+=2,dS(t);case 198:return t=Gt.getUint32(se),se+=4,dS(t);case 199:return Rc(Ue[se++]);case 200:return t=Gt.getUint16(se),se+=2,Rc(t);case 201:return t=Gt.getUint32(se),se+=4,Rc(t);case 202:if(t=Gt.getFloat32(se),xn.useFloat32>2){let r=CT[(Ue[se]&127)<<1|Ue[se+1]>>7];return se+=4,(r*t+(t>0?.5:-.5)>>0)/r}return se+=4,t;case 203:return t=Gt.getFloat64(se),se+=8,t;case 204:return Ue[se++];case 205:return t=Gt.getUint16(se),se+=2,t;case 206:return t=Gt.getUint32(se),se+=4,t;case 207:return xn.int64AsNumber?(t=Gt.getUint32(se)*4294967296,t+=Gt.getUint32(se+4)):t=Gt.getBigUint64(se),se+=8,t;case 208:return Gt.getInt8(se++);case 209:return t=Gt.getInt16(se),se+=2,t;case 210:return t=Gt.getInt32(se),se+=4,t;case 211:return xn.int64AsNumber?(t=Gt.getInt32(se)*4294967296,t+=Gt.getUint32(se+4)):t=Gt.getBigInt64(se),se+=8,t;case 212:if(t=Ue[se++],t==114)return cR(Ue[se++]&63);{let r=cn[t];if(r)return r.read?(se++,r.read(Ar())):r.noBuffer?(se++,r()):r(Ue.subarray(se,++se));throw new Error("Unknown extension "+t)}case 213:return t=Ue[se],t==114?(se++,cR(Ue[se++]&63,Ue[se++])):Rc(2);case 214:return Rc(4);case 215:return Rc(8);case 216:return Rc(16);case 217:return t=Ue[se++],ka>=se?zl.slice(se-ys,(se+=t)-ys):Exe(t);case 218:return t=Gt.getUint16(se),se+=2,ka>=se?zl.slice(se-ys,(se+=t)-ys):Cxe(t);case 219:return t=Gt.getUint32(se),se+=4,ka>=se?zl.slice(se-ys,(se+=t)-ys):Txe(t);case 220:return t=Gt.getUint16(se),se+=2,aR(t);case 221:return t=Gt.getUint32(se),se+=4,aR(t);case 222:return t=Gt.getUint16(se),se+=2,oR(t);case 223:return t=Gt.getUint32(se),se+=4,oR(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var Mxe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function MT(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>Mxe.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Ar);return e.highByte===0&&(e.read=sR(t,e.read)),n()}let i={};for(let n=0,s=e.length;n<s;n++){let a=e[n];i[a]=Ar()}return i}return r.count=0,e.highByte===0?sR(t,r):r}var sR=(e,t)=>function(){let r=Ue[se++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=Ft[i]||iV()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=MT(n,e)),n.read()};function iV(){let e=lV(()=>(Ue=null,xn.getStructures()));return Ft=xn._mergeStructures(e,Ft)}var sM=lb,Exe=lb,Cxe=lb,Txe=lb;function lb(e){let t;if(e<16&&(t=ET(e)))return t;if(e>64&&nM)return nM.decode(Ue.subarray(se,se+=e));let r=se+e,i=[];for(t="";se<r;){let n=Ue[se++];if((n&128)===0)i.push(n);else if((n&224)===192){let s=Ue[se++]&63;i.push((n&31)<<6|s)}else if((n&240)===224){let s=Ue[se++]&63,a=Ue[se++]&63;i.push((n&31)<<12|s<<6|a)}else if((n&248)===240){let s=Ue[se++]&63,a=Ue[se++]&63,o=Ue[se++]&63,l=(n&7)<<18|s<<12|a<<6|o;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=oi.apply(String,i),i.length=0)}return i.length>0&&(t+=oi.apply(String,i)),t}function aR(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ar();return t}function oR(e){if(xn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[sV()]=Ar();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ar(),Ar());return t}}var oi=String.fromCharCode;function nV(e){let t=se,r=new Array(e);for(let i=0;i<e;i++){let n=Ue[se++];if((n&128)>0){se=t;return}r[i]=n}return oi.apply(String,r)}function ET(e){if(e<4)if(e<2){if(e===0)return"";{let t=Ue[se++];if((t&128)>1){se-=1;return}return oi(t)}}else{let t=Ue[se++],r=Ue[se++];if((t&128)>0||(r&128)>0){se-=2;return}if(e<3)return oi(t,r);let i=Ue[se++];if((i&128)>0){se-=3;return}return oi(t,r,i)}else{let t=Ue[se++],r=Ue[se++],i=Ue[se++],n=Ue[se++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){se-=4;return}if(e<6){if(e===4)return oi(t,r,i,n);{let s=Ue[se++];if((s&128)>0){se-=5;return}return oi(t,r,i,n,s)}}else if(e<8){let s=Ue[se++],a=Ue[se++];if((s&128)>0||(a&128)>0){se-=6;return}if(e<7)return oi(t,r,i,n,s,a);let o=Ue[se++];if((o&128)>0){se-=7;return}return oi(t,r,i,n,s,a,o)}else{let s=Ue[se++],a=Ue[se++],o=Ue[se++],l=Ue[se++];if((s&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){se-=8;return}if(e<10){if(e===8)return oi(t,r,i,n,s,a,o,l);{let c=Ue[se++];if((c&128)>0){se-=9;return}return oi(t,r,i,n,s,a,o,l,c)}}else if(e<12){let c=Ue[se++],h=Ue[se++];if((c&128)>0||(h&128)>0){se-=10;return}if(e<11)return oi(t,r,i,n,s,a,o,l,c,h);let u=Ue[se++];if((u&128)>0){se-=11;return}return oi(t,r,i,n,s,a,o,l,c,h,u)}else{let c=Ue[se++],h=Ue[se++],u=Ue[se++],d=Ue[se++];if((c&128)>0||(h&128)>0||(u&128)>0||(d&128)>0){se-=12;return}if(e<14){if(e===12)return oi(t,r,i,n,s,a,o,l,c,h,u,d);{let p=Ue[se++];if((p&128)>0){se-=13;return}return oi(t,r,i,n,s,a,o,l,c,h,u,d,p)}}else{let p=Ue[se++],f=Ue[se++];if((p&128)>0||(f&128)>0){se-=14;return}if(e<15)return oi(t,r,i,n,s,a,o,l,c,h,u,d,p,f);let m=Ue[se++];if((m&128)>0){se-=15;return}return oi(t,r,i,n,s,a,o,l,c,h,u,d,p,f,m)}}}}}function dS(e){return xn.copyBuffers?Uint8Array.prototype.slice.call(Ue,se,se+=e):Ue.subarray(se,se+=e)}function Rc(e){let t=Ue[se++];if(cn[t])return cn[t](Ue.subarray(se,se+=e));throw new Error("Unknown extension type "+t)}var lR=new Array(4096);function sV(){let e=Ue[se++];if(e>=160&&e<192){if(e=e-160,ka>=se)return zl.slice(se-ys,(se+=e)-ys);if(!(ka==0&&rc<180))return sM(e)}else return se--,Ar();let t=(e<<5^(e>1?Gt.getUint16(se):e>0?Ue[se]:0))&4095,r=lR[t],i=se,n=se+e-3,s,a=0;if(r&&r.bytes==e){for(;i<n;){if(s=Gt.getUint32(i),s!=r[a++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(s=Ue[i++],s!=r[a++]){i=1879048192;break}if(i===n)return se=i,r.string;n-=3,i=se}for(r=[],lR[t]=r,r.bytes=e;i<n;)s=Gt.getUint32(i),r.push(s),i+=4;for(n+=3;i<n;)s=Ue[i++],r.push(s);let o=e<16?ET(e):nV(e);return o!=null?r.string=o:r.string=sM(e)}var cR=(e,t)=>{var r=Ar();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=Ft[e];return n&&n.isShared&&((Ft.restoreStructures||(Ft.restoreStructures=[]))[e]=n),Ft[e]=r,r.read=MT(r,i),r.read()},aV=typeof self=="object"?self:global;cn[0]=()=>{};cn[0].noBuffer=!0;cn[101]=()=>{let e=Ar();return(aV[e[0]]||Error)(e[1])};cn[105]=e=>{let t=Gt.getUint32(se-4);Go||(Go=new Map);let r=Ue[se],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};Go.set(t,n);let s=Ar();return n.used?Object.assign(i,s):(n.target=s,s)};cn[112]=e=>{let t=Gt.getUint32(se-4),r=Go.get(t);return r.used=!0,r.target};cn[115]=()=>new Set(Ar());var oV=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");cn[116]=e=>{let t=e[0],r=oV[t];if(!r)throw new Error("Could not find typed array for code "+t);return new aV[r](Uint8Array.prototype.slice.call(e,1).buffer)};cn[120]=()=>{let e=Ar();return new RegExp(e[0],e[1])};cn[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=se;se+=t-4,qn=[Ar(),Ar()],qn.position0=0,qn.position1=0;let i=se;se=r;try{return Ar()}finally{se=i}};cn[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function lV(e){let t=rc,r=se,i=ys,n=ka,s=zl,a=Go,o=qn,l=new Uint8Array(Ue.slice(0,rc)),c=Ft,h=Ft.slice(0,Ft.length),u=xn,d=tp,p=e();return rc=t,se=r,ys=i,ka=n,zl=s,Go=a,qn=o,Ue=l,tp=d,Ft=c,Ft.splice(0,Ft.length,...h),xn=u,Gt=new DataView(Ue.buffer,Ue.byteOffset,Ue.byteLength),p}function aM(){Ue=null,Go=null,Ft=null}function Pxe(e){e.unpack?cn[e.type]=e.unpack:cn[e.type]=e}var CT=new Array(147);for(let e=0;e<256;e++)CT[e]=+("1e"+Math.floor(45.15-e*.30103));var cb=new D1({useRecords:!1});cb.unpack;cb.unpackMultiple;cb.unpack;var Dxe=new Float32Array(1);new Uint8Array(Dxe.buffer,0,4);var vy;try{vy=new TextEncoder}catch{}var O1,TT,ub=typeof Buffer<"u",pS=ub?Buffer.allocUnsafeSlow:Uint8Array,cV=ub?Buffer:Uint8Array,uR=ub?4294967296:2144337920,me,Pr,le=0,pa,fa=null,Oxe=/[\u0080-\uFFFF]/,af=Symbol("record-id"),uV=class extends D1{constructor(e){super(e),this.offset=0;let t,r,i,n,s,a=0,o=cV.prototype.utf8Write?function(w,A,_){return me.utf8Write(w,A,_)}:vy&&vy.encodeInto?function(w,A){return vy.encodeInto(w,me.subarray(A)).written}:!1,l=this;e||(e={});let c=e&&e.sequential,h=e.structures||e.saveStructures,u=e.maxSharedStructures;if(u==null&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;d==null&&(d=h?32:64),c&&!e.saveStructures&&(this.structures=[]);let p=u>32||d+u>64,f=u+64,m=u+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(w,A){if(me||(me=new pS(8192),Pr=new DataView(me.buffer,0,8192),le=0),pa=me.length-10,pa-le<2048?(me=new pS(me.length),Pr=new DataView(me.buffer,0,me.length),pa=me.length-10,le=0):le=le+7&2147483640,t=le,s=l.structuredClone?new Map:null,l.bundleStrings?(fa=["",""],me[le++]=214,me[le++]=98,fa.position=le-t,le+=4):fa=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let _=r.sharedLength||0;if(_>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let M=0;M<_;M++){let E=r[M];if(!E)continue;let T,P=r.transitions;for(let D=0,L=E.length;D<L;D++){let R=E[D];T=P[R],T||(T=P[R]=Object.create(null)),P=T}P[af]=M+64}a=_}c||(r.nextId=_+64)}i&&(i=!1),n=r||[];try{if(x(w),fa){Pr.setUint32(fa.position+t,le-fa.position-t);let _=fa;fa=null,x(_[0]),x(_[1])}if(l.offset=le,s&&s.idsToInsert){le+=s.idsToInsert.length*6,le>pa&&S(le),l.offset=le;let _=Ixe(me.subarray(t,le),s.idsToInsert);return s=null,_}return A&Rxe?(me.start=t,me.end=le,me):me.subarray(t,le)}finally{if(r){if(y<10&&y++,v>1e4)r.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!c){for(let _=0,M=g.length;_<M;_++)g[_][af]=0;g=[]}if(i&&l.saveStructures){let _=r.sharedLength||u;r.length>_&&(r=r.slice(0,_));let M=me.subarray(t,le);return l.saveStructures(r,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(w)):(a=_,M)}}A&Bxe&&(le=t)}};let x=w=>{le>pa&&(me=S(le));var A=typeof w,_;if(A==="string"){let M=w.length;if(fa&&M>=8&&M<4096){let P=Oxe.test(w);fa[P?0:1]+=w,me[le++]=193,x(P?-M:M);return}let E;M<32?E=1:M<256?E=2:M<65536?E=3:E=5;let T=M*3;if(le+T>pa&&(me=S(le+T)),M<64||!o){let P,D,L,R=le+E;for(P=0;P<M;P++)D=w.charCodeAt(P),D<128?me[R++]=D:D<2048?(me[R++]=D>>6|192,me[R++]=D&63|128):(D&64512)===55296&&((L=w.charCodeAt(P+1))&64512)===56320?(D=65536+((D&1023)<<10)+(L&1023),P++,me[R++]=D>>18|240,me[R++]=D>>12&63|128,me[R++]=D>>6&63|128,me[R++]=D&63|128):(me[R++]=D>>12|224,me[R++]=D>>6&63|128,me[R++]=D&63|128);_=R-le-E}else _=o(w,le+E,T);_<32?me[le++]=160|_:_<256?(E<2&&me.copyWithin(le+2,le+1,le+1+_),me[le++]=217,me[le++]=_):_<65536?(E<3&&me.copyWithin(le+3,le+2,le+2+_),me[le++]=218,me[le++]=_>>8,me[le++]=_&255):(E<5&&me.copyWithin(le+5,le+3,le+3+_),me[le++]=219,Pr.setUint32(le,_),le+=4),le+=_}else if(A==="number")if(w>>>0===w)w<64?me[le++]=w:w<256?(me[le++]=204,me[le++]=w):w<65536?(me[le++]=205,me[le++]=w>>8,me[le++]=w&255):(me[le++]=206,Pr.setUint32(le,w),le+=4);else if(w>>0===w)w>=-32?me[le++]=256+w:w>=-128?(me[le++]=208,me[le++]=w+256):w>=-32768?(me[le++]=209,Pr.setInt16(le,w),le+=2):(me[le++]=210,Pr.setInt32(le,w),le+=4);else{let M;if((M=this.useFloat32)>0&&w<4294967296&&w>=-2147483648){me[le++]=202,Pr.setFloat32(le,w);let E;if(M<4||(E=w*CT[(me[le]&127)<<1|me[le+1]>>7])>>0===E){le+=4;return}else le--}me[le++]=203,Pr.setFloat64(le,w),le+=8}else if(A==="object")if(!w)me[le++]=192;else{if(s){let E=s.get(w);if(E){if(!E.id){let T=s.idsToInsert||(s.idsToInsert=[]);E.id=T.push(E)}me[le++]=214,me[le++]=112,Pr.setUint32(le,E.id),le+=4;return}else s.set(w,{offset:le-t})}let M=w.constructor;if(M===Object)b(w,!0);else if(M===Array){_=w.length,_<16?me[le++]=144|_:_<65536?(me[le++]=220,me[le++]=_>>8,me[le++]=_&255):(me[le++]=221,Pr.setUint32(le,_),le+=4);for(let E=0;E<_;E++)x(w[E])}else if(M===Map){_=w.size,_<16?me[le++]=128|_:_<65536?(me[le++]=222,me[le++]=_>>8,me[le++]=_&255):(me[le++]=223,Pr.setUint32(le,_),le+=4);for(let[E,T]of w)x(E),x(T)}else{for(let E=0,T=O1.length;E<T;E++){let P=TT[E];if(w instanceof P){let D=O1[E];if(D.write){D.type&&(me[le++]=212,me[le++]=D.type,me[le++]=0),x(D.write.call(this,w));return}let L=me,R=Pr,V=le;me=null;let F;try{F=D.pack.call(this,w,O=>(me=L,L=null,le+=O,le>pa&&S(le),{target:me,targetView:Pr,position:le-O}),x)}finally{L&&(me=L,Pr=R,le=V,pa=me.length-10)}F&&(F.length+le>pa&&S(F.length+le),le=Lxe(F,me,le,D.type));return}}b(w,!w.hasOwnProperty)}}else if(A==="boolean")me[le++]=w?195:194;else if(A==="bigint"){if(w<BigInt(1)<<BigInt(63)&&w>=-(BigInt(1)<<BigInt(63)))me[le++]=211,Pr.setBigInt64(le,w);else if(w<BigInt(1)<<BigInt(64)&&w>0)me[le++]=207,Pr.setBigUint64(le,w);else if(this.largeBigIntToFloat)me[le++]=203,Pr.setFloat64(le,Number(w));else throw new RangeError(w+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");le+=8}else if(A==="undefined")this.encodeUndefinedAsNil?me[le++]=192:(me[le++]=212,me[le++]=0,me[le++]=0);else if(A==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+A)},b=this.useRecords===!1?this.variableMapSize?w=>{let A=Object.keys(w),_=A.length;_<16?me[le++]=128|_:_<65536?(me[le++]=222,me[le++]=_>>8,me[le++]=_&255):(me[le++]=223,Pr.setUint32(le,_),le+=4);let M;for(let E=0;E<_;E++)x(M=A[E]),x(w[M])}:(w,A)=>{me[le++]=222;let _=le-t;le+=2;let M=0;for(let E in w)(A||w.hasOwnProperty(E))&&(x(E),x(w[E]),M++);me[_+++t]=M>>8,me[_+t]=M&255}:w=>{let A=Object.keys(w),_,M=n.transitions||(n.transitions=Object.create(null)),E=0;for(let P=0,D=A.length;P<D;P++){let L=A[P];_=M[L],_||(_=M[L]=Object.create(null),E++),M=_}let T=M[af];if(T)T>=96&&p?(me[le++]=((T-=96)&31)+96,me[le++]=T>>5):me[le++]=T;else{T=n.nextId,T||(T=64),T<f&&this.shouldShareStructure&&!this.shouldShareStructure(A)?(T=n.nextOwnId,T<m||(T=f),n.nextOwnId=T+1):(T>=m&&(T=f),n.nextId=T+1);let P=A.highByte=T>=96&&p?T-96>>5:-1;M[af]=T,n[T-64]=A,T<f?(A.isShared=!0,n.sharedLength=T-63,i=!0,P>=0?(me[le++]=(T&31)+96,me[le++]=P):me[le++]=T):(P>=0?(me[le++]=213,me[le++]=114,me[le++]=(T&31)+96,me[le++]=P):(me[le++]=212,me[le++]=114,me[le++]=T),E&&(v+=y*E),g.length>=d&&(g.shift()[af]=0),g.push(M),x(A))}for(let P=0,D=A.length;P<D;P++)x(w[A[P]])},S=w=>{let A;if(w>16777216){if(w-t>uR)throw new Error("Packed buffer would be larger than maximum buffer size");A=Math.min(uR,Math.round(Math.max((w-t)*(w>67108864?1.25:2),4194304)/4096)*4096)}else A=(Math.max(w-t<<2,me.length-1)>>12)+1<<12;let _=new pS(A);return Pr=new DataView(_.buffer,0,A),me.copy?me.copy(_,0,t,w):_.set(me.slice(t,w)),le-=t,t=0,pa=_.length-10,me=_}}useBuffer(e){me=e,Pr=new DataView(me.buffer,me.byteOffset,me.byteLength),le=0}};TT=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,tV];O1=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:s,position:a}=t(6);n[a++]=214,n[a++]=255,s.setUint32(a,i)}else if(i>0&&i<17179869184){let{target:n,targetView:s,position:a}=t(10);n[a++]=215,n[a++]=255,s.setUint32(a,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(a+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:s,position:a}=t(3);n[a++]=212,n[a++]=255,n[a++]=255}else{let{target:n,targetView:s,position:a}=t(15);n[a++]=199,n[a++]=12,n[a++]=255,s.setUint32(a,e.getMilliseconds()*1e6),s.setBigInt64(a+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?hR(e,16,t):dR(ub?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==cV&&this.structuredClone?hR(e,oV.indexOf(r.name),t):dR(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function hR(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=r(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=r(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=r(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function dR(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:s}=t(r+5);i[n++]=198,s.setUint32(n,r),n+=4}i.set(e,n)}function Lxe(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function Ixe(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((s,a)=>s.offset>a.offset?1:-1);r=t.pop();){let s=r.offset,a=r.id;e.copyWithin(s+i,s,n),i-=6;let o=s+i;e[o++]=214,e[o++]=105,e[o++]=a>>24,e[o++]=a>>16&255,e[o++]=a>>8&255,e[o++]=a&255,n=s}return e}function Pp(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");TT.unshift(e.Class),O1.unshift(e)}Pxe(e)}var hV=new uV({useRecords:!1});hV.pack;hV.pack;var Rxe=512,Bxe=1024,pR=new uV({structuredClone:!0});Pp({Class:_t.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,_t.prototype),e}});Pp({Class:lt.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,lt.prototype),e}});Pp({Class:Dn.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Dn.prototype),e}});Pp({Class:tR.prototype.constructor,type:4,write(e){return e.id},read(e){return new tR(e)}});Pp({Class:rR.prototype.constructor,type:5,write(e){return e.data},read(e){return new rR(e)}});Pp({Class:ei.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,ei.prototype),e}});function kxe(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}function oM(e){if(bT(e))return e;if(Array.isArray(e))return e.map(oM);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=oM(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var lM;(e=>{function t(n){return pR.pack(n)}e.serialize=t;function r(n){return pR.unpack(n)}e.deserialize=r;function i(n){return kxe(t(oM(n))).toString()}e.checksum=i})(lM||(lM={}));var ma={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Create"],MouseHover:["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition"],Scroll:["Transition","Animation","Create"],Start:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition"],Conditional:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],MouseDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],MouseUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],MousePress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset"],KeyDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],KeyUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],KeyPress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset"],GameControl:["Transition","Animation","Audio","Video","Create"],Collision:["Transition","Animation","Audio","Video","Create","Destroy","Reset"],Trigger:["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],Resize:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset"]},fR;(e=>{function t(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}e.is=t;function r(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,toggle:!1,actions:new lt}:{type:i,disabled:!1,key:void 0,toggle:!1,actions:new lt}}e.defaultData=r})(fR||(fR={}));var L1;(e=>{function t(r){return{type:"Property",value:[r!=null?r:null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(L1||(L1={}));var cM;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:L1.propertyDefaultData(n),rOperand:{...L1.valueDefaultData}}}e.comparisonDefaultData=t;function r(n){return{type:"Distance",toObject:n!=null?n:null,fromObject:n!=null?n:null,distance:200}}e.distanceDefaultData=r;function i(n,s){return{type:"State",object:n!=null?n:null,state:s!=null?s:null}}e.stateDefaultData=i})(cM||(cM={}));var mR;(e=>{function t(i){return i.type==="Conditional"}e.is=t;function r(i){return{type:"Conditional",disabled:!1,inActions:new lt,outActions:new lt,condition:cM.distanceDefaultData(i)}}e.defaultData=r})(mR||(mR={}));var gR;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new lt,drop:new lt}})(gR||(gR={}));var uM;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new lt})(uM||(uM={}));var hM;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(hM||(hM={}));var vR;(e=>{function t(i){return i.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new lt}}e.defaultData=r})(vR||(vR={}));var yR;(e=>{function t(i){return i.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new lt}}e.defaultData=r})(yR||(yR={}));var xR;(e=>{function t(i){return i.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new lt}}e.defaultData=r})(xR||(xR={}));var bR;(e=>{function t(i){return i.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new lt}}e.defaultData=r})(bR||(bR={}));var wR;(e=>{function t(i){return i.type==="Trigger"}e.is=t;function r(i,n){return{type:"Trigger",disabled:!1,toggle:!1,target:"all",triggeringObjects:[],actions:new lt,triggerZone:"box",position:n.toArray(),rotation:[0,0,0],size:i.toArray(),radius:i.length()/2,helperVisible:!0}}e.defaultData=r})(wR||(wR={}));var dM;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(a){return a.type==="Resize"}e.is=t;function r(a){return typeof a=="string"?a:"custom"}e.sizeToDevice=r;function i(a){return typeof a=="string"?[...e.defaultSizes[a]]:[...a]}e.deviceToSize=i;function n(){let a={size:"mobile",operator:"<",actions:new lt},o={size:"tablet",operator:"<",actions:new lt},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new lt},c=new lt;return c.push({id:vt.generateUUID(),fi:0,data:a},{id:vt.generateUUID(),fi:1,data:o},{id:vt.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:c}}e.defaultData=n;function s(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new lt}}e.defaultBreakpointData=s})(dM||(dM={}));var Dp="personal camera",pm="a218fcc3-276b-49b9-b485-49037fd14f5f",zxe=2960946,zs=5526619,od;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]}e.isEqual=t;function r(i,n,s){return[i[0]+(n[0]-i[0])*s,i[1]+(n[1]-i[1])*s]}e.lerp=r})(od||(od={}));var yu;(e=>{function t(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}e.isEqual=t;function r(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}e.add=r;function i(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}e.sub=i;function n(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}e.div=n;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}e.mul=s;function a(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}e.dist=a;function o(l,c,h){return[l[0]+(c[0]-l[0])*h,l[1]+(c[1]-l[1])*h,l[2]+(c[2]-l[2])*h]}e.lerp=o})(yu||(yu={}));var I1;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]}e.isEqual=t;function r(i,n,s){return[i[0]+(n[0]-i[0])*s,i[1]+(n[1]-i[1])*s,i[2]+(n[2]-i[2])*s,i[3]+(n[3]-i[3])*s]}e.lerp=r})(I1||(I1={}));var rp;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,s){for(let a=0;a<16;a++)if(n[a]!==s[a])return!1;return!0}e.isEqual=t;function r(n){return n!=null?n:e.identity}e.simplify=r;function i(n,s){let a=s.slice(0);for(var o=0,l=s.length;o<l;o+=3){let c=n[3]*s[o]+n[7]*s[o+1]+n[11]*s[o+2]+n[15];a[o]=(n[0]*s[o]+n[4]*s[o+1]+n[8]*s[o+2]+n[12])/c,a[o+1]=(n[1]*s[o]+n[5]*s[o+1]+n[9]*s[o+2]+n[13])/c,a[o+2]=(n[2]*s[o]+n[6]*s[o+1]+n[10]*s[o+2]+n[14])/c}return a}e.applyMatrix4=i})(rp||(rp={}));var Zi;(e=>{function t(l){return typeof l=="object"&&typeof l.r=="number"&&typeof l.g=="number"&&typeof l.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:1}}e.toRgb255a1=r;function i(l){return{r:l.r,g:l.g,b:l.b}}e.clone=i;function n(l){return l=Math.floor(l),{r:(l>>16&255)/255,g:(l>>8&255)/255,b:(l&255)/255}}e.fromHex=n;function s(l){return Math.round(l.r*255)*65536+Math.round(l.g*255)*256+Math.round(l.b*255)}e.toHex=s;function a(l,c){return l.r===c.r&&l.g===c.g&&l.b===c.b}e.equals=a;function o(l,c,h){return{r:l.r+(c.r-l.r)*h,g:l.g+(c.g-l.g)*h,b:l.b+(c.b-l.b)*h}}e.lerp=o})(Zi||(Zi={}));var Js;(e=>{e.white={...Zi.white,a:1},e.transparent={...Zi.white,a:0};function t(a){return{r:a[0],g:a[1],b:a[2],a:a[3]}}e.from0to1=t;function r(a,o){return{...Zi.fromHex(a),a:o}}e.fromHexAndA=r;function i(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:a.a}}e.toRgb255a1=i;function n(a,o){return Zi.equals(a,o)&&a.a===o.a}e.equals=n;function s(a,o,l){return{r:a.r+(o.r-a.r)*l,g:a.g+(o.g-a.g)*l,b:a.b+(o.b-a.b)*l,a:a.a+(o.a-a.a)*l}}e.lerp=s})(Js||(Js={}));var pM;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(pM||(pM={}));var SR;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(SR||(SR={}));var _R;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(_R||(_R={}));var _l;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(_l||(_l={}));var Bu;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(Bu||(Bu={}));var ip;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(ip||(ip={}));var Nl;(e=>{function t(i,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*n,0,0]},grid:{count:[2,2,2],size:i.map(s=>s*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(i,n){let s={...i};if(dV.forEach(a=>{var o;Object.assign(s,{[a]:(o=n[a])!=null?o:i[a]})}),s.radial={...i.radial},n.radial){let a=i.radial,o=n.radial;pV.forEach(l=>{var c;Object.assign(s.radial,{[l]:(c=o[l])!=null?c:a[l]})})}if(s.linear={...i.linear},n.linear){let a=i.linear,o=n.linear;fV.forEach(l=>{var c;Object.assign(s.linear,{[l]:(c=o[l])!=null?c:a[l]})})}if(s.grid={...i.grid},n.grid){let a=i.grid,o=n.grid;mV.forEach(l=>{var c;Object.assign(s.grid,{[l]:(c=o[l])!=null?c:a[l]})})}if(s.toObject={...i.toObject},n.toObject){let a=i.toObject,o=n.toObject;gV.forEach(l=>{var c;Object.assign(s.toObject,{[l]:(c=o[l])!=null?c:a[l]})})}if(s.randomnessObject={...i.randomnessObject},n.randomnessObject){let a=i.randomnessObject,o=n.randomnessObject;vV.forEach(l=>{var c;Object.assign(s.randomnessObject,{[l]:(c=o[l])!=null?c:a[l]})})}return s}e.merge=r})(Nl||(Nl={}));var fM;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(i,n){let s=[];i.count!==void 0&&s.push({type:0,path:n,props:{count:i.count}});for(let a of t){let o=i[a];o&&Object.keys(o).length>0&&s.push({type:0,path:[...n,a],props:o})}return s}e.toOps=r})(fM||(fM={}));var dV=["count"],pV=["radius","start","end","position","scale","rotation"],fV=["position","scale","rotation"],mV=["count","size"],gV=["count","position","scale","rotation"],vV=["strength","scale","rotation","position","movement","seed","freqScale"],mM;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(mM||(mM={}));var gM;(e=>{function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:Js.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(i==="SpotLight")return{type:i,color:Js.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:Js.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(gM||(gM={}));var np;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(np||(np={}));var vM;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(vM||(vM={}));var yM;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(yM||(yM={}));var xM;(e=>e.defaultData={...yM.defaultData,...vM.defaultData})(xM||(xM={}));var AR;(e=>{function t(r,i){var s,a,o,l;let n=[];if("material"in r){let c=typeof r.material=="string"?(a=i.materials[r.material])!=null?a:(s=i.lib.materials[r.material])==null?void 0:s.asset:r.material;c&&n.push(c)}else if("materials"in r)for(let c of r.materials){let h=typeof c=="string"?(l=i.materials[c])!=null?l:(o=i.lib.materials[c])==null?void 0:o.asset:c;h&&n.push(h)}return n}e.getMaterialData=t})(AR||(AR={}));var R1;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(R1||(R1={}));var MR;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(MR||(MR={}));function Nxe(e){return e.type!=="displace"}var ER;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(ER||(ER={}));var yV=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Fxe=["wrapping","image","video","name"],vn;(e=>{function t(s,a){let{texture:o,...l}=a;if(Object.assign(s,l),o){let c=s.texture;c&&Object.assign(c,o)}}e.patch=t;function r(s,a){return s==="light"&&a?i(a):n(s)}e.defaultData=r;function i(s){let a={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(s){case"phong":return{...a,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...a,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...a,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...a,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(s){let a={alpha:1,mode:0,isMask:!1,visible:!0};switch(s){case"texture":return{...a,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...a,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:R1.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...a,type:"color",color:Zi.fromHex(zs)};case"depth":return{...a,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...a,type:"normal",cnormal:[1,1,1]};case"gradient":return{...a,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...a,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Zi.fromHex(6710886),a:1},colorB:{...Zi.fromHex(6710886),a:1},colorC:{...Zi.fromHex(16777215),a:1},colorD:{...Zi.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...a,type:"fresnel",color:Js.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...a,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...a,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Js.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...a,type:"outline",outlineColor:Js.fromHexAndA(0,1),contourColor:Js.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...a,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...a,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...a,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Zi.fromHex(0),a:1},colorB:{...Zi.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(vn||(vn={}));var Fi;(e=>{function t(c){return!c.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}e.isMergable=t;function r(c){let h="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([d,p])=>{h+=`${d}${p}`,Array.isArray(p)?p.forEach(f=>h+=`${f}`):typeof p=="object"?Object.values(p).forEach(f=>{typeof f=="number"?h+=`${f.toFixed(4)}`:h+=`${f}`}):h+=`${p}`})}),h}e.getHash=r;function i(){return{layers:new lt}}e.defaultEmptyData=i;function n(c="layer1",h="layer2"){return a("phong",c,h)}e.defaultData=n;function s(c,h){return{...c,name:h}}e.withName=s;function a(c,h="layer1",u="layer2"){let d=new lt;return d.push({fi:0,data:vn.defaultData("light",c),id:h}),d.push({fi:1,data:vn.defaultData("color"),id:u}),{layers:d}}e.defaultTwoLayerData=a;function o(c,h="phong",u="layer1",d="layer2"){let p=vn.defaultData("texture");Object.assign(p.texture,{image:c});let f=new lt;return f.push({fi:0,data:p,id:u}),f.push({fi:1,data:vn.defaultData("light",h),id:d}),{layers:f}}e.defaultTwoLayerTextureData=o;function l(c,h="phong",u="layer1",d="layer2"){let p=vn.defaultData("video");Object.assign(p.texture,{video:c});let f=new lt;return f.push({fi:0,data:p,id:u}),f.push({fi:1,data:vn.defaultData("light",h),id:d}),{layers:f}}e.defaultTwoLayerVideoTextureData=l})(Fi||(Fi={}));var B1;(e=>{function t(){return{points:new lt,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(B1||(B1={}));var k1;(e=>{function t(){return{points:new lt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(k1||(k1={}));var xV={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},bM;(e=>{function t(r,i){let n={...r};return wV.forEach(s=>{var a;Object.assign(n,{[s]:(a=i[s])!=null?a:r[s]})}),n}e.merge=t})(bM||(bM={}));var bV={shape:xV,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},wV=["depth","offset","angle","twist","startScale","endScale"],z1;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}e.is2DParametricMesh=t;function r(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}e.isParametricMesh=r})(z1||(z1={}));var wM;(e=>{function t(r,i){let n={...r};return Object.assign(n,i),n.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(n.extrusion={...r.extrusion},Object.assign(n.extrusion,bM.merge(n.extrusion,i.extrusion))),n}e.merge=t})(wM||(wM={}));var wd;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:k1.defaultData(),extrusion:bV};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:B1.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI};throw new Error("not implemented")}e.defaultData=t})(wd||(wd={}));var CR=["width","height","depth"],SM;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Zi.white,near:.1,far:2e3})(SM||(SM={}));var N1;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(N1||(N1={}));var _M;(e=>e.defaultData={softShadowQuality:"low"})(_M||(_M={}));var AM;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(AM||(AM={}));var MM;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(MM||(MM={}));var sp;(e=>e.defaultData={usePhysics:!1,gravity:-10})(sp||(sp={}));var EM;(e=>e.defaultData={playCamera:Dp,gameControlObject:null})(EM||(EM={}));var CM;(e=>e.defaultData={backgroundColor:Js.fromHexAndA(zxe,1),postprocessing:N1.defaultData,fog:SM.defaultData,globalPhysics:sp.defaultData,ambient:AM.defaultData,ao:MM.defaultData,shadow:_M.defaultData,publish:EM.defaultData})(CM||(CM={}));var TR;(e=>{function t(i){return i==="Component"||i==="Instance"}e.isComponentRelated=t;function r(i){return i==="Empty"||i==="Instance"}e.isEmptyOrComponent=r})(TR||(TR={}));var ap;(e=>{e.identity={...pM.identity,hiddenMatrix:rp.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,s){return X1e({position:yu.isEqual(n.position,s.position)?void 0:s.position,rotation:yu.isEqual(n.rotation,s.rotation)?void 0:s.rotation,scale:yu.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:rp.isEqual(n.hiddenMatrix,s.hiddenMatrix)?void 0:s.hiddenMatrix})}e.diff=i})(ap||(ap={}));var ln;(e=>e.defaultData={states:new lt,events:new lt,visible:!0,raycastLock:!1,physics:np.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...ap.identity,cloner:null})(ln||(ln={}));var TM;(e=>e.defaultData={type:"Empty",...ln.defaultData})(TM||(TM={}));var PR;(e=>e.defaultData={type:"Component",...ln.defaultData})(PR||(PR={}));var Sd;(e=>e.defaultData={type:"Mesh",...ln.defaultData,...xM.defaultData})(Sd||(Sd={}));var hg;(e=>e.defaultData={...ln.defaultData,...ap.identity,position:[0,0,ip.DefaultTargetOffset],...ip.defaultData})(hg||(hg={}));var PM;(e=>{function t(r){return{...ln.defaultData,...gM.defaultData(r)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(PM||(PM={}));var F1;(e=>{function t(i,n,s=0){for(;s<n.length;){let a=i?i[n[s]]:void 0;if(n.length===s+1)return a;if(a)i=a.descendants,s+=1;else return}}e.resolveWithDes=t;function r(i,n,s=0){let a=t(i,n,s);if(a){let o=Object.keys(a);if(o.length===1&&o[0]==="descendants")return}return a}e.resolve=r})(F1||(F1={}));var Fl;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(i,n){return{...ln.defaultData,...n,component:i,overrides:new ei,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function r(i){let n=ap.fromObject(i.data);return t(i.id,n)}e.fromComponentData=r})(Fl||(Fl={}));var op;(e=>e.defaultData={type:"Page",...ln.defaultData,physics:{...np.defaultData,fusedBody:!1},...CM.defaultData,camera:hg.defaultData})(op||(op={}));var DM;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:rp.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:np.defaultData,states:new lt,events:new lt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...ip.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...ln.defaultData,...Sd.defaultData,geometry:wd.defaultData("RectangleGeometry"),material:Fi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...ln.defaultData,...Sd.defaultData,geometry:wd.defaultData("BooleanGeometry"),material:Fi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...ln.defaultData,...Sd.defaultData,geometry:wd.defaultData("TextGeometry"),material:Fi.defaultTwoLayerData("phong","layer1","layer2")}))(DM||(DM={}));var ou;(e=>{function t(s,a){let o={name:a};return s.type==="Mesh"?(o.geometry={},"material"in s&&(o.material={layers:new ei}),"materials"in s&&(o.materials=s.materials.map(l=>({layers:new ei})))):Bu.is(s.type)&&(o.perspective={},o.orthographic={}),o}e.newEmpty=t;function r(s,a){if(a===void 0)return s;let o={...s};return"material"in o&&"material"in a&&a.material&&(o.material=ug(o.material,l=>{if(typeof l!="string")for(let[c,h]of Object.entries(a.material.layers)){let u=l.layers.data(c);u&&vn.patch(u,h)}}).data),o.materials&&a.materials&&(o.materials=ug(o.materials,l=>{var c,h;for(let u=0;u<o.materials.length;u++){let d=a.materials[u];if(typeof d!="string")for(let[p,f]of Object.entries(d.layers)){let m=(h=(c=l[u])==null?void 0:c.layers)==null?void 0:h.data(p);m&&vn.patch(m,f)}}}).data),o}function i(s,a){let o,l=[],c={orthographic:0,perspective:0,geometry:0};function h(u,d){for(let[p,f]of Object.entries(d.layers)){let{texture:m,...g}=f;if(m!==void 0&&Object.keys(m).length>0){let v={path:[...u,"layers",p,"texture"],props:m,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...u,"layers",p],props:g,type:0};l.push(v)}}}for(let[u,d]of Object.entries(a))if(u!=="name")if(u==="cloner")l.push(...fM.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide,offset:d.offset},type:0});else if(u==="material")h(["material"],d);else if(u==="materials")for(let[p,f]of Object.entries(d))h(["materials",p],f);else if(c[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let p={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(p),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let p={path:[u],props:d,type:0};l.push(p)}}else o===void 0&&(o={path:[],props:{},type:0},l.push(o)),o.props[u]=d;return l}e.toOps=i;function n(s,a){var l,c,h,u,d,p,f,m,g,v;if(a===void 0)return s;let o={...s};if(Object.assign(o,ap.merge(o,a)),Object.assign(o,{pathSnapping:Object.assign({},o.pathSnapping,{slide:(u=(h=(l=a.pathSnapping)==null?void 0:l.slide)!=null?h:(c=o.pathSnapping)==null?void 0:c.slide)!=null?u:0,offset:(m=(f=(d=a.pathSnapping)==null?void 0:d.offset)!=null?f:(p=o.pathSnapping)==null?void 0:p.offset)!=null?m:0})}),Bu.is(s.type)){o.orthographic={...o.orthographic},o.perspective={...o.perspective};let y=a;((g=y.orthographic)==null?void 0:g.zoom)!==void 0&&(o.orthographic.zoom=y.orthographic.zoom),((v=y.perspective)==null?void 0:v.zoom)!==void 0&&(o.perspective.zoom=y.perspective.zoom),y.isUpVectorFlipped!==void 0&&(o.isUpVectorFlipped=y.isUpVectorFlipped),y.targetOffset!==void 0&&(o.targetOffset=y.targetOffset)}else if(s.type==="Mesh")"geometry"in a&&Object.assign(o,{geometry:wM.merge(o.geometry,a.geometry)}),(a.material||a.materials)&&(o=r(o,a)),o.cloner&&"cloner"in a&&Object.assign(o,{cloner:Nl.merge(o.cloner,a.cloner)});else if(s.type==="Empty")o.cloner&&"cloner"in a&&Object.assign(o,{cloner:Nl.merge(o.cloner,a.cloner)});else if(mM.is(s.type)){let y=a;y.intensity!==void 0&&(o.intensity=y.intensity),y.color!==void 0&&(typeof y.color=="string"?o.color=y.color:o.color=Zi.clone(y.color))}return o}e.patch=n})(ou||(ou={}));var U1;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(U1||(U1={}));var xu;(e=>e.defaultData={orbitControls:U1.defaultData,playPage:pm,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let i=0,n=0;return r<5?n=-30:r<10&&(n=30),r===0||r===10||r===5?i=30:(r===4||r===11||r===9)&&(i=-30),[120,[i,n],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(xu||(xu={}));var OM;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(OM||(OM={}));var LM;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(LM||(LM={}));var _d;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...OM.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:LM.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(_d||(_d={}));var dg;(e=>{function t(i){return i.find(n=>n.data.type==="Page"&&n.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function r(i,n,s){i.scene.objects.traverseFrom(n,(a,o)=>{var l;if(o.type==="Instance"){let c=(l=G1.getComponentData(i,o.component))==null?void 0:l.data;c&&s(a,o,c.events)}else s(a,o,o.events)})}e.traverseModuleInstances=r})(dg||(dg={}));var Ad;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function t(n={withLight:!0,withSquare:!0}){let s=[],a=DM.defaultMeshObject;n.withLight===!0&&s.push({fi:-1,data:PM.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),n.withSquare===!0&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:a,children:[]});let o=new Dn;return o.push({fi:1,id:pm,data:{...op.defaultData,name:"Scene 1"},children:s}),o}e.defaultData={objects:t(),publish:xu.defaultData,styles:_d.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Dn,publish:xu.defaultData,styles:_d.defaultData()}},e.emptyDataWithPage=function(n){return{objects:t(n),publish:xu.defaultData,styles:_d.defaultData()}};function r(n){return{...e.defaultData,objects:Ru(n,Dn.prototype)}}e.withObjs=r;function i(n,s){return r([{id:n,data:s,children:[],fi:0}])}e.withObj=i})(Ad||(Ad={}));var fm;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(fm||(fm={}));var j1;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(j1||(j1={}));var IM;(e=>e.all=["images","videos","colors","audios","fonts","materials"])(IM||(IM={}));var DR;(e=>e.all=[...IM.all,"components"])(DR||(DR={}));var OR;(e=>{function t(){return{images:new _t,videos:new _t,colors:new _t,audios:new _t,fonts:new _t,materials:new _t,components:new _t}}e.defaultData=t})(OR||(OR={}));var pg;(e=>{function t(){return{images:new _t,videos:new _t,colors:new _t,audios:new _t,fonts:new _t,materials:new _t,components:new _t}}e.defaultData=t})(pg||(pg={}));var To;(e=>{function t(){let n={};return n["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Ru(n,_t.prototype)}e.defaultColors=t;function r(n){let s={};return n!=null&&n.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...j1.emptyImage,name:"AI generated image"}),Ru(s,_t.prototype)}e.defaultImages=r;function i(){return{catelogs:new _t,materials:new _t,images:new _t,videos:new _t,colors:new _t,audios:new _t,fonts:new _t,lib:pg.defaultData()}}e.emptyData=i})(To||(To={}));var RM;(e=>e.list=["idle","move","jump","run"])(RM||(RM={}));var V1;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","\u25B2"],["rotPosY","\u25C0"],["rotNegX","\u25BC"],["rotNegY","\u25B6"],["jump","Space"],["run","\u21E7"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new lt,move:new lt,jump:new lt,run:new lt},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Js.fromHexAndA(3728051,1)}}))(V1||(V1={}));function LR(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,i=t.colorB,n=[[r.r,r.g,r.b,r.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let o=2;o<10;o++)n.push(n[1]),s.push(1);let a={...Vo(mi(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,a)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={...mi(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function Cl(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function Tl(e,t){e.scene.objects.traverse((r,i)=>{"materials"in i?i.materials.forEach((n,s)=>{n===void 0&&(i.materials[s]=Fi.defaultData(),n=i.materials[s]),typeof n!="string"&&t(n)}):"material"in i?typeof i.material!="string"&&(i.material===void 0&&(i.material=Fi.defaultData()),t(i.material)):i.type==="Mesh"&&(i.material===void 0&&(i.material=Fi.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(n=>{n.material&&typeof n.material!="string"&&t(n.material)})})}function Uxe(e){Object.assign(e.scene.publish,{orbitControls:{...U1.defaultData,...mi(e.scene.publish.orbitControls)}})}function jxe(e){Object.assign(e.scene.publish.settings,{video:{...xu.defaultData.settings.video,...mi(e.scene.publish.settings.video)}})}function Vxe(e){function t(r){if(r.layers){for(let i of Object.values(r.layers))if(i){for(let[n,s]of Object.entries(i))if((yV.includes(n)||typeof s=="boolean")&&delete i[n],n==="texture")for(let[a,o]of Object.entries(s))(Fxe.includes(a)||typeof o=="boolean")&&delete s[a]}}}e.scene.objects.traverse((r,i)=>{i.states.forEach(n=>{let s=n;s.material?t(s.material):s.materials&&s.materials.forEach(a=>{t(a)})})})}function Gxe(e){e.scene.publish.withBackground=!0}function Hxe(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Wxe(e){e.scene.objects.traverse((t,r)=>{let i=r.cloner;i&&(i.radial.scale=i.radial.scale.map(n=>n+1),i.linear.scale=i.linear.scale.map(n=>n+1))})}function qxe(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function $xe(e){e.scene.objects.traverse((t,r)=>{let i=e.scene.objects.unproxy().parent(t);if(i){let n=mi(e.scene.objects.data(i));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=mi(r).booleanExclude!==!0)}})}function Xxe(e){e.scene.objects.traverse((t,r)=>{if(r.type==="Mesh"){let i=r;r.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function Yxe(e){function t(i){Object.setPrototypeOf(i,ei.prototype),i.texture&&Object.setPrototypeOf(i.texture,ei.prototype)}function r(i){Object.setPrototypeOf(i,ei.prototype);for(let n in i)t(i[n])}e.scene.objects.traverse((i,n)=>{n.states.forEach(s=>{let a=s;if(a.material){let o=mi(a.material).layers;r(o),a.material.layers=o}if(a.materials)for(let o=0;o<a.materials.length;o++){let l=a.materials[o],c=mi(l).layers;r(c),l.layers=c}})})}function IR(e){e.layers===void 0&&Object.assign(e,Fi.defaultTwoLayerData("lambert"))}function fS(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let n={...mi(t),colors:r,steps:i};Object.assign(t,n)}})}function Qxe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function RR(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(i=>{typeof i!="string"&&fS(i)}):"material"in r&&typeof r.material!="string"&&fS(r.material)}),Object.values(e.shared.materials).forEach(t=>fS(t))}function Kxe(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Zxe(e){e.shared.audios=Ru({},_t.prototype)}function Jxe(e){e.shared.videos=Ru({},_t.prototype)}function ebe(e){let t=e.shared.materials;Object.entries(t).forEach(([r,i])=>{if(!i.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:n})}})}function tbe(e){Object.entries(mi(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(mi(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function rbe(e){e.scene.publish.settings.web.preload=!1}function BR(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function kR(e){e.layers&&e.layers.forEach(t=>{Nxe(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function ibe(e){e.shared.fonts=Ru({},_t.prototype)}function nbe(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function sbe(e){let t=[];e.scene.objects.traverse((r,i)=>{let n=i;if(n.type==="TextFrame"){let s=Fi.defaultTwoLayerData("phong"),a=typeof n.color=="string"?e.shared.colors[n.color]:n.color;s.layers[1].data.color={r:a.r,g:a.g,b:a.b},s.layers[1].data.alpha=n.alpha;let o=nbe(n.font);e.shared.fonts[o]===void 0&&(e.shared.fonts[o]={name:o});let l={name:n.name,...ln.defaultData,...Sd.defaultData,flatShading:!1,wireframe:!1,geometry:{...wd.defaultData("TextGeometry"),width:n.width,height:n.height,font:o,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:mi(n.states),events:mi(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},c=mi(e.scene.objects).parent(r);e.scene.objects.insertAfter(c!=null?c:null,r,[{id:r+"new",data:l,children:[]}]),t.push(r)}}),t.forEach(r=>{e.scene.objects.delete(r)})}function abe(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((r,i)=>{i.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new lt,move:new lt,jump:new lt}});else{let s=new lt;Object.assign(n,{actions:s}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&s.push({fi:0,id:vt.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((a,o,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},h={easing:a.easing,duration:a.duration};a.easing===6?Object.assign(h,Vo(a,"mass","stiffness","damping","velocity")):a.easing===5&&Object.assign(h,{control1:{...a.control1},control2:{...a.control2}});let u={repeat:a.repeat?-1:0,delay:a.delay,delayDirection:a.delayDirection,direction:a.cycle&&a.rewind?"pingpong-rewind":a.cycle?"pingpong":"normal"},d={state:a.state,...u,...h},p={allowSlerp:!0,type:"Transition",object:a.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new lt({fi:0,id:vt.generateUUID(),data:c},{fi:1,id:vt.generateUUID(),data:d})};s.push({fi:l,id:o,data:p})}),delete n.targets)}})})}function obe(e){e.scene.objects.traverse((t,r)=>{function i(n,s){var l;let a=new lt,o=[];if(r.events.forEach((c,h,u)=>{if(c.type==="Audio"&&c.trigger===s){let d;o.push(h),c.interaction==="play"?d={...Vo(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(d={...Vo(c,"interaction","delay","object","playAudio"),type:"Audio"}),d&&a.push({fi:u,id:h,data:d})}}),o.forEach(c=>r.events.delete(c)),a.length){let c=(l=r.events.find(h=>h.type===n))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,a):r.events.insertBefore(null,[{id:vt.generateUUID(),data:{type:n,actions:a}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function zR(e){var r;let t=(r=e.layers.find(i=>i.type==="light"))==null?void 0:r.data;if((t==null?void 0:t.category)==="basic"){let i=vn.defaultData("light","phong"),n=t;Object.assign(n,i),n.visible=!1}}function NR(e){Cl(e,zR),Tl(e,zR)}function lbe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function cbe(e){e.scene.objects.traverse((t,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner={...r.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function ube(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=Fi.defaultTwoLayerData("phong"))})}function hbe(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function dbe(e){e.scene.objects.traverse((t,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function pbe(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function fbe(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function mbe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-r.position[1]))})})}function gbe(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((r,i)=>{t&&i.physics===null?i.collision=!1:i.collision="visibility"})}function vbe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.navmesh=V1.defaultDataThirdPerson.navmesh)})})}function ybe(e){e.scene.styles||(e.scene.styles=_d.defaultData())}function FR(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function xbe(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Tl(e,FR),Cl(e,FR)}function bbe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&Object.assign(i.gameActions,{run:new lt})})})}function wbe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.keyAssignments=[...i.keyAssignments,["run","\u21E7"],["none","Ctrl"]])})})}function UR(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function Sbe(e,t){var r;if(t<1&&(Tl(e,LR),Cl(e,LR),e.schema=1),t<2&&(Uxe(e),e.schema=2),t<3&&(Vxe(e),e.schema=3),t<4&&(Gxe(e),e.schema=4),t<5&&(Hxe(e),e.schema=5),t<6&&(Wxe(e),e.schema=6),t<7&&(qxe(e),e.schema=7),t<8&&(e.schema=8),t<9&&(RR(e),e.schema=9),t<10&&(Qxe(e),e.schema=10),t<11&&(Kxe(e),e.schema=11),t<12&&(RR(e),e.schema=12),t<13&&(Zxe(e),e.schema=13),t<14&&(ebe(e),e.schema=14),t<15&&(tbe(e),e.schema=15),t<16&&(rbe(e),e.schema=16),t<17&&(Tl(e,BR),Cl(e,BR),e.schema=17),t<18&&(Tl(e,IR),Cl(e,IR),e.schema=18),t<19&&(jxe(e),e.schema=19),t<20&&(ibe(e),sbe(e),e.schema=20),t<21&&(abe(e),obe(e),e.schema=21),t<22&&(NR(e),e.schema=22),t<23&&(lbe(e),e.schema=23),t<24&&(cbe(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(Jxe(e),t<25&&(e.schema=25)),t<26&&($xe(e),e.schema=26),t<27&&(Xxe(e),e.schema=27),t<28&&(NR(e),e.schema=28),t<29&&(Yxe(e),e.schema=29),t<30&&(ube(e),e.schema=30),t<31&&(hbe(e),e.schema=31),t<33&&(dbe(e),e.schema=33),t<34&&(pbe(e),e.schema=34),t<35&&(fbe(e),e.schema=35),t<36&&(mbe(e),e.schema=36),t<37&&(gbe(e),e.schema=37),t<38&&(Tl(e,kR),Cl(e,kR),e.schema=38),t<39&&(vbe(e),e.schema=39),t<40&&(ybe(e),e.schema=40),t<41&&(xbe(e),e.schema=41),t<42&&(bbe(e),e.schema=42),t<43&&(wbe(e),e.schema=43),t<99){Tl(e,UR),Cl(e,UR),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=Dp);let i=mi(e.scene.objects),n=e.scene.objects;e.scene.publish.playPage=pm,n.insertBefore(null,null,[{id:pm,data:{...op.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:Vo(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:Vo(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...sp.defaultData,...Vo(e.scene.environment,"usePhysics","gravity")},camera:(r=mi(e.scene.ownerCamera))!=null?r:op.defaultData.camera,name:"Scene"},children:[]}]);for(let o of i)o.id!==Ad.TRASH_CAN_ID&&n.move(pm,o.fi,o.id);let s=0,a=0;e.shared.penumbraSize&&e.scene.objects.traverse((o,l)=>{var c;l.type==="DirectionalLight"?(l.penumbraSize=e.shared.penumbraSize[Math.min(s,2)],s+=1):l.type==="SpotLight"&&(l.penumbraSize=e.shared.penumbraSize[3+Math.min(a,1)],a+=1),(l.physics===void 0||l.physics===null)&&l.type!=="Instance"&&(l.physics={},Object.assign(l.physics,np.defaultData)),l.physics!==void 0&&l.physics!==null&&(l.physics.enabled=(c=l.collision)!=null?c:"visibility",delete l.collision)}),e.schema=99}}function jR(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function _be(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&i.type==="PathGeometry"&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,i.extrusion.shape.type==="Custom"&&(i.extrusion.shape.shapeQuality="low"))})}var Qc=104;function SV(e){var r;let t=(r=e.schema)!=null?r:0;t!==Qc&&(console.warn("updating from ",t,"to ",Qc),Sbe(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=xu.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(Tl(e,jR),Cl(e,jR),e.schema=101),t<102&&(_be(e),e.schema=102),t<104&&(e.shared.catelogs=new _t,e.shared.lib=pg.defaultData(),e.schema=104))}var G1;(e=>{e.defaultData={schema:Qc,scene:Ad.defaultData,frames:new _t().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",fm.defaultData),shared:{...To.emptyData(),colors:To.defaultColors()}},e.emptyDataForImports=function(n){let s=Ad.emptyDataWithPage(n);return{schema:Qc,scene:s,frames:new _t().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",fm.defaultData),shared:{...To.emptyData(),colors:To.defaultColors(),images:To.defaultImages(n)}}},e.emptyData=function(){return{schema:Qc,scene:Ad.emptyDataWithPage(),frames:new _t().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",fm.defaultData),shared:To.emptyData()}},e.collabHelper={...iM,updateSchema(n){var s,a;return((s=n.schema)!=null?s:0)<Qc?ug(n,SV):((a=n.schema)!=null?a:0)-Qc}};function t(n){let s=e.collabHelper.updateSchema(n);return typeof s=="number"?s===0?n:null:s.data}e.updateSchemaDirectly=t;function r(n){return{...n,shared:{...n.shared,lib:pg.defaultData()}}}e.withoutLib=r;function i(n,s){let a=n.scene.objects.get(s);if(a&&a.data.type==="Component")return a;{let o=n.shared.lib.components[s];if(o)return o.asset}}e.getComponentData=i})(G1||(G1={}));function lu(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},a={},o=e[0].morphTargetsRelative,l=new nt,c=0;for(let h=0;h<e.length;++h){let u=e[h],d=0;if(r!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let p in u.attributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;s[p]===void 0&&(s[p]=[]),s[p].push(u.attributes[p]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(o!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let p in u.morphAttributes){if(!n.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;a[p]===void 0&&(a[p]=[]),a[p].push(u.morphAttributes[p])}if(t){let p;if(r)p=u.index.count;else if(u.attributes.position!==void 0)p=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,p,h),c+=p}}if(r){let h=0,u=[];for(let d=0;d<e.length;++d){let p=e[d].index;for(let f=0;f<p.count;++f)u.push(p.getX(f)+h);h+=e[d].attributes.position.count}l.setIndex(u)}for(let h in s){let u=VR(s[h]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,u)}for(let h in a){let u=a[h][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<u;++d){let p=[];for(let m=0;m<a[h].length;++m)p.push(a[h][m][d]);let f=VR(p);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(f)}}return l}function VR(e){let t,r,i,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),a=0;for(let o=0;o<e.length;++o)s.set(e[o].array,a),a+=e[o].array.length;return new st(s,r,i)}var Abe=Math.pow(2,-24),h0=class{constructor(){}};function za(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function GR(e){let t=-1,r=-1/0;for(let i=0;i<3;i++){let n=e[i+3]-e[i];n>r&&(r=n,t=i)}return t}function HR(e,t){t.set(e)}function WR(e,t,r){let i,n;for(let s=0;s<3;s++){let a=s+3;i=e[s],n=t[s],r[s]=i<n?i:n,i=e[a],n=t[a],r[a]=i>n?i:n}}function d0(e,t,r){for(let i=0;i<3;i++){let n=t[e+2*i],s=t[e+2*i+1],a=n-s,o=n+s;a<r[i]&&(r[i]=a),o>r[i+3]&&(r[i+3]=o)}}function of(e){let t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*r+r*i+i*t)}function Mbe(e,t){if(!e.index){let r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;r>65535?n=new Uint32Array(new i(4*r)):n=new Uint16Array(new i(2*r)),e.setIndex(new st(n,1));for(let s=0;s<r;s++)n[s]=s}}function Ebe(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let n of e.groups)r.add(n.start),r.add(n.start+n.count);let i=Array.from(r.values()).sort((n,s)=>n-s);for(let n=0;n<i.length-1;n++){let s=i[n],a=i[n+1];t.push({offset:s/3,count:(a-s)/3})}return t}function mS(e,t,r,i,n=null){let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0,u=1/0,d=1/0,p=1/0,f=-1/0,m=-1/0,g=-1/0,v=n!==null;for(let y=t*6,x=(t+r)*6;y<x;y+=6){let b=e[y+0],S=e[y+1],w=b-S,A=b+S;w<s&&(s=w),A>l&&(l=A),v&&b<u&&(u=b),v&&b>f&&(f=b);let _=e[y+2],M=e[y+3],E=_-M,T=_+M;E<a&&(a=E),T>c&&(c=T),v&&_<d&&(d=_),v&&_>m&&(m=_);let P=e[y+4],D=e[y+5],L=P-D,R=P+D;L<o&&(o=L),R>h&&(h=R),v&&P<p&&(p=P),v&&P>g&&(g=P)}i[0]=s,i[1]=a,i[2]=o,i[3]=l,i[4]=c,i[5]=h,v&&(n[0]=u,n[1]=d,n[2]=p,n[3]=f,n[4]=m,n[5]=g)}function Cbe(e,t,r,i){let n=1/0,s=1/0,a=1/0,o=-1/0,l=-1/0,c=-1/0;for(let h=t*6,u=(t+r)*6;h<u;h+=6){let d=e[h+0];d<n&&(n=d),d>o&&(o=d);let p=e[h+2];p<s&&(s=p),p>l&&(l=p);let f=e[h+4];f<a&&(a=f),f>c&&(c=f)}i[0]=n,i[1]=s,i[2]=a,i[3]=o,i[4]=l,i[5]=c}function Tbe(e,t,r,i,n){let s=r,a=r+i-1,o=n.pos,l=n.axis*2;for(;;){for(;s<=a&&t[s*6+l]<o;)s++;for(;s<=a&&t[a*6+l]>=o;)a--;if(s<a){for(let c=0;c<3;c++){let h=e[s*3+c];e[s*3+c]=e[a*3+c],e[a*3+c]=h;let u=t[s*6+c*2+0];t[s*6+c*2+0]=t[a*6+c*2+0],t[a*6+c*2+0]=u;let d=t[s*6+c*2+1];t[s*6+c*2+1]=t[a*6+c*2+1],t[a*6+c*2+1]=d}s++,a--}else return s}}var bo=32,Pbe=(e,t)=>e.candidate-t.candidate,ul=new Array(bo).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),p0=new Float32Array(6);function Dbe(e,t,r,i,n,s){let a=-1,o=0;if(s===0)a=GR(t),a!==-1&&(o=(t[a]+t[a+3])/2);else if(s===1)a=GR(e),a!==-1&&(o=Obe(r,i,n,a));else if(s===2){let l=of(e),c=1.25*n,h=i*6,u=(i+n)*6;for(let d=0;d<3;d++){let p=t[d],f=(t[d+3]-p)/bo;if(n<bo/4){let m=[...ul];m.length=n;let g=0;for(let y=h;y<u;y+=6,g++){let x=m[g];x.candidate=r[y+2*d],x.count=0;let{bounds:b,leftCacheBounds:S,rightCacheBounds:w}=x;for(let A=0;A<3;A++)w[A]=1/0,w[A+3]=-1/0,S[A]=1/0,S[A+3]=-1/0,b[A]=1/0,b[A+3]=-1/0;d0(y,r,b)}m.sort(Pbe);let v=n;for(let y=0;y<v;y++){let x=m[y];for(;y+1<v&&m[y+1].candidate===x.candidate;)m.splice(y+1,1),v--}for(let y=h;y<u;y+=6){let x=r[y+2*d];for(let b=0;b<v;b++){let S=m[b];x>=S.candidate?d0(y,r,S.rightCacheBounds):(d0(y,r,S.leftCacheBounds),S.count++)}}for(let y=0;y<v;y++){let x=m[y],b=x.count,S=n-x.count,w=x.leftCacheBounds,A=x.rightCacheBounds,_=0;b!==0&&(_=of(w)/l);let M=0;S!==0&&(M=of(A)/l);let E=1+1.25*(_*b+M*S);E<c&&(a=d,c=E,o=x.candidate)}}else{for(let v=0;v<bo;v++){let y=ul[v];y.count=0,y.candidate=p+f+v*f;let x=y.bounds;for(let b=0;b<3;b++)x[b]=1/0,x[b+3]=-1/0}for(let v=h;v<u;v+=6){let y=~~((r[v+2*d]-p)/f);y>=bo&&(y=bo-1);let x=ul[y];x.count++,d0(v,r,x.bounds)}let m=ul[bo-1];HR(m.bounds,m.rightCacheBounds);for(let v=bo-2;v>=0;v--){let y=ul[v],x=ul[v+1];WR(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<bo-1;v++){let y=ul[v],x=y.count,b=y.bounds,S=ul[v+1].rightCacheBounds;x!==0&&(g===0?HR(b,p0):WR(b,p0,p0)),g+=x;let w=0,A=0;g!==0&&(w=of(p0)/l);let _=n-g;_!==0&&(A=of(S)/l);let M=1+1.25*(w*g+A*_);M<c&&(a=d,c=M,o=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}function Obe(e,t,r,i){let n=0;for(let s=t,a=t+r;s<a;s++)n+=e[s*6+i*2];return n/r}function Lbe(e,t){let r=e.attributes.position,i=e.index.array,n=i.length/3,s=new Float32Array(n*6),a=r.normalized,o=r.array,l=r.offset||0,c=3;r.isInterleavedBufferAttribute&&(c=r.data.stride);let h=["getX","getY","getZ"];for(let u=0;u<n;u++){let d=u*3,p=u*6,f,m,g;a?(f=i[d+0],m=i[d+1],g=i[d+2]):(f=i[d+0]*c+l,m=i[d+1]*c+l,g=i[d+2]*c+l);for(let v=0;v<3;v++){let y,x,b;a?(y=r[h[v]](f),x=r[h[v]](m),b=r[h[v]](g)):(y=o[f+v],x=o[m+v],b=o[g+v]);let S=y;x<S&&(S=x),b<S&&(S=b);let w=y;x>w&&(w=x),b>w&&(w=b);let A=(w-S)/2,_=v*2;s[p+_+0]=S+A,s[p+_+1]=A+(Math.abs(S)+A)*Abe,S<t[v]&&(t[v]=S),w>t[v+3]&&(t[v+3]=w)}}return s}function Ibe(e,t){function r(v){d&&d(v/p)}function i(v,y,x,b=null,S=0){if(!f&&S>=l&&(f=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),x<=h||S>=l)return r(y+x),v.offset=y,v.count=x,v;let w=Dbe(v.boundingData,b,a,y,x,u);if(w.axis===-1)return r(y+x),v.offset=y,v.count=x,v;let A=Tbe(o,a,y,x,w);if(A===y||A===y+x)r(y+x),v.offset=y,v.count=x;else{v.splitAxis=w.axis;let _=new h0,M=y,E=A-y;v.left=_,_.boundingData=new Float32Array(6),mS(a,M,E,_.boundingData,s),i(_,M,E,s,S+1);let T=new h0,P=A,D=x-E;v.right=T,T.boundingData=new Float32Array(6),mS(a,P,D,T.boundingData,s),i(T,P,D,s,S+1)}return v}Mbe(e,t);let n=new Float32Array(6),s=new Float32Array(6),a=Lbe(e,n),o=e.index.array,l=t.maxDepth,c=t.verbose,h=t.maxLeafTris,u=t.strategy,d=t.onProgress,p=e.index.count/3,f=!1,m=[],g=Ebe(e);if(g.length===1){let v=g[0],y=new h0;y.boundingData=n,Cbe(a,v.offset,v.count,s),i(y,v.offset,v.count,s),m.push(y)}else for(let v of g){let y=new h0;y.boundingData=new Float32Array(6),mS(a,v.offset,v.count,y.boundingData,s),i(y,v.offset,v.count,s),m.push(y)}return m}function Rbe(e,t){let r=Ibe(e,t),i,n,s,a=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<r.length;h++){let u=r[h],d=l(u),p=new o(32*d);i=new Float32Array(p),n=new Uint32Array(p),s=new Uint16Array(p),c(0,u),a.push(p)}return a;function l(h){return h.count?1:1+l(h.left)+l(h.right)}function c(h,u){let d=h/4,p=h/2,f=!!u.count,m=u.boundingData;for(let g=0;g<6;g++)i[d+g]=m[g];if(f){let g=u.offset,v=u.count;return n[d+6]=g,s[p+14]=v,s[p+15]=65535,h+32}else{let g=u.left,v=u.right,y=u.splitAxis,x;if(x=c(h+32,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[d+6]=x/4,x=c(x,v),n[d+7]=y,x}}}var Ja=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let n=0,s=e.length;n<s;n++){let a=e[n][t];r=a<r?a:r,i=a>i?a:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let n=0,s=t.length;n<s;n++){let a=t[n],o=e.dot(a);r=o<r?o:r,i=o>i?o:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};Ja.prototype.setFromBox=function(){let e=new C;return function(t,r){let i=r.min,n=r.max,s=1/0,a=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){e.x=i.x*o+n.x*(1-o),e.y=i.y*l+n.y*(1-l),e.z=i.z*c+n.z*(1-c);let h=t.dot(e);s=Math.min(h,s),a=Math.max(h,a)}this.min=s,this.max=a}}();(function(){let e=new Ja;return function(t,r){let i=t.points,n=t.satAxes,s=t.satBounds,a=r.points,o=r.satAxes,l=r.satBounds;for(let c=0;c<3;c++){let h=s[c],u=n[c];if(e.setFromPoints(u,a),h.isSeparated(e))return!1}for(let c=0;c<3;c++){let h=l[c],u=o[c];if(e.setFromPoints(u,i),h.isSeparated(e))return!1}}})();var Bbe=function(){let e=new C,t=new C,r=new C;return function(i,n,s){let a=i.start,o=e,l=n.start,c=t;r.subVectors(a,l),e.subVectors(i.end,i.start),t.subVectors(n.end,n.start);let h=r.dot(c),u=c.dot(o),d=c.dot(c),p=r.dot(o),f=o.dot(o)*d-u*u,m,g;f!==0?m=(h*u-p*d)/f:m=0,g=(h+m*u)/d,s.x=m,s.y=g}}(),PT=function(){let e=new $,t=new C,r=new C;return function(i,n,s,a){Bbe(i,n,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){i.at(o,s),n.at(l,a);return}else if(o>=0&&o<=1){l<0?n.at(0,a):n.at(1,a),i.closestPointToPoint(a,!0,s);return}else if(l>=0&&l<=1){o<0?i.at(0,s):i.at(1,s),n.closestPointToPoint(s,!0,a);return}else{let c;o<0?c=i.start:c=i.end;let h;l<0?h=n.start:h=n.end;let u=t,d=r;if(i.closestPointToPoint(h,!0,t),n.closestPointToPoint(c,!0,r),u.distanceToSquared(h)<=d.distanceToSquared(c)){s.copy(u),a.copy(h);return}else{s.copy(c),a.copy(d);return}}}}(),kbe=function(){let e=new C,t=new C,r=new $n,i=new Ds;return function(n,s){let{radius:a,center:o}=n,{a:l,b:c,c:h}=s;if(i.start=l,i.end=c,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a||(i.start=l,i.end=h,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a)||(i.start=c,i.end=h,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a))return!0;let u=s.getPlane(r);if(Math.abs(u.distanceToPoint(o))<=a){let d=u.projectPoint(o,t);if(s.containsPoint(d))return!0}return!1}}(),zbe=1e-15;function gh(e){return Math.abs(e)<zbe}var Zo=class extends zi{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new C),this.satBounds=new Array(4).fill().map(()=>new Ja),this.points=[this.a,this.b,this.c],this.sphere=new ns,this.plane=new $n,this.needsUpdate=!0}intersectsSphere(e){return kbe(e,this)}update(){let e=this.a,t=this.b,r=this.c,i=this.points,n=this.satAxes,s=this.satBounds,a=n[0],o=s[0];this.getNormal(a),o.setFromPoints(a,i);let l=n[1],c=s[1];l.subVectors(e,t),c.setFromPoints(l,i);let h=n[2],u=s[2];h.subVectors(t,r),u.setFromPoints(h,i);let d=n[3],p=s[3];d.subVectors(r,e),p.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};Zo.prototype.closestPointToSegment=function(){let e=new C,t=new C,r=new Ds;return function(i,n=null,s=null){let{start:a,end:o}=i,l=this.points,c,h=1/0;for(let u=0;u<3;u++){let d=(u+1)%3;r.start.copy(l[u]),r.end.copy(l[d]),PT(r,i,e,t),c=e.distanceToSquared(t),c<h&&(h=c,n&&n.copy(e),s&&s.copy(t))}return this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<h&&(h=c,n&&n.copy(e),s&&s.copy(a)),this.closestPointToPoint(o,e),c=o.distanceToSquared(e),c<h&&(h=c,n&&n.copy(e),s&&s.copy(o)),Math.sqrt(h)}}();Zo.prototype.intersectsTriangle=function(){let e=new Zo,t=new Array(3),r=new Array(3),i=new Ja,n=new Ja,s=new C,a=new C,o=new C,l=new C,c=new Ds,h=new Ds,u=new Ds;return function(d,p=null,f=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){let v=this.satBounds,y=this.satAxes;r[0]=d.a,r[1]=d.b,r[2]=d.c;for(let S=0;S<4;S++){let w=v[S],A=y[S];if(i.setFromPoints(A,r),w.isSeparated(i))return!1}let x=d.satBounds,b=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let S=0;S<4;S++){let w=x[S],A=b[S];if(i.setFromPoints(A,t),w.isSeparated(i))return!1}for(let S=0;S<4;S++){let w=y[S];for(let A=0;A<4;A++){let _=b[A];if(s.crossVectors(w,_),i.setFromPoints(s,t),n.setFromPoints(s,r),i.isSeparated(n))return!1}}return p&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{let v=this.points,y=!1,x=0;for(let D=0;D<3;D++){let L=v[D],R=v[(D+1)%3];c.start.copy(L),c.end.copy(R),c.delta(a);let V=y?h.start:h.end,F=gh(g.distanceToPoint(L));if(gh(g.normal.dot(a))&&F){h.copy(c),x=2;break}if((g.intersectLine(c,V)||F)&&!gh(V.distanceTo(R))){if(x++,y)break;y=!0}}if(x===1&&d.containsPoint(h.end))return p&&(p.start.copy(h.end),p.end.copy(h.end)),!0;if(x!==2)return!1;let b=d.points,S=!1,w=0;for(let D=0;D<3;D++){let L=b[D],R=b[(D+1)%3];c.start.copy(L),c.end.copy(R),c.delta(o);let V=S?u.start:u.end,F=gh(m.distanceToPoint(L));if(gh(m.normal.dot(o))&&F){u.copy(c),w=2;break}if((m.intersectLine(c,V)||F)&&!gh(V.distanceTo(R))){if(w++,S)break;S=!0}}if(w===1&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(w!==2)return!1;if(h.delta(a),u.delta(o),a.dot(o)<0){let D=u.start;u.start=u.end,u.end=D}let A=h.start.dot(a),_=h.end.dot(a),M=u.start.dot(a),E=u.end.dot(a),T=_<M,P=A<E;return A!==E&&M!==_&&T===P?!1:(p&&(l.subVectors(h.start,u.start),l.dot(a)>0?p.start.copy(h.start):p.start.copy(u.start),l.subVectors(h.end,u.end),l.dot(a)<0?p.end.copy(h.end):p.end.copy(u.end)),!0)}}}();Zo.prototype.distanceToPoint=function(){let e=new C;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Zo.prototype.distanceToTriangle=function(){let e=new C,t=new C,r=["a","b","c"],i=new Ds,n=new Ds;return function(s,a=null,o=null){let l=a||o?i:null;if(this.intersectsTriangle(s,l))return(a||o)&&(a&&l.getCenter(a),o&&l.getCenter(o)),0;let c=1/0;for(let h=0;h<3;h++){let u,d=r[h],p=s[d];this.closestPointToPoint(p,e),u=p.distanceToSquared(e),u<c&&(c=u,a&&a.copy(e),o&&o.copy(p));let f=this[d];s.closestPointToPoint(f,e),u=f.distanceToSquared(e),u<c&&(c=u,a&&a.copy(f),o&&o.copy(e))}for(let h=0;h<3;h++){let u=r[h],d=r[(h+1)%3];i.set(this[u],this[d]);for(let p=0;p<3;p++){let f=r[p],m=r[(p+1)%3];n.set(s[f],s[m]),PT(i,n,e,t);let g=e.distanceToSquared(t);g<c&&(c=g,a&&a.copy(e),o&&o.copy(t))}}return Math.sqrt(c)}}();var eo=class{constructor(e,t,r){this.isOrientedBox=!0,this.min=new C,this.max=new C,this.matrix=new we,this.invMatrix=new we,this.points=new Array(8).fill().map(()=>new C),this.satAxes=new Array(3).fill().map(()=>new C),this.satBounds=new Array(3).fill().map(()=>new Ja),this.alignedSatBounds=new Array(3).fill().map(()=>new Ja),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};eo.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let h=0;h<=1;h++){let u=1*l|2*c|4*h,d=i[u];d.x=l?r.x:t.x,d.y=c?r.y:t.y,d.z=h?r.z:t.z,d.applyMatrix4(e)}let n=this.satBounds,s=this.satAxes,a=i[0];for(let l=0;l<3;l++){let c=s[l],h=n[l],u=1<<l,d=i[u];c.subVectors(a,d),h.setFromPoints(c,i)}let o=this.alignedSatBounds;o[0].setFromPointsField(i,"x"),o[1].setFromPointsField(i,"y"),o[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();eo.prototype.intersectsBox=function(){let e=new Ja;return function(t){this.needsUpdate&&this.update();let r=t.min,i=t.max,n=this.satBounds,s=this.satAxes,a=this.alignedSatBounds;if(e.min=r.x,e.max=i.x,a[0].isSeparated(e)||(e.min=r.y,e.max=i.y,a[1].isSeparated(e))||(e.min=r.z,e.max=i.z,a[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=s[o],c=n[o];if(e.setFromBox(l,t),c.isSeparated(e))return!1}return!0}}();eo.prototype.intersectsTriangle=function(){let e=new Zo,t=new Array(3),r=new Ja,i=new Ja,n=new C;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let a=this.satBounds,o=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let u=0;u<3;u++){let d=a[u],p=o[u];if(r.setFromPoints(p,t),d.isSeparated(r))return!1}let l=s.satBounds,c=s.satAxes,h=this.points;for(let u=0;u<3;u++){let d=l[u],p=c[u];if(r.setFromPoints(p,h),d.isSeparated(r))return!1}for(let u=0;u<3;u++){let d=o[u];for(let p=0;p<4;p++){let f=c[p];if(n.crossVectors(d,f),r.setFromPoints(n,t),i.setFromPoints(n,h),r.isSeparated(i))return!1}}return!0}}();eo.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();eo.prototype.distanceToPoint=function(){let e=new C;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();eo.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Ds),r=new Array(12).fill().map(()=>new Ds),i=new C,n=new C;return function(s,a=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(o||l)&&(s.getCenter(n),this.closestPointToPoint(n,i),s.closestPointToPoint(i,n),o&&o.copy(i),l&&l.copy(n)),0;let c=a*a,h=s.min,u=s.max,d=this.points,p=1/0;for(let m=0;m<8;m++){let g=d[m];n.copy(g).clamp(h,u);let v=g.distanceToSquared(n);if(v<p&&(p=v,o&&o.copy(g),l&&l.copy(n),v<c))return Math.sqrt(v)}let f=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(m+1)%3,x=(m+2)%3,b=g<<y|v<<x,S=1<<m|g<<y|v<<x,w=d[b],A=d[S];t[f].set(w,A);let _=e[m],M=e[y],E=e[x],T=r[f],P=T.start,D=T.end;P[_]=h[_],P[M]=g?h[M]:u[M],P[E]=v?h[E]:u[M],D[_]=u[_],D[M]=g?h[M]:u[M],D[E]=v?h[E]:u[M],f++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){n.x=m?u.x:h.x,n.y=g?u.y:h.y,n.z=v?u.z:h.z,this.closestPointToPoint(n,i);let y=n.distanceToSquared(i);if(y<p&&(p=y,o&&o.copy(i),l&&l.copy(n),y<c))return Math.sqrt(y)}for(let m=0;m<12;m++){let g=t[m];for(let v=0;v<12;v++){let y=r[v];PT(g,y,i,n);let x=i.distanceToSquared(n);if(x<p&&(p=x,o&&o.copy(i),l&&l.copy(n),x<c))return Math.sqrt(x)}}return Math.sqrt(p)}}();var vh=new C,yh=new C,xh=new C,f0=new $,m0=new $,g0=new $,qR=new C,$R=new C,XR=new C,v0=new C;function Nbe(e,t,r,i,n,s){let a;return s===di?a=e.intersectTriangle(i,r,t,!0,n):a=e.intersectTriangle(t,r,i,s!==Yn,n),a===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function Fbe(e,t,r,i,n,s,a,o,l){vh.fromBufferAttribute(t,s),yh.fromBufferAttribute(t,a),xh.fromBufferAttribute(t,o);let c=Nbe(e,vh,yh,xh,v0,l);if(c){i&&(f0.fromBufferAttribute(i,s),m0.fromBufferAttribute(i,a),g0.fromBufferAttribute(i,o),c.uv=zi.getInterpolation(v0,vh,yh,xh,f0,m0,g0,new $)),n&&(f0.fromBufferAttribute(n,s),m0.fromBufferAttribute(n,a),g0.fromBufferAttribute(n,o),c.uv1=zi.getInterpolation(v0,vh,yh,xh,f0,m0,g0,new $)),r&&(qR.fromBufferAttribute(r,s),$R.fromBufferAttribute(r,a),XR.fromBufferAttribute(r,o),c.normal=zi.getInterpolation(v0,vh,yh,xh,qR,$R,XR,new C),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));let h={a:s,b:a,c:o,normal:new C,materialIndex:0};zi.getNormal(vh,yh,xh,h.normal),c.face=h,c.faceIndex=s}return c}function _V(e,t,r,i,n){let s=i*3,a=e.index.getX(s),o=e.index.getX(s+1),l=e.index.getX(s+2),{position:c,normal:h,uv:u,uv1:d}=e.attributes,p=Fbe(r,c,h,u,d,a,o,l,t);return p?(p.faceIndex=i,n&&n.push(p),p):null}function Ube(e,t,r,i,n,s){for(let a=i,o=i+n;a<o;a++)_V(e,t,r,a,s)}function jbe(e,t,r,i,n){let s=1/0,a=null;for(let o=i,l=i+n;o<l;o++){let c=_V(e,t,r,o);c&&c.distance<s&&(a=c,s=c.distance)}return a}function La(e,t,r,i){let n=e.a,s=e.b,a=e.c,o=t,l=t+1,c=t+2;r&&(o=r.getX(t),l=r.getX(t+1),c=r.getX(t+2)),n.x=i.getX(o),n.y=i.getY(o),n.z=i.getZ(o),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),a.x=i.getX(c),a.y=i.getY(c),a.z=i.getZ(c)}function YR(e,t,r,i,n,s,a){let o=r.index,l=r.attributes.position;for(let c=e,h=t+e;c<h;c++)if(La(a,c*3,o,l),a.needsUpdate=!0,i(a,c,n,s))return!0;return!1}var AV=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Pl(e,t){return t[e+15]===65535}function Md(e,t){return t[e+6]}function fg(e,t){return t[e+14]}function mg(e){return e+8}function gg(e,t){return t[e+6]}function Vbe(e,t){return t[e+7]}var ld=new Br,H1=new C,Gbe=["x","y","z"];function BM(e,t,r,i,n){let s=e*2,a=Op,o=ic,l=nc;if(Pl(s,o)){let c=Md(e,l),h=fg(s,o);Ube(t,r,i,c,h,n)}else{let c=mg(e);W1(c,a,i,H1)&&BM(c,t,r,i,n);let h=gg(e,l);W1(h,a,i,H1)&&BM(h,t,r,i,n)}}function kM(e,t,r,i){let n=e*2,s=Op,a=ic,o=nc;if(Pl(n,a)){let l=Md(e,o),c=fg(n,a);return jbe(t,r,i,l,c)}else{let l=Vbe(e,o),c=Gbe[l],h=i.direction[c]>=0,u,d;h?(u=mg(e),d=gg(e,o)):(u=gg(e,o),d=mg(e));let p=W1(u,s,i,H1)?kM(u,t,r,i):null;if(p){let m=p.point[c];if(h?m<=s[d+l]:m>=s[d+l+3])return p}let f=W1(d,s,i,H1)?kM(d,t,r,i):null;return p&&f?p.distance<=f.distance?p:f:p||f||null}}var Hbe=function(){let e,t,r=[],i=new AV(()=>new Br);return function(...s){e=i.getPrimitive(),t=i.getPrimitive(),r.push(e,t);let a=n(...s);i.releasePrimitive(e),i.releasePrimitive(t),r.pop(),r.pop();let o=r.length;return o>0&&(t=r[o-1],e=r[o-2]),a};function n(s,a,o,l,c=null,h=0,u=0){function d(y){let x=y*2,b=ic,S=nc;for(;!Pl(x,b);)y=mg(y),x=y*2;return Md(y,S)}function p(y){let x=y*2,b=ic,S=nc;for(;!Pl(x,b);)y=gg(y,S),x=y*2;return Md(y,S)+fg(x,b)}let f=s*2,m=Op,g=ic,v=nc;if(Pl(f,g)){let y=Md(s,v),x=fg(f,g);return za(s,m,e),l(y,x,!1,u,h+s,e)}else{let y=mg(s),x=gg(s,v),b=y,S=x,w,A,_,M;if(c&&(_=e,M=t,za(b,m,_),za(S,m,M),w=c(_),A=c(M),A<w)){b=x,S=y;let V=w;w=A,A=V,_=M}_||(_=e,za(b,m,_));let E=Pl(b*2,g),T=o(_,E,w,u+1,h+b),P;if(T===2){let V=d(b),F=p(b)-V;P=l(V,F,!0,u+1,h+b,_)}else P=T&&n(b,a,o,l,c,h,u+1);if(P)return!0;M=t,za(S,m,M);let D=Pl(S*2,g),L=o(M,D,A,u+1,h+S),R;if(L===2){let V=d(S),F=p(S)-V;R=l(V,F,!0,u+1,h+S,M)}else R=L&&n(S,a,o,l,c,h,u+1);return!!R}}}(),Wbe=function(){let e=new Zo,t=new Zo,r=new we,i=new eo,n=new eo;return function s(a,o,l,c,h=null){let u=a*2,d=Op,p=ic,f=nc;if(h===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),h=i),Pl(u,p)){let m=o,g=m.index,v=m.attributes.position,y=l.index,x=l.attributes.position,b=Md(a,f),S=fg(u,p);if(r.copy(c).invert(),l.boundsTree)return za(a,d,n),n.matrix.copy(r),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:w=>n.intersectsBox(w),intersectsTriangle:w=>{w.a.applyMatrix4(c),w.b.applyMatrix4(c),w.c.applyMatrix4(c),w.needsUpdate=!0;for(let A=b*3,_=(S+b)*3;A<_;A+=3)if(La(t,A,g,v),t.needsUpdate=!0,w.intersectsTriangle(t))return!0;return!1}});for(let w=b*3,A=S+b*3;w<A;w+=3){La(e,w,g,v),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let _=0,M=y.count;_<M;_+=3)if(La(t,_,y,x),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let m=a+8,g=f[a+6];return za(m,d,ld),!!(h.intersectsBox(ld)&&s(m,o,l,c,h)||(za(g,d,ld),h.intersectsBox(ld)&&s(g,o,l,c,h)))}}}();function W1(e,t,r,i){return za(e,t,ld),r.intersectBox(ld,i)}var zM=[],yy,Op,ic,nc;function Nf(e){yy&&zM.push(yy),yy=e,Op=new Float32Array(e),ic=new Uint16Array(e),nc=new Uint32Array(e)}function y0(){yy=null,Op=null,ic=null,nc=null,zM.length&&Nf(zM.pop())}var gS=Symbol("skip tree generation"),vS=new Br,yS=new Br,bh=new we,Bc=new eo,lf=new eo,cf=new C,x0=new C,qbe=new C,$be=new C,Xbe=new C,QR=new Br,ga=new AV(()=>new Zo),mm=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),mm.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,i=e._roots,n=r.getIndex(),s;return t.cloneBuffers?s={roots:i.map(a=>a.slice()),index:n.array.slice()}:s={roots:i,index:n.array},s}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),mm.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:i,roots:n}=e,s=new mm(t,{...r,[gS]:!0});if(s._roots=n,r.setIndex){let a=t.getIndex();if(a===null){let o=new st(e.index,1,!1);t.setIndex(o)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return s}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[gS]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[gS]||(this._roots=Rbe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Br))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,i=t.attributes.position,n,s,a,o,l=0,c=this._roots;for(let u=0,d=c.length;u<d;u++)n=c[u],s=new Uint32Array(n),a=new Uint16Array(n),o=new Float32Array(n),h(0,l),l+=n.byteLength;function h(u,d,p=!1){let f=u*2;if(a[f+15]===65535){let m=s[u+6],g=a[f+14],v=1/0,y=1/0,x=1/0,b=-1/0,S=-1/0,w=-1/0;for(let A=3*m,_=3*(m+g);A<_;A++){let M=r[A],E=i.getX(M),T=i.getY(M),P=i.getZ(M);E<v&&(v=E),E>b&&(b=E),T<y&&(y=T),T>S&&(S=T),P<x&&(x=P),P>w&&(w=P)}return o[u+0]!==v||o[u+1]!==y||o[u+2]!==x||o[u+3]!==b||o[u+4]!==S||o[u+5]!==w?(o[u+0]=v,o[u+1]=y,o[u+2]=x,o[u+3]=b,o[u+4]=S,o[u+5]=w,!0):!1}else{let m=u+8,g=s[u+6],v=m+d,y=g+d,x=p,b=!1,S=!1;e?x||(b=e.has(v),S=e.has(y),x=!b&&!S):(b=!0,S=!0);let w=x||b,A=x||S,_=!1;w&&(_=h(m,d,x));let M=!1;A&&(M=h(g,d,x));let E=_||M;if(E)for(let T=0;T<3;T++){let P=m+T,D=g+T,L=o[P],R=o[P+3],V=o[D],F=o[D+3];o[u+T]=L<V?L:V,o[u+T+3]=R>F?R:F}return E}}}traverse(e,t=0){let r=this._roots[t],i=new Uint32Array(r),n=new Uint16Array(r);s(0);function s(a,o=0){let l=a*2,c=n[l+15]===65535;if(c){let h=i[a+6],u=n[l+14];e(o,c,new Float32Array(r,a*4,6),h,u)}else{let h=a+8,u=i[a+6],d=i[a+7];e(o,c,new Float32Array(r,a*4,6),d)||(s(h,o+1),s(u,o+1))}}}raycast(e,t=oa){let r=this._roots,i=this.geometry,n=[],s=t.isMaterial,a=Array.isArray(t),o=i.groups,l=s?t.side:t;for(let c=0,h=r.length;c<h;c++){let u=a?t[o[c].materialIndex].side:l,d=n.length;if(Nf(r[c]),BM(0,i,u,e,n),y0(),a){let p=o[c].materialIndex;for(let f=d,m=n.length;f<m;f++)n[f].face.materialIndex=p}}return n}raycastFirst(e,t=oa){let r=this._roots,i=this.geometry,n=t.isMaterial,s=Array.isArray(t),a=null,o=i.groups,l=n?t.side:t;for(let c=0,h=r.length;c<h;c++){let u=s?t[o[c].materialIndex].side:l;Nf(r[c]);let d=kM(0,i,u,e);y0(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,s&&(d.face.materialIndex=o[c].materialIndex))}return a}intersectsGeometry(e,t){let r=this.geometry,i=!1;for(let n of this._roots)if(Nf(n),i=Wbe(0,r,e,t),y0(),i)break;return i}shapecast(e,t,r){let i=this.geometry;if(e instanceof Function){if(t){let u=t;t=(d,p,f,m)=>{let g=p*3;return u(d,g,g+1,g+2,f,m)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=ga.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:a,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let u=o;o=(d,p,f,m,g)=>u(d,p,f,m,g)?!0:YR(d,p,i,l,f,m,n)}else o||(l?o=(u,d,p,f)=>YR(u,d,i,l,p,f,n):o=(u,d,p)=>p);let c=!1,h=0;for(let u of this._roots){if(Nf(u),c=Hbe(0,i,a,o,s,h),y0(),c)break;h+=u.byteLength}return ga.releasePrimitive(n),c}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:n}=r,s=this.geometry.index,a=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;bh.copy(t).invert();let c=ga.getPrimitive(),h=ga.getPrimitive();if(n){let d=function(p,f,m,g,v,y,x,b){for(let S=m,w=m+g;S<w;S++){La(h,S*3,o,l),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let A=p,_=p+f;A<_;A++)if(La(c,A*3,s,a),c.needsUpdate=!0,n(c,h,A,S,v,y,x,b))return!0}return!1};if(i){let p=i;i=function(f,m,g,v,y,x,b,S){return p(f,m,g,v,y,x,b,S)?!0:d(f,m,g,v,y,x,b,S)}}else i=d}e.getBoundingBox(yS),yS.applyMatrix4(t);let u=this.shapecast({intersectsBounds:d=>yS.intersectsBox(d),intersectsRange:(d,p,f,m,g,v)=>(vS.copy(v),vS.applyMatrix4(bh),e.shapecast({intersectsBounds:y=>vS.intersectsBox(y),intersectsRange:(y,x,b,S,w)=>i(d,p,y,x,m,g,S,w)}))});return ga.releasePrimitive(c),ga.releasePrimitive(h),u}intersectsBox(e,t){return Bc.set(e.min,e.max,t),Bc.needsUpdate=!0,this.shapecast({intersectsBounds:r=>Bc.intersectsBox(r),intersectsTriangle:r=>Bc.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},n=0,s=1/0){e.boundingBox||e.computeBoundingBox(),Bc.set(e.boundingBox.min,e.boundingBox.max,t),Bc.needsUpdate=!0;let a=this.geometry,o=a.attributes.position,l=a.index,c=e.attributes.position,h=e.index,u=ga.getPrimitive(),d=ga.getPrimitive(),p=x0,f=qbe,m=null,g=null;i&&(m=$be,g=Xbe);let v=1/0,y=null,x=null;return bh.copy(t).invert(),lf.matrix.copy(bh),this.shapecast({boundsTraverseOrder:b=>Bc.distanceToBox(b),intersectsBounds:(b,S,w)=>w<v&&w<s?(S&&(lf.min.copy(b.min),lf.max.copy(b.max),lf.needsUpdate=!0),!0):!1,intersectsRange:(b,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:w=>lf.distanceToBox(w),intersectsBounds:(w,A,_)=>_<v&&_<s,intersectsRange:(w,A)=>{for(let _=w*3,M=(w+A)*3;_<M;_+=3){La(d,_,h,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let E=b*3,T=(b+S)*3;E<T;E+=3){La(u,E,l,o),u.needsUpdate=!0;let P=u.distanceToTriangle(d,p,m);if(P<v&&(f.copy(p),g&&g.copy(m),v=P,y=E/3,x=_/3),P<n)return!0}}}});{let w=h?h.count:c.count;for(let A=0,_=w;A<_;A+=3){La(d,A,h,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let M=b*3,E=(b+S)*3;M<E;M+=3){La(u,M,l,o),u.needsUpdate=!0;let T=u.distanceToTriangle(d,p,m);if(T<v&&(f.copy(p),g&&g.copy(m),v=T,y=M/3,x=A/3),T<n)return!0}}}}}),ga.releasePrimitive(u),ga.releasePrimitive(d),v===1/0?null:(r.point?r.point.copy(f):r.point=f.clone(),r.distance=v,r.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(bh),f.applyMatrix4(bh),i.distance=f.sub(i.point).length(),i.faceIndex=x),r)}closestPointToPoint(e,t={},r=0,i=1/0){let n=r*r,s=i*i,a=1/0,o=null;if(this.shapecast({boundsTraverseOrder:c=>(cf.copy(e).clamp(c.min,c.max),cf.distanceToSquared(e)),intersectsBounds:(c,h,u)=>u<a&&u<s,intersectsTriangle:(c,h)=>{c.closestPointToPoint(e,cf);let u=e.distanceToSquared(cf);return u<a&&(x0.copy(cf),a=u,o=h),u<n}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(x0):t.point=x0.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{za(0,new Float32Array(t),QR),e.union(QR)}),e}},uf=gp(dse()),Ybe=.5*(Math.sqrt(3)-1),hf=(3-Math.sqrt(3))/6,Qbe=1/3,va=1/6,gm=e=>Math.floor(e)|0,KR=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),xS=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function bS(e=Math.random){let t=MV(e),r=new Float64Array(t).map(n=>KR[n%12*2]),i=new Float64Array(t).map(n=>KR[n%12*2+1]);return function(n,s){let a=0,o=0,l=0,c=(n+s)*Ybe,h=gm(n+c),u=gm(s+c),d=(h+u)*hf,p=h-d,f=u-d,m=n-p,g=s-f,v,y;m>g?(v=1,y=0):(v=0,y=1);let x=m-v+hf,b=g-y+hf,S=m-1+2*hf,w=g-1+2*hf,A=h&255,_=u&255,M=.5-m*m-g*g;if(M>=0){let P=A+t[_],D=r[P],L=i[P];M*=M,a=M*M*(D*m+L*g)}let E=.5-x*x-b*b;if(E>=0){let P=A+v+t[_+y],D=r[P],L=i[P];E*=E,o=E*E*(D*x+L*b)}let T=.5-S*S-w*w;if(T>=0){let P=A+1+t[_+1],D=r[P],L=i[P];T*=T,l=T*T*(D*S+L*w)}return 70*(a+o+l)}}function Kbe(e=Math.random){let t=MV(e),r=new Float64Array(t).map(s=>xS[s%12*3]),i=new Float64Array(t).map(s=>xS[s%12*3+1]),n=new Float64Array(t).map(s=>xS[s%12*3+2]);return function(s,a,o){let l,c,h,u,d=(s+a+o)*Qbe,p=gm(s+d),f=gm(a+d),m=gm(o+d),g=(p+f+m)*va,v=p-g,y=f-g,x=m-g,b=s-v,S=a-y,w=o-x,A,_,M,E,T,P;b>=S?S>=w?(A=1,_=0,M=0,E=1,T=1,P=0):b>=w?(A=1,_=0,M=0,E=1,T=0,P=1):(A=0,_=0,M=1,E=1,T=0,P=1):S<w?(A=0,_=0,M=1,E=0,T=1,P=1):b<w?(A=0,_=1,M=0,E=0,T=1,P=1):(A=0,_=1,M=0,E=1,T=1,P=0);let D=b-A+va,L=S-_+va,R=w-M+va,V=b-E+2*va,F=S-T+2*va,O=w-P+2*va,k=b-1+3*va,z=S-1+3*va,N=w-1+3*va,j=p&255,Y=f&255,q=m&255,X=.6-b*b-S*S-w*w;if(X<0)l=0;else{let Q=j+t[Y+t[q]];X*=X,l=X*X*(r[Q]*b+i[Q]*S+n[Q]*w)}let G=.6-D*D-L*L-R*R;if(G<0)c=0;else{let Q=j+A+t[Y+_+t[q+M]];G*=G,c=G*G*(r[Q]*D+i[Q]*L+n[Q]*R)}let te=.6-V*V-F*F-O*O;if(te<0)h=0;else{let Q=j+E+t[Y+T+t[q+P]];te*=te,h=te*te*(r[Q]*V+i[Q]*F+n[Q]*O)}let Z=.6-k*k-z*z-N*N;if(Z<0)u=0;else{let Q=j+1+t[Y+1+t[q+1]];Z*=Z,u=Z*Z*(r[Q]*k+i[Q]*z+n[Q]*N)}return 32*(l+c+h+u)}}function MV(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let i=r+~~(e()*(256-r)),n=t[r];t[r]=t[i],t[i]=n}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var Gs=new zi,Zbe=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let n=1;Gs.a.fromBufferAttribute(e,i),Gs.b.fromBufferAttribute(e,i+1),Gs.c.fromBufferAttribute(e,i+2),n*=Gs.getArea(),t[i/3]=n}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<t.length;i++)r+=t[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let s=Math.ceil((r+i)/2);if(s===0||t[s-1]<=e&&t[s]>e){n=s;break}else e<t[s]?i=s-1:r=s+1}return n}sampleFace(e,t,r){let i=this.randomFunction(),n=this.randomFunction();return i+n>1&&(i=1-i,n=1-n),Gs.a.fromBufferAttribute(this.positionAttribute,e*3),Gs.b.fromBufferAttribute(this.positionAttribute,e*3+1),Gs.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Gs.a,i).addScaledVector(Gs.b,n).addScaledVector(Gs.c,1-(i+n)),Gs.getNormal(r),this}},Jbe=gp(pU()),ewe=new we,twe=new we,rwe=new we,vg;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})(vg||(vg={}));var DT=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new we,this.copyPreviousMatrix=!0,this.hiddenMatrix=new we,this.matrixWorldRigid=new we,this.shearScale=new we,this.shearScaleInv=new we}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof Yt&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(t,r=0){for(let i of this.children)vg.is(i)&&i.traverseObject(t,r+1)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let i of this.children)vg.is(i)&&i.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:n,q:s}=(0,Jbe.SVD)(r),a=ewe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),o=twe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=rwe.copy(o).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(o),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(a,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new we().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof we?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,i,n,s,a){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},iwe=class extends DT(Yt){},nwe=e=>e.type==="Mesh",Ni=class extends iwe{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let r=this.children[e];(r==null?void 0:r.object)!==t&&(r&&this.remove(r),r=new Ni(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return nwe(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Kc=new C,Zc=new C,Ed=new we,EV=[new C(-1,1,1),new C(-1,-1,1),new C(1,-1,1),new C(1,1,1),new C(-1,1,-1),new C(-1,-1,-1),new C(1,-1,-1),new C(1,1,-1)],swe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],awe=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],ZR=(e,t,r)=>{e.updateEntityBoxSize(Kc,Zc),Ed.copy(t).multiply(e.matrixWorld),Zc.x===0&&Zc.y===0&&Zc.z===0?r.push(new C(Kc.x,Kc.y,Kc.z).applyMatrix4(Ed)):EV.forEach(i=>{r.push(i.clone().multiply(Zc).add(Kc).applyMatrix4(Ed))})},JR=class extends Br{constructor(){super(...arguments),this.matrix=new we,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new we().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){i.push(new C);return}ZR(n,t,i)}}):ZR(e,t,i),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(Ed.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Zc).multiplyScalar(.5),this.getCenter(Kc),Ed.copy(this.matrix).setPosition(Kc),this.vertices=EV.map(e=>e.clone().multiply(Zc).applyMatrix4(Ed))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=swe.map(([e,t])=>new Ds(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new C))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=awe.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Ul={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},owe=class extends jU{constructor(){super()}getPoints(e=12){let t=[],r,i=this.getCurveLengths(),n=i[i.length-1]/i.length;for(let s=0,a=this.curves;s<a.length;s++){let o=a[s],l=s===0?i[s]:i[s]-i[s-1],c=Math.ceil(e*l/n),h=o.getPoints(c);for(let u=0;u<h.length;u++){let d=h[u];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},NM=.001;function FM(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=NM}function wS(e,t){let r=new C(...e.position),i=new C(...e.controlNext.position),n=new C(...t.controlPrevious.position),s=new C(...t.position);return FM(r,i,s)&&FM(r,n,s)}function CV(e){let t=e.points.map(h=>new C(...h.data.position)),r=[e.points[0]],i=new C(...r[0].data.position);for(let h=0;h<e.points.length-1;h++)FM(i,t[h],t[h+1])||(r.push(e.points[h]),i=t[h]);r.push(e.points[e.points.length-1]);let n=e.isClosed,s=r.length-(n?0:1),a=r.length,o=[];for(let h=0;h<a;h++){let u=r[h].data,d=new C(...u.position),p=new C(...u.controlPrevious.position),f=new C(...u.controlNext.position),m={position:d,baseRoundness:u.roundness,controlPrevious:p,controlNext:f};if(u.roundness===0||!e.isClosed&&(h===0||h===a-1)){o[h]={...m,removedLength:0};continue}let g=n&&h==0?a-1:h-1,v=n&&h==a-1?0:h+1,y=r[g].data,x=r[v].data,b=new C(...y.position),S=new C(...x.position),w=b.clone().sub(d).normalize(),A=S.clone().sub(d).normalize();Object.assign(m,{prevDir:w,nextDir:A});let _=wS(y,u),M=wS(u,x);if(!_||!M)o[h]={...m,removedLength:0};else{let E=w.clone().add(A).normalize(),T=E.clone().cross(w).length()/w.dot(E);o[h]={...m,tan:T,removedLength:u.roundness/T}}}for(let h=0;h<s;h++){let u=h,d=n&&h===a-1?0:h+1,p=o[u],f=o[d];if(p.removedLength!==0||f.removedLength!==0){let m=p.position.distanceTo(f.position);p.removedLength=Math.min(p.removedLength,m/2),f.removedLength=Math.min(f.removedLength,m/2)}}let l=[];for(let h=0;h<s;h++){let u=h,d=n&&h===a-1?0:h+1,p=o[u],f=o[d],m=null;if(!wS(r[u].data,r[d].data))p.position.distanceTo(f.position)>NM&&(m=new py(p.position,p.controlNext,f.controlPrevious,f.position));else{let g=p.position.clone(),v=f.position.clone();(p.removedLength!==0||f.removedLength!==0)&&(p.nextDir&&g.add(p.nextDir.clone().setLength(p.removedLength)),f.prevDir&&v.add(f.prevDir.clone().setLength(f.removedLength))),g.distanceTo(v)>NM&&(m=new py(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*h+1]=m}for(let h=0;h<a;h++){let u=o[h];if(u.removedLength===0){l[2*h]=null;continue}let d=u.position,p=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),f=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),m=u.tan*u.removedLength,g=u.prevDir.clone().add(u.nextDir).normalize(),v=p.clone().lerp(f,.5),y=p.distanceTo(f)/2,x=g.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(y,2))).add(v),b=g.clone().multiplyScalar(-m).add(x),S=d.distanceTo(b)/d.distanceTo(v),w=u.prevDir.clone().multiplyScalar(S*d.distanceTo(p)).add(d),A=w.clone().lerp(b,2),_=p.clone().lerp(w,4/3),M=f.clone().lerp(A,4/3);l[2*h]=new py(p,_,M,f)}let c=new owe;return l.forEach(h=>{h&&c.add(h)}),c}var Rt;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(Rt||(Rt={}));var Po=e=>Rt.is(e),lwe={type:"completeState",isfromEntity:!0},OT=e=>class extends DT(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new JR,this._recursiveBBox=new JR,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(Rt.is(r))return r}entityChildrenCount(){let t=this.children.length;for(;t--;)if(Rt.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(Rt.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,i=!1){if(!(this.data.states.length===0&&!i)){for(let n of this.data.states)ou.toOps(this.data,n.data).forEach(s=>{let a=rM.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,r)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=ou.patch(this.data,n),ou.toOps(this.data,n).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,r)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Po(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(i=>{i.uuid===t&&(r=i)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,i=r.indexOf(this)+1;if(Rt.is(r[i]))return r[i];if(Rt.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&Rt.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,i=this;for(;i!==t;){if(i===null)return-1;i=i.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)Po(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{Rt.is(r)&&t(r)})}traverseConcreteEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)Po(i)&&i.isConcreteEntity&&i.traverseEntity(t,r+1)}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)Po(i)&&i.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)Po(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Po(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(i=>{i.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return tM(r,t)}updateTransformState(t){var i;let r=!1;return t.position&&(this.position.fromArray(t.position),r=!0),t.rotation&&(this.rotation.fromArray(t.rotation),r=!0),t.scale&&(r=!0,this.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&(r=!0,this.hiddenMatrix.fromArray((i=t.hiddenMatrix)!=null?i:rp.identity)),r&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),r}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)Rt.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{Rt.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return tM(r,t)}updateByObjUpdateOp(t,r){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},r,!1)}updateByOp(t,r,i,n){let s=this.data;this.data=r;let a=t,o=As(t.path,["states","*"]);if(o!==null){if(t.type===0){let[l]=o;if((this==null?void 0:this.stateSelection)===l){let c={...t.props};if(delete c.name,Object.values(t.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let u=qa.zoom(h,t.path.slice(2));if(u)for(let d in t.props)t.props[d]===void 0&&d in u&&(c[d]=u[d])}}a={...t,props:c,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:h,...u}=l;l=u}if(t.props.material!==void 0&&"material"in l){let{material:h,...u}=l;l=u}let c=qa.removeOverridden(t.path,t.props,l);a={...t,props:c}}}if(this.updateByPatchedOpBase(a,ou.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),As(t.path,["overrides"])){let l=[],c=[...t.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let h of Object.keys(t.props)){l[l.length-1]=h;let u=i.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=t.props[h],u.updateState(tc.apply(u.component.data,u.overrideData),i))}}else{let h=i.scene.findInstance([this.uuid,...l]);if(h){let u=qa.zoom(h.component.data,c);if(t={...t,path:c},t.type===0){let d=t.props;if(u)for(let[p,f]of Object.entries(t.props))f===void 0&&(d===t.props&&(d={...t.props}),d[p]=u[p]);t={...t,props:d}}h.overrideData=F1.resolve(r.overrides,l),h.updateByOp(t,tn.applySimple(h.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let c;for(let h of Fl.rootOverrideProps)h in t.props&&(c===void 0&&(c={}),c[h]=t.props[h]);c&&(l={...t,props:c})}else for(let c of Fl.rootOverrideProps)if(As(t.path,[c])){l=t;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let h=tc.filterOp(c.overrideData,l);h&&c.updateByOp(h,tn.applySimple(c.data,h),i,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let h=tc.filterOp(c.overrideData,t);if(h){let u;s===c.data&&t===h?u=r:u=tn.applySimple(c.data,h),c.updateByOp(h,u,i,!0)}}})}}updateByPatchedOpBase(t,r,i){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Bu.is(t.props.type)&&Ul.changeEntityProptotype(this,r,i);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){Ul.changeEntityProptotype(this,r,i);for(let n of this.children)Rt.is(n)&&n.updateVisible()}this.updateByPatchedOp(t,r,i)}updateByPatchedOp(t,r,i){if(t.path.length===0&&t.type===0&&this.updateState(t.props,i),As(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),As(t.path,["cloner"])!==null){let n=tn.drop(t,1);n.path.length===0&&n.type===0&&n.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(r.cloner,i.scene):(this.setFromClonerState(r.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(t){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var f,m,g,v,y,x,b,S,w,A;let r=(m=(f=this._updatedPathSnapping)==null?void 0:f.pathId)!=null?m:this.dataPatched.pathSnapping.pathId,i=(y=(v=(g=this._updatedPathSnapping)==null?void 0:g.slide)!=null?v:this.dataPatched.pathSnapping.slide)!=null?y:0,n=(b=(x=this._updatedPathSnapping)==null?void 0:x.offset)!=null?b:this.dataPatched.pathSnapping.offset,s=(w=(S=this._updatedPathSnapping)==null?void 0:S.orientation)!=null?w:this.dataPatched.pathSnapping.orientation;if(r===null)return;let a=t.find(r);if(!a||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let o=a.data;if(o.geometry.path.points.length<=1)return;let l=CV(o.geometry.path),c=(i+n)%1;i+n===1&&c===0&&(c=1);let h=l.getPointAt(c),u=this.parent?(A=this.parent)==null?void 0:A.matrixWorld:new we;a.updateMatrixWorld();let d=new we().multiplyMatrices(u.clone().invert(),a.matrixWorld);h.applyMatrix4(d);let p={position:h.toArray(),rotation:o.rotation};if(s==="tangential"){let _=new we().extractRotation(a.matrixWorld),M=l.getTangentAt(c).applyMatrix4(_).add(h),E=new we().lookAt(h,M,new C(0,1,0)),T=new hi().setFromRotationMatrix(E);p={...p,rotation:[T.x,T.y,T.z]}}this.updateTransformState(p),this.traverseEntity(_=>{_._cameraType&&_.dispatchEvent(lwe)})}updateVisible(){var t,r;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||((t=this.dataPatched.cloner.disabled)!=null?t:!1)||((r=this.dataPatched.cloner)==null?void 0:r.hideBase)!==!0)}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),r&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible()),this.updateTransformState(t)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof Ul.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new Ul.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},TV=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var a,o,l,c,h;let r=Object.assign({},(a=t==null?void 0:t.parameters)!=null?a:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters),i=r.width/2,n=(o=r.radiusTop)!=null?o:i,s=(l=r.radiusBottom)!=null?l:i;return n===s?(n=i,s=i):n>s?(n=i,s=s*i/n):(n=n*i/s,s=i),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((c=r.height)!=null?c:r.width),depth:Math.abs((h=r.depth)!=null?h:r.width),radiusTop:n,radiusBottom:s})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,radiusTop:c,radiusBottom:h,cornerRadius:u,cornerSegments:d,hollow:p}=e.parameters,f;return u||p?f=new PV(c,h,i,n,s,a,o,l*Math.PI/180,u,u,d,p):f=new $C(c,h,i,n,s,a,o,l*Math.PI/180),f.scale(1,1,r/t),Object.assign(f,{userData:{...e,type:"CylinderGeometry"}})}};function hl(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function eB(e){return new $(e.y,-e.x)}var PV=class extends nt{constructor(e,t,r,i,n,s,a,o,l,c,h,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,s&&(l=0,c=0);let p=[],f=[],m=[],g=[],v=0,y=r/2,x=new C,b=new C;d&&e==0&&(e=l),d&&t==0&&(t=c);let S=new $(e,y),w=new $(t,-y),A=null,_=null,M=null,E=null,T=S.clone().sub(w),P=0,D=0,L=0;u>0&&(P=Math.min(e,t)*(1-u),D=e-P,L=t-P);let R=S.clone();R.x-=P;let V=Math.PI-T.angle(),F=T.angle(),O=Math.tan(F/2),k=Math.tan(V/2),z=O+k,N=u?z:k,j=u?z:O;if(l=Math.min(l,(e-D)/N,T.length()/z),c=Math.min(c,(t-L)/j,T.length()/z),l>0){let Z=l/O;A=S.clone().sub(new $(Z,l)),u&&(M=A.clone(),M.x-=P-z*l),S.sub(T.clone().setLength(Z))}if(c>0){let Z=c/k;_=w.clone().sub(new $(Z,-c)),w.add(T.clone().setLength(Z)),u&&(E=_.clone(),E.x-=P-z*c,R.sub(T.clone().setLength(Z)))}T=S.clone().sub(w);let Y=T.length()<.5,q=[];for(let Z=0;Z<=i;Z++){let Q=[],re=Z/i,ae=re*o+a,ce=new $(Math.sin(ae),Math.cos(ae));E&&_?(X(Q,re,ce,V,c,E,-1,!0),X(Q,re,ce,F,c,_,-1,!1)):_?(G(Q,ce,_.x,0,-1),X(Q,re,ce,F,c,_,-1,!1)):s||G(Q,ce,t,L,-1);let pe=eB(T).normalize();if(hl(pe,ce,x),!Y)for(let Te=0;Te<=n;Te++){let xe=Te/n,Ie=T.clone().multiplyScalar(xe).add(w);hl(Ie,ce,b),f.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(re,.5+b.y/r),Q.push(v++)}if(M&&A?(X(Q,re,ce,V,l,A,1,!1),X(Q,re,ce,F,l,M,1,!0)):A?(X(Q,re,ce,V,l,A,1,!1),G(Q,ce,A.x,0,1)):s||G(Q,ce,e,D,1),u&&!Y){let Te=eB(T).multiplyScalar(-1).normalize();hl(Te,ce,x);for(let xe=0;xe<=n;xe++){let Ie=xe/n,Oe=T.clone().multiplyScalar(-Ie).add(R);hl(Oe,ce,b),f.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(re,.5+b.y/r),Q.push(v++)}}u&&!s&&Q.push(Q[0]),q.push(Q)}for(let Z=0;Z<q.length-1;Z++)for(let Q=0;Q<q[0].length-1;Q++){if(s&&u&&Q==n)continue;let re=q[Z][Q],ae=q[Z+1][Q],ce=q[Z+1][Q+1],pe=q[Z][Q+1],Te=f[ce*3+0],xe=f[ce*3+2];p.push(re,ae,pe),(Te!=0||xe!=0)&&p.push(ae,ce,pe)}o<Math.PI*2&&(te(-1,q[0],a),te(1,q[q.length-1],a+o)),this.setIndex(p),this.setAttribute("position",new Ve(f,3)),this.setAttribute("normal",new Ve(m,3)),this.setAttribute("uv",new Ve(g,2));function X(Z,Q,re,ae,ce,pe,Te,xe){for(let Ie=0;Ie<h+1;Ie++){let Oe=Ie/h,Se=Te<0?Oe:1-Oe;xe&&(Se-=1),Se*=ae;let be=new $(Math.sin(Se),Math.cos(Se)*Te),Re=be.clone().multiplyScalar(ce).add(pe);hl(Re,re,b),f.push(b.x,b.y,b.z),hl(be,re,x),m.push(x.x,x.y,x.z),g.push(Q,.5+b.y/r),Z.push(v++)}}function G(Z,Q,re,ae,ce){let pe=new C,Te=new $,xe=[re,ae];ce<0&&xe.reverse();for(let Ie of xe)Te.set(Ie,y*ce),hl(Te,Q,pe),f.push(pe.x,pe.y,pe.z),m.push(0,ce,0),g.push(.5,.5),Z.push(v++)}function te(Z,Q,re){let ae=new $(Math.sin(re),Math.cos(re)),ce=new $(-Math.cos(re),Math.sin(re)),pe=new C,Te=Z<0?(Oe,Se,be)=>p.push(Oe,Se,be):(Oe,Se,be)=>p.push(Oe,be,Se),xe=new $((e+t+D+L)/4,0);hl(xe,ae,pe),f.push(pe.x,pe.y,pe.z),m.push(ce.x,0,ce.y),g.push(.5,.5);let Ie=v++;for(let Oe of Q){let Se=f.slice(Oe*3,Oe*3+3);f.push(...Se),m.push(ce.x,0,ce.y);let be=g.slice(Oe*2,Oe*2+2);g.push(...be),v++}for(let Oe=Ie+1;Oe<v-1;Oe++)Te(Ie,Oe,Oe+1);Te(Ie,v-1,Ie+1)}}},cwe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:h,cornerSegments:u}=e.parameters,d;return c>0||h>0||l<360?d=new PV(0,t/2,i,n,s,a,o,l*Math.PI/180,c,h,u,0,!0):d=new GU(t/2,i,n,s,a),d.scale(1,1,r/t),Object.assign(d,{userData:{...e,type:"ConeGeometry"}})}},uwe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:s,depthSegments:a,cornerRadius:o,cornerSegments:l}=e.parameters,c;return o==0?c=new Ka(t,r,i,n,s,a):c=new hwe(t,r,i,n,s,a,o,l),Object.assign(c,{userData:{...e,type:"CubeGeometry"}})}},SS=Math.PI/2,hwe=class extends nt{constructor(e=1,t=1,r=1,i=1,n=1,s=1,a=0,o=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),a=Math.min(a,e/2,t/2,r/2);let c=[],h=[],u=[],d=[],p=0,f=0;m("z","y","x",-1,-1,r,t,e,s,n,0),m("z","y","x",1,-1,r,t,-e,s,n,1),m("x","z","y",1,1,e,r,t,i,s,2),m("x","z","y",1,-1,e,r,-t,i,s,3),m("x","y","z",1,-1,e,t,r,i,n,4),m("x","y","z",-1,-1,e,t,-r,i,n,5),a>0&&(g("z","y","x",-1,-1,1,r,t,e,s,0),g("z","y","x",1,-1,-1,r,t,e,s,1),g("z","y","x",-1,1,-1,r,t,e,s,1),g("z","y","x",1,1,1,r,t,e,s,0),g("x","y","z",-1,-1,-1,e,t,r,i,0),g("x","y","z",1,-1,1,e,t,r,i,1),g("x","y","z",-1,1,1,e,t,r,i,0),g("x","y","z",1,1,-1,e,t,r,i,1),g("y","x","z",-1,-1,1,t,e,r,n,0),g("y","x","z",1,-1,-1,t,e,r,n,1),g("y","x","z",1,1,1,t,e,r,n,1),g("y","x","z",-1,1,-1,t,e,r,n,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new Ve(h,3)),this.setAttribute("normal",new Ve(u,3)),this.setAttribute("uv",new Ve(d,2));function m(y,x,b,S,w,A,_,M,E,T,P){let D=(A-2*a)/E,L=(_-2*a)/T,R=A/2-a,V=_/2-a,F=M/2,O=E+1,k=T+1,z=0,N=0,j=new C;for(let Y=0;Y<k;Y++){let q=Y*L-V;for(let X=0;X<O;X++){let G=X*D-R;j[y]=G*S,j[x]=q*w,j[b]=F,h.push(j.x,j.y,j.z),j[y]=0,j[x]=0,j[b]=M>0?1:-1,u.push(j.x,j.y,j.z),d.push(X/E),d.push(1-Y/T),z+=1}}for(let Y=0;Y<T;Y++)for(let q=0;q<E;q++){let X=p+q+O*Y,G=p+q+O*(Y+1),te=p+(q+1)+O*(Y+1),Z=p+(q+1)+O*Y;c.push(X,G,Z),c.push(G,te,Z),N+=6}l.addGroup(f,N,P),f+=N,p+=z}function g(y,x,b,S,w,A,_,M,E,T,P){let D=(_-2*a)/T,L=_/2-a,R=M/2-a,V=E/2,F=T+1,O=0,k=0,z=new C,N=new C;for(let j=0;j<o+1;j++){let Y=j/o*SS,q=Math.sin(Y)*a,X=(1-Math.cos(Y))*a,G=Math.sin(Y),te=Math.cos(Y);z[x]=(R+q)*w,z[b]=(V-X)*A,N[y]=0,N[x]=G*Math.sign(z[x]),N[b]=te*Math.sign(z[b]);for(let Z=0;Z<F;Z++){let Q=Z*D-L;z[y]=Q*S,h.push(z.x,z.y,z.z),u.push(N.x,N.y,N.z),d.push(Z/T),d.push(0),O+=1}}for(let j=0;j<o;j++)for(let Y=0;Y<T;Y++){let q=p+Y+F*j,X=p+Y+F*(j+1),G=p+(Y+1)+F*(j+1),te=p+(Y+1)+F*j;c.push(q,X,te),c.push(X,G,te),k+=6}l.addGroup(f,k,P),f+=k,p+=O}function v(y,x,b){let S=new C,w=new C(e/2,t/2,r/2);w.subScalar(a);let A=[],_=y*x*b>0?(E,T,P)=>c.push(E,T,P):(E,T,P)=>c.push(E,P,T);for(let E=0;E<=o;E++){let T=[],P=SS*(1-E/o),D=Math.cos(P),L=Math.sin(P),R=0;for(let V=0;V<=E;V++){let F=Math.cos(R),O=Math.sin(R);S.x=D*F,S.y=L,S.z=D*O;let k=w.clone().addScaledVector(S,a);h.push(y*k.x,x*k.y,b*k.z),u.push(y*S.x,x*S.y,b*S.z),d.push(0,0),T.push(p++),R+=SS/E}A.push(T)}let M=A.length-1;for(let E=0;E<M;E++){let T=A[E],P=A[E+1],D=T.length-1;_(T[0],P[1],P[0]);for(let L=1;L<=D;L++)_(T[L-1],T[L],P[L]),_(T[L],P[L+1],P[L])}}}},LT=class extends nt{constructor(e=[],t=[],r="",i=1,n=.2,s=4){super(),this.type="PolyhedronGeometryRound";let a=[],o=[],l=[];c(),h(),this.setAttribute("position",new Ve(a,3)),this.setAttribute("normal",new Ve(l,3)),this.setAttribute("uv",new Ve(o,2));return;function c(){var F;n=Math.min(1-1e-5,n),n==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],d=new C,p=d.clone(),f=new zi,m=n*i,g=i-m,v=s+1,y=new C,x=(O,k)=>y.subVectors(O,k).normalize(),b=(O,k)=>Array(O).fill(void 0).map(k),S=b(e.length/3,(O,k)=>new C().fromArray(e,k*3).setLength(i)),w=[],A=1e6;for(let O=0;O<S.length;O++){let k=S[O],z=[],N,j,Y,q=1e10,X=-1;for(;(X=t.indexOf(O,X+1))!=-1;){let Q=X-X%3;N=t[Q+(X+1)%3],j=t[Q+(X+2)%3],Y=k.distanceToSquared(S[N]),q=Math.min(q,Y),z.push([N,j,Y])}q+=1e-6;let G=[],te=0,Z=z.length;for(let Q=0;Q<Z;Q++){[N,j,Y]=z[te];let re=((F=w[N])==null?void 0:F.includes(O))==!0;Y<=q&&G.push(N+ +re*A),te=z.findIndex(ae=>ae[0]==j)}w.push(G)}let _=[];{let O=0,k=0,z,N,j=u==3;for(let Y=0;Y<=s;Y++){z=Y*(Y+1)/2,N=(Y+1)*(Y+2)/2;for(let q=0;q<s-Y;q++)[O,k]=[z+q+Y+2,N+q+Y+3],_.push(z,N,...j?[k,z]:[O,N],k,O),[z,N]=[O,k];_.push(z,N,z+s+2)}}let M=d.clone(),E=d.clone(),T=d.clone(),P=d.clone(),D=d.clone(),L=[],R=b(S.length,()=>b(u,()=>d.clone()));for(let O=0;O<S.length;O++){d.copy(S[O]).normalize(),M.copy(d).multiplyScalar(g);let k=w[O];for(let G=0;G<k.length;G++){let te=k[G],Z=k[(G+1)%u];f.setFromPointsAndIndices(S,O,te%A,Z%A),f.b.sub(f.a).setLength(1e10).add(f.a),f.c.sub(f.a).setLength(1e10).add(f.a),f.closestPointToPoint(M,R[O][G])}let z=[],N=[],j=[],Y=new C;s==0&&[...R[O]].reduce((G,te)=>G.add(te),Y).multiplyScalar(1/u);for(let G=0;G<u;G++){let te=[],Z=(G-1+u)%u,Q=R[O][Z],re=R[O][G];d.copy(Q).sub(M),p.copy(re).sub(M);let ae=M.angleTo(d),ce=d.angleTo(p),pe=Math.cos(ae)*m;s==0?E.copy(Y):E.copy(M).setLength(g+pe),N.push(pe);let Te=[E,Q,re];for(let xe=0;xe<2;xe++){let Ie=Te[xe],Oe=Te[xe+1];P.subVectors(Ie,M),D.subVectors(Oe,M),T.crossVectors(P,D).normalize();for(let Se=0;Se<v;Se++){let be=[ae,ce][xe]*Se/v;d.copy(P).applyAxisAngle(T,be).add(M),z.push(d.clone()),xe&&(x(d,M),te.push([Se==0?Ie:d.clone(),y.clone()]))}xe&&(x(Oe,M),te.push([Oe,y.clone()]))}j.push(te)}L.push(j);let q=2*v,X=2;for(let G=0;G<u;G++){let te=q*G,Z=q*((G+1)%u),Q=[z[te]];for(let ae=1;ae<v;ae++){P=z[te+ae],D=z[Z+ae],Q.push(P);for(let ce=1,pe=ae-X+1;ce<=pe;ce++)d.lerpVectors(P,D,ce/(pe+1)),d.sub(M).setLength(N[G]).add(M),Q.push(d.clone());Q.push(D)}for(let ae=0;ae<v;ae++)Q.push(z[ae+v+te]);Q.push(z[Z+v]);let re=_.map(ae=>Q[ae]);a.push(...re.map(ae=>[ae.x,ae.y,ae.z]).flat()),l.push(...re.map(ae=>(x(ae,M),[y.x,y.y,y.z])).flat())}}let V=[];for(let O=0;O<w.length;O++)for(let k=0;k<u;k++){let z=w[O][k];if(z<A){let N=w[z].findIndex(q=>q%A==O),j=L[O][k],Y=L[z][N];for(let q=0;q<v;q++){let X=j[q],G=Y[v-q],te=j[q+1],Z=Y[v-(q+1)];[X,G,te,te,G,Z].forEach(Q=>{a.push(Q[0].x,Q[0].y,Q[0].z),l.push(Q[1].x,Q[1].y,Q[1].z)})}V.push(j[0][0],Y[v][0],j[v][0],Y[0][0])}}for(;V.length;){let O,k,z,N;[O,k]=V.splice(0,2);let j=[O];for(;O!=k;)j.push(k),z=V.indexOf(k),N=z%2,k=V.splice(z-N,2)[1-N];y.subVectors(j[0],j[1]).cross(d.subVectors(j[0],j[2])).normalize();let Y=y.dot(j[0])<0;Y&&y.negate();for(let q=1;q<=j.length-2;q++)[j[q+ +Y],j[q+1-+Y],j[0]].forEach(X=>{a.push(X.x,X.y,X.z),l.push(y.x,y.y,y.z)})}}function h(){let u=new C;for(let w=0;w<a.length;w+=3){u.x=a[w+0],u.y=a[w+1],u.z=a[w+2];let A=b(u)/2/Math.PI+.5,_=S(u)/Math.PI+.5;o.push(A,1-_)}let d=new C,p=new C,f=new C,m=new C,g=new $,v=new $,y=new $,x=(w,A,_,M)=>{M<0&&w.x===1&&(o[A]=w.x-1),_.x===0&&_.z===0&&(o[A]=M/2/Math.PI+.5)};for(let w=0,A=0;w<a.length;w+=9,A+=6){d.set(a[w+0],a[w+1],a[w+2]),p.set(a[w+3],a[w+4],a[w+5]),f.set(a[w+6],a[w+7],a[w+8]),g.set(o[A+0],o[A+1]),v.set(o[A+2],o[A+3]),y.set(o[A+4],o[A+5]),m.copy(d).add(p).add(f).divideScalar(3);let _=b(m);x(g,A+0,d,_),x(v,A+2,p,_),x(y,A+4,f,_)}for(let w=0;w<o.length;w+=6){let A=o[w+0],_=o[w+2],M=o[w+4],E=Math.max(A,_,M),T=Math.min(A,_,M);E>.9&&T<.1&&(A<.2&&(o[w+0]+=1),_<.2&&(o[w+2]+=1),M<.2&&(o[w+4]+=1))}function b(w){return Math.atan2(w.z,-w.x)}function S(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}}static fromJSON(e){return new LT(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},dwe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new DV(t*.5,s,a):new HU(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},DV=class extends LT{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(s,a,o,e,t,r),this.type=o}static fromJSON(e){return new DV(e.radius,e.corner,e.cornerSides)}},df=1e-12,IT=class{constructor(e){this.position=new $,this.startPosition=new $,this.uuid=vt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new IT(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},UM=class extends IT{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new UM(this.parent).copy(this)}},Cd=class extends IT{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new UM(this),new UM(this))}static create(e,t){let r=new Cd(e,new $(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new Cd(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,i;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[e,t]}computeNormals(e=new $,t=new $){let[r,i]=this.computeTangents();return r&&i&&(tB(r,e),tB(i,t)),[e,t]}computeTangent(e=new $){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new $){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function tB(e,t=new $){let r=e.length();return t.set(-e.y/r,e.x/r)}var RT=e=>e,Lp=new $,hb=new $,pwe=new $,fwe=new $,mwe=new $,gwe=new $,OV=new C,LV=new C;function vwe(e){let t=new $;t.addVectors(e.v0,Lp.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new $;return r.addVectors(e.v2,hb.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Zs(e.v0,t,r,e.v2)}function Ff(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function ywe(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function xwe(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function IV(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),s=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-s*s)/(2*n*i))}function bwe(e,t,r){return iB(e,t)&&iB(t,r)&&jM(e.position,t.position,r.position)}function jM(e,t,r){return Lp.copy(t).sub(e).cross(hb.copy(r).sub(e))===0}function wwe(e,t,r,i,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(e.y-t.y)/s,c=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return i.set(o+l,a+c),n.set(o-l,a-c),[i,n]}function Swe(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function _we(e,t,r,i,n,s){let a=t.x-e.x,o=t.y-e.y,l=r.x-e.x,c=r.y-e.y,h=Math.sqrt((a+l)*(a+l)+(o+c)*(o+c)),u;return IV(t,e,r)>Math.PI&&(h*=-1),Ff(c,o)?u=(o+c)*(i/h-.5)*8/3/(a-l):u=(a+l)*(i/h-.5)*8/3/(c-o),n.set(t.x-u*o,t.y+u*a),s.set(r.x+u*c,r.y-u*l),[n,s]}function rB(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function iB(e,t){return jM(e.position,e.controls[1].position,t.position)&&jM(e.position,t.controls[0].position,t.position)}function Awe(e,t,r,i,n=.5){let s=Lp.subVectors(t,e).multiplyScalar(n).add(e),a=hb.subVectors(r,t).multiplyScalar(n).add(t),o=pwe.subVectors(i,r).multiplyScalar(n).add(r),l=s,c=fwe.subVectors(a,s).multiplyScalar(n).add(s),h=mwe.subVectors(o,a).multiplyScalar(n).add(a),u=o,d=gwe.subVectors(h,c).multiplyScalar(n).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,i.x,i.y]}function Mwe(e,t,r=12,i=!0){let n=LV.set(0,0,0),s,a=0;for(let o=0;o<t.length;o++){let l=RT(t[o]),c=Lp,h=bu(l,r);for(let u=0;u<=h;u++)if(l instanceof Zs||l instanceof hc||l instanceof sa){if(l.getPoint(u/h,c),n.set(c.x,c.y,0),s!==void 0&&xwe(s,n))continue;s===void 0&&(s=OV),s.copy(n),e.setXYZ(a,n.x,n.y,n.z),a++}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function Ewe(e,t,r,i=12,n=!0){let s=LV.set(0,0,0),a=0,o=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let c,h=RT(t[l]),u=Lp,d=bu(h,i);o.push(d);for(let p=0;p<=d;p++)if(h instanceof Zs||h instanceof hc||h instanceof sa){if(h.getPoint(p/d,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=OV:(e.setXYZ(a,c.x,c.y,c.z),a++,e.setXYZ(a,s.x,s.y,s.z),a++),c.copy(s)}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),o}function nB(e,t=12,r=!1){let i=[];for(let n=0,s=e.length;n<s;n++){let a=e[n],o=0;if(r&&a.roundedCurveCorner!==void 0){let l=bu(a.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),o+=l}a.curveAfter!==void 0&&(o+=bu(a.curveAfter,t)),i.push(o)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=bu(e[0].roundedCurveCorner,t)*.5),i}function bu(e,t=12){return e&&e instanceof Yx?t*2:e&&(e instanceof sa||e instanceof UU)?1:e&&e instanceof qC?t*e.points.length:t}function Cwe(e,t,r=12,i=!0){let n,s=0;for(let a=0;a<t.length;a++){let o=RT(t[a]),l=bu(o,r),c=Lp;for(let h=0;h<=l;h++)if(o instanceof Zs||o instanceof hc||o instanceof sa){if(o.getPoint(h/l,c),n!==void 0&&ywe(n,c,df))continue;n===void 0&&(n=hb),n.copy(c),e.push(c.x,c.y),s++}}return Ff(e[0],e[e.length-2],df)&&Ff(e[1],e[e.length-1],df)&&(e.pop(),e.pop()),i&&s>1&&!(Ff(e[s-1],e[1],df)&&Ff(e[s-2],e[0],df))&&(e.push(e[0],e[1]),s++),e}var _S=new $,Twe=new $,Pwe=new $,Dwe=new $,Owe=new $,Lwe=new $,Er=class extends g1{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new $n(new C(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=vt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new Er;return i.isClosed=e.isClosed,i.points=e.points.map(n=>Cd.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>Er.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(i=>i.uuid===e);if(r<0){let i=t;for(let n=0,s=this.shapeHoles.length;n<s;n++){let a=this.shapeHoles[n],o=a.points.length,l=a.getPointIndexById(e);if(l<0)i+=o;else return l+i}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=e-t;if(s<=n.points.length-1)return n.points[s];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=_S.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];s.position.multiply(r),s.controls[0].position.multiply(r),s.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,r=vt.generateUUID()){let i;e instanceof $?i=e:i=new $(e,t);let n=new Cd(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return Mwe(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=nB(this.points,e,!1),this.roundedCurveDivisions=nB(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return Ewe(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),Cwe(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=bu(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=i.reduce((a,o)=>a+o,0));for(let a=0,o=i.length;a<o;a++){let l=i[a];if(s<r+l)return[a,(s-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,a=s[e];if(rB(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(_S.set(r.x,r.y))/l}let o=0;for(let l=0;l<e;l++)o+=s[l];return(t-o)/a}dispose(){}_applyCurveForPoint(e,t){rB(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){var t,r;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];if(i===0)this.moveTo(s.position.x,s.position.y);else{let a=this.points[i-1];this._applyCurveForPoint(s,a)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let i=this.points[0],n=this.points[this.points.length-1];this._applyCurveForPoint(i,n)}if(this.points.length>2){let i=0;for(let n=0,s=this.points.length;n<s;n++){let a=this.points[n],o=(t=this.points[n-1])!=null?t:this.points[this.points.length-1],l=(r=this.points[n+1])!=null?r:this.points[0],c=a.roundness,h=o&&l&&bwe(o,a,l);if(!a.controlsMoved()&&c>0&&!h){let u=a.curveBefore,d=a.curveAfter;if(u===void 0||d===void 0)continue;let p=a.roundedCurveBefore,f=a.roundedCurveAfter,m=u.getLength(),g=d.getLength(),v=Math.min(c,m*.499),y=Math.min(c,g*.499),x=Math.min(v,y),b=1-x/m,S=x/g,w=u.getPointAt(b,_S),A=d.getPointAt(S,Twe);this._subSplitCurve(u,p,b,w,void 0),this._subSplitCurve(d,f,S,void 0,A);let _;if(this.useCubicForRoundedCorners){let M=IV(w,a.position,A)/2,E=Math.tan(M)*w.distanceTo(a.position),[T,P]=wwe(w,A,E,Pwe,Dwe),D=Swe(T,P,a.position),[L,R]=_we(D,w,A,E,Owe,Lwe);_=new Zs(w.clone(),L.clone(),R.clone(),A.clone())}else _=new hc(w.clone(),a.position.clone(),A.clone());a.roundedCurveCorner=_,this.roundedCurves.splice(n+i,0,_),i++}}}}_subSplitCurve(e,t,r,i,n){if(e instanceof sa)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let s=e,a=t,o=s.getUtoTmapping(r,0),l=Awe(s.v0,s.v1,s.v2,s.v3,o);return i!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),n!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new Er(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let n=i*7,s=e.points[n+0],a=e.points[n+1],o=e.points[n+2],l=e.points[n+3],c=e.points[n+4],h=e.points[n+5],u=e.points[n+6],d=new Cd(vt.generateUUID(),new $(s,a));d.controls[0].position.set(o,l),d.controls[1].position.set(c,h),d.roundness=u,this.points.push(d)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(i=>{let n=new Er;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(i,n)=>{n instanceof Zs&&n.v3.equals(i.position)&&i.controls[0].position.copy(n.v2)},r=i=>{let n=[],s,a;for(s=0,a=i.length;s<a;s++)i[s]instanceof hc&&(i[s]=vwe(i[s]));for(s=0,a=i.length;s<a;s++){let c=i[s],h=s>0?i[s-1]:null,u;c instanceof Zs?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof sa&&(u=this.createPoint(c.v1)),u!==void 0&&(h!==null&&t(u,h),n.push(u))}let o=i[i.length-1],l=!1;return o instanceof Zs?o.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(o.v2),l=!0):o instanceof sa&&o.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=r(e.curves),e instanceof g1&&(this.shapeHoles=e.holes.map(i=>{let n=new Er;return n.fromShape(i),n})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},VM=Math.PI*2;function AS({x:e,y:t},r,i,n,s){return{x:e*r+n,y:t*i+s}}function Iwe(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),a=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:s+a*r,y:a-s*r},{x:s,y:a}]}function sB(e,t,r,i){let n=e*i-t*r<0?-1:1,s=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(s)}function Rwe(e,t,r,i,n,s,a,o,l,c){let h=Math.pow(n,2),u=Math.pow(s,2),d=Math.pow(a,2),p=Math.pow(o,2),f=h*u-h*p-u*d;f<0&&(f=0),f/=h*p+u*d,f=Math.sqrt(f)*(l===c?-1:1);let m=f*n/s*o,g=f*-s/n*a,v=m+(e+r)/2,y=g+(t+i)/2,x=(a-m)/n,b=(o-g)/s,S=(-a-m)/n,w=(-o-g)/s,A=sB(1,0,x,b),_=sB(x,b,S,w);return!c&&_>0&&(_-=VM),c&&_<0&&(_+=VM),{centerx:v,centery:y,ang1:A,ang2:_}}function Bwe({px:e,py:t,cx:r,cy:i,rx:n,ry:s,largeArcFlag:a,sweepFlag:o}){let l=[];if(n===0||s===0)return[];let c=(e-r)/2,h=(t-i)/2;if(c===0&&h===0)return[];n=Math.abs(n),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(n,2)+Math.pow(h,2)/Math.pow(s,2);u>1&&(n*=Math.sqrt(u),s*=Math.sqrt(u));let d=Rwe(e,t,r,i,n,s,c,h,a,o),{ang1:p,ang2:f}=d,{centerx:m,centery:g}=d,v=Math.abs(f)/(VM/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);f/=y;for(let x=0;x<y;x++)l.push(Iwe(p,f)),p+=f;return l.map(x=>{let{x:b,y:S}=AS(x[0],n,s,m,g),{x:w,y:A}=AS(x[1],n,s,m,g),{x:_,y:M}=AS(x[2],n,s,m,g);return{x1:b,y1:S,x2:w,y2:A,x:_,y:M}})}var qt;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(qt||(qt={}));var Gr;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Gr||(Gr={}));function rt(e,t){if(!e)throw t||"Assertion Failed!"}var Ke=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){rt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?n<s?r.t-t.t+(t.t-i.t)*(n/(n+s)):r.t-i.t+(i.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,r,i){rt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?(r.t-i.t)*n+(r.t-t.t)*s:0},e.transEval=function(t,r,i){rt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?n<s?r.s-t.s+(t.s-i.s)*(n/(n+s)):r.s-i.s+(i.s-t.s)*(s/(n+s)):0},e.transSign=function(t,r,i){rt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?(r.s-i.s)*n+(r.s-t.s)*s:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,s){var a,o,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(a=e.edgeEval(t,i,r),o=e.edgeEval(i,r,n),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,r.s)):(a=e.edgeSign(t,i,r),o=-e.edgeSign(t,n,r),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,n.s)):s.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(a=e.transEval(t,i,r),o=e.transEval(i,r,n),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,r.t)):(a=e.transSign(t,i,r),o=-e.transSign(t,n,r),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,n.t)):s.t=(i.t+r.t)/2},e}(),pf=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),b0=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),kh=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),aB=function(){function e(){var t=new kh,r=new pf,i=new b0(0),n=new b0(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new b0(0),i=new b0(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;rt(n,"Vertex can't be null!");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r;var a=r;do a.Org=n,a=a.Onext;while(a!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;rt(n,"Face can't be null");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var a=r;do a.Lface=n,a=a.Lnext;while(a!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.makeEdge=function(){var t=new kh,r=new kh,i=new pf,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var s=new kh;this.makeVertex_(s,r,t.Org),t.Org.anEdge=t}if(!i){var a=new pf;this.makeFace_(a,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new pf;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new kh;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),s=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,r),n.Org=t.Dst,s.Org=r.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!i){var a=new pf;this.makeFace_(a,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,s,a,o;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=r);a=t.prev,o=t.next,o.prev=a,a.next=o},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,s,a,o,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,a=i.Org;n=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(o=this.countFaceVerts_(r),l=this.countFaceVerts_(s.Lface),o+l-2<=t&&Ke.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&Ke.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===a);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,s,a,o,l,c;for(s=t,s=t;(n=s.next)!==t;s=n){rt(n.prev===s),l=n.anEdge;do rt(l.Sym!==l),rt(l.Sym.Sym===l),rt(l.Lnext.Onext.Sym===l),rt(l.Onext.Sym.Lnext===l),rt(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(rt(n.prev===s&&n.anEdge===null),o=r,o=r;(a=o.next)!==r;o=a){rt(a.prev===o),l=a.anEdge;do rt(l.Sym!==l),rt(l.Sym.Sym===l),rt(l.Lnext.Onext.Sym===l),rt(l.Onext.Sym.Lnext===l),rt(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for(rt(a.prev===o&&a.anEdge===null),c=i,c=i;(l=c.next)!==i;c=l)rt(l.Sym.next===c.Sym),rt(l.Sym!==l),rt(l.Sym.Sym===l),rt(l.Org!==null),rt(l.Dst!==null),rt(l.Lnext.Onext.Sym===l),rt(l.Onext.Sym.Lnext===l);rt(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),oB=function(){function e(){this.handle=null}return e}(),lB=function(){function e(){this.key=null,this.node=0}return e}(),kwe=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new oB,this.handles[i]=new lB;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t<<1,a<this.size&&this.leq(i[r[a+1].handle].key,i[r[a].handle].key)&&++a,rt(a<=this.max),s=r[a].handle,a>this.size||this.leq(i[n].key,i[s].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t>>1,s=r[a].handle,a===0||this.leq(i[s].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new oB;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new lB}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;rt(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),MS=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),cB=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),zwe=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new cB,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new cB;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Nwe=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,s=r.eUp,a=i.eUp;if(s.Dst===n)return a.Dst===n?Ke.vertLeq(s.Org,a.Org)?Ke.edgeSign(a.Dst,s.Org,a.Org)<=0:Ke.edgeSign(s.Dst,a.Org,s.Org)>=0:Ke.edgeSign(a.Dst,n,a.Org)<=0;if(a.Dst===n)return Ke.edgeSign(s.Dst,n,s.Org)>=0;var o=Ke.edgeEval(s.Dst,n,s.Org),l=Ke.edgeEval(a.Dst,n,a.Org);return o>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&rt(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){rt(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new MS;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case qt.ODD:return(r&1)!==0;case qt.NONZERO:return r!==0;case qt.POSITIVE:return r>0;case qt.NEGATIVE:return r<0;case qt.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,s=null,a=r,o=r.eUp;a!==i;){if(a.fixUpperEdge=!1,s=e.regionBelow(a),n=s.eUp,n.Org!=o.Org){if(!s.fixUpperEdge){e.finishRegion(t,a);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,a),o=s.eUp,a=s}return o},e.addRightEdges=function(t,r,i,n,s,a){var o,l,c,h,u=!0;c=i;do rt(Ke.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,r,c.Sym),c=c.Onext;while(c!==n);for(s===null&&(s=e.regionBelow(r).eUp.Rprev),l=r,h=s;o=e.regionBelow(l),c=o.eUp.Sym,c.Org===h.Org;)c.Onext!==h&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(h.Oprev,c)),o.windingNumber=l.windingNumber-c.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!u&&e.checkForRightSplice(t,l)&&(e.addWinding(c,h),e.deleteRegion(t,l),t.mesh.delete(h)),u=!1,l=o,h=c;l.dirty=!0,rt(l.windingNumber-c.winding===o.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=Ke.vertL1dist(r,t),s=Ke.vertL1dist(i,t),a=.5*s/(n+s),o=.5*n/(n+s);t.coords[0]+=a*r.coords[0]+o*i.coords[0],t.coords[1]+=a*r.coords[1]+o*i.coords[1],t.coords[2]+=a*r.coords[2]+o*i.coords[2]},e.getIntersectData=function(t,r,i,n,s,a){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,s,a)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp;if(Ke.vertLeq(n.Org,s.Org)){if(Ke.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;Ke.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),r.dirty=i.dirty=!0)}else{if(Ke.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a;if(rt(!Ke.vertEq(n.Dst,s.Dst)),Ke.vertLeq(n.Dst,s.Dst)){if(Ke.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,a=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,a),a.Lface.inside=r.inside}else{if(Ke.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;r.dirty=i.dirty=!0,a=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),a.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a=n.Org,o=s.Org,l=n.Dst,c=s.Dst,h,u,d=new kh,p,f;if(rt(!Ke.vertEq(c,l)),rt(Ke.edgeSign(l,t.event,a)<=0),rt(Ke.edgeSign(c,t.event,o)>=0),rt(a!==t.event&&o!==t.event),rt(!r.fixUpperEdge&&!i.fixUpperEdge),a===o||(h=Math.min(a.t,l.t),u=Math.max(o.t,c.t),h>u))return!1;if(Ke.vertLeq(a,o)){if(Ke.edgeSign(c,a,o)>0)return!1}else if(Ke.edgeSign(l,o,a)<0)return!1;return e.debugEvent(t),Ke.intersect(l,a,c,o,d),rt(Math.min(a.t,l.t)<=d.t),rt(d.t<=Math.max(o.t,c.t)),rt(Math.min(c.s,l.s)<=d.s),rt(d.s<=Math.max(o.s,a.s)),Ke.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),p=Ke.vertLeq(a,o)?a:o,Ke.vertLeq(p,d)&&(d.s=p.s,d.t=p.t),Ke.vertEq(d,a)||Ke.vertEq(d,o)?(e.checkForRightSplice(t,r),!1):!Ke.vertEq(l,t.event)&&Ke.edgeSign(l,t.event,d)>=0||!Ke.vertEq(c,t.event)&&Ke.edgeSign(c,t.event,d)<=0?c===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),i=r,r=e.topRightRegion(r),f=e.regionBelow(r).eUp.Rprev,i.eUp=s.Oprev,s=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,s.Onext,n.Rprev,f,!0),!0):(Ke.edgeSign(l,t.event,d)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),Ke.edgeSign(c,t.event,d)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=d.s,n.Org.t=d.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,a,l,o,c),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,s;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,s=i.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(s),i=e.regionBelow(r),s=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,s=i.Onext,a=e.regionBelow(r),o=r.eUp,l=a.eUp,c=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,r),Ke.vertEq(o.Org,t.event)&&(t.mesh.splice(s.Oprev,o),r=e.topLeftRegion(t,r),s=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),a),c=!0),Ke.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,a,null),c=!0),c){e.addRightEdges(t,r,i.Onext,s,s,!0);return}Ke.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,s,a,o,l;if(n=r.eUp,Ke.vertEq(n.Org,i)){rt(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!Ke.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}rt(!1),r=e.topRightRegion(r),l=e.regionBelow(r),a=l.eUp.Sym,s=o=a.Onext,l.fixUpperEdge&&(rt(s!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=s.Oprev),t.mesh.splice(i.anEdge,a),Ke.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,r,a.Onext,o,s,!0)},e.connectLeftVertex=function(t,r){var i,n,s,a,o,l,c=new MS;if(c.eUp=r.anEdge.Sym,i=t.dict.search(c).key,n=e.regionBelow(i),!!n){if(a=i.eUp,o=n.eUp,Ke.edgeSign(a.Dst,r,a.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(s=Ke.vertLeq(o.Dst,a.Dst)?i:n,i.inside||s.fixUpperEdge){if(s===i)l=t.mesh.connect(r.anEdge.Sym,a.Lnext);else{var h=t.mesh.connect(o.Dnext,r.anEdge);l=h.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);rt(n!==null);var s=e.regionBelow(n),a=s.eUp,o=e.finishLeftRegions(t,s,null);o.Onext===a?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,a,a,!0)},e.addSentinel=function(t,r,i,n){var s=new MS,a=t.mesh.makeEdge();a.Org.s=i,a.Org.t=n,a.Dst.s=r,a.Dst.t=n,t.event=a.Dst,s.eUp=a,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new zwe(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,s=t.bmax[0]+r,a=t.bmin[1]-i,o=t.bmax[1]+i;e.addSentinel(t,n,s,a),e.addSentinel(t,n,s,o)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(rt(r.fixUpperEdge),rt(++i===1)),rt(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,s=t.mesh.eHead;for(r=s.next;r!==s;r=i)i=r.next,n=r.Lnext,Ke.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,s=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)s++;for(s+=8,r=t.pq=new kwe(s,Ke.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,s;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,s=i.anEdge,rt(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!Ke.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),Fwe=function(){function e(){this.mesh=new aB,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=qt.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,s,a,o,l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[0,0,0],p=[null,null,null],f=[null,null,null],m=this.mesh.vHead;r=m.next;for(var g=0;g<3;++g)s=r.coords[g],c[g]=s,f[g]=r,l[g]=s,p[g]=r;for(r=m.next;r!==m;r=r.next)for(var v=0;v<3;++v)s=r.coords[v],s<c[v]&&(c[v]=s,f[v]=r),s>l[v]&&(l[v]=s,p[v]=r);var y=0;if(l[1]-c[1]>l[0]-c[0]&&(y=1),l[2]-c[2]>l[y]-c[y]&&(y=2),c[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,i=f[y],n=p[y],h[0]=i.coords[0]-n.coords[0],h[1]=i.coords[1]-n.coords[1],h[2]=i.coords[2]-n.coords[2],r=m.next;r!==m;r=r.next)u[0]=r.coords[0]-n.coords[0],u[1]=r.coords[1]-n.coords[1],u[2]=r.coords[2]-n.coords[2],d[0]=h[1]*u[2]-h[2]*u[1],d[1]=h[2]*u[0]-h[0]*u[2],d[2]=h[0]*u[1]-h[1]*u[0],a=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],a>o&&(o=a,t[0]=d[0],t[1]=d[1],t[2]=d[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(h)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,s=0,a=t.next;a!==t;a=a.next)if(n=a.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==a.anEdge);if(s<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,s=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),s=!0),i=this.sUnit,n=this.tUnit;var a=this.longAxis_(r);i[a]=0,i[(a+1)%3]=1,i[(a+2)%3]=0,n[a]=0,n[(a+1)%3]=0,n[(a+2)%3]=r[a]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,i),o.t=this.dot_(o.coords,n);s&&this.checkOrientation_();for(var l=!0,c=t.next;c!==t;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;Ke.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Ke.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var s=void 0;i.Lnext!==n;)if(Ke.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(Ke.edgeGoesLeft(n.Lnext)||Ke.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(Ke.edgeGoesRight(i.Lprev)||Ke.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=t.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?r:-r:i?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var s,a=0,o=0,l;i>3&&t.mergeConvexFaces(i);for(var c=t.vHead.next;c!==t.vHead;c=c.next)c.n=-1;for(var h=t.fHead.next;h!==t.fHead;h=h.next)if(h.n=-1,!!h.inside){s=h.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=o,o++),l++,s=s.Lnext}while(s!==h.anEdge);if(l>i)throw"Face vertex greater that support polygon";h.n=a,++a}this.elementCount=a,r===Gr.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*i,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var c=t.vHead.next;c!==t.vHead;c=c.next)if(c.n!==-1){var u=c.n*n;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],n>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var d=0,h=t.fHead.next;h!==t.fHead;h=h.next)if(h.inside){s=h.anEdge,l=0;do{var c=s.Org;this.elements[d++]=c.n,l++,s=s.Lnext}while(s!==h.anEdge);for(var p=l;p<i;++p)this.elements[d++]=-1;if(r===Gr.CONNECTED_POLYGONS){s=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==h.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,s=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=i=o.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,h=0;s=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){a=0,n=i=o.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,a++,i=i.Lnext;while(i!==n);this.elements[h++]=s,this.elements[h++]=a,s+=a}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new aB),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,s,a){if(t===void 0&&(t=qt.ODD),r===void 0&&(r=Gr.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),Nwe.computeInterior(this,a);var o=this.mesh;return r===Gr.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),r===Gr.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,r,i,n),!0},e}();function jl(e){var t=e.windingRule,r=t===void 0?qt.ODD:t,i=e.elementType,n=i===void 0?Gr.POLYGONS:i,s=e.polySize,a=s===void 0?3:s,o=e.vertexSize,l=o===void 0?2:o,c=e.normal,h=c===void 0?[0,0,1]:c,u=e.contours,d=u===void 0?[]:u,p=e.strict,f=p===void 0?!0:p,m=e.debug,g=m===void 0?!1:m;if(!d&&f)throw new Error("Contours can't be empty");if(d){var v=new Fwe;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(r,n,a,l,h,f),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}qt.ODD;qt.NONZERO;qt.POSITIVE;qt.NEGATIVE;qt.ABS_GEQ_TWO;Gr.POLYGONS;Gr.CONNECTED_POLYGONS;Gr.BOUNDARY_CONTOURS;var GM=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*GM.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${e}`);let r=e*GM.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,s=0,a=new Float32Array(i,s*n,3*e);s+=3*e;let o=new Float32Array(i,s*n,3*e);s+=3*e;let l=new Float32Array(i,s*n,2*e);t?(a.set(this.positions.subarray(0,this.size*3)),o.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(a.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=i,this.positions=a,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},RV=GM;RV.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var Uwe=gp(fse()),BT={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},BV={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},kV={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},ES=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),kT=class extends nt{constructor(e,t,r=0,i=12,n=3,s=qt.ODD,a=!1){super(),this.forPathBevel=a,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=i,this._bevelSegmentsInput=n;let o=this._shape.extractShapePointsToFlatArray([],i),l=this._shape.shapeHoles.map(M=>{let E=M.extractShapePointsToFlatArray([],i),T=[];for(let P=E.length-1;P>=1;P-=2){let D=E[P-1],L=E[P-0];T.push(D,L)}return T}),c=[],h=[];for(let M=0;M<o.length;M+=2)h.push([o[M],o[M+1]]);c.push(h);for(let M=0;M<l.length;M++){let E=l[M],T=[];for(let P=0;P<E.length;P+=2)T.push([E[P],E[P+1]]);c.push(T)}let u=c[0].length?(0,Uwe.default)(c).distance:r;r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,u,t/2),this._bevelSegments=Math.floor(n));let d;try{d=jl({windingRule:s,elementType:Gr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{d=BT}let p;try{p=jl({windingRule:qt.ODD,elementType:Gr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{p=BV}if(!d)throw new Error("error generating geometry");let f=d.elementCount;if(p){d.elementCount+=p.elementCount;for(let M=0;M<p.elements.length;M++){let E=p.elements[M],T=M%2===0?d.vertexCount:0;d.elements.push(E+T)}for(let M=0;M<p.vertexIndices.length;M++){let E=p.vertexIndices[M],T=d.vertexCount;d.vertexIndices.push(E+T)}for(let M=0;M<p.vertices.length;M++){let E=p.vertices[M];d.vertices.push(E)}}let m=1/0,g=-1/0,v=1/0,y=-1/0;for(let M=0,E=d.vertexCount;M<E;M++){let T=M*2,P=d.vertices[T+0],D=d.vertices[T+1];P<m&&(m=P),P>g&&(g=P),D<v&&(v=D),D>y&&(y=D)}this._minX=m,this._minY=v,this._width=g-m,this._height=y-v,this._buffer=new RV(this._computeBufferEstimatedSize(d));let x=[],b=[];for(let M=d.elementCount-1;M>=0;M--){let E=M>=f,T=M*2,P=d.elements[T+0],D=d.elements[T+1],L=P+D,R={start:P,count:D,normals:[],continuous:[],concave:[]},V=P,F=L-1,O=P+1,k=this._shape.roundedCurves.length;do{let q=V-P,X=d.vertices[F*2+0],G=d.vertices[F*2+1],te=d.vertices[V*2+0],Z=d.vertices[V*2+1],Q=d.vertices[O*2+0],re=d.vertices[O*2+1],ae=te-X,ce=Z-G,pe=Math.sqrt(ae*ae+ce*ce);ae/=pe,ce/=pe;let Te=te-Q,xe=Z-re,Ie=Math.sqrt(Te*Te+xe*xe);Te/=Ie,xe/=Ie,R.normals[q*2+0]=-xe,R.normals[q*2+1]=Te,R.concave[q]=ae*xe-ce*Te>0;let Oe=d.vertexIndices[V];if(Array.isArray(Oe))R.continuous[q]=!1;else{let[Se,be]=this._shape.getCurveIndexFromVertexId(Oe-1,!0);if(be>0&&be<1)R.continuous[q]=!0;else{let Re=be===1?Se+1:Se-1;Re=(Re+k)%k;let Be=be===1?0:1,U=this._shape.roundedCurves[Se].getTangent(be),I=this._shape.roundedCurves[Re].getTangent(Be);R.continuous[q]=U.dot(I)>.95}}E&&(R.normals[q*2+0]*=-1,R.normals[q*2+1]*=-1),[F,V,O]=[V,O,O+1],O>=L&&(O-=D)}while(O!==P+1);let z=[];z.push({bevelI:0,angle:0,size:0,boundary:{vertices:d.vertices.slice(P*2,L*2),vertexCount:D,vertexIndices:new Array(D).fill(!0).map((q,X)=>[X,X]),elements:[0,D],elementCount:1,mesh:null},reverseMap:[],insetPoints:d.vertices.slice(P*2,L*2)});let N=0;for(let q=1;q<=this._bevelSegments;q++){let X=q/this._bevelSegments*Math.PI/2,G=(1-Math.cos(X))*this._bevel,te=[],Z=[],Q=0;for(let ae=0;ae<D;ae++){let ce=ae*2,pe=(ae-1+D)%D*2,Te=d.vertices[R.start*2+ce+0],xe=d.vertices[R.start*2+ce+1],Ie=-R.normals[pe+0]*G,Oe=-R.normals[pe+1]*G,Se=-R.normals[ce+0]*G,be=-R.normals[ce+1]*G;if(R.concave[ae]||!R.concave[ae]&&E){let Re=Math.atan2(Oe,Ie),Be=Math.atan2(be,Se);Be>Re&&(Be-=Math.PI*2);let U=Be-Re;if(R.continuous[ae]||E){let I=Re+U/2,ne=Math.cos(I)*G,ge=Math.sin(I)*G;te[2*Q+0]=Te+ne*(E?-1:1),te[2*Q+1]=xe+ge*(E?-1:1),Z[Q]=ae,Q++}else{let I=Math.max(1,Math.floor(i/4*Math.abs(U)/Math.PI));for(let ne=0;ne<=I;ne++){let ge=Re+U*(ne/I),ve=Math.cos(ge)*G,Ae=Math.sin(ge)*G;te[2*Q+0]=Te+ve,te[2*Q+1]=xe+Ae,Z[Q]=ae,Q++}}}else te[2*Q+0]=Te+Ie,te[2*Q+1]=xe+Oe,Z[Q]=ae,Q++,te[2*Q+0]=Te,te[2*Q+1]=xe,Z[Q]=ae,Q++,te[2*Q+0]=Te+Se,te[2*Q+1]=xe+be,Z[Q]=ae,Q++}let re=jl({windingRule:qt.POSITIVE,elementType:Gr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[te],edgeCreateCallback:ae=>{let ce=ae.Org.idx,pe=Z[ce],Te=Z[(ce+1)%Z.length];ae.idx=[pe,Te],ae.Sym.idx=[Te,pe]},vertexIdCallback:ae=>{let ce=ae.Lprev.idx;return[ce?ce[1]:0,ae.idx?ae.idx[0]:0]}});if(!re)throw console.log("Error"),new Error(`error generating bevel geometry for ${q}'th loop`);if(!re.vertexCount){let ae=(q-1)/this._bevelSegments*Math.PI/2;N=(1-Math.sin(ae))*this._bevel;break}for(let ae=0;ae<re.vertexIndices.length;ae++){let[ce,pe]=re.vertexIndices[ae];if(ce===pe)continue;let Te=pe;pe<ce&&(Te+=D);for(let xe=ce;xe<Te;xe++){let Ie=xe%D,Oe=(xe+1)%D;if(!R.continuous[Ie]||!R.continuous[Oe]){re.vertexIndices[ae]=[ce,Ie],re.vertexIndices.splice(ae+1,0,[Oe,pe]),re.vertices.splice((ae+1)*2,0,re.vertices[ae*2],re.vertices[ae*2+1]);break}}}z.push({bevelI:q,angle:X,size:G,boundary:re,reverseMap:Z,insetPoints:te})}let j=(q,X,G)=>{let te=0,Z=q.boundary.vertexIndices.length;for(;te<Z&&G(q.boundary.vertexIndices[X]);)X=(X+1)%Z,te++;return te},Y=x.length;for(let q=1;q<z.length;q++){let X=z[q-1],G=z[q],te=X.boundary.vertexIndices.length,Z=G.boundary.vertexIndices.length;if(!te||!Z)break;let Q=R.concave.length,re=0,ae=ES(re,D);for(;!X.boundary.vertexIndices.filter(ae).length||!G.boundary.vertexIndices.filter(ae).length;)re++,ae=ES(re,D);let ce=X.boundary.vertexIndices.findIndex(ae),pe=G.boundary.vertexIndices.findIndex(ae);do ce=(ce+1)%te;while(ae(X.boundary.vertexIndices[ce]));do pe=(pe+1)%Z;while(ae(G.boundary.vertexIndices[pe]));re=(re+1)%D;let Te=re,xe=0,Ie=this._buildBevelVert(R,X,(ce-1+te)%te,void 0,xe),Oe=this._buildBevelVert(R,G,(pe-1+Z)%Z,void 0,xe),Se=Ie,be=Oe,Re,Be,U=!1;do{xe=(re||Q)/Q,ae=ES(re,D);let I=j(X,ce,ae),ne=j(G,pe,ae),ge=U;if(U=!1,I&&!ne){for(let ve=0;ve<I;ve++)Re=this._buildBevelVert(R,X,(ce+ve)%te,ve/(I-1),xe),x.push(Se.topN,Re.topP,be.topN),a===!1&&x.push(Re.bottomP,Se.bottomN,be.bottomN),Se=Re;U=!0}else if(!I&&ne)for(let ve=0;ve<ne;ve++)Be=this._buildBevelVert(R,G,(pe+ve)%Z,ve/(ne-1),xe),x.push(be.topN,Se.topP,Be.topP),a===!1&&x.push(Se.bottomP,be.bottomN,Be.bottomP),be=Be;else if(I&&ne)if(Re=this._buildBevelVert(R,X,ce,0,xe),Be=this._buildBevelVert(R,G,pe,0,xe),ge?(x.push(Se.topN,Be.topP,be.topN),x.push(Se.topN,Re.topP,Be.topP),a===!1&&(x.push(Be.bottomP,Se.bottomN,be.bottomN),x.push(Be.bottomP,Re.bottomP,Se.bottomN))):(x.push(be.topN,Se.topN,Re.topP),x.push(be.topN,Re.topP,Be.topP),a===!1&&(x.push(Re.bottomP,Se.bottomN,be.bottomN),x.push(Re.bottomP,be.bottomN,Be.bottomP))),Se=Re,be=Be,I===ne)for(let ve=1;ve<I;ve++)Re=this._buildBevelVert(R,X,(ce+ve)%te,ve/(I-1),xe),Be=this._buildBevelVert(R,G,(pe+ve)%Z,ve/(ne-1),xe),x.push(Se.topN,Re.topP,be.topN),x.push(be.topN,Re.topP,Be.topP),a===!1&&(x.push(Re.bottomP,Se.bottomN,be.bottomN),x.push(Re.bottomP,be.bottomN,Be.bottomP)),Se=Re,be=Be;else if(I>ne){let ve=I/ne,Ae=0;for(let Ne=1;Ne<I;Ne++)Re=this._buildBevelVert(R,X,(ce+Ne)%te,Ne/(I-1),xe),x.push(Se.topN,Re.topP,be.topN),a===!1&&x.push(Re.bottomP,Se.bottomN,be.bottomN),Se=Re,Ne>(Ae+1)*ve&&(Ae++,Be=this._buildBevelVert(R,G,(pe+Ae)%Z,Ae/(ne-1),xe),x.push(be.topN,Re.topP,Be.topP),a===!1&&x.push(Re.bottomP,be.bottomN,Be.bottomP),be=Be)}else{let ve=ne/I,Ae=0;for(let Ne=1;Ne<ne;Ne++)Be=this._buildBevelVert(R,G,(pe+Ne)%Z,Ne/(ne-1),xe),x.push(be.topN,Re.topP,Be.topP),a===!1&&x.push(Re.bottomP,be.bottomN,Be.bottomP),be=Be,Ne>(Ae+1)*ve&&(Ae++,Re=this._buildBevelVert(R,X,(ce+Ae)%te,Ae/(I-1),xe),x.push(Se.topN,Re.topP,be.topN),a===!1&&x.push(Re.bottomP,Se.bottomN,be.bottomN),Se=Re)}ce=(ce+I)%te,pe=(pe+ne)%Z,re=(re+1)%Q}while(re!==Te)}if(a===!1&&this._depth>this._bevel*2&&this._buildWall(z,R,x),E){let q=[];for(let X=x.length-1;X>=Y+2;X-=3){let G=x[X-2],te=x[X-1],Z=x[X-0];q.push(Z,te,G)}x.splice(Y,x.length-Y,...q)}if(E){let q=[];for(let X=z[z.length-1].boundary.vertices.length-1;X>=1;X-=2){let G=z[z.length-1].boundary.vertices[X-1],te=z[z.length-1].boundary.vertices[X-0];q.push(G,te)}b.push(q)}if(!E){let q=z[z.length-1],X;try{X=jl({windingRule:z.length>1?qt.POSITIVE:qt.ODD,elementType:Gr.POLYGONS,vertexSize:2,strict:!0,contours:[q.insetPoints,...b]})}catch{X=kV}if(!X)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<u&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let G=0;G<X.elementCount*3;G+=3){let te=this._buildSurfaceVert(X,X.elements[G+0],N),Z=this._buildSurfaceVert(X,X.elements[G+1],N),Q=this._buildSurfaceVert(X,X.elements[G+2],N);x.push(te.top,Z.top,Q.top),a===!1&&x.push(Q.bottom,Z.bottom,te.bottom)}}this.vertexCache={}}this._buffer.shrink();let S=new st(Uint32Array.from(x),1),w=new st(this._buffer.positions,3),A=new st(this._buffer.normals,3),_=new st(this._buffer.uvs,2);w.needsUpdate=!0,A.needsUpdate=!0,_.needsUpdate=!0,S.needsUpdate=!0,this.setAttribute("position",w),this.setAttribute("normal",A),this.setAttribute("uv",_),this.setIndex(S)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,s=i.boundary.vertexCount;n<s;n++){let a=this._buildBevelVert(t,i,n),o=this._buildBevelVert(t,i,(n+1)%s);r.push(o.topP,a.topN,a.bottomN),r.push(o.topP,a.bottomN,o.bottomP)}}_buildSurfaceVert(e,t,r){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let n=e.vertices[t*2+0],s=e.vertices[t*2+1],a=(n-this._minX)/this._width,o=(s-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),c=l*3,h=l*2,u={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=n,this._buffer.positions[c+1]=s,this._buffer.positions[c+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[h+0]=a,this._buffer.uvs[h+1]=o,this.forPathBevel===!1&&(this._buffer.positions[c+3]=n,this._buffer.positions[c+4]=s,this._buffer.positions[c+5]=r,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[h+2]=a,this._buffer.uvs[h+3]=o),this.vertexCache[i]=u,u}_buildBevelVert(e,t,r,i=1,n){let s=`${t.bevelI}:${r}`;if(s in this.vertexCache&&n!==0&&n!==1&&(!n||n===this.vertexCache[s].pathBevelUCoord))return this.vertexCache[s];let[a,o]=t.boundary.vertexIndices[r],l,c,h,u;a!==o?(c=a,l=o,u=!1,h=e.continuous[c]&&e.continuous[l]):(l=a,c=(l-1+e.count)%e.count,u=e.concave[l]&&t.bevelI>0,h=e.continuous[l]||u);let d=Math.cos(t.angle),p=Math.sin(t.angle),f=r*2,m=l*2,g=c*2,v=t.boundary.vertices[f+0],y=t.boundary.vertices[f+1],x=(1-p)*this._bevel,b=(v-this._minX)/this._width,S=(y-this._minY)/this._height;this.forPathBevel&&(n!==void 0&&(b=n),S=1);let w=e.normals[m+0],A=e.normals[m+1],_=e.normals[g+0],M=e.normals[g+1];if(u){let L=_-w,R=M-A;w=w+L*(1-i),A=A+R*(1-i);let V=Math.sqrt(w*w+A*A);w/=V,A/=V}let E=this.forPathBevel?this._buffer.get(h?1:2):this._buffer.get(h?2:4),T=E*3,P=E*2,D={i:r,fi:l,topP:E+0,topN:E+0,bottomP:E+1,bottomN:E+1,pathBevelUCoord:n};return this._buffer.positions[T+0]=v,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=w*d,this._buffer.normals[T+1]=A*d,this._buffer.normals[T+2]=p,this._buffer.uvs[P+0]=b,this._buffer.uvs[P+1]=S,this.forPathBevel===!1&&(this._buffer.positions[T+3]=v,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=w*d,this._buffer.normals[T+4]=A*d,this._buffer.normals[T+5]=-p,this._buffer.uvs[P+2]=S,this._buffer.uvs[P+3]=b),h||(this.forPathBevel?(E+=1,T+=3,P+=2):(E+=2,T+=6,P+=4),D.topP=E+0,D.bottomP=E+1,this._buffer.positions[T+0]=v,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=_*d,this._buffer.normals[T+1]=M*d,this._buffer.normals[T+2]=p,this._buffer.uvs[P+0]=b,this._buffer.uvs[P+1]=S,this.forPathBevel===!1&&(this._buffer.positions[T+3]=v,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=_*d,this._buffer.normals[T+4]=M*d,this._buffer.normals[T+5]=-p,this._buffer.uvs[P+2]=S,this._buffer.uvs[P+3]=b)),this.vertexCache[s]=D,D}clone(){let e=new kT(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=nb(this.userData),e}},zV=class extends nt{constructor(e,t=12,r={}){var d,p,f;super(),this.type="ShapeGeometry",this.windingRule=qt.ODD,this.elementType=Gr.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:qt.ODD,elementType:Gr.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(m=>m.extractShapePointsToFlatArray([],this._curveSegments)),s,a=!0,o=!0,l,c;for(let m=0,g=i.length/2;m<g;m++){let v=m*2,y=i[v+0],x=i[v+1];if(l!==void 0&&y!==l&&(a=!1),c!==void 0&&x!==c&&(o=!1),l=y,c=x,!a&&!o)break}if(!a&&!o)try{s=jl({contours:[i,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{s=BT}let h=(d=s==null?void 0:s.vertexCount)!=null?d:1,u=(p=s==null?void 0:s.elementCount)!=null?p:1;if(this._positionAttribute=new st(new Float32Array(h*3),3),this._normalAttribute=new st(new Float32Array(h*3),3),this._uvAttribute=new st(new Float32Array(h*2),2),this._indexAttribute=new st(new Uint32Array(u*3),1),s){let m=1/0,g=-1/0,v=1/0,y=-1/0;for(let S=0,w=h;S<w;S++){let A=S*2,_=s.vertices[A+0],M=s.vertices[A+1];_<m&&(m=_),_>g&&(g=_),M<v&&(v=M),M>y&&(y=M)}let x=g-m,b=y-v;for(let S=0,w=h;S<w;S++){let A=S*2,_=s.vertices[A+0],M=s.vertices[A+1],E=(_-m)/x,T=(M-v)/b;this._positionAttribute.setXYZ(S,_,M,0),this._normalAttribute.setXYZ(S,0,0,1),this._uvAttribute.setXY(S,E,T)}for(let S=0,w=u;S<w;S++){let A=S*3,_=s.elements[A+0],M=s.elements[A+1],E=s.elements[A+2];this._indexAttribute.setX(A+0,_),this._indexAttribute.setX(A+1,M),this._indexAttribute.setX(A+2,E)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((f=s==null?void 0:s.elementCount)!=null?f:1)*3)}clone(){let e=new zV(this._shape,this._curveSegments);return e.userData=nb(this.userData),e}},NV=class extends kT{constructor(e,t,r=0,i=12,n=3,s=qt.ODD){super(e,t,r,i,n,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,s=i.boundary.vertexCount;n<s;n++){let a=this._buildBevelVert(t,i,n),o=this._buildBevelVert(t,i,(n+1)%s);r.push(o.topP,a.topN,a.bottomN),r.push(o.topP,a.bottomN,o.bottomP)}}clone(){let e=new NV(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=nb(this.userData),e}},Wu=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var c,h,u,d,p,f,m;let r=Object.assign({},(c=t==null?void 0:t.parameters)!=null?c:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:qt.ODD},e.parameters),i=Math.abs(r.width),n=Math.abs((h=r.height)!=null?h:r.width),s=Math.abs((u=r.depth)!=null?u:0),a=(d=e.shape)!=null?d:t==null?void 0:t.shape,o=(p=a==null?void 0:a.roundness)!=null?p:r.roundness;a!==void 0&&(a instanceof Er?(a.width!==i||a.height!==n)&&a.applySize(i,n):a=new Er(i,n).fromJSON(a),((f=e.parameters)==null?void 0:f.roundness)!==void 0&&((m=e.parameters)==null?void 0:m.roundness)>0&&a.update());let l=a!=null?a:new Er(i,n);return{parameters:Object.assign(r,{width:i,height:n,depth:s,roundness:o}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:s,windingRule:a}=e.parameters;e.shape.roundness=s;let o;return t<=0?o=new zV(e.shape,n,{windingRule:a}):o=new NV(e.shape,t,r,n,i,a),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},FV=Math.PI*2,zT=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Er?e.shape:new Er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,c=e.shape,h=t*.5,u=r*.5,d=jwe(c,h,u,n*Math.PI/180,i,s);c.isClosed=!0,c.update();let p=Wu.create({shape:c,parameters:{subdivisions:d,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(p,{userData:{...e,type:"EllipseGeometry"}})}};function jwe(e,t,r,i,n,s){if(i>=FV)return n>30||n%4===0?(Gwe(e,t,r,s),Math.round(n/4)):uB(e,i,n,t,r,s);i=Math.max(i,.001);let a={x:0,y:r},o=i+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*r},c=Bwe({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%c.length===0?Vwe(e,a.x,a.y,c,n,t,r,s):uB(e,i,n,t,r,s)}function Vwe(e,t,r,i,n,s,a,o){let l=Math.round(n/i.length);e.addPoint(Td(t,r));for(let c=0,h=i.length;c<h;c++){let u=i[c],d=e.points[c],p=Td(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),p.controls[0].position.set(u.x2,u.y2),e.addPoint(p)}return o>0?UV(e,s,a,o):e.addPoint(Td(0,0)),l}function uB(e,t,r,i,n,s){let a=-t/r;for(let o=0;o<=r;o++){let l=a*o,c=Math.sin(l)*i,h=Math.cos(l)*n;e.addPoint(Td(c,h))}return t<FV?s>0?UV(e,i,n,s):e.addPoint(Td(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&jV(e,i,n,s)),1}function Gwe(e,t,r,i=0,n=0,s=0){let a=.5522847498,o=t*a,l=r*a;e.addPoint(w0(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(w0(n,s+r,n-o,s+r,n+o,s+r)),e.addPoint(w0(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(w0(n,s-r,n+o,s-r,n-o,s-r)),i>0&&jV(e,t,r,i)}function Td(e,t){return new Cd(vt.generateUUID(),new $(e,t))}function w0(e,t,r,i,n,s){let a=Td(e,t);return a.controls[0].position.set(r,i),a.controls[1].position.set(n,s),a}function UV(e,t,r,i){VV(e,t,r,i).forEach(n=>e.addPoint(n))}function jV(e,t,r,i){let n=VV(e,t,r,i),s=new Er;n.forEach(a=>s.addPoint(a)),s.isClosed=!0,e.shapeHoles.push(s)}function VV(e,t,r,i){let n=i*t/100,s=n*(Math.abs(r)/Math.abs(t)),a=new $(n/t,s/r),o=e.points.map(l=>{let c=l.clone();return c.uuid=vt.generateUUID(),c}).reverse();return o.forEach(l=>{l.position.multiply(a);let c=l.controls[0].position.clone().multiply(a),h=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(h),l.controls[1].position.copy(c)}),o}var Hwe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var o,l,c;let r=Object.assign({},(o=t==null?void 0:t.parameters)!=null?o:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(r.width),n=Math.abs((l=r.height)!=null?l:i),s=Math.abs((c=r.depth)!=null?c:i),a=Math.abs(Math.min(i,s))/2;return{parameters:Object.assign(r,{width:i,height:n,depth:s,radius:a,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:s,segments:a,pathRadius:o,pathType:l,pathSegments:c,cornerRadius:h,cornerSegments:u}=e.parameters,d=new GV(!1,t,r,i,n,s,a,o,l,c,h,u);return Object.assign(d,{userData:{...e,type:"HelixGeometry"}})}},CS=new xd([0,0,0],1),GV=class extends nt{constructor(e=!0,t=1,r=1,i=1,n=1,s=1,a=1,o=1,l=1,c=1,h=1,u=1){if(super(),s===0)return;let d=e&&s===1;d&&(u=0),h>100&&(h=100),h===0&&(u=0);let p=()=>new C,f=new C,m=p(),g=p(),v=p(),y,x,b,S,w,A,_,M,E=p(),T=p(),P=p(),D=p(),L=p(),R=p(),V=p(),F=p(),O=r-2*o+.001,k=O/s,z=Math.ceil(a*s),N=z+1,j=O/z,Y=-O/2,q=c+1,X=2*Math.PI/c,G=Math.PI/2/u,te=.01,Z=Math.min((1-h/100)*o,o-te),Q=o-Z,re=0,ae=2,ce=u*ae+ae,pe=q*ce/ae,Te=pe+q*N,xe=q*(N+ce),[Ie,Oe,Se]=[3,3,2].map(J=>Array(xe*J).fill(0)),be=[],Re=n-o;function Be(J,Fe){let We=Math.PI/2;A=Fe*j,M=2*Math.PI*(A%k)/k+We,A+=Y,_=Math.sin(M)*Re,w=Math.cos(M)*Re,e?J.set(w,_,A):J.set(w,A,_)}Be(f,-1e-10),Be(m,0),E.copy(f),Be(f,1);let U=f.distanceTo(m),I=d?0:Q+Z,ne=U*z+2*I,ge=Z,ve=ne-I;for(let J=0;J<=z;J++){Be(g,J),F.subVectors(g,E).normalize(),E.copy(g),R.copy(g).setComponent(+e+1,0).normalize(),V.crossVectors(F,R).normalize();let Fe=J===0,We=J===z,Ge=Fe?3*Math.PI/2:G,Ye=Fe?ge:ve,Xe=Fe?q:Te,wt=Fe?0:xe-q,Ot=F.clone().multiplyScalar(Fe?-Q:Q).add(g),er=F.clone().multiplyScalar(Fe?-1:1).normalize();for(let K=0;K<q;K++){let he=K*X;if(T.addVectors(f.copy(R).multiplyScalar(o*Math.cos(he)),m.copy(V).multiplyScalar(o*Math.sin(he))),P.copy(T).normalize(),Fe||We){d||(re=wt+K,[0,1,2].forEach(oe=>{Ie[re*3+oe]=Ot.getComponent(oe),Oe[re*3+oe]=er.getComponent(oe)}),Se[re*2]=+We,Se[re*2+1]=K/c),m.copy(P).multiplyScalar(Z),v.addVectors(g,m);for(let oe=0;oe<u;oe++){let de=oe*G+Ge;D.addVectors(f.copy(F).multiplyScalar(Q*Math.sin(de)),m.copy(P).multiplyScalar(Q*Math.cos(de))),L.copy(D).normalize(),m.addVectors(v,D),D.normalize(),re=Xe+oe*q+K,[0,1,2].forEach(ke=>{Ie[re*3+ke]=m.getComponent(ke),Oe[re*3+ke]=L.getComponent(ke)});let _e=+Fe+Math.sin(de);Se[re*2]=(Ye+Q*_e)/ne,Se[re*2+1]=K/c}}m.addVectors(g,T),re=pe+J*q+K,[0,1,2].forEach(oe=>{Ie[re*3+oe]=m.getComponent(oe),Oe[re*3+oe]=P.getComponent(oe)}),Se[re*2]=(I+J*U)/ne,Se[re*2+1]=K/c}}let Ae=N+2*u+ae,[Ne,Le]=[+d,Ae-1];for(let J=Ne;J<=Le-1;J++){let Fe=d&&J===Le-1;for(let We=0;We<q-1;We++)y=J*q+We,x=y+1,b=(Fe?We:y)+q,S=(Fe?We+1:x)+q,J===0?be.push(x,S,b):J===Ae-2?be.push(y,x,b):be.push(y,x,b,x,S,b)}this.setIndex(be),this.setAttribute("position",new Ve(Ie,3)),this.setAttribute("normal",new Ve(Oe,3)),this.setAttribute("uv",new Ve(Se,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,i=Array.from(this.getIndex().array),n,s,a,o,l=6*(t-1)*e.radialSegments,c=t,h=c===t;for(let u=0;u<e.radialSegments;u++)n=c*r+u,s=n+1,a=(h?u:n)+r,o=(h?u+1:s)+r,i[l++]=n,i[l++]=s,i[l++]=a,i[l++]=s,i[l++]=o,i[l++]=a;return i.length=l,CS.array=i,CS.count=i.length,CS}},Wwe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new HV(t*.5,s,a):new YU(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},HV=class extends LT{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(n,s,a,e,t,r),this.type=a}static fromJSON(e){return new HV(e.radius,e.corner,e.cornerSides)}},qwe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s,a,o;((n=(i=e.parameters)==null?void 0:i.points)!=null?n:[]).forEach(l=>{Array.isArray(l)&&(l.x=l[0],l.y=l[1])});let r=Object.assign({},(s=t==null?void 0:t.parameters)!=null?s:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((a=r.height)!=null?a:r.width),depth:Math.abs((o=r.depth)!=null?o:r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new g1;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new VU(n.extractPoints(i).shape,r);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...e,type:"LatheGeometry"}})}},ya=new we,TS=new Yt,S0=new C,q1=class extends Ti{constructor(){super(),this.uuid=vt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new pi().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let s=0,a=n.vertexNormals.length;s<a;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return ya.makeRotationX(e),this.applyMatrix4(ya),this}rotateY(e){return ya.makeRotationY(e),this.applyMatrix4(ya),this}rotateZ(e){return ya.makeRotationZ(e),this.applyMatrix4(ya),this}translate(e,t,r){return ya.makeTranslation(e,t,r),this.applyMatrix4(ya),this}scale(e,t,r){return ya.makeScale(e,t,r),this.applyMatrix4(ya),this}lookAt(e){return TS.lookAt(e),TS.updateMatrix(),this.applyMatrix4(TS.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,s=i.normal,a=i.color,o=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<n.count;u++)t.vertices.push(new C().fromBufferAttribute(n,u)),a!==void 0&&t.colors.push(new et().fromBufferAttribute(a,u));function c(u,d,p,f){let m=a===void 0?[]:[t.colors[u].clone(),t.colors[d].clone(),t.colors[p].clone()],g=s===void 0?[]:[new C().fromBufferAttribute(s,u),new C().fromBufferAttribute(s,d),new C().fromBufferAttribute(s,p)],v=new HM(u,d,p,g,m,f);t.faces.push(v),o!==void 0&&t.faceVertexUvs[0].push([new $().fromBufferAttribute(o,u),new $().fromBufferAttribute(o,d),new $().fromBufferAttribute(o,p)]),l!==void 0&&t.faceVertexUvs[1].push([new $().fromBufferAttribute(l,u),new $().fromBufferAttribute(l,d),new $().fromBufferAttribute(l,p)])}let h=e.groups;if(h.length>0)for(let u=0;u<h.length;u++){let d=h[u],p=d.start,f=d.count;for(let m=p,g=p+f;m<g;m+=3)r!==void 0?c(r.getX(m),r.getX(m+1),r.getX(m+2),d.materialIndex):c(m,m+1,m+2,d.materialIndex)}else if(r!==void 0)for(let u=0;u<r.count;u+=3)c(r.getX(u),r.getX(u+1),r.getX(u+2));else for(let u=0;u<n.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(S0).negate(),this.translate(S0.x,S0.y,S0.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new we;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new C,t=new C;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new C;if(e){let r=new C,i=new C;for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c];r.subVectors(c,l),i.subVectors(o,l),r.cross(i),t[a.a].add(r),t[a.b].add(r),t[a.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,s=i.vertexNormals.length;n<s;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new q1;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let a=0,o=this.faces.length;a<o;a++){let l=new C,c={a:new C,b:new C,c:new C};n.push(l),s.push(c)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=i.faceNormals[n],l=i.vertexNormals[n];o.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ns),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,c=this.colors,h=e.colors;t!==void 0&&(i=new pi().getNormalMatrix(t));for(let u=0,d=a.length;u<d;u++){let p=a[u].clone();t!==void 0&&p.applyMatrix4(t),s.push(p)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){let p=l[u],f,m,g=p.vertexNormals,v=p.vertexColors,y=new HM(p.a+n,p.b+n,p.c+n);y.normal.copy(p.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let x=0,b=g.length;x<b;x++)f=g[x].clone(),i!==void 0&&f.applyMatrix3(i).normalize(),y.vertexNormals.push(f);y.color.copy(p.color);for(let x=0,b=v.length;x<b;x++)m=v[x],y.vertexColors.push(m.clone());y.materialIndex=p.materialIndex+r,o.push(y)}for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let p=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let f=0,m=p.length;f<m;f++){let g=p[f],v=[];for(let y=0,x=g.length;y<x;y++)v.push(g[y].clone());this.faceVertexUvs[u].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let c=this.vertices[o],h=Math.round(c.x*n)+"_"+Math.round(c.y*n)+"_"+Math.round(c.z*n);t[h]===void 0?(t[h]=o,r.push(this.vertices[o]),i[o]=r.length-1):i[o]=i[t[h]]}let s=[];for(let o=0,l=this.faces.length;o<l;o++){let c=this.faces[o];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(o);break}}for(let o=s.length-1;o>=0;o--){let l=s[o];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}let a=this.vertices.length-r.length;return this.vertices=r,a}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new C(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function r(o,l){return o.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,a;i&&i.length===t&&(s=[]),n&&n.length===t&&(a=[]);for(let o=0;o<t;o++){let l=e[o]._id;s&&s.push(i[l]),a&&a.push(n[l])}s&&(this.faceVertexUvs[0]=s),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let p=this.parameters;for(let f in p)p[f]!==void 0&&(e[f]=p[f]);return e}let t=[];for(let p=0;p<this.vertices.length;p++){let f=this.vertices[p];t.push(f.x,f.y,f.z)}let r=[],i=[],n={},s=[],a={},o=[],l={};for(let p=0;p<this.faces.length;p++){let f=this.faces[p],m=!0,g=!1,v=this.faceVertexUvs[0][p]!==void 0,y=f.normal.length()>0,x=f.vertexNormals.length>0,b=f.color.r!==1||f.color.g!==1||f.color.b!==1,S=f.vertexColors.length>0,w=0;if(w=c(w,0,0),w=c(w,1,m),w=c(w,2,g),w=c(w,3,v),w=c(w,4,y),w=c(w,5,x),w=c(w,6,b),w=c(w,7,S),r.push(w),r.push(f.a,f.b,f.c),r.push(f.materialIndex),v){let A=this.faceVertexUvs[0][p];r.push(d(A[0]),d(A[1]),d(A[2]))}if(y&&r.push(h(f.normal)),x){let A=f.vertexNormals;r.push(h(A[0]),h(A[1]),h(A[2]))}if(b&&r.push(u(f.color)),S){let A=f.vertexColors;r.push(u(A[0]),u(A[1]),u(A[2]))}}function c(p,f,m){return m?p|1<<f:p&~(1<<f)}function h(p){let f=p.x.toString()+p.y.toString()+p.z.toString();return n[f]!==void 0||(n[f]=i.length/3,i.push(p.x,p.y,p.z)),n[f]}function u(p){let f=p.r.toString()+p.g.toString()+p.b.toString();return a[f]!==void 0||(a[f]=s.length,s.push(p.getHex())),a[f]}function d(p){let f=p.x.toString()+p.y.toString();return l[f]!==void 0||(l[f]=o.length/2,o.push(p.x,p.y)),l[f]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),o.length>0&&(e.data.uvs=[o]),e.data.faces=r,e}clone(){return new q1().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let u=0,d=t.length;u<d;u++)this.vertices.push(t[u].clone());let r=e.colors;for(let u=0,d=r.length;u<d;u++)this.colors.push(r[u].clone());let i=e.faces;for(let u=0,d=i.length;u<d;u++)this.faces.push(i[u].clone());for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let p=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let f=0,m=p.length;f<m;f++){let g=p[f],v=[];for(let y=0,x=g.length;y<x;y++){let b=g[y];v.push(b.clone())}this.faceVertexUvs[u].push(v)}}let n=e.morphTargets;for(let u=0,d=n.length;u<d;u++){let p={};if(p.name=n[u].name,n[u].vertices!==void 0){p.vertices=[];for(let f=0,m=n[u].vertices.length;f<m;f++)p.vertices.push(n[u].vertices[f].clone())}if(n[u].normals!==void 0){p.normals=[];for(let f=0,m=n[u].normals.length;f<m;f++)p.normals.push(n[u].normals[f].clone())}this.morphTargets.push(p)}let s=e.morphNormals;for(let u=0,d=s.length;u<d;u++){let p={};if(s[u].vertexNormals!==void 0){p.vertexNormals=[];for(let f=0,m=s[u].vertexNormals.length;f<m;f++){let g=s[u].vertexNormals[f],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),p.vertexNormals.push(v)}}if(s[u].faceNormals!==void 0){p.faceNormals=[];for(let f=0,m=s[u].faceNormals.length;f<m;f++)p.faceNormals.push(s[u].faceNormals[f].clone())}this.morphNormals.push(p)}let a=e.skinWeights;for(let u=0,d=a.length;u<d;u++)this.skinWeights.push(a[u].clone());let o=e.skinIndices;for(let u=0,d=o.length;u<d;u++)this.skinIndices.push(o[u].clone());let l=e.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());let h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new $we().fromGeometry(this),t=new nt,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",_0.call(new st(r,3),e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",_0.call(new st(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",hB.call(new st(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",dB.call(new st(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",dB.call(new st(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],s=e.morphTargets[i];for(let a=0,o=s.length;a<o;a++){let l=s[a],c=new Ve(l.data.length*3,3);c.name=l.name,n.push(_0.call(c,l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new Ve(e.skinIndices.length*4,4);t.setAttribute("skinIndex",pB.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new Ve(e.skinWeights.length*4,4);t.setAttribute("skinWeight",pB.call(i,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new nt,r=e.geometry;if(e.isPoints||e.isLine){let i=new Ve(r.vertices.length*3,3),n=new Ve(r.colors.length*3,3);if(t.setAttribute("position",_0.call(i,r.vertices)),t.setAttribute("color",hB.call(n,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let s=new Ve(r.lineDistances.length,1);t.setAttribute("lineDistance",Xwe.call(s,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};q1.prototype.isGeometry=!0;var $we=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,s=e.faces;for(i=0;i<s.length;i++){let a=s[i];a.materialIndex!==n&&(n=a.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,a=e.morphTargets,o=a.length,l;if(o>0){l=[];for(let g=0;g<o;g++)l[g]={name:a[g].name,data:[]};this.morphTargets.position=l}let c=e.morphNormals,h=c.length,u;if(h>0){u=[];for(let g=0;g<h;g++)u[g]={name:c[g].name,data:[]};this.morphTargets.normal=u}let d=e.skinIndices,p=e.skinWeights,f=d.length===r.length,m=p.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(r[v.a],r[v.b],r[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let b=v.normal;this.normals.push(b,b,b)}let x=v.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let b=v.color;this.colors.push(b,b,b)}if(n===!0){let b=i[0][g];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new $,new $,new $))}if(s===!0){let b=i[1][g];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new $,new $,new $))}for(let b=0;b<o;b++){let S=a[b].vertices;l[b].data.push(S[v.a],S[v.b],S[v.c])}for(let b=0;b<h;b++){let S=c[b].vertexNormals[g];u[b].data.push(S.a,S.b,S.c)}f&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),m&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},HM=class{constructor(e,t,r,i,n,s=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new C,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new et,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function Xwe(e){return this.array.set(e),this}function hB(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new et),t[r++]=s.r,t[r++]=s.g,t[r++]=s.b}return this}function dB(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new $),t[r++]=s.x,t[r++]=s.y}return this}function _0(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new C),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this}function pB(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new pt),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z,t[r++]=s.w}return this}var Ywe=["a","b","c"];function Qwe(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function PS(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),s=i+"_"+n;return r.get(s)}function DS(e,t,r,i,n,s){let a=Math.min(e,t),o=Math.max(e,t),l=a+"_"+o,c;if(i.has(l))c=i.get(l);else{let h=r[a],u=r[o];c={a:h,b:u,newEdge:null,faces:[]},i.set(l,c)}c.faces.push(n),s[e].edges.push(c),s[t].edges.push(c)}function Kwe(e,t,r,i){let n,s,a;for(n=0,s=e.length;n<s;n++)r[n]={edges:[]};for(n=0,s=t.length;n<s;n++)a=t[n],DS(a.a,a.b,e,i,a,r),DS(a.b,a.c,e,i,a,r),DS(a.c,a.a,e,i,a,r)}function A0(e,t,r,i,n){e.push(new HM(t,r,i,void 0,void 0,n))}function wh(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function M0(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var Zwe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof nt?e=new q1().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new C,r,i,n,s,a,o=e.vertices,l=e.faces,c=e.faceVertexUvs[0],h=c!==void 0&&c.length>0,u=[],d=new Map;Kwe(o,l,u,d);let p=[],f,m,g,v,y,x,b;for(let te of Array.from(d.keys())){for(m=d.get(te),g=new C,y=3/8,x=1/8,b=m.faces.length,b!=2&&(y=.5,x=0,b!=1),g.addVectors(m.a,m.b).multiplyScalar(y),t.set(0,0,0),s=0;s<b;s++){for(v=m.faces[s],a=0;a<3&&(f=o[Qwe(v,Ywe[a])],!(f!==m.a&&f!==m.b));a++);f&&t.add(f)}t.multiplyScalar(x),g.add(t),m.newEdge=p.length,p.push(g)}let S,w,A,_,M,E,T,P=[];for(i=0,n=o.length;i<n;i++){for(E=o[i],M=u[i].edges,r=M.length,r==3?S=3/16:r>3&&(S=3/(8*r)),w=1-r*Number(S),A=S,r<=2&&(r==2?(w=3/4,A=1/8):r==1||r==0),T=E.clone().multiplyScalar(w),t.set(0,0,0),s=0;s<r;s++)_=M[s],f=_.a!==E?_.a:_.b,t.add(f);t.multiplyScalar(Number(A)),T.add(t),P.push(T)}let D=P.concat(p),L=P.length,R,V,F,O=[],k=[],z,N,j,Y,q=new $,X=new $,G=new $;for(i=0,n=l.length;i<n;i++)v=l[i],R=Number(PS(v.a,v.b,d).newEdge)+L,V=Number(PS(v.b,v.c,d).newEdge)+L,F=Number(PS(v.c,v.a,d).newEdge)+L,A0(O,R,V,F,v.materialIndex),A0(O,v.a,R,F,v.materialIndex),A0(O,v.b,V,R,v.materialIndex),A0(O,v.c,F,V,v.materialIndex),h&&(z=c[i],N=z[0],j=z[1],Y=z[2],q.set(wh(N.x,j.x),wh(N.y,j.y)),X.set(wh(j.x,Y.x),wh(j.y,Y.y)),G.set(wh(N.x,Y.x),wh(N.y,Y.y)),M0(k,q,X,G),M0(k,N,q,G),M0(k,j,X,q),M0(k,Y,G,X));e.vertices=D,e.faces=O,h&&(e.faceVertexUvs[0]=k)}},qr=new C,Jwe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var s,a;let r=(a=(s=e.geometry)!=null?s:t==null?void 0:t.geometry)!=null?a:new nt().copy(new Ka(100,100,100)),i;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(qr),i={width:qr.x,height:qr.y,depth:qr.z,subdivisions:0}):i=t.parameters;let n={...i,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:r}}static build(e){var l;let{width:t,height:r,depth:i,subdivisions:n}=e.parameters,s=(l=e.geometry)!=null?l:new nt().copy(new Ka(100,100,100)),a=s.userData.parameters;a===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(qr)):qr.set(a.width,a.height,a.depth),(t!==qr.x||r!==qr.y||i!==qr.z)&&s.scale(qr.x===0?1:t/qr.x,qr.y===0?1:r/qr.y,qr.z===0?1:i/qr.z);let o=s.originalGeometry;try{n>0?(o===void 0||(a==null?void 0:a.subdivisions)!==n)&&(o===void 0&&(o=s),s=new Zwe(n).modify(o).toBufferGeometry()):(o!==void 0&&(s=o),o=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals())}catch{o!==void 0&&(s=o),o=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()}return o!==void 0&&Object.assign(s,{originalGeometry:o}),delete e.geometry,Object.assign(s,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new rj(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(qr);let s=100/qr.x;Object.assign(n.parameters,{width:100,height:qr.y*s,depth:qr.z*s}),t(this.build(n))})}},WV=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Er?e.shape:new Er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}=e.parameters,l=e.shape,c=t*.5,h=r*.5,u=0,d=0,p=2*Math.PI/i;for(let m=0;m<i;m++){let g=p*m,v=u+Math.sin(g)*c,y=d+Math.cos(g)*h;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let m=0,g=l.points.length;m<g;m++)l.points[m].roundness=n;l.roundness=n,l.update();let f=Wu.create({shape:l,parameters:{roundness:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(f,{userData:{...e,type:"PolygonGeometry"}})}},eSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:s,openEnded:a,cornerRadius:o,cornerSegments:l}=e.parameters,c=new rSe(t*.5,r,n,s,a,o,l);return c.scale(1,1,i/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}};function ff(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function OS(e,t,r,i,n,s){let a=t.clone().sub(e),o=r.clone().sub(e),l=a.angleTo(o);if(a.normalize(),o.normalize(),i===n){let c=a.add(o).normalize();s.copy(e).addScaledVector(c,i/Math.sin(l/2))}else{let c=a.angleTo(o);s.copy(e),s.addScaledVector(a,n/Math.sin(c)),s.addScaledVector(o,i/Math.sin(c))}}function tSe(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var rSe=class extends nt{constructor(e=.5,t=1,r=4,i=1,n=!1,s=0,a=4){super(),r=Math.floor(Math.max(3,r)),i=Math.floor(i),a=Math.floor(a);let o=[],l=[],c=[],h=[],u=0,d=t/2,p=Math.PI/r,f=e*Math.cos(Math.PI/r),m=2*Math.PI/r,g=(r-2)*Math.PI/r,v=Math.PI-g,y=new C(0,-d,0),x=new C(0,d,0),b=new $(e,-d),S=new $(f,-d),w=new $(0,x.y).sub(S),A=new $(0,x.y).sub(b),_=new $(w.y,-w.x).normalize(),M=new $(A.y,-A.x).normalize(),E=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-w.angle())/2)-1e-8;s=Math.min(s,E);let T;{let F=new C(_.x,_.y,0),O=new C(Math.cos(m)*F.x,F.y,Math.sin(m)*F.x);T=F.angleTo(O)}let P=s/Math.tan((Math.PI-w.angle())/2),D=s/Math.tan((Math.PI-T)/2),L=new C;if(!n){l.push(y.x,y.y,y.z),c.push(0,-1,0),h.push(0,0);let F=u++,O=[],k=b.clone(),z=P/Math.cos(Math.PI/r);k.x-=z;for(let N=0;N<r;N++){let j=N/r*Math.PI*2+p,Y=new $(Math.sin(j),Math.cos(j));ff(k,Y,L),l.push(L.x,L.y,L.z),c.push(0,-1,0),h.push(0,0),O.push(u++)}for(let N=0;N<O.length;N++)o.push(O[N],F,O[(N+1)%O.length])}{let F=new C,O=new C,k=new C,z=new C,N=new C,j=new C;for(let Y=0;Y<r;Y++){let q=Y/r*Math.PI*2+p,X=(Y+.5)/r*Math.PI*2+p,G=(Y+1)/r*Math.PI*2+p,te=new $(Math.sin(q),Math.cos(q)),Z=new $(Math.sin(X),Math.cos(X)),Q=new $(Math.sin(G),Math.cos(G));ff(b,te,O),ff(b,Q,k),ff(_,Z,F),OS(x,O,k,D,D,z),l.push(z.x,z.y,z.z),OS(O,x,k,D,P,N),l.push(N.x,N.y,N.z),OS(k,O,x,P,D,j),l.push(j.x,j.y,j.z),c.push(F.x,F.y,F.z),c.push(F.x,F.y,F.z),c.push(F.x,F.y,F.z),h.push(0,0),h.push(0,0),h.push(0,0);let re=u++,ae=u++,ce=u++;if(o.push(re,ae,ce),s>0){{let xe=O.clone().add(k).multiplyScalar(.5),Ie=x.clone().sub(xe).normalize(),Oe=y.clone().sub(xe).normalize().add(Ie).normalize().multiplyScalar(-1),Se=j.clone().sub(N);R(xe,Se,Oe,w.angle())}let pe,Te;{let xe=new C;ff(M,Q,xe);let Ie=j.clone().add(z).multiplyScalar(.5);Ie=tSe(Ie,k,x);let Oe=j.clone().sub(z);[pe,Te]=R(Ie,Oe,xe,T,z.y)}{let xe=pe,Ie=xe.clone().setY(0).normalize(),Oe=new C(0,-1,0),Se=Ie.clone().cross(Oe);V(xe,Ie,Oe,Se)}{let xe=w.angle(),Ie=Math.PI-xe,Oe=x.clone();Oe.y-=s/Math.sin(xe-Math.PI/2);let Se=new C,be=[];for(let Be=0;Be<a;Be++){let U=[],I=Math.PI/2-Ie*Be/a,ne=Math.cos(I),ge=Math.sin(I),ve=X;for(let Ae=0;Ae<=Be;Ae++){let Ne=Math.cos(ve),Le=Math.sin(ve);F.x=ne*Le,F.y=ge,F.z=ne*Ne,Se.copy(Oe).addScaledVector(F,s),l.push(Se.x,Se.y,Se.z),c.push(F.x,F.y,F.z),h.push(0,0),U.push(u++),ve+=Math.PI*2/Be/r}be.push(U)}Te.reverse(),be.push(Te);let Re=be.length-1;for(let Be=0;Be<Re;Be++){let U=be[Be],I=be[Be+1],ne=U.length-1;o.push(I[1],U[0],I[0]);for(let ge=1;ge<=ne;ge++)o.push(U[ge],U[ge-1],I[ge]),o.push(I[ge+1],U[ge],I[ge])}}}}}this.setIndex(o),this.setAttribute("position",new Ve(l,3)),this.setAttribute("normal",new Ve(c,3)),this.setAttribute("uv",new Ve(h,2));function R(F,O,k,z,N){let j=-z/2,Y=(Math.PI-z)/2,q=O.clone().normalize().cross(k);F.addScaledVector(k,-s/Math.sin(Y));let X=new C,G=new C,te=1,Z=u,Q=[];for(let re=0;re<=a;re++){let ae=j+re/a*z;G.set(0,0,0),G.addScaledVector(q,Math.sin(ae)),G.addScaledVector(k,Math.cos(ae));for(let ce=0;ce<=te;ce++){let pe=ce/te-.5;if(X.copy(F),X.addScaledVector(O,pe),X.addScaledVector(G,s),N!=null){let Te=Math.max(0,X.y-N);X.addScaledVector(O,-Te/O.y)}l.push(X.x,X.y,X.z),c.push(G.x,G.y,G.z),h.push(0,0),ce===0&&Q.push(u),u++}}for(let re=0;re<a;re++)for(let ae=0;ae<te;ae++){let ce=Z+ae+(te+1)*re,pe=ce+(te+1),Te=pe+1,xe=ce+1;o.push(ce,pe,xe),o.push(pe,Te,xe)}return[F.clone().addScaledVector(O,.5),Q]}function V(F,O,k,z){let N=Math.PI/2,j=A.angle()-N,Y=[],q=new C,X=new C;for(let te=0;te<=a;te++){let Z=[],Q=te/a;for(let re=0;re<=te;re++){let ae=((te?re/te:0)-.5)*v,ce=Math.cos(ae),pe=Math.sin(ae),Te=Math.atan(Math.tan(j)*ce),xe=(N+Te)*Q,Ie=Math.cos(xe),Oe=Math.sin(xe);q.set(0,0,0),q.addScaledVector(O,Oe*ce),q.addScaledVector(k,Ie),q.addScaledVector(z,Oe*pe),X.copy(F).addScaledVector(q,s),l.push(X.x,X.y,X.z),c.push(q.x,q.y,q.z),h.push(0,0),Z.push(u++)}Y.push(Z)}let G=Y.length-1;for(let te=0;te<G;te++){let Z=Y[te],Q=Y[te+1],re=Z.length-1;o.push(Z[0],Q[1],Q[0]);for(let ae=1;ae<=re;ae++)o.push(Z[ae-1],Z[ae],Q[ae]),o.push(Z[ae],Q[ae+1],Q[ae])}}}},qV=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,s,a,o;let r=Object.assign({},(n=t==null?void 0:t.parameters)!=null?n:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign((s=t==null?void 0:t.ui)!=null?s:{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Er?e.shape:new Er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((a=r.height)!=null?a:r.width),depth:Math.abs((o=r.depth)!=null?o:0)}),ui:i}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,c={x:r*.5,y:i*.5},h={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function d(b,S,w){return S>r&&w>i?Math.min(b*r/S,b*i/w):S>r?b*r/S:w>i?b*i/w:b}let p=[];p[0]=n[0]===0?0:d(n[0],n[0]+n[3],n[0]+n[1]),p[1]=n[1]===0?0:d(n[1],n[1]+n[2],n[1]+n[0]),p[2]=n[2]===0?0:d(n[2],n[2]+n[1],n[2]+n[3]),p[3]=n[3]===0?0:d(n[3],n[3]+n[0],n[3]+n[2]);let f=h.x,m=u.x,g=u.y,v=h.y;t.addPoint(t.createPoint(f,g)),t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(m,v)),t.addPoint(t.createPoint(f,v)),t.isClosed=!0;let y=!0;for(let b=0,S=t.points.length;b<S;b++)t.points[b].roundness=p[b],b>0&&p[b]!==p[b-1]&&(y=!1);y&&(t.roundness=p[0]),t.useCubicForRoundedCorners=s!==1,t.update();let x=Wu.create({shape:t,parameters:{depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...e,type:"RectangleGeometry"}})}},iSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:s=64,phiStart:a,phiLength:o,thetaStart:l,thetaLength:c}=e.parameters,h=new YC(.5*t,n,s,a,o,l,c);return h.scale(1,r/t,i/t),Object.assign(h,{userData:{...e,type:"SphereGeometry"}})}},nSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,s=new $x(t,r,i,n);return s.scale(1,1,1),Object.assign(s,{userData:{...e,type:"PlaneGeometry"}})}},sSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,angle:n,cornerRadius:s,cornerSegments:a}=e.parameters,o=new aSe(t,r,i,n,s,a);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},aSe=class extends nt{constructor(e=1,t=1,r=1,i=90,n=10,s=24){super(),this.type="BackdropGeometry";let a=[],o=[],l=[],c=.001;n==0&&(s=1),s=Math.max(1,Math.floor(s)),n=Math.min(n,100),i=Math.min(180-c,i),i*=Math.PI/180;let h=[],u=Math.PI/2,d=(te=0,Z=0,Q=0)=>new C(te,Z,Q),p=d(),f=d(),[m,g,v]=[t/2,e/2,r/2],y=-g,x=+g,[b,S,w]=[d(y,-m,+v),d(y,-m,-v),d(y,+m,-v)],A=(te,Z=!1)=>Math.sin(te-Math.PI/(1+ +Z)),_=(te,Z=!1)=>Math.cos(te-Math.PI/(1+ +Z));w.y=Math.sin(i)*t-m;let M=Math.cos(i)*t-v,E=b.z-c;i<=u?(w.z=Math.min(M,E),w.z==E&&(w.y-=(M-E)/Math.tan(u-i))):S.z=Math.min(S.z-M-v,b.z-c),p.subVectors(b,S),f.subVectors(w,S);let T=Math.min(p.length(),f.length())*n/100,P=T*Math.tan(i/2),D=T/Math.cos(i/2),L=p.clone().normalize().add(f.normalize()).setLength(D).add(S);p.set(0,A(i,!0),_(i,!0)),h.push([w,p.clone()]);let R=(Math.PI-i)/s;for(let te=0;te<=s;te++){let Z=u+i+te*R;p.set(0,Math.sin(Z)*P,Math.cos(Z)*P),p.add(L),f.set(0,A(Z),_(Z)),h.push([p.clone(),f.clone()])}h.push([b,d(0,1,0)]);let V=Math.sin(R/2)*P*2,F=h.length-1,O=h[0][0].distanceTo(h[1][0]),k=h[F-1][0].distanceTo(h[F][0]),z=O+V*s+k;h[0].push(1);for(let te=0;te<=s;te++)h[te+1].push(1-(O+te*V)/z);h[F].push(0);let[N,j,Y]=h[0],q,X,G;for(let te=1;te<h.length;te++)[q,X,G]=h[te],a.push(y,N.y,N.z,y,q.y,q.z,x,N.y,N.z,x,N.y,N.z,y,q.y,q.z,x,q.y,q.z),o.push(0,j.y,j.z,0,X.y,X.z,0,j.y,j.z,0,j.y,j.z,0,X.y,X.z,0,X.y,X.z),l.push(0,Y,0,G,1,Y,1,Y,0,G,1,G),[N,j,Y]=[q,X,G];this.setAttribute("position",new Ve(a,3)),this.setAttribute("normal",new Ve(o,3)),this.setAttribute("uv",new Ve(l,2))}},$V=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Er?e.shape:new Er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:s,angle:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,h=e.shape,u=t*.5,d=r*.5,p=0,f=0,m=a*Math.PI/360/n,g=Math.PI/2*3*-1,v=u*i/100,y=d*i/100;if(n===3&&i===50){m=2*Math.PI/n;for(let b=0;b<n;b++){let S=m*b,w=p+Math.sin(S)*u,A=f+Math.cos(S)*d;h.addPoint(h.createPoint(w,A))}}else for(let b=0;b<n;b++){let S=p+Math.cos(g)*u,w=f+Math.sin(g)*d;h.addPoint(h.createPoint(S,w)),g+=m,S=p+Math.cos(g)*v,w=f+Math.sin(g)*y,h.addPoint(h.createPoint(S,w)),g+=m}h.isClosed=!0;for(let b=0,S=h.points.length;b<S;b++)h.points[b].roundness=s;h.roundness=s,h.update();let x=Wu.create({shape:h,parameters:{roundness:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(x,{userData:{...e,type:"StarGeometry"}})}},oSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new $x(t,r);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},lSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var a,o,l;let r=Object.assign({},(a=t==null?void 0:t.parameters)!=null?a:{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(r.width),n=Math.abs((o=r.height)!=null?o:r.width),s=Math.round(Math.abs((l=r.depth)!=null?l:r.width*.25));return{parameters:Object.assign(r,{width:i,height:n,depth:s})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:s,arc:a,cornerRadius:o,cornerSegments:l}=e.parameters,c=cSe(t,r,i,t*.5,a,s,0,0,n,o,l);return c.scale(1,r/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}};function cSe(e,t,r,i,n,s,a,o,l,c,h){return[t,r]=[r,t],a=t/2,n/=2*Math.PI,n==1&&(c=0),new GV(!0,e,t,r,i,n,s,a,o,l,c,h)}var uSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s,a;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width),tube:(a=r.tube)!=null?a:r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:s,q:a}=e.parameters,o=t*.5;o!==r&&(o-=r);let l=new QU(o,r,i,n,s,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},hSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Er?e.shape:new Er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,isRect:o}=e.parameters,l=e.shape,c=t*.5,h=r*.5;o?(l.addPoint(l.createPoint(-c,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))),l.isClosed=!0;for(let d=0,p=l.points.length;d<p;d++)l.points[d].roundness=i;l.roundness=i,l.update();let u=Wu.create({shape:l,parameters:{roundness:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a}});return Object.assign(u,{userData:{...e,type:"TriangleGeometry"}})}};function dSe(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}var pSe=new we,fSe=new we;function mSe(e,t,r){let i=[new C,new C,new C],n=[new C,new C,new C];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(n[0],n[1],n[2]),i.forEach((s,a)=>{let o=n[a],l=vt.lerp(s.length(),o.length(),r);s.lerp(o,r).setLength(l)}),new we().makeBasis(i[0],i[1],i[2])}var gSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var o,l,c,h,u;let r=Object.assign({},(o=t==null?void 0:t.parameters)!=null?o:{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(r.width),n=Math.abs((l=r.height)!=null?l:r.width),s=Math.abs((c=r.depth)!=null?c:0),a=(h=t==null?void 0:t.shapeData)!=null?h:zT.create({parameters:xV}).userData.shape;return{path:(u=e.path)!=null?u:k1.defaultData(),parameters:Object.assign(r,{width:i,height:n,depth:s,extrusion:{...bV,...r.extrusion}}),shapeData:a}}static build(e){if(e.path.points.length>=2){let t=new vSe(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new nt,{userData:{...e,type:"PathGeometry"}})}},vSe=class extends nt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!dSe(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:i}=this.inputs.parameters.extrusion,n=this.inputs.path.isClosed?e.length:e.length-1,s=Math.floor(i*n),a=this.inputs.path.isClosed?Math.ceil((r+i)*n):Math.ceil(Math.min(1,r+i)*n),o=Math.min(Math.max(2,a-s+1),n+2),l=[],c=[];for(let F=0;F<o;F++){let O=this.inputs.path.isClosed?(F+s)%e.length:Math.min(F+s,e.length-1);l.push(e[O].clone()),c.push(t[O].clone())}let h=(F,O,k)=>{l[F]=l[F].clone().lerp(l[O],k),c[F]=mSe(c[F],c[O],k)},u=0,d=i*n%1;(!this.inputs.path.isClosed||r<=1)&&(d||i===0)&&(u=d,h(0,1,u));let p=0,f=(i+r)*n%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&i+r<1)&&f&&(p=f,h(l.length-1,l.length-2,1-p)),r===0){let F=l.length-1;l[F].copy(l[0]),c[F].copy(c[0])}this._applyPathModifiers(c,u,p);let{bevel:m,bevelSides:g}=this.inputs.parameters.extrusion,v=m>0?this.inputs.parameters.extrusion.capType:"flat",y=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(y=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:x,infos:b,vertices:S}=this._computeShapePoints(y),w=0,A;v==="round"&&(A=new kT(this.inputs.shapeData,2*m,m,y,g,void 0,!0),w=A.getAttribute("position").count);let _=0,M=0;b.sort((F,O)=>F.start-O.start),b.forEach(F=>{F.verticesStart=_,F.verticesCount=F.continuous.reduce((O,k,z)=>O+(z===0||!k?2:1),0),M+=F.verticesCount,_=M});let E=M*o,T,P=0;if(this._isOpenEnded()&&v==="flat"){try{T=jl({windingRule:qt.ODD,elementType:Gr.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:x})}catch{T=kV}P=T.vertexCount}let D=E+2*P+w*2,L=E+2*P,R={positions:new Float32Array(D*3),normals:new Float32Array(D*3),uvs:new Float32Array(D*2)},V=[];if(b.forEach(F=>{this._extrudeRegion(F,S,c,l,R,V,this._isGeometryClosed()&&!this._isOpenEnded())}),T&&(this._closeEnd(T,E,V,R,c[0],l[0],!1),this._closeEnd(T,E+P,V,R,c[c.length-1],l[l.length-1],!0)),A){R.positions.set(A.getAttribute("position").array,L*3),R.normals.set(A.getAttribute("normal").array,L*3),R.uvs.set(A.getAttribute("uv").array,L*2);let F=V.length;V.push(...A.getIndex().array.map(z=>z+L)),L+=w,R.positions.set(A.getAttribute("position").array,L*3),R.normals.set(A.getAttribute("normal").array,L*3),R.uvs.set(A.getAttribute("uv").array,L*2);let O=V.length;V.push(...A.getIndex().array.map(z=>z+L)),this.setAttribute("position",new st(R.positions,3)),this.setAttribute("normal",new st(R.normals,3)),this.setAttribute("uv",new st(R.uvs,2)),this.setIndex(V);let k=pSe;k.copy(c[c.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(k,L,D),k.copy(c[0]).setPosition(l[0]).multiply(fSe.makeScale(1,1,-1)),this.applyMatrix4OnRange(k,L-w,L),this.reverseIndicesOnRange(F,O)}else this.setAttribute("position",new st(R.positions,3)),this.setAttribute("normal",new st(R.normals,3)),this.setAttribute("uv",new st(R.uvs,2)),this.setIndex(V)}_extractPathPoints(){let e=CV(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,i=this.inputs.path.isClosed,n=new C,s=new C,a=new C,o=new C,l=new C(0,1,0);for(let f=0;f<r;f++){let m=e[f],g;f===0?g=i?e[e.length-2]:m.clone().multiplyScalar(2).sub(e[1]):g=e[f-1];let v;f===r-1?v=i?e[1]:m.clone().multiplyScalar(2).sub(e[f-1]):v=e[f+1];let y=m.clone().sub(g).normalize(),x=v.clone().sub(m).normalize(),b=y.clone().add(x).normalize();a.copy(b),f===0&&(b.equals(l)||b.clone().negate().equals(l))&&l.set(0,0,1);let S=l.clone().cross(b).normalize(),w=b.clone().cross(S).normalize();l.copy(w),o.copy(S),f===0&&(n.copy(w),s.copy(b));let A=new we().makeBasis(S,w,b);t.push(A)}let c=i?s:a,h=i?n:new C(0,1,0),u=c.clone().cross(o).normalize(),d=Math.acos(h.dot(u));if(isNaN(d))return t;let p=h.clone().cross(u);c.dot(p)>0&&(d*=-1);for(let f=1;f<t.length;f++){let m=new we().makeRotationZ(d*f/t.length);t[f].multiply(m)}return t}_applyPathModifiers(e,t,r){let i=e.length,{angle:n,twist:s,startScale:a,endScale:o}=this.inputs.parameters.extrusion,l=new we,c=new we;return e.forEach((h,u)=>{let d=u===0?0:u===i-1?1:(u-t)/(i-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(vt.lerp(n,n+s,d));let p=vt.lerp(a,o,d);c.makeScale(p,p,p),h.multiply(l).multiply(c)}),e}_computeShapePoints(e=12,t=qt.ODD){let r=this.inputs.shapeData,i=r.extractShapePointsToFlatArray([],e),n=r.shapeHoles.map(c=>{let h=c.extractShapePointsToFlatArray([],e),u=[];for(let d=h.length-1;d>=1;d-=2){let p=h[d-1],f=h[d-0];u.push(p,f)}return u}),s;try{s=jl({windingRule:t,elementType:Gr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{s=BT}let a;try{a=jl({windingRule:qt.ODD,elementType:Gr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{a=BV}if(!s)throw new Error("error generating geometry");let o=s.elementCount;if(a){s.elementCount+=a.elementCount;for(let c=0;c<a.elements.length;c++){let h=a.elements[c],u=c%2===0?s.vertexCount:0;s.elements.push(h+u)}for(let c=0;c<a.vertexIndices.length;c++){let h=a.vertexIndices[c],u=s.vertexCount;s.vertexIndices.push(h+u)}for(let c=0;c<a.vertices.length;c++){let h=a.vertices[c];s.vertices.push(h)}}for(let c=0,h=s.vertexCount;c<h;c++){let u=c*2;s.vertices[u+0],s.vertices[u+1]}let l=[];for(let c=s.elementCount-1;c>=0;c--){let h=c>=o,u=c*2,d=s.elements[u+0],p=s.elements[u+1],f=d+p,m={start:d,count:p,normals:[],isHole:h,continuous:[],verticesStart:0,verticesCount:0};l.push(m);let g=d,v=f-1,y=d+1,x=r.roundedCurves.length;do{let b=g-d;s.vertices[v*2+0],s.vertices[v*2+1];let S=s.vertices[g*2+0],w=s.vertices[g*2+1],A=s.vertices[y*2+0],_=s.vertices[y*2+1],M=S-A,E=w-_,T=Math.sqrt(M*M+E*E);M/=T,E/=T,m.normals[b*2+0]=-E,m.normals[b*2+1]=M;let P=s.vertexIndices[g];if(Array.isArray(P))m.continuous[b]=!1;else{let[D,L]=r.getCurveIndexFromVertexId(P-1,!0);if(L>0&&L<1)m.continuous[b]=!0;else{let R=L===1?D+1:D-1;R=(R+x)%x;let V=L===1?0:1,F=r.roundedCurves[D].getTangent(L),O=r.roundedCurves[R].getTangent(V);m.continuous[b]=F.dot(O)>.95}}h&&(m.normals[b*2+0]*=-1,m.normals[b*2+1]*=-1),[v,g,y]=[g,y,y+1],y>=f&&(y-=p)}while(y!==d+1)}return{regions:[i,...n],infos:l,vertices:s.vertices}}_insertVertex(e,t,r,i,n){let s=t*2,a=t*3;e.positions[a+0]=r.x,e.positions[a+1]=r.y,e.positions[a+2]=r.z,e.normals[a+0]=i.x,e.normals[a+1]=i.y,e.normals[a+2]=i.z,e.uvs[s+0]=n.x,e.uvs[s+1]=n.y}_extrudeRegion(e,t,r,i,n,s,a){let o=new C,l=new C,c=new C,h=new C,u=new $;r.forEach((p,f)=>{let m=i[f],g=e.verticesStart*r.length+e.verticesCount*f;for(let v=0;v<e.count;v++){let y=(e.start+v)*2;if(o.set(t[y+0],t[y+1],0),c.copy(o).applyMatrix4(p).add(m),e.continuous[v])h.set(e.normals[v*2+0],e.normals[v*2+1],0);else{let x=v===0?(e.start+e.count-1)*2:y-2;l.set(t[x+0],t[x+1],0),h.copy(o).sub(l),h.set(-h.y,h.x,0),e.isHole||h.negate()}if(h.applyMatrix4(p).normalize(),u.set(v===0?1:v/e.count,f/(r.length-1)),this._insertVertex(n,g,c,h,u),g++,!e.continuous[v]||v===0){if(v===0)h.set(e.normals[v*2+0],e.normals[v*2+1],0),u.set(0,f/(r.length-1));else{let x=v===e.count-1?e.start*2:y+2;l.set(t[x+0],t[x+1],0),h.copy(l).sub(o),h.set(-h.y,h.x,0),e.isHole||h.negate()}h.applyMatrix4(p).normalize(),this._insertVertex(n,g,c,h,u),g++}}});let d=r.length-1;for(let p=0;p<d;p++){let f=e.verticesStart*r.length+e.verticesCount*p,m=e.verticesStart*r.length+e.verticesCount*(p+1),g=0;for(let v=0;v<e.count;v++){(!e.continuous[v]||v===0)&&g++;let y=v===e.count-1?0:g+1,x=f+g,b=f+y,S=m+y,w=m+g;e.isHole?s.push(x,S,b,x,w,S):s.push(x,b,S,x,S,w),g++}}}_closeEnd(e,t,r,i,n,s,a){let o=e.vertexCount,l=new C(0,0,a?-1:1).applyMatrix4(n),c=new C,h=new $;for(let d=0;d<o;d++){let p=2*d;c.set(e.vertices[p+0],e.vertices[p+1],0).applyMatrix4(n).add(s),this._insertVertex(i,t+d,c,l,h)}let u=e.elements;for(let d=0;d<e.elementCount;d++){let p=3*d,f=u[p+0]+t,m=u[p+(a?1:2)]+t,g=u[p+(a?2:1)]+t;r.push(f,m,g)}}applyMatrix4OnRange(e,t,r){let i=e.elements,n=new pi().getNormalMatrix(e).elements,s,a,o,l,c=this.attributes.position,h=this.attributes.normal;if(!c||!h)return;let u=c.array,d=h.array,p=c.itemSize;for(let f=t*p,m=r*p;f<m;f+=p){if(f===t)debugger;s=u[f+0],a=u[f+1],o=u[f+2],l=1/(i[3]*s+i[7]*a+i[11]*o+i[15]),u[f+0]=(i[0]*s+i[4]*a+i[8]*o+i[12])*l,u[f+1]=(i[1]*s+i[5]*a+i[9]*o+i[13])*l,u[f+2]=(i[2]*s+i[6]*a+i[10]*o+i[14])*l,s=d[f+0],a=d[f+1],o=d[f+2],d[f+0]=n[0]*s+n[3]*a+n[6]*o,d[f+1]=n[1]*s+n[4]*a+n[7]*o,d[f+2]=n[2]*s+n[5]*a+n[8]*o}c.needsUpdate=!0,h.needsUpdate=!0}reverseIndicesOnRange(e,t){let r=this.index;if(r){for(let i=e;i<t;i+=3){let n=r.getX(i),s=r.getX(i+1),a=r.getX(i+2);r.setXYZ(i,a,s,n)}r.needsUpdate=!0}}};function XV(){let e=new nt;return e.setAttribute("position",new st(new Float32Array([]),3)),e.setIndex(new st(new Uint16Array([]),1)),e}var ySe=XV().attributes,xSe=12,bSe=1,YV=class extends nt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,ySe),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,text:o,textTransform:l}=e,c=l===2?o.toUpperCase():l===3?o.toLowerCase():o,h=wSe(e,t,c),{shapes:u,charWidths:d,charCoords:p}=t.generateShapes(h,e),f=r*.5,m=i*.5,g=u.map(x=>new Er().fromShape(x));this.vectorShapes=g;let v=g.map(x=>Wu.create({shape:x,parameters:{depth:n,extrudeBevelSegments:a,extrudeBevelSize:s,windingRule:n<=0?qt.NONZERO:qt.ODD,subdivisions:this.isLowResolution&&n>0?bSe:xSe}})),y=v.length?lu(v):XV();y.translate(-f,m,0),this.dispose(),this.wrappedText=h,this.charCoords=p,this.charWidths=d,this.deleteAttribute("extrudeNormal"),Object.entries(y.attributes).forEach(([x,b])=>{this.setAttribute(x,b)}),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let e=Ru(new nt,YV.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){var e;return(e=this.userData.parameters.text)!=null?e:""}};function wSe(e,t,r){r=r!=null?r:e.text;let i=[""],n="";for(let s of r)n+=s,s===" "||s===`
`?(i[i.length-1]+=n,n="",s===`
`&&i.push("")):t.getTextWidth(i[i.length-1]+n,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+n,e)>e.width&&(n.length===1?(i[i.length-1]+=n,n=""):(i[i.length-1]+=n.slice(0,-1),n=n[n.length-1],i.push(""))));return i[i.length-1]+=n,i}var QV,NT=new Promise(e=>{QV=e}),fB=!1,E0;function SSe(){if(fB)return;if(E0)return E0;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.453/build",r=jg(()=>import("./process.5e26a63c.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/process.wasm`).then(o=>o.arrayBuffer())]),s=i.default,a=await s({wasmBinary:n});QV(a),fB=!0}return E0=e(),E0}function $1(e,t,r){let i={parameters:e,type:e.type};if(e.type==="PathGeometry")i.path=e.path;else if(e.type==="VectorGeometry"){let s=Er.createFromState(e.shape,e.width,e.height);i.shape=s}else if(e.type==="NonParametricGeometry")e.data.groups&&e.data.groups.forEach(s=>{var a;return s.materialIndex=Math.max((a=s.materialIndex)!=null?a:0,0)}),i.geometry=new rj().parse(e);else{if(e.type==="SubdivGeometry")return new Ji(e,r);if(e.type==="TextGeometry")return new YV(e,t)}let n;try{n=xB(i)}catch(s){console.error(s)}if(!n){let s=Er.createFromState(B1.defaultData(),100,100);i.shape=s,n=xB(i)}return n}var _Se=new we;function WM(e,t,r,i){let n=e.position.array,s=e.normal.array,a=_Se.makeScale(t,r,i).invert().elements,o,l,c;for(var h=0,u=n.length;h<u;h+=3)n[h]*=t,n[h+1]*=r,n[h+2]*=i,o=s[h],l=s[h+1],c=s[h+2],s[h]=a[0]*o+a[4]*l+a[8]*c,s[h+1]=a[1]*o+a[5]*l+a[9]*c,s[h+2]=a[2]*o+a[6]*l+a[10]*c;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var C0=new Br,Sh=new C,Ze;NT.then(e=>{Ze=e});var mB=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),gB=new Uint32Array([0,1,2,3]),vB=new Uint8Array([4]),Ji=class extends nt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let r=this.data.scaleBaked,i=yu.div(t,r);this.subdividedGeometry&&WM(this.subdividedGeometry.attributes,...i),this.originalGeometry&&WM(this.originalGeometry.attributes,...i),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*i[0],height:n.height*i[1],depth:n.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(Sh.fromArray(i));let s=Sh.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){var n;let e,t,r;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:r}=Ji.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Ka(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=e,this.subdividedGeometry=t!=null?t:void 0;let i=(n=this.subdividedGeometry)!=null?n:this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Ji.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ns,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;C0.setFromBufferAttribute(t),C0.getCenter(r),e.boundingSphere.radius=r.distanceTo(C0.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),C0.getSize(Sh);let i={width:Sh.x,height:Sh.y,depth:Sh.z};return this.userData.parameters=i,i}static build(e,t,r,i){var l;let n,s,a,o=(l=e==null?void 0:e.phongAngle)!=null?l:35;r===!1&&(o=-1),t&&(Ze.free_bvh(t),Ze.free_subdivision_surface(t));try{n=Ji.allocate(e,i)}catch(c){console.error(c,e),n=Ji.allocate({positionWASM:mB,indexWASM:gB,verticesPerFaceWASM:vB},i)}if(Ze.set_destination_refinement_level(n,0),s=Ji.buildLevel(n,!0,o),e.subdivisions>0)try{Ze.set_destination_refinement_level(n,e.subdivisions),a=Ji.buildLevel(n,!1,o)}catch{try{Ze.set_destination_refinement_level(n,e.subdivisions-1),a=Ji.buildLevel(n,!1,o)}catch{a=null}}else a=null;return{subdivPointer:n,originalGeometry:s,subdividedGeometry:a}}static primitiveToQuads(e,t,r){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let i=e.shape!==void 0||e.path!==void 0?t.geometry:$1(e,r,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=i.getClosedTorusIndicesForBooleanOrSubdiv():n=i.getIndex();let s,a,o,l;({positions:s,triIndices:l}=db(i.getAttribute("position"),n));let c;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let h=e.radialSegments*e.heightSegments*3*2,u=h+e.radialSegments*3;c=[h,u]}return{indices:a,verticesPerFace:o}=KV(s,l,i,c),{positions:s,indices:a,verticesPerFace:o}}static allocate(e,t){var x;let r,i,n,s=[],a=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,n=e.verticesPerFaceWASM):(r=mB,i=gB,n=vB);let o=r.length,l=i.length,c=n.length,h=r.length+s.length+a.length,u=i.length+n.length,d=h*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,p=h*Float32Array.BYTES_PER_ELEMENT,f=Ze._malloc(d),m=new Float32Array(Ze.HEAPF32.buffer,f,h),g=new Uint32Array(Ze.HEAPU32.buffer,f+p,u);m.set(r,0),m.set(s,r.length),m.set(a,r.length+s.length),g.set(i,0),g.set(n,i.length);let v;(x=e==null?void 0:e.scaleBaked)!=null&&x.some(b=>b!==1)&&(v=new we().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let y=v?Ze.alloc_subdivision_surface2(f,o,f+p,l,f+p+i.length*Uint32Array.BYTES_PER_ELEMENT,c,v.elements):Ze.alloc_subdivision_surface(f,o,f+p,l,f+p+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return Ze._free(f),y}static buildLevel(e,t,r,i,n){let s=n?Ze.get_mesh_data2(e,t?Ze.Level.CONTROL:Ze.Level.REFINED,r,n.elements):Ze.get_mesh_data(e,t?Ze.Level.CONTROL:Ze.Level.REFINED,r),a=8,o=Ze.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(4,4+4),c=0,h=Ze.HEAPU32[o[c]>>2],u=Ze.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=Ze.HEAPU32[o[c]>>2],p=Ze.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let f=Ze.HEAPU32[o[c]>>2],m=Ze.HEAPU32.subarray(f>>2,(f>>2)+l[c]);c++;let g=Ze.HEAPU32[o[c]>>2],v=Ze.HEAPU32.subarray(g>>2,(g>>2)+l[c]);if(c++,i===void 0){let y=new nt;if(y.setIndex(new xd(v,1)),y.setAttribute("position",new Ve(u,3)),y.setAttribute("normal",new Ve(p,3)),t){y.setAttribute("faceMap",new xd(m,1));let x=new Float32Array(p.length/3*4).fill(0);y.setAttribute("color",new st(x,4))}return Ze.free_mesh_data(s),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(u),i.getAttribute("normal").copyArray(p),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,Ze.free_mesh_data(s)}static freeSubdivPointer(e){Ze.free_bvh(e),Ze.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,r){let i=Ze.get_wireframe_data_for_base_level(e),n=4,s=Ze.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(2,2+2),o=0,l=Ze.HEAPU32[s[o]>>2],c=Ze.HEAPF32.subarray(l>>2,(l>>2)+a[o]);o++;let h=Ze.HEAPU32[s[o]>>2],u=Ze.HEAPU32.subarray(h>>2,(h>>2)+a[o]);if(t===void 0){let d=new nt;d.setAttribute("position",new Ve(c,3));let p=new Float32Array(c.length);for(let f=0,m=c.length;f<m;)p[f++]=r.r,p[f++]=r.g,p[f++]=r.b;return d.setAttribute("color",new st(p,3)),d.setIndex(new xd(u,1)),Ze.free_wireframe_data_for_base_level(i),d}t.getAttribute("position").copyArray(c),t.attributes.position.needsUpdate=!0,Ze.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){let i=t===0;i||Ze.set_destination_refinement_level(e,t);let n=r?Ze.get_topological_data2(e,i?Ze.Level.CONTROL:Ze.Level.REFINED,r.elements):Ze.get_topological_data(e,i?Ze.Level.CONTROL:Ze.Level.REFINED),s=6,a=Ze.HEAPU32.subarray(n>>2,(n>>2)+s),o=a.subarray(3,3+3),l=0,c=Ze.HEAPU32[a[l]>>2],h=new Float32Array(Ze.HEAPF32.subarray(c>>2,(c>>2)+o[l]));l++;let u=Ze.HEAPU32[a[l]>>2],d=new Uint32Array(Ze.HEAPU32.subarray(u>>2,(u>>2)+o[l]));l++;let p=Ze.HEAPU32[a[l]>>2],f=new Uint8Array(Ze.HEAPU32.subarray(p>>2,(p>>2)+o[l]));return Ze.free_topological_data(n),{positions:h,indices:d,verticesPerFace:f}}},yB=["getX","getY","getZ"];function db(e,t){let r={},i=t?t.count:e.count,n=0,s=[],a=[],o=1e4;for(let c=0;c<i;c++){let h=t?t.getX(c):c,u="";for(let d=0;d<3;d++)u+=`${~~(e[yB[d]](h)*o)},`;if(u in r)s.push(r[u]);else{for(let d=0;d<3;d++)a.push(e[yB[d]](h));r[u]=n,s.push(n),n++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:a,triIndices:l}}var T0=new C,LS=new C,IS=new C,RS=new C;function KV(e,t,r,i){let n=[],s=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let l=r.userData.shape.extractShapePointsToFlatArray([]),c=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&c<=24&&c%4===0&&r.userData.parameters.angle>=360){let d=l.length/2/c;l=l.filter((p,f)=>Math.floor(f/2)%d===0)}let h=0;for(let d=0;d<l.length;d+=2)h+=(l[d]-l[(d===0?l.length:d)-2])*(l[d+1]+l[(d===0?l.length:d)-1]);e.length=0;let u=0;if(h<0)for(let d=0;d<l.length;d+=2)e.push(l[d],l[d+1],0),n.push(u++);else for(let d=l.length-2;d>=0;d-=2)e.push(l[d],l[d+1],0),n.push(u++);return s.push(u),{indices:n,verticesPerFace:s}}let a=new Float32Array([r.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(r.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[o]*3+2]===a||e[t[o]*3+2]===0)&&l++,(e[t[o+1]*3+2]===a||e[t[o+1]*3+2]===0)&&l++,(e[t[o+2]*3+2]===a||e[t[o+2]*3+2]===0)&&l++,l===3)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){T0.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),LS.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),IS.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),RS.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),LS.sub(T0).normalize(),IS.sub(T0).normalize(),RS.sub(T0).normalize();let l=LS.cross(IS).dot(RS);Math.abs(l)>.005||i&&i.some((c,h)=>h%2===1?!1:o>=i[h]&&o<i[h+1])?(n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),s.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3}if(r.useNgonForTopBottomFaceDuringBake){let l=[],c=[],h=0;for(let u=0,d=0;u<e.length;u+=3,d++)e[u+2]===0&&(l.push(d),h++),e[u+2]===a&&c.push(d);if(r.userData.parameters.extrudeBevelSize===0){let u=c[0];c[0]=c[1],c[1]=u}l.reverse(),n.push(...l,...c),s.push(h,h)}return{indices:n,verticesPerFace:s}}var Ao={};use(Ao,{calcBoolean:()=>TSe,calcBooleanTopological:()=>CSe,freeMeshSet:()=>LSe,getMeshSet:()=>PSe,hasOpenEdges:()=>DSe,transformMeshSet:()=>OSe});var ZV,ASe=new Promise(e=>{ZV=e}),P0;function MSe(){if(P0)return P0;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.453/build",r=jg(()=>import("./boolean.951866f9.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/boolean.wasm`).then(o=>o.arrayBuffer())]),s=i.default,a=await s({wasmBinary:n});ZV(a)}return P0=e(),P0}var St,Pd;ASe.then(e=>St=e);function ESe(e,t,r){let i,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:s,triIndices:a}=db(e.getAttribute("position"),n),o;if(t&&r){let{indices:l,verticesPerFace:c}=KV(s,a,e);o=c.length,i=[];for(let h=0,u=0;h<o;h++){i.push(c[h]);for(let d=0;d<c[h];d++)i.push(l[u++])}}else{let l=a.length;i=Array(l+l/3),o=0;for(let c=0,h=0;h<i.length;)i[h++]=3,o++,i[h++]=a[c++],i[h++]=a[c++],i[h++]=a[c++]}return{positions:s,faceIndices:i,nFaces:o}}function JV(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?r:i,s=St._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(St.HEAPU32.buffer,s,t):new Float32Array(St.HEAPF32.buffer,s,t)).set(e,0),s}function e6(e){switch(e){case 0:return St.OP.UNION;case 1:return St.OP.INTERSECTION;case 2:return St.OP.A_MINUS_B;case 3:return St.OP.B_MINUS_A;case 4:return St.OP.SYMMETRIC_DIFFERENCE;case 5:return St.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function CSe(e,t){Pd===void 0&&(Pd=St.init_csg());let r=JV(e),i=St.csg_calc_topological(Pd,r,e.length,e6(t));St._free(r);let n=6,s=St.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(3,3+3),o=0,l=St.HEAPU32[s[o]>>2],c=new Float32Array(St.HEAPF32.subarray(l>>2,(l>>2)+a[o]));o++;let h=St.HEAPU32[s[o]>>2],u=new Uint32Array(St.HEAPU32.subarray(h>>2,(h>>2)+a[o]));o++;let d=St.HEAPU32[s[o]>>2],p=new Uint8Array(St.HEAPU32.subarray(d>>2,(d>>2)+a[o]));return St.free_mesh_data(i),{positions:c,indices:u,verticesPerFace:p}}function TSe(e,t,r,i){Pd===void 0&&(Pd=St.init_csg());let n=JV(e),s=St.csg_calc(Pd,n,e.length,i,e6(t));St._free(n);let a=5,o=St.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(2,2+3),c=0,h=St.HEAPU32[o[c]>>2],u=St.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=St.HEAPU32[o[c]>>2],p=St.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let f=l[c];r.setAttribute("position",new Ve(u,3)),r.setAttribute("normal",new Ve(p,3));let m=St.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new ns),r.boundingSphere.center.set(m[0],m[1],m[2]),r.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,r.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},St.free_mesh_data(s),f}function PSe(e,t,r){if(St===void 0)return-1;let i,n,s;if(t&&e.userData.positions!==void 0){let m=e.userData;s=m.verticesPerFace.length,i=m.positions,n=Array(m.verticesPerFace.reduce((g,v)=>g+v,0)+s);for(let g=0,v=0,y=0;g<m.verticesPerFace.length;g++){n[y++]=m.verticesPerFace[g];for(let x=0;x<m.verticesPerFace[g];x++)n[y++]=m.indices[v++]}}else({positions:i,faceIndices:n,nFaces:s}=ESe(e,t,r));let a=i.length,o=n.length,l=i.length,c=n.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=St._malloc(h),p=new Float32Array(St.HEAPF32.buffer,d,l),f=new Uint32Array(St.HEAPU32.buffer,d+u,c);return p.set(i,0),f.set(n,0),St.get_csg_mesh(d,a,d+u,o,s)}function DSe(e){return St.has_open_edges(e)}function OSe(e,t){St.transform_csg_mesh(e,t.elements)}function LSe(e){St.free_csg_mesh(e)}var ISe={ConeGeometry:cwe,CubeGeometry:uwe,CylinderGeometry:TV,DodecahedronGeometry:dwe,EllipseGeometry:zT,HelixGeometry:Hwe,IcosahedronGeometry:Wwe,LatheGeometry:qwe,NonParametricGeometry:Jwe,PolygonGeometry:WV,PyramidGeometry:eSe,RectangleGeometry:qV,SphereGeometry:iSe,PlaneGeometry:nSe,BackdropGeometry:sSe,StarGeometry:$V,TextFrameGeometry:oSe,TorusGeometry:lSe,TorusKnotGeometry:uSe,TriangleGeometry:hSe,PathGeometry:gSe,VectorGeometry:Wu},xB=e=>ISe[e.type].create(e);function mf(e){return e!==null&&"booleanOp"in e}var t6=class extends OT(Sn){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new we}updateVisible(){super.updateVisible(),this.visible=!mf(this.parent)&&this.visible,mf(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Ao.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),mf(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof t6&&(e.freeBooleanPointer(),mf(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e){let t=super.updateTransformState(e);return t&&mf(this.parent)&&this.invalidateDownstreamBooleanData(!0),t}},D0=new Br;function FT(e,t=0,r=e.count,i,n){let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0;for(let u=t;u<r;u++){let d=e.getX(u),p=e.getY(u),f=e.getZ(u);d<s&&(s=d),p<a&&(a=p),f<o&&(o=f),d>l&&(l=d),p>c&&(c=p),f>h&&(h=f)}D0.min.set(s,a,o),D0.max.set(l,c,h),D0.getCenter(i),D0.getSize(n).multiplyScalar(.5)}var RSe=new nt,BSe=new Hg,Rn=class extends t6{constructor(e,t){super(RSe,BSe),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?FT(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},bB=class{constructor(e){e=e!=null?e:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Mc=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=vt.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t!=null?t:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r!=null?r:{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r!=null?r:{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t!=null?t:this.getType(e,t);let i=e.getNodeData(r!=null?r:this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,s){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof Mc&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}},kSe=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},bn=new kSe,Kt=class extends Mc{constructor(e,t){super(e),this.scope="",t=t!=null?t:{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t!=null?t:this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=vt.generateUUID()),r=e.getUUID(r!=null?r:this.getUUID(),!n);let s=e.getNodeData(r),a=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return s.name=s.name||super.build(e,t,r),s.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||s.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let o=this.getTemp(e,r);if(o)return e.format(o,a,t);{o=super.generate(e,t,r,s.output,i);let l=this.generate(e,a,r);return e.addNodeCode(o+" = "+l+";"),e.format(o,a,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r!=null?r:this.uuid,e.getTempVar(r,i!=null?i:this.getType(e),n,this.getLabel()).name}},zn=class extends Kt{constructor(e,t){t=t!=null?t:{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let a=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}},_i=class extends zn{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof $?e:new $(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},gs=class extends zn{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof C?e:new C(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}},On=class extends et{constructor(e,t,r,i){super(e,t,r),this.isColorA=!0,this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,n=r[1],s=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=n==="rgba"?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=n==="hsla"?parseFloat(i[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Mo=class extends zn{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof On?e:new On(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},zSe=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,wB=/[a-z_0-9]+/gi,De=class extends Kt{constructor(e,t,r,i,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let s,a=0,o=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;s=wB.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let h=l[c],u=h[0],d=this.isMethod?!this.getInputByName(u):!0,p=u;if(this.keywords[u]||this.useKeywords&&d&&bn.containsKeyword(u)){let f=this.keywords[u];if(!f){let m=bn.getKeywordData(u);m.cache&&(f=e.keywords[u]),f=f||bn.getKeyword(u,e),m.cache&&(e.keywords[u]=f)}p=f.build(e)}u!==p&&o[h.index+a-1]!=="."&&(o=o.substring(0,h.index+a)+p+o.substring(h.index+u.length+a),a+=p.length-u.length),this.getIncludeByName(p)===void 0&&bn.contains(p)&&e.include(bn.get(p))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t!=null?t:[],this.extensions=r!=null?r:{},this.keywords=i!=null?i:{},this.isMethod){let n=zSe.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(wB);if(s){let a=0;for(;a<s.length;){let o=s[a++],l;o==="in"||o==="out"||o==="inout"?l=s[a++]:(l=o,o="");let c=s[a++];this.inputs.push({name:c,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},NSe=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,r6=class extends Kt{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||r6.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let s,a,o="",l=NSe.exec(e);this.useDefine=n!=null?n:this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],s=l[2],o=l[3]):(s=this.src,a="f"),this.name=s,this.type=a,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}},Wt=r6;Wt.PI="PI",Wt.PI2="PI2",Wt.RECIPROCAL_PI="RECIPROCAL_PI",Wt.RECIPROCAL_PI2="RECIPROCAL_PI2",Wt.LOG2="LOG2",Wt.EPSILON="EPSILON";var FSe=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),USe=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),i6=class extends Kt{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=FSe.exec(e);if(t){let r=t[2],i;for(;i=USe.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},UT=class extends Kt{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e!=null?e:0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}};bn.addKeyword("uv",function(){return new UT});bn.addKeyword("uv2",function(){return new UT(1)});var zh=class extends Kt{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t!=null?t:zh.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Qa:return["Linear"];case dt:return["sRGB"];default:return[]}}generate(e,t){var a;let r=this.input.build(e,"v4"),i=this.getType(e),n=zh.Nodes[this.method],s=e.include(n);if(s===zh.LINEAR_TO_LINEAR)return e.format(r,i,t);if(((a=n.inputs)==null?void 0:a.length)===2){let o=this.factor.build(e,"f");return e.format(s+"( "+r+", "+o+" )",i,t)}else return e.format(s+"( "+r+" )",i,t)}fromEncoding(e){let t=zh.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=zh.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Fa=zh;Fa.Nodes={LinearToLinear:new De(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new De(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new De(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Fa.LINEAR_TO_LINEAR="LinearToLinear",Fa.SRGB_TO_LINEAR="sRGBToLinear",Fa.LINEAR_TO_SRGB="LinearTosRGB";var ar=class extends De{constructor(e="",t,r,i,n){super(e,n,i,r,t),this.nodeType="Expression"}},Oo=class extends zn{constructor(e=new Jr,t,r,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t!=null?t:new UT,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var c;if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s,a;this.project?s="texture2DProj":s=n?"tex2DBias":"tex2D",n?a=s+"( "+r+", "+i+", "+n+" )":a=s+"( "+r+", "+i+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=(c=this.colorSpace)!=null?c:new Fa(new ar("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,l),e.removeContext(),e.format(a,l,t)}},ze=class extends zn{constructor(e){super("f"),this.nodeType="Float",this.value=e!=null?e:0}generateReadonly(e,t,r,i,n,s){return e.format(this.value+(this.value%1?"":".0"),i,t)}},SB=class extends Kt{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t!=null?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let s=this.value,a=s.build(e,t)+"( ",o=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],h=this.inputs[l]||this.inputs[c.name];o.push(h.build(e,e.getTypeByFormat(c.type)))}a+=o.join(", ")+" )"}return e.format(a,i,t)}},n6=class extends Kt{constructor(e,t,r=n6.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}},mn=n6;mn.ADD="+",mn.SUB="-",mn.MUL="*",mn.DIV="/";var Ht=class extends Kt{constructor(e,t=Ht.ABS,r,i){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Ht.MIX:case Ht.CLAMP:case Ht.REFRACT:case Ht.SMOOTHSTEP:case Ht.FACEFORWARD:return 3;case Ht.MIN:case Ht.MAX:case Ht.MOD:case Ht.STEP:case Ht.REFLECT:case Ht.DISTANCE:case Ht.DOT:case Ht.CROSS:case Ht.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Ht.LENGTH:case Ht.DISTANCE:case Ht.DOT:return"f";case Ht.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case Ht.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Ht.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Ht.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Ht.STEP:r=this.a.build(e,s===1?"f":l),i=this.b.build(e,l);break;case Ht.MIN:case Ht.MAX:case Ht.MOD:r=this.a.build(e,l),i=this.b.build(e,a===1?"f":l);break;case Ht.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case Ht.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let h=[];h.push(r),i&&h.push(i),n&&h.push(n);let u=this.getNumInputs(e);if(h.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${h.length}.`);return e.format(this.method+"( "+h.join(", ")+" )",c,t)}},ut=Ht;ut.RAD="radians",ut.DEG="degrees",ut.EXP="exp",ut.EXP2="exp2",ut.LOG="log",ut.LOG2="log2",ut.SQRT="sqrt",ut.INV_SQRT="inversesqrt",ut.FLOOR="floor",ut.CEIL="ceil",ut.NORMALIZE="normalize",ut.FRACT="fract",ut.SATURATE="saturate",ut.SIN="sin",ut.COS="cos",ut.TAN="tan",ut.ASIN="asin",ut.ACOS="acos",ut.ARCTAN="atan",ut.ABS="abs",ut.SIGN="sign",ut.LENGTH="length",ut.NEGATE="negate",ut.INVERT="invert",ut.MIN="min",ut.MAX="max",ut.MOD="mod",ut.STEP="step",ut.REFLECT="reflect",ut.DISTANCE="distance",ut.DOT="dot",ut.CROSS="cross",ut.POW="pow",ut.MIX="mix",ut.CLAMP="clamp",ut.REFRACT="refract",ut.SMOOTHSTEP="smoothstep",ut.FACEFORWARD="faceforward";var Uf=class extends Kt{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){var o,l,c,h;let n=new SB(Uf.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=(o=this.colorSpaceTL)!=null?o:new Fa(new ar("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=(l=this.colorSpaceTR)!=null?l:new Fa(new ar("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=(c=this.colorSpaceBL)!=null?c:new Fa(new ar("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=(h=this.colorSpaceBR)!=null?h:new Fa(new ar("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let s={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(s),this.colorSpaceTLExp=new ar(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new ar(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new ar(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new ar(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new ar("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=n,a}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new SB(Uf.Nodes.roughnessToMip,[i]),s=new ut(n,Uf.Nodes.m0,Uf.Nodes.cubeUV_maxMipLevel,ut.CLAMP),a=new ut(s,ut.FLOOR),o=new ut(s,ut.FRACT),l=this.bilinearCubeUV(e,this.value,r,a),c=this.bilinearCubeUV(e,this.value,r,new mn(a,new ze(1).setReadonly(!0),mn.ADD)),h=new ut(l,c,o,ut.MIX);return e.format(h.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},qM=Uf;qM.Nodes=function(){let e=new i6(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new Wt("float cubeUV_maxMipLevel 8.0",!0),r=new Wt("float cubeUV_minMipLevel 4.0",!0),i=new Wt("float cubeUV_maxTileSize 256.0",!0),n=new Wt("float cubeUV_minTileSize 16.0",!0),s=new De(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let a=new De(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let o=new De(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,a,t,r,i,n]);o.useKeywords=!1;let l=new Wt("float r0 1.0",!0),c=new Wt("float v0 0.339",!0),h=new Wt("float m0 -2.0",!0),u=new Wt("float r1 0.8",!0),d=new Wt("float v1 0.276",!0),p=new Wt("float m1 -1.0",!0),f=new Wt("float r4 0.4",!0),m=new Wt("float v4 0.046",!0),g=new Wt("float m4 2.0",!0),v=new Wt("float r5 0.305",!0),y=new Wt("float v5 0.016",!0),x=new Wt("float m5 3.0",!0),b=new Wt("float r6 0.21",!0),S=new Wt("float v6 0.0038",!0),w=new Wt("float m6 4.0",!0),A=[l,c,h,u,d,p,f,m,g,v,y,x,b,S,w],_=new De(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,A);return{bilinearCubeUV:o,roughnessToMip:_,m0:h,cubeUV_maxMipLevel:t}}();var Nh=class extends Kt{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e!=null?e:Nh.VIEW}getShared(){return this.scope===Nh.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let s;switch(this.scope){case Nh.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case Nh.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case Nh.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}},_n=Nh;_n.LOCAL="local",_n.WORLD="world",_n.VIEW="view",_n.NORMAL="normal";bn.addKeyword("viewNormal",function(){return new _n(_n.VIEW)});bn.addKeyword("localNormal",function(){return new _n(_n.NORMAL)});bn.addKeyword("worldNormal",function(){return new _n(_n.WORLD)});var wo=class extends Kt{constructor(e){super("v3"),this.nodeType="Position",this.scope=e!=null?e:wo.LOCAL}getType(){switch(this.scope){case wo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case wo.LOCAL:case wo.WORLD:return!1}return!0}generate(e,t,r,i,n){let s;switch(this.scope){case wo.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case wo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case wo.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case wo.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}},ea=wo;ea.LOCAL="local",ea.WORLD="world",ea.VIEW="view",ea.PROJECTION="projection";bn.addKeyword("position",function(){return new ea});bn.addKeyword("worldPosition",function(){return new ea(ea.WORLD)});bn.addKeyword("viewPosition",function(){return new ea(ea.VIEW)});var Ma=class extends Kt{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e!=null?e:Ma.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Ma.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case Ma.VECTOR:{let n=new _n(_n.VIEW),s=e.context.roughness,a=n.build(e,"v3"),o=new ea(ea.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,c=`reflect( -normalize( ${o} ), ${a} )`;l&&(c=`normalize( mix( ${c}, ${a}, ${l} * ${l} ) )`);let h=`inverseTransformDirection( ${c}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${h};`),i="reflectVec"):i=h;break}case Ma.CUBE:{let n=new Ma(Ma.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case Ma.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new Ma(Ma.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),i="reflectSphereVec"):i=n;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},Dd=Ma;Dd.CUBE="cube",Dd.SPHERE="sphere",Dd.VECTOR="vector";var jSe=class extends Kt{constructor(e=new Oo,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new qM(this.value,t!=null?t:new Dd(Dd.VECTOR),r),this.irradianceNode=new qM(this.value,new _n(_n.WORLD),new ze(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},VSe=class extends zn{constructor(e=new UC,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t!=null?t:new Dd,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l,c;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),i=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s;n?s="texCubeBias( "+r+", "+i+", "+n+" )":s="texCube( "+r+", "+i+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},o=this.getType(e);return e.addContext(a),this.colorSpace=(c=this.colorSpace)!=null?c:new Fa(new ar("",o)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,o),e.removeContext(),e.format(s,o,t)}},GSe=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,HSe=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,WSe=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,qSe=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,_B=["x","y","z","w"],$Se=["float","vec2","vec3","vec4"],XSe={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},YSe={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},QSe=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let s=0;s<i.length;s++)i[s].src&&(n+=i[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(GSe),this.addFragmentParsCode(HSe),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(WSe),this.addFragmentFinalCode(qSe)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e!=null?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t!=null?t:this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t!=null?t:this.shader]+=e+`
`}clearNodeCode(e){e=e!=null?e:this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t!=null?t:this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t!=null?t:this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",s=""){let a=this.getVars(i),o=a[e];if(!o){let l=a.length;o={name:r||"node"+n+l+(s?"_"+s:""),type:t},a.push(o),a[e]=o}return o}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t!=null?t:"";let r="";for(let i=0,n=e.length;i<n;++i){let s=e[i],a=s.type,o=s.name,l=s.size,c=this.getFormatByType(a);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?r+=t+" "+c.substring(0,c.length-2)+" "+o+`[${l}];
`:r+=t+" "+c+" "+o+`;
`}return r}getVars(e){return this.inputs.vars[e!=null?e:this.shader]}getNodeData(e){let t=e instanceof Mc?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,s){if(t.includes("[]")){let a=this.inputs.arrayUniforms,o=a.list.length,l=new bB({type:t,size:r.size,name:i||"nodeUA"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,o=a.list.length,l=new bB({type:t,name:i||"nodeU"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var s;let i;if(e=typeof e=="string"?bn.get(e):e,this.context.include===!1)return e.name;e instanceof De?i=this.includes.functions:e instanceof Wt?i=this.includes.consts:e instanceof i6&&(i=this.includes.structs);let n=i[this.shader]=i[this.shader]||[];if(e){let a=n[e.name];if(a||(a=n[e.name]={node:e,deps:[]},n.push(a),a.src=e.build(this,"source")),e instanceof De&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(s=e.includes)==null?void 0:s.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return r&&(a.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return $Se[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case Du:case Ou:return new VSe(r);case Vg:return new jSe(new Oo(r));default:return new Oo(r)}else{if(r.isVector2)return new _i(r);if(r.isVector3)return new gs(r);if(r.isVector4)return new Mo(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return XSe[e]||e}getFormatByType(e){return YSe[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return _B[e]}getIndexByElement(e){return _B.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Qa,t===Qa&&this.context.gamma&&(t=dt),t}},Cr=class extends zn{constructor(e=0,t,r,i){super("c"),this.nodeType="Color",this.value=e instanceof On?e:new On(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let a=e.getNodeData(r),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},Jt=class extends zn{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e!=null?e:0)}generateReadonly(e,t,r,i,n,s){return e.format(this.value.toString(),i,t)}},en=class extends zn{constructor(e){super("b"),this.nodeType="Bool",this.value=e!=null?e:!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}},$c=class extends zn{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},jT=class extends zn{},KSe=class extends jT{constructor(e){super("v3"),this.image=e,this._value=new C}get value(){var e,t;return this._value.x=this.image.isVideo?(e=this.image.img.videoWidth)!=null?e:0:this.image.img.width,this._value.y=this.image.isVideo?(t=this.image.img.videoHeight)!=null?t:0:this.image.img.height,this._value}},$M=class extends jT{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},s6=class extends zn{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e!=null?e:new pi}generateReadonly(e,t,r,i,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},to=class extends zn{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e!=null?e:new we}generateReadonly(e,t,r,i,n,s){return e.format("mat4("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function AB(e,t,r){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0)}var ZSe=class extends s6{constructor(e,t){super(new pi),this.repeat=e,this.offset=t,AB(this.value,e,t)}updateMatrix(){AB(this.value,this.repeat,this.offset)}},Xc=class extends zn{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof pt?new Array(e).fill(t):new Array(e).fill(new pt(0))}},MB=class extends Kt{constructor(e,t,r,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},a6=class extends Kt{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(a6.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},XM=a6;XM.Nodes=function(){return{customColor:new De(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var o6=class extends Kt{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(o6.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},l6=o6;l6.Nodes=function(){return{customNormal:new De(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var jf=class extends Kt{constructor(e,t,r,i,n,s,a,o,l,c,h,u){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.side=s,this.size=a,this.blending=o,this.mat=l,this.isMask=u,this.alpha=c,this.mode=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=e.include(jf.Nodes.cylindrical);break;case 2:i=e.include(jf.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=["zy","xz","xy"][this.axis.value],o=new De(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${a})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);i=e.include(o);break;case 4:i=e.include(jf.Nodes.triplanar);break;default:i=e.include(jf.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let n=[];if(n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.projection.value===4){let s=`${r}_writeUvs`,a=s+"0",o=s+"1",l=s+"2",c=`${r}_triplanarWeights`;e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(c,"vec3"),n.push(a),n.push(o),n.push(l),n.push(c)}else{let s=`${r}_writeUvs`;e.addFragmentVariable(s,"vec2"),n.push(s)}return e.format(i+"("+n.join(",")+")",this.getType(e),t)}},VT=jf;VT.Nodes=function(){let e=new De(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new De(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new De(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),i=new De(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:i}}();var Vf=class extends Kt{constructor(e,t,r,i,n,s,a,o,l,c,h,u){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=s,this.origin=a,this.direction=o,this.colors=l,this.steps=c,this.isMask=u,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new De(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[Vf.Nodes.vectorLinearWorldSpaceDepth,Vf.Nodes.vectorLinearObjectSpaceDepth,Vf.Nodes.vectorSphericalObjectSpaceDepth,Vf.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(i),s=[];return s.push(this.near.build(e,"f")),s.push(this.far.build(e,"f")),s.push(this.origin.build(e,"v3")),s.push(this.direction.build(e,"v3")),s.push(this.colors.build(e,"v4[]")),s.push(this.steps.build(e,"f[]")),s.push(this.isMask.build(e,"b")),s.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),s.push(this.alpha.build(e,"f")),s.push(this.calpha),e.format(n+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},c6=Vf;c6.Nodes=function(){let e=new De(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new De(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new De(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new De(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:i}}();var JSe=class extends Kt{constructor(e,t,r,i,n,s,a,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.isMask=o,this.alpha=s,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new De(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),i=e.include(r),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},u6=class extends Kt{constructor(e,t,r,i,n,s,a,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=s,this.angle=a,this.isMask=l,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(u6.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},h6=u6;h6.Nodes=function(){return{gradient:new De(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var d6=class extends Kt{constructor(e,t,r,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(d6.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},p6=d6;p6.Nodes=function(){return{matcap:new De(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var GT=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(GT||{}),yn=function(){let e=new De(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new De(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new Wt("float F3 0.3333333"),t.keywords.G3=new Wt("float G3 0.1666667");let r=new De(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),i=new De("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new De("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new De(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,n]),a=new De("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),o=new De("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[a]),l=new De(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[o]),c=new De(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new Wt(`int NUM_OCTAVES ${5}`);let h=new De("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new De(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,n,h]),d=new De(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),p=new De(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),f=new De(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),m=new De(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),g=new De(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),v=new De(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),y=new De(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[d,p,f,m,g,v]);return{simplex:t,simplexFractal:r,simplexAshima:s,fbm:c,perlin:u,voronoi:y}}(),f6=class extends Kt{constructor(e,t,r,i,n,s,a,o,l,c,h,u,d,p,f,m,g,v,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=s,this.colorA=a,this.colorB=o,this.colorC=l,this.colorD=c,this.noiseType=u,this.voronoiStyle=p,this.highCut=f,this.lowCut=m,this.smoothness=g,this.seed=v,this.quality=y,this.isMask=d,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(GT)[this.noiseType.value],a=s=="voronoi"?`
		float v = ${s}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${s}(st),
					   ${s}(st + vec3(1.0)),
					   ${s}(st + vec3(1.0)));
		vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${s}(st * q));
		float f = ${s}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,o=new De(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${a}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[yn.simplex,yn.simplexFractal,yn.simplexAshima,yn.fbm,yn.perlin,yn.voronoi]),l=e.include(o),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.voronoiStyle.build(e,"i")),c.push(this.highCut.build(e,"f")),c.push(this.lowCut.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.seed.build(e,"f")),c.push(this.quality.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}};f6.numOctaves=5;var m6=class extends Kt{constructor(e,t,r,i,n,s,a,o,l,c,h,u,d,p,f,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=i,this.contourThreshold=n,this.outlineThreshold=s,this.contourFrequency=a,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=c,this.compensation=h,this.resolution=u,this.normalMap=d,this.depthMap=p,this.pixelRatio=f,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),s=this.compensation.build(e,"b"),a=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(s,"uniform bool"),e.addVertexParsVariable(a,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${s}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${n} * (${i} / 2.0) * ${r}_clipPosition.w * 2.0 * ${a};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(m6.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},g6=m6;g6.Nodes=function(){let e=new De(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new De(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var So=class extends Kt{constructor(e,t,r,i,n,s,a,o,l,c,h,u,d,p,f,m,g,v){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=i,this.offset=n,this.colorA=s,this.colorB=a,this.frequency=o,this.size=l,this.variation=c,this.smoothness=h,this.zigzag=u,this.rotation=d,this.vertical=p,this.horizontal=f,this.sides=m,this.isMask=v,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let i=`g${this.uuid.toString().replace(/-/g,"")}`,n=new De(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),s=new De(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),a="";if(this.projection.value===4){let h=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;a=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${h};
				float d1 = ${u};
				float d2 = ${d};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let h=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u="";this.axis.value===0?u=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?u=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,u=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let d="";switch(this.projection.value){case 0:d="custom_uv = vUv.st;";break;case 1:break;case 2:d=`
							vec3 p = position;
							${u}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}a=`
				vec2 custom_uv;
				${d}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${h};
				`}let o=new De(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${a}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[s,n,So.DrawFunctions.circle,So.DrawFunctions.ring,So.DrawFunctions.polygon,So.DrawFunctions.cross,So.DrawFunctions.diamond,So.DrawFunctions.checkerboard,So.DrawFunctions.line,So.DrawFunctions.wave]),l=e.include(o),c=[];return c.push("normal"),c.push(this.blending.build(e,"f")),c.push(this.style.build(e,"i")),c.push(this.offset.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.frequency.build(e,"v2")),c.push(this.size.build(e,"f")),c.push(this.variation.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.zigzag.build(e,"f")),c.push(this.rotation.build(e,"f")),c.push(this.vertical.build(e,"v2")),c.push(this.horizontal.build(e,"v2")),c.push(this.sides.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},v6=So;v6.DrawFunctions=function(){let e=new De(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new De(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new De(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),i=new De(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new De(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),s=new De(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),a=new De(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),o=new De(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new De(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),c=new De(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:i,polygon:n,cross:s,diamond:a,checkerboard:o,line:l,wave:c}}();var y6=class extends Kt{constructor(e,t,r,i,n,s,a,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=s,this.isMask=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(y6.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},x6=y6;x6.Nodes=function(){let e=new De(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[yn.simplex]);return{rainbow:new De(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var b6=class extends Kt{constructor(e,t,r,i,n,s,a,o,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=i,this.isWorldSpace=n,this.noiseStrength=s,this.noiseScale=a,this.shadowColor=o,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(b6.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},w6=b6;w6.Nodes=function(){let e=new De(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new De(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new De(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),i=new De(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new De(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new De(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[yn.simplex,e,r,n])}}();var e_e=function(){return{textureBicubic:new De(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function t_e(e,t){return e>=t?new $(t/e,1):new $(1,e/t)}var S6=class extends Kt{constructor(e,t,r,i,n,s,a,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Je.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(S6.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},_6=S6;_6.Nodes=function(){let e=new De(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new De(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new De(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),i=new De(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[e_e.textureBicubic,r,e]),n=new De(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[i,t]);return{transmission:new De(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var YM=(e=>(e.NOISE="noise",e.MAP="map",e))(YM||{}),A6=class extends Kt{constructor(e,t,r,i,n,s,a,o,l,c,h){super("v3"),this.displacementTypeIndex=new Jt(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(YM)[this.displacementTypeIndex.value]==="map"&&(this.mat=new s6(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=c,this.noiseFunctionIndex=h,this.voronoiStyle=i,this.smoothness=n,this.seed=s,this.highCut=a,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(YM)[this.displacementTypeIndex.value]){case"map":{r=e.include(A6.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(GT)[this.noiseFunctionIndex.value],s=new De(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,o=new De(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${a}
						}`,[yn.simplex,yn.simplexFractal,yn.simplexAshima,yn.fbm,yn.perlin,yn.voronoi]),l=new De(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);r=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},M6=A6;M6.Nodes=function(){let e=new De(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new De(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new De(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var Je={normalRenderTarget:new Oo,normalRenderTargetDepth:new Oo,transmissionRenderTarget:new Oo,aspectRatio:new _i,transmissionSize:new _i(2048,2048),transmissionRenderTargetDepth:new Oo,aoRenderTarget:new Oo,aoEnabled:new en,pixelRatioNode:new ze(1),resolution:new _i,penumbraSize:new $c(5,.5),frameIndex:new Jt(0),transmissionLod:new Jt(2)};for(let e of Object.values(Je))e.isRenderGlobal=!0;var E6=class extends Mc{constructor(){super("basic"),this.nodeType="Basic",this.color=new Cr(zs),this.shadingAlpha=new ze(1),this.shadingBlend=new Jt(0),this.previousModelViewMatrix=new to,this.previouseProjectionMatrix=new to}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({resolution:Je.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(xp.merge([Pe.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Cr(zs)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let a=["#include <normal_fragment_begin>",r.code];i&&a.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),s?a.push(s.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${r.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),i?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${o} );`):a.push("gl_FragColor = vec4("+r.result+", 1.0 );"),n&&a.push(`gl_FragColor.a *= ${n.result};`),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join(`
`)}return t}},r_e=class extends Mc{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Cr(zs),this.emissive=new Cr(0),this.emissiveIntensity=new ze(1),this.previousModelViewMatrix=new to,this.previouseProjectionMatrix=new to,this.shadingAlpha=new ze(1),this.shadingBlend=new Jt(0),this.occlusion=new en(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({resolution:Je.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(xp.merge([Pe.fog,Pe.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),i.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Je.penumbraSize}),e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({aoMap:Je.aoRenderTarget}),e.mergeUniform({aoEnabled:Je.aoEnabled}),this.color===void 0&&(this.color=new Cr(zs)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.occlusion.flow(e,"b",{slot:"occlusion"}),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];u.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&u.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&u.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),u.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${d}, ${o.result} );

					outgoingLight *= ao;
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&u.push(`gl_FragColor.a *= ${h.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},lp=function(){let e=new De(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new De(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),i_e=class extends Mc{constructor(){super("phong"),this.nodeType="Phong",this.color=new Cr(zs),this.specular=new Cr(1118481),this.shininess=new ze(30),this.previousModelViewMatrix=new to,this.previouseProjectionMatrix=new to,this.shadingAlpha=new ze(1),this.shadingBlend=new Jt(0),this.occlusion=new en(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({resolution:Je.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(xp.merge([Pe.fog,Pe.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Je.penumbraSize}),e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({aoMap:Je.aoRenderTarget}),e.mergeUniform({aoEnabled:Je.aoEnabled}),this.color===void 0&&(this.color=new Cr(zs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(lp.dHdxy),e.include(lp.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",g="";this.bumpMap.projection.value===4?g=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${p.result}, uv0, ${m});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${p.result}, uv1, ${m});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${p.result}, uv2, ${m});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:g=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${m});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,u.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${g}
					`)}u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),c&&u.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${d}, ${o.result} );
					
					outgoingLight *= ao;
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result});`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&u.push(`gl_FragColor.a *= ${h.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},n_e=class extends Mc{constructor(){super("standard"),this.nodeType="Standard",this.color=new Cr(zs),this.roughness=new ze(.3),this.metalness=new ze(0),this.reflectivity=new ze(.5),this.previousModelViewMatrix=new to,this.previouseProjectionMatrix=new to,this.shadingAlpha=new ze(1),this.shadingBlend=new Jt(0),this.occlusion=new en(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({resolution:Je.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(xp.merge([Pe.fog,Pe.lights])),Pe.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Je.penumbraSize}),e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({aoMap:Je.aoRenderTarget}),e.mergeUniform({aoEnabled:Je.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new Cr(zs)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:r}),s=this.roughness.flow(e,"f"),a=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let p=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(lp.dHdxy),e.include(lp.perturbNormalArb);let m=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";this.bumpMap.projection.value===4?y=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${m.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${m.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${m.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:y=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${m.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${y}
					`)}if(p.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"	float metalnessFactor = "+a.result+";"),this.roughnessMap){let m=this.roughnessMap.texture.flow(e,"t"),g=this.roughnessMap.flow(e,"v3"),v="";this.roughnessMap.projection.value===4?v=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${m.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${m.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${m.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${s.result};
					`:v=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${m.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${s.result};
					`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};

					const float roughnessScale = 1.0;

					${v}
				`)}else p.push(s.code,"	float roughnessFactor = "+s.result+";");h&&p.push(h.code,"#ifdef ALPHATEST","	if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?p.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let f="1.0";this.mask&&(this.mask.analyze(e),f=`luminance(${this.mask.flow(e,"v3").result})`),p.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${f} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${f}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),c&&p.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),h?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&p.push(`gl_FragColor.a *= ${u.result};`),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join(`
`)}return t}},s_e=class extends Mc{constructor(){super("toon"),this.nodeType="Toon",this.color=new Cr(zs),this.specular=new Cr(1118481),this.shininess=new ze(30),this.previousModelViewMatrix=new to,this.previouseProjectionMatrix=new to,this.shadingAlpha=new ze(1),this.shadingBlend=new Jt(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({resolution:Je.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(xp.merge([Pe.fog,Pe.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Je.penumbraSize}),e.mergeUniform({frameIndex:Je.frameIndex}),e.mergeUniform({aoMap:Je.aoRenderTarget}),e.mergeUniform({aoEnabled:Je.aoEnabled}),this.color===void 0&&(this.color=new Cr(zs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(lp.dHdxy),e.include(lp.perturbNormalArb);let d=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),f=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${d.result}, uv0, ${f});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${d.result}, uv1, ${f});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${d.result}, uv2, ${f});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${d.result}, bumpMapCachedUv, ${f});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,h.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${p.result};
					${m}
					`)}h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let u="1.0";this.mask&&(this.mask.analyze(e),u=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${u} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${u}, ${a.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&h.push(`gl_FragColor.a *= ${c.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},a_e=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},o_e=class extends a_e{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},BS;function l_e(e){return typeof e=="string"?e:(BS||(BS=new o_e),BS.load(e))}var c_e=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},u_e=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},C6=class extends c_e{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type==="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let i=[1e3,1001,1002];for(let n of i){let s=this[n];s&&(s.image=this.img,s.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let i;await new Promise(n=>{r.onloadend=s=>{var a;i=(a=s.target)==null?void 0:a.result,n(null)}}),this.img.src=i}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=l_e(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let r;return this.isVideo?r=new Mhe(this.img,void 0,e,e):r=new Jr(this.img,void 0,e,e),this.loaded&&(r.needsUpdate=!0),this[e]=r,r}}disposeTextures(){var e,t,r;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},cu=class extends C6{};function rn(e,t){return t.color(e)}function h_e(e,t){switch(e.type){case"fresnel":return f_e(e,t);case"gradient":return m_e(e);case"depth":return g_e(e);case"normal":return v_e(e);case"noise":return y_e(e,t);case"rainbow":return x_e(e);case"toon":return b_e(e,t);case"outline":return w_e(e,t);case"transmission":return S_e(e);case"color":return p_e(e,t);case"pattern":return __e(e,t)}}function d_e(e){return{type:e.type}}function ha(e){let{alpha:t,mode:r,isMask:i}=e;return{...d_e(e),alpha:t,mode:r,isMask:i}}function p_e(e,t){return{...ha(e),color:rn(e.color,t)}}function f_e(e,t){let{bias:r,scale:i,intensity:n,factor:s,color:a,isMask:o}=e;return{...ha(e),color:rn(a,t),bias:r,scale:i,intensity:n,factor:s}}function m_e(e){let{gradientType:t,smooth:r,colors:i,steps:n,angle:s,offset:a,morph:o}=e;return{...ha(e),gradientType:t,smooth:r,colors:i.map(l=>new pt(l[0],l[1],l[2],l[3])),num:i.length,steps:n,offset:new $(...a),morph:new $(...o),angle:s}}function g_e(e){let{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:a,direction:o,colors:l,steps:c,smooth:h}=e;return{...ha(e),gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:new C(...a),direction:o?new C(...o):new C(1,0,0),colors:l.map(u=>u!==void 0?new pt(u[0],u[1],u[2],u[3]):new pt(0,0,0,0)),steps:c.slice(0,l.length),smooth:h}}function v_e(e){let{cnormal:t}=e;return{...ha(e),cnormal:new C(t[0],t[1],t[2])}}function y_e(e,t){return{...ha(e),scale:e.scale,move:e.move,fA:new $(...e.fA),fB:new $(...e.fB),size:new C(...e.size),distortion:new $(...e.distortion),colorA:rn(e.colorA,t),colorB:rn(e.colorB,t),colorC:rn(e.colorC,t),colorD:rn(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function x_e(e){return{...ha(e),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new C(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new C(...e.offset)}}function b_e(e,t){return{...ha(e),positioning:e.positioning,colors:e.colors.map(r=>new pt(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new C(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:rn(e.shadowColor,t),offset:new C(...e.offset)}}function w_e(e,t){return{...ha(e),outlineColor:rn(e.outlineColor,t),contourColor:rn(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new C(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function S_e(e,t){return{...ha(e),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function __e(e,t){return{...ha(e),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new $(...e.offset),colorA:rn(e.colorA,t),colorB:rn(e.colorB,t),frequency:new $(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new $(...e.vertical),horizontal:new $(...e.horizontal),sides:e.sides}}var X1=class extends On{},T6={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},P6={depth:["colors"]};function A_e(e,t,r){var s,a;if(t==="isMask")return!0;let i=T6[e.type],n=P6[e.type];if(n!==void 0){let o=e.color;if(n.includes(t)){let l=(a=(s=o[t])==null?void 0:s.value)==null?void 0:a.length;if(l!==void 0&&l!==r.length)return!0}}return i!==void 0?i.includes(t):!1}function D6(e,t,r){let i=r.uniforms[`f${r.id}_texture`];if(!i)return!1;let n=!1,s=e;if("image"in s){let a=s.image,o=t.image(a),l=i;l.image instanceof cu||l.image.deref(),l.image=o}if("video"in s){let a=s.video,o=t.video(a),l=i;l.image instanceof cu||l.image.deref(),l.image=o}if("wrapping"in s){let a=i;a.wrap=s.wrapping}if("repeat"in s||"offset"in s){let a="mat",o=r.uniforms[`f${r.id}_${a}`];"repeat"in s&&(o.repeat=s.repeat),"offset"in s&&(o.offset=s.offset),o.updateMatrix()}return n}function M_e(e,t,r,i){let n=!1;for(let[s,a]of Object.entries(e)){if(s==="bumpMap"||s==="roughnessMap"){n=!0;continue}if(!s||a===void 0)continue;if(L6(s,r,i)){s==="visible"&&r.type==="light"&&(n=!0);continue}r.visible=i.visible;let o=r.uniforms[`f${r.id}_${s}`];if(!!o&&!(o instanceof jT))switch(n=n||A_e(r,s,a),o.constructor){case Cr:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof X1?o.value=new On(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case Mo:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof X1?o.value=new On(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case _i:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]);break}case gs:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case Oo:{D6(a,t,r);break}case Xc:{o.value=a.map(l=>new pt(...l));break}default:{o.value=a;break}}}return n}var wu=class{constructor(e,t,r,i){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let n in i)this.uniforms[`f${this.id}_${n}`]=i[n];for(let n in r)L6(n,this,r)}get type(){return this.data.type}static create(e,t,r,i){var n,s,a,o,l,c,h,u,d,p,f,m,g,v,y,x,b,S,w,A;if(r.type==="light")return Eo.createLigherLayer(e,t,r,i);if(r.type==="texture"||r.type==="video"){let _=r.type==="texture"?i.image(r.texture.image):i.video(r.texture.video),M=new $M(_,r.texture.wrapping),E=new KSe(_),T=new ZSe(r.texture.repeat,r.texture.offset),P=new ze(r.crop?1:0),D=new Jt((n=r.projection)!=null?n:0),L=new Jt((s=["x","y","z"].indexOf(r.axis))!=null?s:0),R=new Jt((a=r.side)!=null?a:0),V=new _i(r.size?new $(r.size[0],r.size[1]):new $(100,100)),F=new ze((o=r.blending)!=null?o:0),O=new ze((l=r.alpha)!=null?l:1),k=new Jt((c=r.mode)!=null?c:0),z=new en((h=r.isMask)!=null?h:!1),N=new VT(M,E,P,D,L,R,V,F,T,O,k,z),j=new ar(N.calpha,"f");return new Sr(e,t,r,{texture:M,textureSize:E,crop:P,projection:D,axis:L,side:R,size:V,blending:F,mat:T,alpha:O,mode:k,isMask:z},N,k,j,z)}else if(r.type==="matcap"){let _=i.image(r.texture.image),M=new $M(_,r.texture.wrapping),E=new ze((u=r.alpha)!=null?u:1),T=new Jt((d=r.mode)!=null?d:0),P=new en((p=r.isMask)!=null?p:!1),D=new p6(M,E,T,P),L=new ar(D.calpha,"f");return new Sr(e,t,r,{texture:M,alpha:E,mode:T,isMask:P},D,T,L,P)}else if(r.type==="displace")if(r.displacementType==="noise"){let _=new gs(new C(...r.offset)),M=new ze((f=r.scale)!=null?f:10),E=new ze((m=r.intensity)!=null?m:8),T=new ze((g=r.movement)!=null?g:1),P=new Jt((v=r.noiseType)!=null?v:0),D=new Jt((y=r.voronoiStyle)!=null?y:0),L=new ze((x=r.smoothness)!=null?x:.5),R=new ze((b=r.seed)!=null?b:0),V=new ze((S=r.highCut)!=null?S:1),F=new ze((w=r.lowCut)!=null?w:0),O=new Jt((A=r.quality)!=null?A:1),k=new M6(E,T,_,D,L,R,V,F,O,M,P);return new O6(e,t,r,{offset:_,scale:M,intensity:E,movement:T,noiseType:P,voronoiStyle:D,smoothness:L,seed:R,highCut:V,lowCut:F,quality:O},k)}else throw new Error;else return T_e(e,t,r,i)}updateByOp(e,t,r){let i=e;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props?(r.scene.markNeedsUpdateRendererDirty(),!0):M_e(i.props,r.shared,this,t)}else if(i.path[0]==="texture")return"texture"in t||"video"in t?D6(i.props,r.shared,this):!0;return!1}dispose(){if(E_e(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof cu||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},Sr=class extends wu{constructor(e,t,r,i,n,s,a,o){super(e,t,r,i),this.params=i,this.color=n,this.mode=s,this.alpha=a,this.isMask=o}},O6=class extends wu{constructor(e,t,r,i,n){super(e,t,r,i),this.position=n}},Eo=class extends wu{constructor(e,t,r,i,n){super(e,t,r,n),this.node=i}static createLigherLayer(e,t,r,i){var h,u,d,p,f,m,g,v,y,x,b;let n,s=new ze(r.alpha),a=new Jt(r.mode),o=new ze(r.bumpMapIntensity),l=new ze(r.alphaOverride),c;if(!r.visible)n=new E6,c={};else if(r.category==="lambert"){n=new r_e;let S=new Cr((h=i.color(r.emissive))!=null?h:0),w=new en((u=r.occlusion)!=null?u:!0);c={emissive:S,occlusion:w},n.emissive=S,n.occlusion=w}else if(r.category==="toon"){n=new s_e;let S=new ze((d=r.shininess)!=null?d:30),w=new Cr((p=i.color(r.specular))!=null?p:1118481);c={shininess:S,specular:w},n.shininess=S,n.specular=w}else if(r.category==="physical"){n=new n_e;let S=new ze((f=r.roughness)!=null?f:.3),w=new ze((m=r.metalness)!=null?m:0),A=new ze((g=r.reflectivity)!=null?g:.5),_=new en((v=r.occlusion)!=null?v:!0);c={roughness:S,metalness:w,reflectivity:A,occlusion:_},n.roughness=S,n.metalness=w,n.reflectivity=A,n.occlusion=_}else{n=new i_e;let S=new ze((y=r.shininess)!=null?y:30),w=new Cr(r.specular!==void 0&&(x=i.color(r.specular))!=null?x:1118481),A=new en((b=r.occlusion)!=null?b:!0);c={shininess:S,specular:w,occlusion:A},n.shininess=S,n.specular=w,n.occlusion=A}return n.alpha=new ze(1),n.shadingAlpha=s,n.shadingBlend=a,n.bumpMapIntensity=o,n.alphaOverride=l,c.alpha=n.shadingAlpha,c.mode=n.shadingBlend,c.bumpMapIntensity=n.bumpMapIntensity,c.alphaOverride=n.alphaOverride,new Eo(e,t,r,n,c)}get category(){return this.node.category}};function E_e(e){let t=e instanceof wu?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function ds(e){var t,r,i;return{alpha:new ze((t=e.alpha)!=null?t:1),mode:new Jt((r=e.mode)!=null?r:0),isMask:new en((i=e.isMask)!=null?i:!1)}}function C_e(e,t,r,i){var n,s,a,o,l,c,h,u,d,p,f,m,g,v,y,x,b,S,w,A,_,M,E,T,P,D,L,R,V,F,O,k,z,N,j,Y,q,X,G,te,Z,Q,re,ae,ce,pe,Te,xe,Ie,Oe,Se,be,Re,Be,U,I,ne,ge,ve,Ae,Ne,Le,J,Fe,We,Ge,Ye,Xe,wt,Ot,er,K,he;switch(e.type){case"color":{let oe=new Cr((n=i.color)!=null?n:zs),de=ds(i),_e=new XM(oe,de.alpha),ke=new ar(_e.calpha,"f");return new Sr(t,r,e,{color:oe,...de},_e,de.mode,ke,de.isMask)}case"fresnel":{let oe=new Cr((s=i.color)!=null?s:16777215),de=new ze((a=i.bias)!=null?a:.1),_e=new ze((o=i.scale)!=null?o:1),ke=new ze((l=i.intensity)!=null?l:2),at=new ze((c=i.factor)!=null?c:1),ot=ds(i),bt=new JSe(oe,de,_e,ke,at,ot.alpha,ot.mode,ot.isMask),Qe=new ar(bt.calpha,"f");return new Sr(t,r,e,{color:oe,bias:de,scale:_e,intensity:ke,factor:at,...ot},bt,ot.mode,Qe,ot.isMask)}case"rainbow":{let oe=new ze((h=i.filmThickness)!=null?h:30),de=new ze((u=i.movement)!=null?u:0),_e=new gs((d=i.wavelengths)!=null?d:new C(0,0,0)),ke=new ze((p=i.noiseStrength)!=null?p:0),at=new ze((f=i.noiseScale)!=null?f:1),ot=new gs((m=i.offset)!=null?m:new C(0,0,0)),bt=ds(i),Qe=new x6(oe,de,_e,ke,at,ot,bt.alpha,bt.isMask),At=new ar(Qe.calpha,"f");return new Sr(t,r,e,{filmThickness:oe,movement:de,wavelengths:_e,noiseStrength:ke,noiseScale:at,offset:ot,...bt},Qe,bt.mode,At,bt.isMask)}case"transmission":{let oe=new ze((g=i.thickness)!=null?g:10),de=new ze((v=i.ior)!=null?v:1.5),_e=new ze((y=i.roughness)!=null?y:.5),ke=Je.transmissionSize,at=Je.transmissionRenderTarget,ot=Je.transmissionRenderTargetDepth,bt=window.innerWidth,Qe=window.innerHeight,At=bt>=Qe?new _i(Qe/bt,1):new _i(1,bt/Qe),yt=ds(i),cr=new _6(oe,de,_e,ke,at,ot,At,yt.alpha),ni=new ar(cr.calpha,"f");return new Sr(t,r,e,{thickness:oe,ior:de,roughness:_e,aspectRatio:At,...yt},cr,yt.mode,ni,yt.isMask)}case"toon":{let oe=new Jt((x=i.positioning)!=null?x:0),de;i.colors?de=new Xc(i.colors.length,i.colors):(de=new Xc(10,new pt(0,0,0,1)),de.value[1]=new pt(1,1,1,1));let _e;i.steps?_e=new $c(i.steps.length,i.steps):(_e=new $c(10,1),_e.value[0]=0);let ke=new gs((b=i.source)!=null?b:new C(0,0,0)),at=new en((S=i.isWorldSpace)!=null?S:!0),ot=new ze((w=i.noiseStrength)!=null?w:0),bt=new ze((A=i.noiseScale)!=null?A:1),Qe=new Mo(i.shadowColor),At=new gs((_=i.offset)!=null?_:new C(0,0,0)),yt=ds(i),cr=new w6(oe,de,_e,ke,at,ot,bt,Qe,At,yt.alpha),ni=new ar(cr.calpha,"f");return new Sr(t,r,e,{positioning:oe,colors:de,steps:_e,source:ke,isWorldSpace:at,noiseStrength:ot,noiseScale:bt,shadowColor:Qe,offset:At,...yt},cr,yt.mode,ni,yt.isMask)}case"outline":{let oe=new Cr((M=i.outlineColor)!=null?M:16777215),de=new Cr((E=i.contourColor)!=null?E:16777215),_e=new ze((T=i.outlineWidth)!=null?T:.1),ke=new ze((P=i.contourWidth)!=null?P:.1),at=new ze((D=i.outlineThreshold)!=null?D:.1),ot=new ze((L=i.contourThreshold)!=null?L:.1),bt=new ze((R=i.outlineSmoothing)!=null?R:.1),Qe=new ze((V=i.contourFrequency)!=null?V:.1),At=new gs((F=i.contourDirection)!=null?F:new C(0,1,0)),yt=new en((O=i.positionalLines)!=null?O:!1),cr=new en((k=i.compensation)!=null?k:!0),ni=Je.normalRenderTarget,Nn=Je.normalRenderTargetDepth,Ns=Je.pixelRatioNode,B=Je.resolution,ee=ds(i),ue=new g6(oe,de,_e,ke,at,ot,bt,Qe,At,yt,cr,B,ni,Nn,Ns,ee.alpha),ie=new ar(ue.calpha,"f");return new Sr(t,r,e,{outlineColor:oe,contourColor:de,outlineWidth:_e,contourWidth:ke,outlineThreshold:at,contourThreshold:ot,outlineSmoothing:bt,contourFrequency:Qe,contourDirection:At,positionalLines:yt,compensation:cr,...ee},ue,ee.mode,ie,ee.isMask)}case"depth":{let oe=new Jt((z=i.gradientType)!=null?z:0),de=new en((N=i.smooth)!=null?N:!1),_e=new ze((j=i.near)!=null?j:50),ke=new ze((Y=i.far)!=null?Y:200),at=new ze((q=i.isVector)!=null?q:1),ot=new ze((X=i.isWorldSpace)!=null?X:0),bt=new gs((G=i.origin)!=null?G:new C),Qe=new gs((te=i.direction)!=null?te:new C),At;i.colors?At=new Xc(i.colors.length,i.colors):(At=new Xc(2,new pt(0,0,0,1)),At.value[1]=new pt(1,1,1,1));let yt;i.steps?yt=new $c(i.steps.length,i.steps):(yt=new $c(2,1),yt.value[0]=0);let cr=ds(i),ni=new c6(oe,de,_e,ke,at,ot,bt,Qe,At,yt,cr.alpha,cr.isMask),Nn=new ar(ni.calpha,"f");return new Sr(t,r,e,{gradientType:oe,smooth:de,near:_e,far:ke,isVector:at,isWorldSpace:ot,origin:bt,direction:Qe,colors:At,steps:yt,...cr},ni,cr.mode,Nn,cr.isMask)}case"noise":{let oe=new ze((Z=i.scale)!=null?Z:1),de=new gs((Q=i.size)!=null?Q:new C(100,100,100)),_e=new ze((re=i.move)!=null?re:1),ke=new _i((ae=i.fA)!=null?ae:new $(1.7,9.2)),at=new _i((ce=i.fB)!=null?ce:new $(8.3,2.8)),ot=new _i((pe=i.distortion)!=null?pe:new $(1,1)),bt=new Mo(i.colorA),Qe=new Mo(i.colorB),At=new Mo(i.colorC),yt=new Mo(i.colorD),cr=new Jt((Te=i.noiseType)!=null?Te:0),ni=new Jt((xe=i.voronoiStyle)!=null?xe:0),Nn=new ze((Ie=i.highCut)!=null?Ie:1),Ns=new ze((Oe=i.lowCut)!=null?Oe:0),B=new ze((Se=i.smoothness)!=null?Se:.5),ee=new ze((be=i.seed)!=null?be:.5),ue=new Jt((Re=i.quality)!=null?Re:1),ie=ds(i),fe=new f6(oe,de,_e,ke,at,ot,bt,Qe,At,yt,ie.alpha,cr,ie.isMask,ni,Nn,Ns,B,ee,ue),$e=new ar(fe.calpha,"f");return new Sr(t,r,e,{scale:oe,size:de,move:_e,fA:ke,fB:at,distortion:ot,colorA:bt,colorB:Qe,colorC:At,colorD:yt,noiseType:cr,...ie,voronoiStyle:ni,highCut:Nn,lowCut:Ns,smoothness:B,seed:ee,quality:ue},fe,ie.mode,$e,ie.isMask)}case"normal":{let oe=new gs((Be=i.cnormal)!=null?Be:new C(1,1,1)),de=ds(i),_e=new l6(oe,de.alpha),ke=new ar(_e.calpha,"f");return new Sr(t,r,e,{cnormal:oe,...de},_e,de.mode,ke,de.isMask)}case"gradient":{let oe=new Jt((U=i.gradientType)!=null?U:0),de=new en((I=i.smooth)!=null?I:!1),_e;i.colors?_e=new Xc(i.colors.length,i.colors):(_e=new Xc(10,new pt(0,0,0,1)),_e.value[1]=new pt(1,1,1,1));let ke;i.steps?ke=new $c(i.steps.length,i.steps):(ke=new $c(10,1),ke.value[0]=0);let at=new _i((ne=i.offset)!=null?ne:new $(0,0)),ot=new _i((ge=i.morph)!=null?ge:new $(0,0)),bt=new ze((ve=i.angle)!=null?ve:0),Qe=ds(i),At=new h6(oe,de,_e,ke,at,ot,bt,Qe.alpha,Qe.isMask),yt=new ar(At.calpha,"f");return new Sr(t,r,e,{gradientType:oe,smooth:de,colors:_e,steps:ke,offset:at,morph:ot,angle:bt,...Qe},At,Qe.mode,yt,Qe.isMask)}case"pattern":{let oe=new Jt((Ae=i.style)!=null?Ae:0),de=new Jt((Ne=i.projection)!=null?Ne:0),_e=new Jt((Le=["x","y","z"].indexOf(i.axis))!=null?Le:0),ke=new ze((J=i.blending)!=null?J:0),at=new _i((Fe=i.offset)!=null?Fe:new $(0,0)),ot=new Mo(i.colorA),bt=new Mo(i.colorB),Qe=new _i((We=i.frequency)!=null?We:new $(10,10)),At=new ze((Ge=i.size)!=null?Ge:.5),yt=new ze((Ye=i.variation)!=null?Ye:0),cr=new ze((Xe=i.smoothness)!=null?Xe:.5),ni=new ze((wt=i.zigzag)!=null?wt:0),Nn=new ze((Ot=i.rotation)!=null?Ot:0),Ns=new _i((er=i.vertical)!=null?er:new $(0,1)),B=new _i((K=i.horizontal)!=null?K:new $(0,1)),ee=new Jt((he=i.sides)!=null?he:6),ue=ds(i),ie=new v6(oe,de,_e,ke,at,ot,bt,Qe,At,yt,cr,ni,Nn,Ns,B,ee,ue.alpha,ue.isMask),fe=new ar(ie.calpha,"f");return new Sr(t,r,e,{style:oe,projection:de,axis:_e,blending:ke,offset:at,colorA:ot,colorB:bt,frequency:Qe,size:At,variation:yt,smoothness:cr,zigzag:ni,rotation:Nn,vertical:Ns,horizontal:B,sides:ee,...ue},ie,ue.mode,fe,ue.isMask)}default:{let oe=new Cr(1,0,0,1),de=ds(i),_e=new XM(oe,de.alpha),ke=new ar(_e.calpha,"f");return new Sr(t,r,e,{color:oe,...de},_e,de.mode,ke,de.isMask)}}}function T_e(e,t,r,i){let n=h_e(r,i);return C_e(r,e,t,n)}function L6(e,t,r){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];if(!i)return;if(i.value=r.alpha*(r.visible?1:0),r.type==="outline"&&e==="visible"){let n=t.uniforms[`f${t.id}_compensation`];n&&(n.value=r.compensation&&r.visible)}return i}}function Y1(e,t){let r=0,i=e.layers.find(n=>n.data.type==="light");if(i&&i.data.alphaOverride<1)return!0;for(let n of e.layers){if(n.data.type!=="displace"&&n.data.isMask)return!0;if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"&&n.data.type!=="pattern"){let s=n.data.visible?n.data.alpha:0;if(s===1&&n.data.type==="depth"||n.data.type==="gradient"){for(let a of n.data.colors)if(a[3]<1){s=a[3];break}}else if(s===1&&n.data.type==="noise"){let a=t.color(n.data.colorA).a,o=t.color(n.data.colorB).a,l=t.color(n.data.colorC).a,c=t.color(n.data.colorD).a,h=Math.min(a,Math.min(o,Math.min(l,c)));h<1&&(s=h)}r+=(1-r)*s}}return r<1}var pc=class extends nr{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},P_e=class extends pc{constructor(e,t,r,i){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r){return this.root.getFlavor(e,t,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},HT=class extends pc{constructor(e,t){super(),this.data=e,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,r){let i=r?6:(e?3:0)+t;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let n=this.flavors[i];return n===void 0&&(n=new P_e(e,t,r,this),this.flavors[i]=n,n.flatShading=e,n.side=t,n.updateAfterBuild()),n}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e,t;return(t=(e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)!=null?t:!1}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){var i,n;this.data=e;let r=(i=e.layers)!=null?i:Fi.defaultTwoLayerData("phong").layers;try{this.layers=r.map(s=>wu.create(this.layerIdGen++,s.id,s.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=(n=e.name)!=null?n:"Untitled Material",this.onUpdate(),this.transparent=Y1(e,t.shared)}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(e=>e instanceof Eo),this.lightLayer===void 0&&(this.lightLayer=new Eo(0,"",{...vn.defaultData("light","phong"),visible:!1},new E6,{})),this.dispose();for(let e of this.flavors)e&&e.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(n=>n instanceof Eo);if(!e)return;let t=e.data,r=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let n=0;n<this.layers.length;++n){let s=this.layers[n];s instanceof Sr&&s.color instanceof VT&&(s.uuid===r&&(e.node.bumpMap=s.color),s.uuid===i&&(e.node.roughnessMap=s.color))}}updateByOp(e,t,r){if(t!==void 0?this.data=t:t=this.data,this.transparent=Y1(t,r.shared),e.path[0]==="layers"){this.data=t;let i=r.shared,n=e.path[1];if(n===void 0){if(this.layers.reverse(),e.type===4){let s=wu.create(this.layerIdGen++,e.id,e.data,r.shared);this.layers.splice(e.localIndex,0,s),r.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),r.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let s=this.layers.findIndex(o=>o.uuid===e.id),a=this.layers[s];this.layers.splice(s,1),this.layers.splice(e.localIndex,0,a),r.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{e.type===0&&e.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let s=this.layers.find(a=>a.uuid===n);if(s){let a=t.layers.data(n);if(s.updateByOp({...e,path:e.path.slice(2)},a,r)){let o=wu.create(this.layerIdGen++,n,a,i);this.layers.splice(this.layers.findIndex(l=>l.uuid===n),1,o),this.onUpdate()}}}}else this.reset(t,r)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof Sr?t.color.mask=void 0:t instanceof Eo&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof Sr&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,i=this.layers[r];i instanceof Eo?i.node.mask=new mn(t.color,t.alpha,mn.MUL):i instanceof Sr&&(i.isMask.value||(i.color.mask=new mn(t.color,t.alpha,mn.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof Sr),t=this.layers.findIndex(r=>r instanceof Eo);if(e!==-1&&e<t){let r=this.layers[e].color;for(let i=e+1;i<t;++i){let n=this.layers[i];if(n instanceof Sr){if(n.isMask.value)continue;r=new MB(r,n.color,n.alpha,n.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new ar("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof Eo);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let i=this.layers[r];if(i instanceof Sr){if(i.isMask.value)continue;e=new MB(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof O6);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new mn(t,e[r].position,mn.ADD),t=new mn(t,new ze(.5).setReadonly(!0),mn.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(i,n,s)=>Math.min(Math.max(i,n),s);for(let i of this.layers)if(i.type==="displace"){let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}computeCacheKey(){var t,r;let e="[";for(let{data:i}of this.data.layers)if(i.type==="light")e+=`"${i.visible?i.category.toUpperCase():"Basic"}"`;else{let n=((t=T6[i.type])!=null?t:[]).map(c=>i[c]),s=((r=P6[i.type])!=null?r:[]).map(c=>{var h,u;return(u=(h=i[c])==null?void 0:h.length)!=null?u:0}),a=[...n,...s],o="isMask"in i&&i.isMask,l=`"${i.type}-${i.visible}-${o}"`;a.length?e+=`[${l}, "${a.join('","')}"],`:e+=l}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new QSe;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Sr){let t=e.params.texture;if(t instanceof $M&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(pc.prototype,{properties:{get:function(){return this.fragment.properties}}});var QM=class extends HT{},D_e=gp(mse()),EB=new Map;function O_e(e){if(typeof e=="string")return e;let t=EB.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},EB.set(e,t)),t.url}var Gf=class{constructor({src:e,volume:t,delay:r,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:O_e(e),format:"wav"},this.sound=new D_e.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},L_e=class{constructor(){this.type="ShapePath",this.color=new et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new m1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,s){var a;return(a=this.currentPath)==null||a.bezierCurveTo(e,t,r,i,n,s),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(p,f,m,g){let v=p.x,y=f.x,x=m.x,b=g.x,S=p.y,w=f.y,A=m.y,_=g.y,M=(b-x)*(S-A)-(_-A)*(v-x),E=(y-v)*(S-A)-(w-S)*(v-x),T=(_-A)*(y-v)-(b-x)*(w-S),P=M/T,D=E/T;if(T===0&&M!==0||P<=0||P>=1||D<0||D>1)return null;if(M===0&&T===0){for(let L=0;L<2;L++)if(i(L===0?m:g,p,f),t.loc===e.ORIGIN){let R=L===0?m:g;return{x:R.x,y:R.y,t:t.t}}else if(t.loc===e.BETWEEN){let R=+(v+t.t*(y-v)).toPrecision(10),V=+(S+t.t*(w-S)).toPrecision(10);return{x:R,y:V,t:t.t}}return null}else{for(let V=0;V<2;V++)if(i(V===0?m:g,p,f),t.loc===e.ORIGIN){let F=V===0?m:g;return{x:F.x,y:F.y,t:t.t}}let L=+(v+P*(y-v)).toPrecision(10),R=+(S+P*(w-S)).toPrecision(10);return{x:L,y:R,t:P}}}function i(p,f,m){let g=m.x-f.x,v=m.y-f.y,y=p.x-f.x,x=p.y-f.y,b=g*x-y*v;if(p.x===f.x&&p.y===f.y){t.loc=e.ORIGIN,t.t=0;return}if(p.x===m.x&&p.y===m.y){t.loc=e.DESTINATION,t.t=1;return}if(b<-Number.EPSILON){t.loc=e.LEFT;return}if(b>Number.EPSILON){t.loc=e.RIGHT;return}if(g*y<0||v*x<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(y*y+x*x)){t.loc=e.BEYOND;return}let S;g!==0?S=y/g:S=x/v,t.loc=e.BETWEEN,t.t=S}function n(p,f){let m=[],g=[];for(let v=1;v<p.length;v++){let y=p[v-1],x=p[v];for(let b=1;b<f.length;b++){let S=f[b-1],w=f[b],A=r(y,x,S,w);A!==null&&m.find(_=>_.t<=A.t+Number.EPSILON&&_.t>=A.t-Number.EPSILON)===void 0&&(m.push(A),g.push(new $(A.x,A.y)))}}return g}function s(p,f,m){let g=new $;f.getCenter(g);let v=[];return m.forEach(y=>{y.boundingBox.containsPoint(g)&&n(p,y.points).forEach(x=>{v.push({identifier:y.identifier,isCW:y.isCW,point:x})})}),v.sort((y,x)=>y.point.x-x.point.x),v}function a(p,f,m,g,v){(v==null||v==="")&&(v="nonzero");let y=new $;p.boundingBox.getCenter(y);let x=[new $(m,y.y),new $(g,y.y)],b=s(x,p.boundingBox,f);b.sort((E,T)=>E.point.x-T.point.x);let S=[],w=[];b.forEach(E=>{E.identifier===p.identifier?S.push(E):w.push(E)});let A=S[0].point.x,_=[],M=0;for(;M<w.length&&w[M].point.x<A;)_.length>0&&_[_.length-1]===w[M].identifier?_.pop():_.push(w[M].identifier),M++;if(_.push(p.identifier),v==="evenodd"){let E=_.length%2===0,T=_[_.length-2];return{identifier:p.identifier,isHole:E,for:T}}else if(v==="nonzero"){let E=!0,T=null,P=null;for(let D=0;D<_.length;D++){let L=_[D];f[L]&&(E?(P=f[L].isCW,E=!1,T=L):P!==f[L].isCW&&(P=f[L].isCW,E=!0))}return{identifier:p.identifier,isHole:E,for:T}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let o=0,l=999999999,c=-999999999,h=[];this.subPaths.forEach(p=>{let f=p.getPoints(),m=-999999999,g=999999999,v=-999999999,y=999999999;for(let x=0;x<f.length;x++){let b=f[x];b.y>m&&(m=b.y),b.y<g&&(g=b.y),b.x>v&&(v=b.x),b.x<y&&(y=b.x)}c<=v&&(c=v+1),l>=y&&(l=y-1),f.length&&h.push({curves:p.curves,points:f,isCW:XU.isClockWise(f),identifier:o++,boundingBox:new Dde(new $(y,g),new $(v,m))})});let u=h.map(p=>{var f;return a(p,h,l,c,(f=this.userData)==null?void 0:f.style.fillRule)}),d=[];return h.forEach(p=>{let f=u[p.identifier];if(f&&!f.isHole){let m=new g1;m.curves=p.curves,u.filter(g=>(g==null?void 0:g.isHole)&&g.for===p.identifier).forEach(g=>{if(g){let v=h[g.identifier],y=new m1;y.curves=v.curves,m.holes.push(y)}}),d.push(m)}}),d}},I6,CB=new Promise(e=>{I6=e}),TB=!1,O0;function I_e(){if(TB)return;if(O0)return O0;async function e(){let t=await jg(()=>import("./opentype.84f4b5e1.js"),[]);I6(t),TB=!0}return O0=e(),O0}var R_e=class{async load(e,t,r=()=>{}){let{load:i}=await CB;i(e,(n,s)=>{n||!s?r(n!=null?n:"Something went wrong"):t(s)})}async parse(e){let{parse:t,Bidi:r}=await CB;try{let i=t(e),n=new r,s=a=>i.charToGlyphIndex(a.char);return n.registerModifier("glyphIndex",null,s),n.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:n}}catch(i){console.error(i)}}};async function B_e(e){return await(await fetch(e)).arrayBuffer()}var k_e=new R_e;async function PB(e){let t,r,i=!1;if(e.url?(t=await B_e(e.url),r=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){let n=await k_e.parse(t);if(n)return{font:n.font,url:r,intercepted:i,arr:t,bidi:n.bidi}}}function z_e(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var N_e=class{constructor(e){var t;this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=(t=e.isUserFont)!=null?t:!1,this._loadingPromise=PB(e).then(r=>{r&&(this._arrayBuffer=r.arr,this._url=r.url,this.font=r.font,this._intercepted=r.intercepted,this._isLoaded=!0,this._bidi=r.bidi)})}update(e){var t;this._isLoaded=!1,this._isUserFont=(t=e.isUserFont)!=null?t:!1,this._loadingPromise=PB(e).then(r=>{r&&(this._arrayBuffer=r.arr,this._url=r.url,this.font=r.font,this._intercepted=r.intercepted,this._isLoaded=!0,this._bidi=r.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let n=i.tokenizer.tokens,s=[],a=0,o=r.length===n.length;for(let l=0;l<r.length;l++){let c=r[l].index,h=String.fromCharCode(r[l].unicode),u=n[a];if(z_e(c,u)||o)s.push({char:h,index:c,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),a++;else{let d=u.char,p="",f=[u.state.glyphIndex],m=[],g=!1;for(;!g;)a++,p=t.charAt(a),d+=p,f.push(e.charToGlyphIndex(p)),m=e.stringToGlyphs(d),m.length===1&&m[0].index===c&&(g=!0),a>t.length&&(g=!0);s.push({char:h,index:c,replacements:f,replacementChars:Array.from(d)}),a++}}return s}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,i=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,s=e.map(v=>this.getTextWidth(v,t)),a=t.width,o=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?o:0,c=this.computeSpaceWidthForLine(e,0,t),h=this.getLineInitialOffsetX(s[0],a,t.horizontalAlign,e[0],o),u=this.getLineInitialOffsetY(n,e.length,t.height,i,t.verticalAlign),d=[],p=e.map(v=>[]),f=e.map(v=>[]),m;for(let v=0;v<e.length;v++){let y=e[v],x={features:{liga:!0}},b=[];try{b=r.stringToGlyphs(y,x)}catch(w){console.warn(w)}h=this.getLineInitialOffsetX(s[v],a,t.horizontalAlign,y,o);let S=[];try{S=this.reverseLigaturesTable(r,y,b)}catch(w){console.warn(w)}c=this.computeSpaceWidthForLine(e,v,t);for(let w=0;w<b.length;w++){let A=b[w],_=A.index===0?`
`:A.unicode?String.fromCharCode(A.unicode):void 0,M=S[w],E=0,T=0;w===0&&t.horizontalAlign===2&&A.leftSideBearing!==void 0&&(T=-A.leftSideBearing*i),m&&(E=r.getKerningValue(A,m)*i),h+=T+E;let P=0;if(_===`
`)P=l;else if(_===" ")P=c;else{let D=this.createPath(A,i,h,u,t);D&&(P=D.offsetX-(E+T),d.push(D.path))}if(M.replacements.length===1)f[v].push([h,u]),p[v].push(P);else{let D=M.replacements.map(F=>{var O;return((O=r.glyphs.get(F).advanceWidth)!=null?O:0)*i}),L=D.reduce((F,O)=>F+=O,0),R=D.map(F=>F/L),V=h;for(let F=0;F<R.length;F++){let O=P*R[F];f[v].push([V,u]),p[v].push(O),V+=O}}h+=P,m=A}u-=n}let g=[];for(let v=0,y=d.length;v<y;v++)g.push(...d[v].toShapes());return{shapes:g,charWidths:p,lineWidths:s,charCoords:f}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e,t;return(t=(e=this.font)==null?void 0:e.ascender)!=null?t:0}get descender(){var e,t;return(t=(e=this.font)==null?void 0:e.descender)!=null?t:0}get familyName(){var e,t;return(t=(e=this.font)==null?void 0:e.names.fontFamily)!=null?t:""}get subfamilyName(){var e,t;return(t=(e=this.font)==null?void 0:e.names.fontSubfamily)!=null?t:""}get unitsPerEm(){var e,t;return(t=(e=this.font)==null?void 0:e.unitsPerEm)!=null?t:1}getLineInitialOffsetX(e,t,r,i,n){return(r===3||r===2)&&i.indexOf(`
`)>=0&&(e-=n),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,i,n){let s=t*e,a=Math.abs(this.ascender-this.descender)*i,o=e-a,l=-this.ascender*i-o/2;return n===3?-(r-s-l):n===2?-(r*.5-s*.5-l):l}createPath(e,t,r,i,n){var l,c;let s=e.getPath(r,-i,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let a=new L_e,o=((l=e.advanceWidth)!=null?l:1)*t;if(e)for(let h of s.commands){let u=(c=a.currentPath)==null?void 0:c.currentPoint;if(!(u&&h.type!=="Z"&&u.x===h.x&&-u.y===h.y))switch(h.type){case"M":a.moveTo(h.x,-h.y);break;case"L":a.lineTo(h.x,-h.y);break;case"Q":a.quadraticCurveTo(h.x1,-h.y1,h.x,-h.y);break;case"C":a.bezierCurveTo(h.x1,-h.y1,h.x2,-h.y2,h.x,-h.y);break}}return a.subPaths.forEach(h=>{let u=F_e(h.curves);u!==void 0&&h.currentPoint.distanceTo(u)>0&&h.lineTo(u.x,u.y)}),{offsetX:o+n.fontSize*n.letterSpacing,path:a}}getCharWidth(e,t){var r,i;return(i=(r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))!=null?i:0}getTextWidth(e,t){var r,i;return(i=(r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))!=null?i:0}computeSpaceWidthForLine(e,t,r){let i=this.getCharWidth(" ",r),n=e[t];if(n){let s=this.countSpaces(n.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&s){let a=r.width,o=this.getTextWidth(n,r);return(a-(o-s*i))/s}}return i}countSpaces(e){return(e.match(/ /g)||[]).length}};function F_e(e){if(e.length){let t=e[0];if(t instanceof sa)return t.v1;if(t instanceof Zs||t instanceof hc)return t.v0}}var U_e=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t){let r=this.objects.get(e);return r===void 0?(r=this.createObject(e,t),this.objects.set(e,r)):r.isShared=!0,r}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},DB=class extends U_e{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t){let r=$1(e,t,this.flatShading);return r.computeBoundingSphere(),r}},j_e={markNeedsUpdateRendererDirty:()=>{}},V_e=class extends u_e{constructor(e){super(),this.shared=e}create(e){return new C6(e,this.shared)}},WT=class{constructor(e,t={}){if(this.data=e,this.geometryCache=new DB(!0),this.geometryCache2=new DB(!1),this.imageHolderCache=new V_e(this),this.thisContext={scene:j_e,shared:this},this.deletedMaterial=new QM(Fi.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new cu(j1.emptyImage,this),this.deletedVideo=new cu(R1.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,i]of Object.entries(t.images))this.addImage(r,i);if(t.videos)for(let[r,i]of Object.entries(t.videos))this.addVideo(r,i);if(t.audios)for(let[r,i]of Object.entries(t.audios))this.addAudio(r,i);this.reset(e)}setRequestRender(e){this._requestRender=e}reset(e){this.resetLib(e.lib);for(let[t,r]of Object.entries(e.images))this.addImage(t,r);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r)}addMaterial(e,t){if(this.materials[e]){let r=this.materials[e];r.reset(t,this.thisContext),r.dispose()}else{let r=new QM(t,this.thisContext);r.uuid=e,this.materials[e]=r}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return(t=this.materials[e])!=null?t:this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new HT(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new cu(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){var t;return(t=this.images[e])!=null?t:this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new cu(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){var t;return(t=this.videos[e])!=null?t:this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new X1(t.r,t.g,t.b,t.a):this.colors[e]=new X1(t.r,t.g,t.b,1),!1)}updateColor(e,t){var r,i,n,s;if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let a=this.colors[e];return this.colors[e].r=(r=t.r)!=null?r:a.r,this.colors[e].g=(i=t.g)!=null?i:a.g,this.colors[e].b=(n=t.b)!=null?n:a.b,this.colors[e].a=(s=t.a)!=null?s:a.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new On(0,0,0,0))}else return"a"in e?new On(e.r,e.g,e.b,e.a):new On(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof Gf)return t;{let r=new Gf({src:t.data});return this.audios[e]=r,r}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof Gf&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new N_e(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof Gf&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}resetLib(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.asset);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.asset);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r.asset);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r.asset);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r.asset);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,r){this.data=t,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(tn.drop(e,2),t.materials[e.path[1]],{shared:this,scene:r}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,r):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="lib"&&this.updateLibByOp(tn.drop(e,1),r)}updateFont(e,t,r){if(t.props.url){let i=this.getFont(e),n={...this.data.fonts[e],url:t.props.url};i.update(n),i.loadingPromise.then(()=>this.requestRender()),r.updateFont(e,this)}}};new WT(To.emptyData());var Ip=class extends Rn{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),Axe(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[i,n]of Object.entries(e.props)){let s=r.shared.material(n);this.material[Number(i)]=s}else if(As(e.path,["material"])&&this.material instanceof pc)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(tn.drop(e,1),t.material,r);else if(As(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let n=t.materials[i];typeof n!="string"&&this.material[i].updateByOp(tn.drop(e,2),n,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var i,n;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;if(((i=e.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe),t.scene.markNeedsUpdateRendererDirty()),((n=e.geometry)==null?void 0:n.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(s=>t.shared.material(s).getFlavor(r.flatShading,r.side,r.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let s=0;s<this.material.length;s++)this.material[s]=this.material[s].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&Uj(this.material).forEach(e=>{e instanceof pc&&(e instanceof QM||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},OB=new C,LB=new pt,IB=new pt,G_e=new C,RB=new we,nn=class extends Ip{constructor(e,t,r){super(e,t),this.data=t,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.isSkinnedMesh=!0,this.bindMode=t.bindMode,this.bindMatrix=new we().fromArray(t.bindMatrix),this.bindMatrixInverse=new we)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof nt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof WT){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return z1.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return z1.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),As(e.path,["geometry"])&&this.updateByPatchedOpGeometry(tn.drop(e,1),t.geometry,r)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var i;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let c={...this.data.geometry,...n};this.localGeometry=$1(c,t,this.data.flatShading)}let s,a,o;n.scaleBaked?[s,a,o]=n.scaleBaked:{width:s,height:a,depth:o}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&WM(this.localGeometry.attributes,s/l.sxPrev,a/l.syPrev,o/l.szPrev),l.sxPrev=s,l.syPrev=a,l.szPrev=o}else{let n={...this.data.geometry,...e};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=$1(n,t,this.data.flatShading)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var n;let i=!1;e.type===0&&e.path.length===0&&yT(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof Ji&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),i||((n=r.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e,t;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max((t=(e=this.geometry.getIndex())==null?void 0:e.count)!=null?t:0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){var i,n;let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,(i=r.depth)!=null?i:0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,(n=r.depth)!=null?n:0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new pt,r=this.geometry.attributes.skinWeight;for(let i=0,n=r.count;i<n;i++){t.fromBufferAttribute(r,i);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),r.setXYZW(i,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let r=this.skeleton;if(r===void 0)return;let i=this.geometry;LB.fromBufferAttribute(i.attributes.skinIndex,e),IB.fromBufferAttribute(i.attributes.skinWeight,e),OB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let s=IB.getComponent(n);if(s!==0){let a=LB.getComponent(n);RB.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(G_e.copy(OB).applyMatrix4(RB),s)}}return t.applyMatrix4(this.bindMatrixInverse)}};function H_e(e){var a,o;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,i=r.position.array,n=r.normal.array,s=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=new C(n[l],n[l+1],n[l+2]);t.has(c)?(a=t.get(c))==null||a.normals.push(h):t.set(c,{normals:[h],result:new C})}t.forEach((l,c)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=(o=t.get(c))==null?void 0:o.result;h&&(s[l]=h.x,s[l+1]=h.y,s[l+2]=h.z)}e.geometry.setAttribute("extrudeNormal",new Ve(s,3))}function W_e(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=new C;for(let n=0;n<t.length;n+=3)i.set(t[n],t[n+1],t[n+2]).normalize(),r[n]=i.x,r[n+1]=i.y,r[n+2]=i.z;e.geometry.setAttribute("extrudeNormal",new Ve(r,3))}function qT(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof pc)||e.material.getLayersOfType("outline").length===0)return;e instanceof nn&&e.is2DAndNoDepth?W_e(e):H_e(e)}function $T(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),n=[vt.seededRandom(i),vt.seededRandom(i+1e4),vt.seededRandom(i+2e4)];for(let s=0;s<t.length;s++)r[s]=n[s%3];e.geometry.setAttribute("randomColor",new st(r,3))}NT.then(e=>{});var xa=new Br,gf=new C;function q_e(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var yg=class extends nn{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new we,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){var e;return(e=this.data.geometry.phongAngle)!=null?e:45}updateEntityBoxSize(e,t){var i;let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,(i=r.depth)!=null?i:0).multiplyScalar(.5)}createGeometryByControls(e){var s,a,o,l;if(this.skipReactionUpdate===!0)return;let t=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:r,subdividedGeometry:i,subdivPointer:n}=Ji.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,r!==void 0&&((a=this.originalGeometry)==null||a.dispose(),this.originalGeometry=r),i!==void 0&&((o=this.subdividedGeometry)==null||o.dispose(),this.subdividedGeometry=i!=null?i:void 0),this.localGeometry=(l=this.subdividedGeometry)!=null?l:this.originalGeometry,qT(this),$T(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Ji.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Ji.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=Ji.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Ji.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=(e=this.subdividedGeometry)!=null?e:this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,Rn.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ns,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;xa.setFromBufferAttribute(t),xa.getCenter(r),e.boundingSphere.radius=r.distanceTo(xa.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),xa.getSize(gf),this.hasNonUniformScale&&gf.divide(this.scale);let i={width:gf.x,height:gf.y,depth:gf.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;xa.min.set(e[0],e[2],e[4]),xa.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(xa.min.applyMatrix4(this.shearScaleInv),xa.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new ns);let r=t.boundingSphere.center;xa.getCenter(r),t.boundingSphere.radius=r.distanceTo(xa.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(Ji.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},BB=-1,$_e=1,X_e={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Y_e={polygon_center:0,edge:1,vertex:2},L0=(e,t)=>(r,i)=>!t||r===0||e===0?0:e*i/100,ht=(e,t)=>{let r=Math.abs(t),i=r*-1;return(e-BB)*(r-i)/($_e-BB)+i};function Q_e(e){let t=[],r={};for(var i=0,n=e.length;i<n;i++){var s=JSON.stringify(e[i].pos.map(a=>Math.round(a*1e4)/1e4));r[s]||(t.push(e[i]),r[s]=!0)}return t}var K_e=new C,I0=new C,Z_e=new C,J_e=new C;function Od(e,t){let r=Z_e.fromArray(e),i=J_e.fromArray(t);I0.copy(i).sub(r);let n=I0.length();return I0.normalize().multiplyScalar(n*.5),K_e.copy(r).add(I0).toArray()}var Ss=new zi,R0=new C,Q1=new C,Jc=new C;function eAe(e){let t=[];for(let r=0;r<=e.index.count;r++)if(R0.fromArray(e.index.array,r*3),Ss.setFromAttributeAndIndices(e.attributes.position,R0.x,R0.y,R0.z),Ss.getNormal(Q1),Ss.getMidpoint(Jc),!(isNaN(Jc.x)||isNaN(Jc.y)||isNaN(Jc.z))){let{a:i,b:n,c:s}=Ss,a=i.toArray(),o=n.toArray(),l=s.toArray(),c=i.distanceTo(n),h=n.distanceTo(s),u=s.distanceTo(i),d=Od(a,o),p=Od(o,l),f=Od(l,a),m=[c,h,u],g=Math.max(...m),v=m.filter(b=>Math.round(b)===Math.round(g)).length>1,y=[],x=Ss.getMidpoint(Jc).toArray();g===c&&!v&&(y=[p,f,f],x=d),g===h&&!v&&(y=[d,f,f],x=p),g===u&&!v&&(y=[d,p,p],x=f),v&&(y=[d,p,f]),t.push({vertices:[a,o,l],faceCenters:y,midpoint:x,norm:Ss.getNormal(Q1).toArray()})}return t}function tAe(e){let t=[],{position:r}=e.attributes;for(let i=0;i<r.count;i++){Ss.setFromAttributeAndIndices(r,i*3,i*3+1,i*3+2),Ss.getNormal(Q1),Ss.getMidpoint(Jc);let n=Ss.a.toArray(),s=Ss.b.toArray(),a=Ss.c.toArray();t.push({vertices:[n,s,a],faceCenters:[Od(n,s),Od(s,a),Od(a,n)],midpoint:Jc.toArray(),norm:Q1.toArray()})}return t}var rAe=4,iAe=.5,kS=e=>.5*(1-Math.cos(e*Math.PI)),nAe=class{constructor(){this.perlin=new Array(4095+1)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let i=Math.floor(e),n=Math.floor(t),s=Math.floor(r),a=e-i,o=t-n,l=r-s,c,h,u=0,d=.5,p,f,m;for(let g=0;g<rAe;g++){let v=i+(n<<4)+(s<<8);c=kS(a),h=kS(o),p=this.perlin[v&4095],p+=c*(this.perlin[v+1&4095]-p),f=this.perlin[v+16&4095],f+=c*(this.perlin[v+16+1&4095]-f),p+=h*(f-p),v+=256,f=this.perlin[v&4095],f+=c*(this.perlin[v+1&4095]-f),m=this.perlin[v+16&4095],m+=c*(this.perlin[v+16+1&4095]-m),f+=h*(m-f),p+=kS(l)*(f-p),u+=p*d,d*=iAe,i<<=1,a*=2,n<<=1,o*=2,s<<=1,l*=2,a>=1&&(i++,a--),o>=1&&(n++,o--),l>=1&&(s++,l--)}return u}noiseSeed(e){let t=(()=>{let r,i;return{setSeed(n){i=r=(n!=null?n:Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();t.setSeed(e),this.perlin=new Array(4095+1);for(let r=0;r<4095+1;r++)this.perlin[r]=t.rand()}},sAe=nAe,kB=new C,zB=new we,NB=new yp;function FB(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="TextGeometry"&&(t=!0)}),t}var R6=class extends nn{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t,r;let e=this.dataPatched;return(r=(t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))!=null?r:0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e,t;return((t=(e=this.font)==null?void 0:e.ascender)!=null?t:1)*this.fontScale}get descender(){var e,t;return((t=(e=this.font)==null?void 0:e.descender)!=null?t:1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(zB.copy(r).invert(),NB.copy(e.ray).applyMatrix4(zB),NB.intersectBox(this.singleBBox,kB))){let i=kB.applyMatrix4(r),n=e.ray.origin.distanceTo(i);t.push({distance:n,point:i.clone(),object:this})}}},qi=1e-4,ba,B6,k6,z6,UB=new C,jB=new C;NT.then(e=>{ba=e,B6=[ba.get_face_center,ba.get_edge_midpoint,ba.get_vertex_position],k6=[ba.get_face_normal,ba.get_edge_normal,ba.get_vertex_normal],z6=[ba.face_count,ba.edge_count,ba.vertex_count]});var aAe=new we,oAe=new we,dl=new C,kc=new C,vf=new C,zS=new C,lAe=new C,cAe=new C,fo=new sAe,ta=class extends DT(Yt){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof Ni&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof Ni&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let i=0,n=this.children.length;i<n;++i)this.remove(this.children[0]);let r=this.children;if(r.length===t)return;if(r.length<t)for(let i=0,n=t-r.length;i<n;++i){let s=new Ni(this.object);s.expand(),this.add(s)}else for(let i=0,n=r.length-t;i<n;++i)this.remove(r[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let r=0,i=t-this.children.length;r<i;++r){let n=new Ni(this.object);n.expand(),this.add(n)}else for(let r=0,i=this.children.length-t;r<i;++r)this.remove(this.children[0])}}_updateRadial(e){var u;let t=e.radial,r=t.start*vt.DEG2RAD,i=t.end*vt.DEG2RAD,n=r-i,s=new hi(t.rotation[0],t.rotation[1],t.rotation[2]),a;switch(t.axis){case"z":a=new C(0,0,1);break;case"y":a=new C(0,1,0);break;default:case"x":a=new C(1,0,0);break}let o=(u=e.randomnessObject)!=null?u:Nl.defaultData([1,1,1]).randomnessObject,l=o.noiseType==="perlin";fo.noiseSeed(o.seed);let c=bS((0,uf.default)(o.seed)),h=L0(o.strength,this.parameters.randomness);for(let[d,p]of this.children.entries()){let f=d*(o.freqScale/10)+o.movement,m=l?fo.noise(f):c(f,f),g=d+1;p.scale.x=t.scale[0]+h(g,ht(m,o.scale[0]))||qi,p.scale.y=t.scale[1]+h(g,ht(m,o.scale[1]))||qi,p.scale.z=t.scale[2]+h(g,ht(m,o.scale[2]))||qi,p.position.setScalar(0);let v=n/e.count*d-r;switch(t.axis){case"x":p.rotation.set(0,v,0);break;case"y":p.rotation.set(0,0,v);break;case"z":p.rotation.set(v,0,0);break}p.translateOnAxis(a,t.radius),p.position.x+=t.position[0]+h(g,ht(m,o.position[0])),p.position.y+=t.position[1]+h(g,ht(m,o.position[1])),p.position.z+=t.position[2]+h(g,ht(m,o.position[2]));let y=h(g,ht(m,o.rotation[0])),x=h(g,ht(m,o.rotation[1])),b=h(g,ht(m,o.rotation[2]));t.alignment===!0?(p.rotation.x+=s.x+y,p.rotation.y+=s.y+x,p.rotation.z+=s.z+b):p.rotation.set(s.x+y,s.y+x,s.z+b)}}_updateLinear(e){var o;if(e.type!=="linear")throw new Error;let t=e.linear,r=new hi(t.rotation[0],t.rotation[1],t.rotation[2]),i=(o=e.randomnessObject)!=null?o:Nl.defaultData([1,1,1]).randomnessObject,n=i.noiseType==="perlin";fo.noiseSeed(i.seed);let s=bS((0,uf.default)(i.seed)),a=L0(i.strength,this.parameters.randomness);for(let[l,c]of this.children.entries()){let h=l*(i.freqScale/10)+i.movement,u=n?fo.noise(h):s(h,h),d=l+1,p=a(d,ht(u,i.rotation[0])),f=a(d,ht(u,i.rotation[1])),m=a(d,ht(u,i.rotation[2]));c.scale.x=1+(t.scale[0]-1)*l+a(d,ht(u,i.scale[0]))||qi,c.scale.y=1+(t.scale[1]-1)*l+a(d,ht(u,i.scale[1]))||qi,c.scale.z=1+(t.scale[2]-1)*l+a(d,ht(u,i.scale[2]))||qi,c.rotation.x=r.x*l+p,c.rotation.y=r.y*l+f,c.rotation.z=r.z*l+m,c.position.x=t.position[0]*l+a(d,ht(u,i.position[0])),c.position.y=t.position[1]*l+a(d,ht(u,i.position[1])),c.position.z=t.position[2]*l+a(d,ht(u,i.position[2]))}}_updateGrid(e){var o;let t=0,r=e.grid,i=(o=e.randomnessObject)!=null?o:Nl.defaultData([1,1,1]).randomnessObject,n=L0(i.strength,this.parameters.randomness),s=i.noiseType==="perlin";fo.noiseSeed(i.seed);let a=Kbe((0,uf.default)(i.seed));if(r.useCenter===!0){let l={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},c=new C(r.size[0]*(r.count[0]-l.x)*.5,r.size[1]*(r.count[1]-l.y)*.5,r.size[2]*(r.count[2]-l.z)*.5);for(let h=0;h<r.count[0];h++)for(let u=0;u<r.count[1];u++)for(let d=0;d<r.count[2];d++){let p=[(h+1)*(i.freqScale/10)+i.movement,(u+1)*(i.freqScale/10)+i.movement,(d+1)*(i.freqScale/10)+i.movement],f=s?fo.noise(...p):a(...p),m=this.children[t++];m.scale.x=1+n(t,ht(f,i.scale[0]))||qi,m.scale.y=1+n(t,ht(f,i.scale[1]))||qi,m.scale.z=1+n(t,ht(f,i.scale[2]))||qi;let g=n(t,ht(f,i.rotation[0])),v=n(t,ht(f,i.rotation[1])),y=n(t,ht(f,i.rotation[2]));m.rotation.set(g,v,y),m.position.x=r.size[0]*h-c.x+n(t,ht(f,i.position[0])),m.position.y=r.size[1]*u-c.y+n(t,ht(f,i.position[1])),m.position.z=r.size[2]*d-c.z+n(t,ht(f,i.position[2]))}}else for(let l=0;l<r.count[0];l++)for(let c=0;c<r.count[1];c++)for(let h=0;h<r.count[2];h++){let u=[(l+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement,(h+1)*(i.freqScale/10)+i.movement],d=s?fo.noise(...u):a(...u),p=this.children[t++];p.scale.x=1+n(t,ht(d,i.scale[0]))||qi,p.scale.y=1+n(t,ht(d,i.scale[1]))||qi,p.scale.z=1+n(t,ht(d,i.scale[2]))||qi;let f=n(t,ht(d,i.rotation[0])),m=n(t,ht(d,i.rotation[1])),g=n(t,ht(d,i.rotation[2]));p.rotation.set(f,m,g),p.position.x=r.size[0]*l+n(t,ht(d,i.position[0])),p.position.y=-r.size[1]*c+n(t,ht(d,i.position[1])),p.position.z=-r.size[2]*h+n(t,ht(d,i.position[2]))}}_updateToObject(e){var m,g;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,r=new hi(t.rotation[0],t.rotation[1],t.rotation[2]),i=(m=e.randomnessObject)!=null?m:Nl.defaultData([1,1,1]).randomnessObject,n=i.noiseType==="perlin";fo.noiseSeed(i.seed);let s=bS((0,uf.default)(i.seed)),a=L0(i.strength,this.parameters.randomness);if(!t.object){for(let[,v]of this.children.entries())v.position.set(0,0,0),v.scale.setScalar(1),v.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof R6)if(!((g=this.objectForSample.font)!=null&&g.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let o=this.getSubdivData(),l=[],c=v=>{let y=v.length,x=v.map(w=>w[0]).reduce((w,A)=>w+A,0),b=v.map(w=>w[1]).reduce((w,A)=>w+A,0),S=v.map(w=>w[2]).reduce((w,A)=>w+A,0);return[x/y,b/y,S/y]},h=v=>Math.round(v*1e6)/1e6;o.forEach(v=>{let y=o.filter(x=>h(v.pos[0])===h(x.pos[0])&&h(v.pos[1])===h(x.pos[1])&&h(v.pos[2])===h(x.pos[2]));y.length>1?l.push({pos:v.pos,norm:c(y.map(x=>x.norm))}):l.push(v)});let u=Q_e(l);if(u.length>0){let v=Math.round(u.length*t.count/100);this._updateCount(v)}else{let v=this.objectForSample.geometry.getAttribute("position");if(!v||isNaN(v.count)||v.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let d=new Zbe(this.objectForSample).build(),p=X_e[t.axis],f=this.children;d.setRandomGenerator((0,uf.default)(this.object.uuid+t.seed));for(let[v,y]of f.entries()){let x=v*(i.freqScale/10)+i.movement,b=n?fo.noise(x):s(x,x),S=v+1,w=a(S,ht(b,i.rotation[0])),A=a(S,ht(b,i.rotation[1])),_=a(S,ht(b,i.rotation[2]));t.spreadType==="random"?d.sample(vf,zS):(u.length&&(vf.fromArray(u[v].pos),zS.fromArray(u[v].norm)),this.objectForSample instanceof yg&&vf.applyMatrix4(aAe.copy(this.objectForSample.matrixWorld).invert())),vf.applyMatrix4(this.object.hiddenMatrix.clone().invert()),y.position.copy(vf),dl.fromArray(p);let M=t.align==="normal"?zS:this.object.getWorldDirection(cAe),E=kc.fromArray(t.position);kc.x+=kc.x+a(S,ht(b,i.position[0])),kc.y+=kc.y+a(S,ht(b,i.position[1])),kc.z+=kc.z+a(S,ht(b,i.position[2]));let T=Math.acos(M.dot(dl)),P=lAe.crossVectors(dl,M).normalize(),D=oAe.makeRotationAxis(P,T),L=M.clone().cross(this.object.up).normalize(),R=L.clone().cross(M).normalize(),V=new we().makeBasis(L,M,R),F=new C(dl.y,dl.z,dl.x).normalize(),O=F.clone().cross(dl).normalize(),k=new we().makeBasis(F,dl,O).invert(),z=new we().multiplyMatrices(V,k);y.rotation.setFromRotationMatrix(z),E.applyMatrix4(D),y.position.add(E),y.rotation.x=y.rotation.x+r.x+w,y.rotation.y=y.rotation.y+r.y+A,y.rotation.z=y.rotation.z+r.z+_,y.scale.setScalar(1),y.scale.x=y.scale.x+t.scale[0]+a(S,ht(b,i.scale[0]))||qi,y.scale.y=y.scale.y+t.scale[1]+a(S,ht(b,i.scale[1]))||qi,y.scale.z=y.scale.z+t.scale[2]+a(S,ht(b,i.scale[2]))||qi,y.scale.multiply(this.object.scale),y.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof yg){let t=this.objectForSample,r=Y_e[e],i=z6[r],n=B6[r],s=k6[r],a=[],o=i(t.subdivPointerNew);for(let l=0;l<=o-1;l++){let c=n(t.subdivPointerNew,l),h=s(t.subdivPointerNew,l);UB.fromArray(c).applyMatrix4(t.matrixWorld),jB.fromArray(h),a.push({pos:UB.toArray(),norm:jB.toArray()})}return a}else return(this.objectForSample.geometry.index?eAe(this.objectForSample.geometry):tAe(this.objectForSample.geometry)).map((t,r)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var r;if(this.parameters=nb(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=t.find(this.parameters.toObject.object);i instanceof Rn?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new we,this.hiddenMatrix=new we,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Qg=e=>{var t;return t=class extends e{},t.geometryHelper=new Ka(30,30,30),t},B0=new yp,NS=new ns,VB=new we,Kg=(e,t,r,i,n=!1)=>{let s=t,a=e.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),NS.copy(s.boundingSphere),NS.applyMatrix4(a),r.ray.intersectsSphere(NS)===!1||(VB.copy(a).invert(),B0.copy(r.ray).applyMatrix4(VB),s.boundingBox!==null&&B0.intersectsBox(s.boundingBox)===!1))return;let o,l,c,h,u=s.index,d=s.attributes.position,p=s.drawRange,f,m;if(n===!1){let v=Math.max(0,p.start),y=Math.min(u.count,p.start+p.count);for(f=v,m=y;f<m;f+=3)if(l=u.getX(f),c=u.getX(f+1),h=u.getX(f+2),o=g(e,r,B0,d,l,c,h),o){o.faceIndex=Math.floor(f/3),i.push(o);return}}else{let v=s.attributes.position,y=new C,x=new C,b=new C,S=new C,w=2,A=1/((e.scale.x+e.scale.y+e.scale.z)/3),_=A*A,M=Math.max(0,p.start),E=Math.min(v.count,p.start+p.count);for(let T=M,P=E-1;T<P;T+=w){if(y.fromBufferAttribute(v,T),x.fromBufferAttribute(v,T+1),B0.distanceSqToSegment(y,x,S,b)>_)continue;S.applyMatrix4(e.matrixWorld);let D=r.ray.origin.distanceTo(S);D<r.near||D>r.far||i.push({distance:D,point:b.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(v,y,x,b,S,w,A){let _=new C,M=new C,E=new C,T=new C,P=new C;if(_.fromBufferAttribute(b,S),M.fromBufferAttribute(b,w),E.fromBufferAttribute(b,A),x.intersectTriangle(_,M,E,!1,T)===null)return null;P.copy(T),P.applyMatrix4(v.matrixWorld);let D=y.ray.origin.distanceTo(P);return D<y.near||D>y.far?null:{faceIndex:1,distance:D,point:P.clone(),object:v}}},k0=new C,ps=new bp,uAe=class extends Wg{constructor(e){let t=new nt,r=new Ac({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={},a=new et(15711266),o=new et(15711266),l=new et(2857471);c("n1","n2",a),c("n2","n4",a),c("n4","n3",a),c("n3","n1",a),c("f1","f2",a),c("f2","f4",a),c("f4","f3",a),c("f3","f1",a),c("n1","f1",a),c("n2","f2",a),c("n3","f3",a),c("n4","f4",a),c("p","n1",o),c("p","n2",o),c("p","n3",o),c("p","n4",o),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,d,p){h(u,p),h(d,p)}function h(u,d){i.push(0,0,0),n.push(d.r,d.g,d.b),s[u]===void 0&&(s[u]=[]),s[u].push(i.length/3-1)}t.setAttribute("position",new Ve(i,3)),t.setAttribute("color",new Ve(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;ps.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;Hs("n1",t,e,ps,-r,-i,n),Hs("n2",t,e,ps,r,-i,n),Hs("n3",t,e,ps,-r,i,n),Hs("n4",t,e,ps,r,i,n);let s=n;Hs("f1",t,e,ps,-r,-i,s),Hs("f2",t,e,ps,r,-i,s),Hs("f3",t,e,ps,-r,i,s),Hs("f4",t,e,ps,r,i,s);let a=s,o=.5;Hs("u1",t,e,ps,r*.7*o,i*1.1,a),Hs("u2",t,e,ps,-r*.7*o,i*1.1,a),Hs("u3",t,e,ps,0,i*(1.1+.9*o),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Hs(e,t,r,i,n,s,a){k0.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let c=0,h=o.length;c<h;c++)l.setXYZ(o[c],k0.x,k0.y,k0.z)}}var hAe=class extends Qg(uAe){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Kg(this.object,this.geometry,e,t,!0)}},KM;(e=>e.is=t=>"objectHelper"in t)(KM||(KM={}));var Zg=(e,t)=>class extends OT(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,i){this.objectHelper.raycast(r,i)}showGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof b1&&(i.visible=!0)}}updateEntityBoxSize(r,i){this.objectHelper.visible&&this.geometryHelper instanceof Ka?(r.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,i)}hideGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof b1&&(i.visible=!1)}}},z0=790,_h=new C,FS=new C,US=new mt,jS=new C,yf=new C,VS=new C,Ui=class extends Zg(bp,hAe){constructor(e="",t={...hg.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=ip.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new we,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,i=this.height;this.orthoCamera=new VC(r*-.5,r*.5,i*.5,i*-.5,-5e4,1e4),this.perspCamera=new ki(45,r/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new C(e,t,r)),super.lookAt(e),this.getWorldPosition(_h),this.targetOffset=_h.distanceTo(e)}getTarget(e=new C){return this.getWorldDirection(FS),this.getWorldPosition(_h),FS.multiplyScalar(this.targetOffset),e.copy(_h).add(FS),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(_h),_h.distanceTo(e)}updateUp(){this.getWorldQuaternion(US),jS.set(0,0,1).applyQuaternion(US),yf.copy(Yt.DEFAULT_UP),this.isUpVectorFlipped&&yf.negate(),yf.applyQuaternion(US),VS.copy(Yt.DEFAULT_UP).projectOnPlane(jS),this.angleOffsetFromUp=VS.angleTo(yf),this.angleOffsetFromUp*=VS.cross(yf).dot(jS)>=0?1:-1}updateTransformState(e){let t=super.updateTransformState(e);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),t}getViewFrontToObject(e){let t=e.getWorldPosition(new C),r=e.getWorldDirection(new C).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new C).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new C;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,r=!1){if(this.aspect=e/t,r){let i=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-z0*.5*i,this.right=z0*.5*i,this.top=z0*.5*(1/n),this.bottom=-z0*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,s):this.orthoCamera.setViewOffset(e,t,r,i,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return tM(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},Ah=new we,dAe=new we;function GB(e){let t=!1;return e.scene.objects.traverse((r,i)=>{var n;((n=i.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var cp=class extends Ip{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new nt,this.onAfterRender=(i,n,s,a,o,l)=>{super.onAfterRender(i,n,s,a,o,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){var e;return(e=this.data.geometry.phongAngle)!=null?e:45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var i,n;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let s=0;s<this.children.length;s++){let a=this.children[s];a instanceof cp&&a.dataPatched.visible===!0&&a.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let s=0;s<this.children.length;s++){let a=this.children[s];if(a instanceof Rn&&a.dataPatched.visible===!0&&((i=a.geometry.attributes.position)==null?void 0:i.count)>0&&a.geometry.drawRange.count>0){if(Ah.multiplyMatrices(a.hiddenMatrix,a.matrix),a.booleanMeshSetAddress===-1){if(((n=a.geometry.index)!=null?n:a.geometry.getAttribute("position")).count/3<15e5&&(a.booleanMeshSetAddress=Ao.getMeshSet(a.geometry,e===!0,t)),a.booleanMeshSetAddress===-1)return;Ao.transformMeshSet(a.booleanMeshSetAddress,Ah),a.booleanMatrixInvOld.copy(Ah).invert(),a.booleanWasTransformed=!1}else a instanceof cp&&a.needsTransformForDownstream===!0?(Ao.transformMeshSet(a.booleanMeshSetAddress,Ah),a.needsTransformForDownstream=!1):a.booleanWasTransformed===!0&&(Ao.transformMeshSet(a.booleanMeshSetAddress,dAe.multiplyMatrices(Ah,a.booleanMatrixInvOld)),a.booleanMatrixInvOld.copy(Ah).invert(),a.booleanWasTransformed=!1);Ao.hasOpenEdges(a.booleanMeshSetAddress)===!1||s===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(a.booleanMeshSetAddress),a.geometry.userData.wasFilteredFromBoolean=!1):a.geometry.userData.wasFilteredFromBoolean=!0}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Ve([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Ao.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new nt,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Ao.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(s){this.booleanMeshSetAddress=0,console.error(s)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,qT(this),$T(this)}dispose(){super.dispose(),this.geometry.dispose()}},ZM;(e=>{function t(r){return Rt.is(r)&&r instanceof $g}e.is=t})(ZM||(ZM={}));var XT=(e,t)=>class extends Zg(e,t){updateState_Light(r,i){this.updateState_Entity(r,i),r.color!==void 0&&(this.color=i.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},Ks=e=>e instanceof Rn,Na=e=>e!==null&&e instanceof cp,pAe=e=>e instanceof Ui,fAe=e=>ZM.is(e),JM=e=>KM.is(e),pb=class extends Qg(Rde){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){Kg(this.object,pb.geometryHelper,e,t)}update(){}},xg=class extends Zg(sd,pb){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},N6={RED:0,GREEN:1,BLUE:2,ALPHA:3},Jg="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",mAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,N0=class extends nr{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new ye(null),kernel16:new ye(null),inputBuffer:new ye(null),cocBuffer:new ye(null),texelSize:new ye(new $),scale:new ye(1)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:mAe,vertexShader:Jg}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let o=0;o<80;++o){let l=o*e,c=Math.sqrt(o)/Math.sqrt(80),h=c*Math.cos(l),u=c*Math.sin(l);o%5===0?(r[n++]=h,r[n++]=u):(t[i++]=h,t[i++]=u)}let s=[],a=[];for(let o=0;o<128;)s.push(new pt(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)a.push(new pt(r[o++],r[o++],r[o++],r[o++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function HB(e,t,r){return e*(t-r)-t}function eE(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var gAe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,vAe=class extends nr{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ye(null),focusDistance:new ye(0),focusRange:new ye(0),cameraNear:new ye(.3),cameraFar:new ye(1e3)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:gAe,vertexShader:Jg}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=rl){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-HB(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=eE(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-HB(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=eE(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ki?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},yAe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,xAe="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",WB=class extends nr{constructor(e=new $){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ye(null),texelSize:new ye(new $),halfTexelSize:new ye(new $),kernel:new ye(0),scale:new ye(1)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:yAe,vertexShader:xAe}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},bAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,wAe=class extends nr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ye(null),opacity:new ye(1)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:bAe,vertexShader:Jg}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},SAe=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,_Ae=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,fb={DEPTH:0,LUMA:1,COLOR:2},AAe={DISABLED:0,DEPTH:1,CUSTOM:2},MAe=class extends nr{constructor(e=new $,t=fb.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:vp.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new ye(null),depthBuffer:new ye(null),predicationBuffer:new ye(null),texelSize:new ye(e)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:SAe,vertexShader:_Ae}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=rl){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},EAe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,CAe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Ws={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},tE=class extends nr{constructor(e,t,r,i,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:vp.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ye(null),depthBuffer:new ye(null),resolution:new ye(new $),texelSize:new ye(new $),cameraNear:new ye(.3),cameraFar:new ye(1e3),aspect:new ye(1),time:new ye(0)},blending:Hr,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=rl){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=EAe.replace(Ws.FRAGMENT_HEAD,e.get(Ws.FRAGMENT_HEAD)).replace(Ws.FRAGMENT_MAIN_UV,e.get(Ws.FRAGMENT_MAIN_UV)).replace(Ws.FRAGMENT_MAIN_IMAGE,e.get(Ws.FRAGMENT_MAIN_IMAGE)),this.vertexShader=CAe.replace(Ws.VERTEX_HEAD,e.get(Ws.VERTEX_HEAD)).replace(Ws.VERTEX_MAIN_SUPPORT,e.get(Ws.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ki?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return Ws}},TAe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,PAe=class extends nr{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:vp.replace(/\D+/g,"")},uniforms:{inputBuffer:new ye(null),threshold:new ye(0),smoothing:new ye(1),range:new ye(null)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:TAe,vertexShader:Jg}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},DAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,F6={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},OAe=class extends nr{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new ye(e),inputBuffer:new ye(null),strength:new ye(1)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:DAe,vertexShader:Jg}),this.toneMapped=!1,this.setColorChannel(N6.RED),this.setMaskFunction(F6.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Vi&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},LAe=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,IAe="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",RAe=class extends nr{constructor(e=new $,t=new $){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new ye(null),searchTexture:new ye(null),areaTexture:new ye(null),resolution:new ye(t),texelSize:new ye(e)},blending:Hr,depthWrite:!1,depthTest:!1,fragmentShader:LAe,vertexShader:IAe}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},BAe=new bp,pl=null;function kAe(){if(pl===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);pl=new nt,pl.setAttribute!==void 0?(pl.setAttribute("position",new st(e,3)),pl.setAttribute("uv",new st(t,2))):(pl.addAttribute("position",new st(e,3)),pl.addAttribute("uv",new st(t,2)))}return pl}var fn=class{constructor(e="Pass",t=new ec,r=BAe){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Sn(kAe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new ec),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=rl){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof ec||t===this.renderer)continue;this[e].dispose()}}}},rE=class extends fn{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new wAe,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new $t(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==Vi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===dt&&(this.renderTarget.texture.encoding=dt))}},zAe=class extends fn{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},GS=new et,YT=class extends fn{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,n){let s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=s!==null,c=a>=0;l?(GS.copy(e.getClearColor(GS)),e.setClearColor(s,c?a:o)):c&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(GS,o):c&&e.setClearAlpha(o)}},fl=-1,An=class extends Ti{constructor(e,t=fl,r=fl,i=1){super(),this.resizable=e,this.base=new $(1,1),this.preferred=new $(t,r),this.target=this.preferred,this.s=i}get width(){let{base:e,preferred:t,scale:r}=this,i;return t.width!==fl?i=t.width:t.height!==fl?i=Math.round(t.height*(e.width/Math.max(e.height,1))):i=Math.round(e.width*r),i}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,i;return t.height!==fl?i=t.height:t.width!==fl?i=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i=Math.round(e.height*r),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(fl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return fl}},HS=!1,qB=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case Yn:r=this.materialsFlatShadedDoubleSide;break;case di:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case Yn:r=this.materialsDoubleSide;break;case di:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=oa;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=di,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Yn,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=di,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Yn,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,HS){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return HS}static set workaroundEnabled(e){HS=e}},NAe=class extends fn{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new YT,this.overrideMaterialManager=r===null?null:new qB(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new qB(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,c=s.background,h=e.shadowMap.autoUpdate,u=this.renderToScreen?null:t;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,a):e.render(s,a),a.layers.mask=l,s.background=c,e.shadowMap.autoUpdate=h}},$B=class extends fn{constructor(e,t,{resolutionScale:r=1,width:i=An.AUTO_SIZE,height:n=An.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new NAe(e,t,new kU({depthPacking:SU}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let o=a.getClearPass();o.overrideClearColor=new et(16777215),o.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new $t(1,1,{minFilter:ir,magFilter:ir,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new An(this,i,n,r);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},It={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},FAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",UAe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",jAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",VAe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",GAe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",HAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",WAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",qAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",$Ae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",XAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",YAe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",QAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",KAe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",ZAe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",JAe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",eMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",tMe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",rMe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",iMe=new Map([[It.SKIP,null],[It.ADD,FAe],[It.ALPHA,UAe],[It.AVERAGE,jAe],[It.COLOR_BURN,VAe],[It.COLOR_DODGE,GAe],[It.DARKEN,HAe],[It.DIFFERENCE,WAe],[It.EXCLUSION,qAe],[It.LIGHTEN,$Ae],[It.MULTIPLY,XAe],[It.DIVIDE,YAe],[It.NEGATION,QAe],[It.NORMAL,KAe],[It.OVERLAY,ZAe],[It.REFLECT,JAe],[It.SCREEN,eMe],[It.SOFT_LIGHT,tMe],[It.SUBTRACT,rMe]]),nMe=class extends Ti{constructor(e,t=1){super(),this.f=e,this.opacity=new ye(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return iMe.get(this.blendFunction)}},$a={NONE:0,DEPTH:1,CONVOLUTION:2},no=class extends Ti{constructor(e,t,{attributes:r=$a.NONE,blendFunction:i=It.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=s,this.extensions=a,this.blendMode=new nMe(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=rl){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof ec||t===this.renderer)continue;this[e].dispose()}}}};function XB(e,t,r){for(let i of t){let n="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(s,n))}}function sMe(e,t,r,i,n,s,a){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),c=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),h=[],u=[],d=!1,p=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(c&&(a&$a.CONVOLUTION)!==0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let f=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=tE.Section;if(c){let v=`	${e}MainUv(UV);
`;r.set(m.FRAGMENT_MAIN_UV,r.get(m.FRAGMENT_MAIN_UV)+v),d=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let v=`	${e}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,r.set(m.VERTEX_MAIN_SUPPORT,r.get(m.VERTEX_MAIN_SUPPORT)+v),h=h.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),u=u.concat(h).concat([...o.get("vertex").matchAll(f)].map(y=>y[1]))}u=u.concat([...o.get("fragment").matchAll(f)].map(v=>v[1])),u=u.concat([...t.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...t.uniforms.keys()]),t.uniforms.forEach((v,y)=>s.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),t.defines.forEach((v,y)=>n.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),XB(e,u,n),XB(e,u,o);let g=t.blendMode;if(i.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;(a&$a.DEPTH)!==0&&v.test(o.get("fragment"))&&(y+="depth, ",p=!0),y+=`color1);
	`;let x=e+"BlendOpacity";s.set(x,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${x});

	`,r.set(m.FRAGMENT_MAIN_IMAGE,r.get(m.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,r.set(m.FRAGMENT_HEAD,r.get(m.FRAGMENT_HEAD)+y)}r.set(m.FRAGMENT_HEAD,r.get(m.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&r.set(m.VERTEX_HEAD,r.get(m.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:h,transformedUv:d,readDepth:p}}var K1=class extends fn{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new tE(null,null,null,e),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=tE.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,s=new Set,a=0,o=0,l=0,c=!1,h=!1;for(let d of this.effects)if(d.blendMode.blendFunction===It.SKIP)l|=d.getAttributes()&$a.DEPTH;else if((l&d.getAttributes()&$a.CONVOLUTION)!==0)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let p="e"+a++,f=sMe(p,d,t,r,i,n,l);if(o+=f.varyings.length,c=c||f.transformedUv,h=h||f.readDepth,d.extensions!==null)for(let m of d.extensions)s.add(m)}let u=/\bblend\b/g;for(let d of r.values()){let p=d.getShaderCode().replace(u,`blend${d.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+p+`
`)}if((l&$a.DEPTH)!==0){if(h){let d=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,d+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(c){let d=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,d+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");t.forEach((d,p,f)=>f.set(p,d.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=o,this.skipRendering=a===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(s).setUniforms(n).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=rl){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,n){for(let s of this.effects)s.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=i,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==Vi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},aMe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],U6=class extends fn{constructor({resolutionScale:e=.5,width:t=An.AUTO_SIZE,height:r=An.AUTO_SIZE,kernelSize:i=QT.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new $t(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new An(this,t,r,e);n.addEventListener("change",s=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new WB,this.ditheredBlurMaterial=new WB,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=aMe[this.kernelSize],h=this.blurMaterial,u=t,d,p;for(this.fullscreenMaterial=h,d=0,p=c.length-1;d<p;++d){let f=(d&1)===0?o:l;h.kernel=c[d],h.inputBuffer=u.texture,e.setRenderTarget(f),e.render(s,a),u=f}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=c[d],h.inputBuffer=u.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(s,a)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.blurMaterial.setSize(i,n),this.ditheredBlurMaterial.setSize(i,n)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==Vi?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===dt&&(this.renderTargetA.texture.encoding=dt,this.renderTargetB.texture.encoding=dt))}static get AUTO_SIZE(){return An.AUTO_SIZE}},oMe=class extends fn{constructor({width:e=An.AUTO_SIZE,height:t=An.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new PAe(n,i),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new $t(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new An(this,e,t);s.addEventListener("change",a=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,n){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==Vi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},lMe=class extends fn{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new YT(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,n){let s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,h=this.inverted?0:1,u=1-h;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,h,4294967295),a.stencil.setClear(u),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(r),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},Ia=class extends fn{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,i,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==Vi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},WS=1/1e3,cMe=1e3,uMe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*WS}getFixedDelta(){return this.fixedDelta*WS}setFixedDelta(e){return this.fixedDelta=e*cMe,this}getElapsed(){return this.elapsed*WS}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},QT={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},hMe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,dMe=class extends no{constructor({blendFunction:e=It.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:s=An.AUTO_SIZE,height:a=An.AUTO_SIZE,kernelSize:o=QT.LARGE}={}){super("BloomEffect",hMe,{blendFunction:e,uniforms:new Map([["map",new ye(null)],["intensity",new ye(n)]])}),this.renderTarget=new $t(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new oMe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new U6({resolutionScale:i,width:s,height:a,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===dt&&(this.renderTarget.texture.encoding=dt))}},pMe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",fMe=class extends no{constructor({blendFunction:e=It.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",pMe,{blendFunction:e,uniforms:new Map([["brightness",new ye(t)],["contrast",new ye(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},mMe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",gMe=class extends no{constructor(e=It.NORMAL){super("ColorAverageEffect",mMe,{blendFunction:e})}},vMe="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",yMe="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",xMe=class extends no{constructor({blendFunction:e=It.NORMAL,offset:t=new $(.001,5e-4)}={}){super("ChromaticAberrationEffect",vMe,{vertexShader:yMe,blendFunction:e,attributes:$a.CONVOLUTION,uniforms:new Map([["offset",new ye(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},bMe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,wMe=class extends no{constructor(e,{blendFunction:t=It.NORMAL,worldFocusDistance:r,worldFocusRange:i,focusDistance:n=0,focalLength:s=.1,focusRange:a=s,bokehScale:o=1,width:l=An.AUTO_SIZE,height:c=An.AUTO_SIZE}={}){super("DepthOfFieldEffect",bMe,{blendFunction:t,attributes:$a.DEPTH,uniforms:new Map([["nearColorBuffer",new ye(null)],["farColorBuffer",new ye(null)],["nearCoCBuffer",new ye(null)],["scale",new ye(1)]])}),this.camera=e,this.renderTarget=new $t(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Ia(new vAe(e));let h=this.cocMaterial;h.focusDistance=n,h.focusRange=a,r!==void 0&&(h.worldFocusDistance=r),i!==void 0&&(h.worldFocusRange=i),this.blurPass=new U6({kernelSize:QT.MEDIUM,width:l,height:c});let u=this.blurPass.getResolution();u.addEventListener("change",p=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new Ia(new OAe(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=F6.MULTIPLY,d.colorChannel=N6.GREEN,this.bokehNearBasePass=new Ia(new N0(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Ia(new N0(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Ia(new N0(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Ia(new N0(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return eE(-r,t.near,t.far)}setDepthTexture(e,t=rl){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(a=>a.setSize(e,t)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(a=>a.setSize(i,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.fullscreenMaterial.setSize(i,n))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,Vi),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===dt&&(this.renderTarget.texture.encoding=dt,this.renderTargetNear.texture.encoding=dt,this.renderTargetFar.texture.encoding=dt,this.renderTargetMasked.texture.encoding=dt))}};new C;new we;var SMe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",_Me=class extends no{constructor({blendFunction:e=It.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",SMe,{blendFunction:e,uniforms:new Map([["hue",new ye(new C)],["saturation",new ye(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new et;var AMe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,MMe=class extends no{constructor({blendFunction:e=It.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",AMe,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},EMe="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",CMe=class extends no{constructor(e=30){super("PixelationEffect",EMe,{uniforms:new Map([["active",new ye(!1)],["d",new ye(new $)]])}),this.resolution=new $,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new C;new C;var YB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",QB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",TMe="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",PMe="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",eu={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},j6=class extends no{constructor({preset:e=eu.MEDIUM,edgeDetectionMode:t=fb.COLOR,predicationMode:r=AAe.DISABLED}={}){super("SMAAEffect",TMe,{vertexShader:PMe,blendFunction:It.NORMAL,attributes:$a.CONVOLUTION|$a.DEPTH,uniforms:new Map([["weightMap",new ye(null)]])});let i,n;arguments.length>1&&(i=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new $t(1,1,{minFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new YT(!0,!1,!1),this.clearPass.overrideClearColor=new et(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Ia(new MAe),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new Ia(new RAe);let s=new tj;s.onLoad=()=>{let a=new Jr(i);a.name="SMAA.Search",a.magFilter=ir,a.minFilter=ir,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!0,this.weightsMaterial.searchTexture=a;let o=new Jr(n);o.name="SMAA.Area",o.magFilter=xt,o.minFilter=xt,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),i!==void 0&&n!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(i=new Image,n=new Image,i.addEventListener("load",()=>s.itemEnd("search")),n.addEventListener("load",()=>s.itemEnd("area")),i.src=YB,n.src=QB),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case eu.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case eu.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case eu.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case eu.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=rl){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return YB}static get areaImageDataURL(){return QB}},DMe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,F0={DEFAULT:0,ESKIL:1},OMe=class extends no{constructor({blendFunction:e=It.NORMAL,technique:t=F0.DEFAULT,eskil:r=!1,offset:i=.5,darkness:n=.5}={}){super("VignetteEffect",DMe,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new ye(i)],["darkness",new ye(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===F0.ESKIL}set eskil(e){this.technique=e?F0.ESKIL:F0.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},il=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=It.NORMAL}},LMe=class extends il{constructor(){super(dMe),this.blendFunction=It.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},IMe=class extends il{constructor(){super(fMe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},RMe=class extends il{constructor(){super(xMe),this.effect.offset=new $(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},BMe=class extends il{constructor(){super(gMe)}},kMe=class extends il{constructor(){super(_Me),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},zMe=class extends il{constructor(){super(MMe),this.blendFunction=It.OVERLAY}},NMe=class extends il{constructor(){super(OMe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},FMe=class extends il{constructor(e){super(wMe,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},UMe=class extends il{constructor(){super(CMe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},jMe=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,VMe=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,GMe=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,HMe=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,iE=class extends nr{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new ye(null)},blending:Hr,depthWrite:!1,depthTest:!1,vertexShader:GMe,fragmentShader:HMe})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},WMe=class extends fn{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new iE,this.resolutionVector=new $,this.resolveMaterial=new nr({name:"TAAResolveMaterial",uniforms:{inputBuffer:new ye(null),historyBuffer:new ye(null),velocityBuffer:new ye(null),depthBuffer:new ye(null),resolution:new ye(new $)},blending:Hr,depthWrite:!1,depthTest:!1,vertexShader:jMe,fragmentShader:VMe}),this.historyRenderTarget=new $t(1024,1024,{minFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new $t(1024,1024,{minFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let r=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(r),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},qMe=class extends fn{constructor(e,t,r){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new $B(e,t,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new iE,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new iE,this.depthPass=new $B(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,r){let i=this.camera.layers.mask,n=e;n.setRenderTarget(n.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],n.clear(),n.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,r),n.shadowMap.needsUpdate=!1,n.shadowMap.autoUpdate=!1;let s=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(s),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}},KB=new ec,$Me=new nr({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),nE=class extends fn{constructor(e,t,r){super("OpaquePass",t!=null?t:KB,r),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e!=null?e:KB}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Rn&&(this.originalMaterials.set(i.id,i.material),i.material=$Me)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:t;e.setRenderTarget(r),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,n)=>{let s=this.scene.getObjectById(n);s&&(s.material=i)})}},XMe=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:n=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new rE,this.depthTexture=null,this.timer=new uMe,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,r,n,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,r,n,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,r,n,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t,r;if(this.renderer=e,e!==null){let i=e.getSize(new $),n=(r=(t=e.getContext().getContextAttributes())==null?void 0:t.alpha)!=null?r:!1,s=this.inputBuffer.texture[0].type;s===Vi&&e.outputEncoding===dt&&(this.inputBuffer.texture[0].encoding=dt,this.outputBuffer.texture[0].encoding=dt,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(i.width,i.height,!1);for(let a of this.passes)a.initialize(e,n,s)}}replaceRenderer(e,t=!0){let r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new Zd(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Lu,e.type=mu):e.type=Bl,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i,n,s){let a=this.renderer,o=a===null?new $:a.getDrawingBufferSize(new $),l={minFilter:xt,magFilter:xt,wrapS:Lr,wrapT:Lr,stencilBuffer:t,depthBuffer:e},c;return i>0?(c=new $t(o.width,o.height,l),c.samples=i):(n?(c=new Cae(o.width,o.height,2,l),c.texture[1].type=Qd):c=new $t(o.width,o.height,l),c.depthTexture=new Zd(2048,2048),c.depthTexture.type=Qn),r===Vi&&a!==null&&a.outputEncoding===dt&&(Array.isArray(c.texture)?c.texture.forEach(h=>h.encoding=dt):c.texture.encoding=dt),Array.isArray(c.texture)?c.texture.forEach((h,u)=>{h.name=`EffectComposer.Buffer ${n} ${u}`,h.generateMipmaps=!1}):(c.texture.name=`EffectComposer.Buffer ${n}`,c.texture.generateMipmaps=!1),c.name=s,c}addPass(e,t){var o,l;let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new $),s=(l=(o=i.getContext().getContextAttributes())==null?void 0:o.alpha)!=null?l:!1,a;if(e.MRTCompatible&&(a=this.inputBuffer.texture[0].type),e.MRTCompatible||(a=this.inputBuffer.texture.type),e.setRenderer(i),e.setSize(n.width,n.height),e.initialize(i,s,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let c=this.createDepthTexture();for(e of r)e.setDepthTexture(c)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,s)=>n||s.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,s=this.inputBufferSingle,a=this.outputBufferSingle,o=!1,l,c,h,u;e===void 0&&(e=this.timer.update().getDelta());for(let d of this.passes)d.enabled&&(d.MRTCompatible?d.render(t,i,n,e,o):d.render(t,s,a,e,o),d.needsSwap&&(o&&(r.renderToScreen=d.renderToScreen,l=t.getContext(),c=t.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),r.render(t,i,n,e,o),c.setFunc(l.EQUAL,1,4294967295)),h=i,u=s,i=n,s=a,n=h,a=u),d instanceof lMe?o=!0:d instanceof zAe&&(o=!1))}setSize(e,t,r){let i=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let s=i.getSize(new $);e=s.width,t=s.height}i.setSize(e,t,r);let n=i.getDrawingBufferSize(new $);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height),this.inputBufferSingle.setSize(n.width,n.height),this.outputBufferSingle.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},YMe=new nr({name:"CombineMaterial",uniforms:{inputBufferA:new ye(null),inputBufferB:new ye(null)},blending:Hr,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),QMe=class extends fn{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=YMe,this.helperPass=new nE(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new nE(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new j6({preset:eu.LOW,edgeDetectionMode:fb.COLOR});this.effectPass=new K1(this.camera,t),this.rt=new $t(10,10,{minFilter:xt,magFilter:xt,wrapS:Lr,wrapT:Lr,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,r){this.rt.depthTexture=t.depthTexture;let i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},KMe=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,ZMe=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,JMe=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,eEe=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,tEe=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,rEe=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,xf=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],iEe=new nr({vertexShader:KMe,fragmentShader:ZMe}),U0=new nr({vertexShader:tEe,fragmentShader:rEe,uniforms:{texture_ao_lrez:new ye(null),texture_depth_lrez:new ye(null),texture_depth_hrez:new ye(null),near:new ye(null),far:new ye(null)}}),nEe=class extends fn{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,i=1024;this.gBuffer=new $t(r,i,{type:Qn,depthTexture:new Zd(r,i),minFilter:xt,magFilter:xt}),this.depthBufferHighRes=new $t(r,i,{depthTexture:new Zd(r,i)}),this.aoBuffer=new $t(r,i,{minFilter:xt,magFilter:xt}),this.splineScene=e,this.splineCamera=t;let n=new Float32Array(xf.length*2);for(let a=0;a<xf.length;a++){let o=a*2;n[o+0]=xf[a][0],n[o+1]=xf[a][1]}this.blueNoiseInDiskTexture=new p1(n,xf.length,1,xU,Qn),this.blueNoiseInDiskTexture.wrapS=Bo,this.blueNoiseInDiskTexture.wrapT=Bo,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new nr({vertexShader:JMe,fragmentShader:eEe,uniforms:{near:new ye(null),far:new ye(null),fov:new ye(null),proj_info:new ye(new pt),is_ortho:new ye(!1),resolution:new ye(new $),radius_of_influence:new ye(8),radius_in_screen_space:new ye(1),exponent:new ye(1),ao_color:new ye(new C),bias:new ye(.5),texture_depth:new ye(null),texture_normals:new ye(null),texture_blue_noise:new ye(null),texture_blue_noise_in_disk:new ye(this.blueNoiseInDiskTexture),frame_index:new ye(0),fog_enabled:new ye(!1),fog_near:new ye(1),fog_far:new ye(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new $t(r,i,{minFilter:xt,magFilter:xt,wrapS:Lr,wrapT:Lr,depthBuffer:!1,type:Qn});let s=new j6({preset:eu.ULTRA,edgeDetectionMode:fb.COLOR});this.effectPass=new K1(this.camera,s)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let r=this._runHalfRes?.5:1,i=e*r,n=t*r;this.gBuffer.setSize(i,n),this.aoBuffer.setSize(i,n),this.hbaoMaterial.uniforms.resolution.value.set(i,n),this.aaBuffer.setSize(i,n),this.effectPass.setSize(i,n)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,t,r){this.splineScene.overrideMaterial=iEe;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let n=this.splineCamera.perspCamera.projectionMatrix.elements,s=2/n[0],a=2/n[5],o=-(1-n[8])/n[0],l=-(1+n[9])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,a,o,l);let c=this.splineCamera.perspCamera.fov*(Math.PI/180),h=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(c*.5)*2),u=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*h;this.hbaoMaterial.uniforms.radius_in_screen_space.value=u,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let n=this.splineCamera.orthoCamera.projectionMatrix.elements,s=2/n[0],a=2/n[5],o=-(1+n[12])/n[0],l=-(1-n[13])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,a,o,l);let c=.5*(this.hbaoMaterial.uniforms.resolution.value.y/a),h=this.hbaoMaterial.uniforms.radius_of_influence.value*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=h,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=U0,U0.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,U0.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,U0.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},sEe=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,aEe=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,oEe=class extends Ia{constructor(){super(new nr({vertexShader:sEe,fragmentShader:aEe,uniforms:{tInput:new ye(null),tMap:new ye(null),uResolution:new ye(new $),uSize:new ye(new $),uCoords:new ye(new $),uScale:new ye(1),uSceneColor:new ye(new et(16711680)),uDPR:new ye(1),uCurrent:new ye(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},lEe=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cEe=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,uEe=[],hEe=class extends Ia{constructor(){super(new nr({vertexShader:lEe,fragmentShader:cEe,uniforms:{toScene:new ye(null),fromScene:new ye(null),uResolution:new ye(new $),uDPR:new ye(1),mixRatio:new ye(0),threshold:new ye(.1),useTexture:new ye(0),tMixTexture:{value:uEe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}};function ZB(e,t){return t&&t.enabled&&e.push(t.effect),e}var dEe=e=>Object.values(It).includes(e)?e:It.NORMAL,pEe=class extends Ti{constructor(e){super(),this.postprocessingState=N1.defaultData,this._scene=new ec,this._camera=new Ui,this.effects=new Map,this.blueNoiseTexture=new p1,this._renderToScreen=!0,this.clock=new gde,this.renderer=e,this.debug=!1,this.effects.set("bloom",new LMe),this.effects.set("chromaticAberration",new RMe),this.effects.set("vignette",new NMe),this.effects.set("noise",new zMe),this.effects.set("colorAverage",new BMe),this.effects.set("hueSaturation",new kMe),this.effects.set("brightnessContrast",new IMe),this.effects.set("depthOfField",new FMe),this.effects.set("pixelation",new UMe),this.effectComposer=new XMe(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new nE(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new qMe(this.scene,this.camera,this.renderer),this.aoPass=new nEe(this.scene,this.camera),this.taaPass=new WMe,this.taaPass.renderToScreen=!1,this.helperPass=new QMe(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new oEe,this.overlayPass.enabled=!1,this.sceneTransitionPass=new hEe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.overlayPass.texture=e,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let r=this.effectComposer.passes[t];if(r.enabled===!0&&!e&&this._renderToScreen){r.renderToScreen=!0,e=!0;continue}r.renderToScreen=!1}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new p1(e,128,128),this.blueNoiseTexture.wrapS=Bo,this.blueNoiseTexture.wrapT=Bo,this.blueNoiseTexture.minFilter=ir,this.blueNoiseTexture.magFilter=ir,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,r,i,n,s,a,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=r,this.aoPass.aoColor=i,this.aoPass.fogEnabled=n,this.aoPass.fogNear=s,this.aoPass.fogFar=a,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(ZB,[]);r.length>0&&(this.uvEffectPass=new K1(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(ZB,[]);i.length>0&&(this.effectPass=new K1(this.camera,...i),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new $;this.renderer.getDrawingBufferSize(e),this._rt=new $t(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Bo,wrapT:Bo}),this._rt.samples=0,this._savePass=new rE(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new rE(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let n of Object.entries(r)){let s=n[1],a=this.effects.get(n[0]);if(a){a.enabled!==s.enabled&&(i=!0),a.enabled=s.enabled;for(let[o,l]of Object.entries(s))o==="blendFunction"?a.blendFunction=dEe(l):a[o]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,i){e instanceof pt?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,i){e instanceof pt?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},fEe=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, ${5} - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,mEe=ft.lights_fragment_begin,gEe=ft.shadowmask_pars_fragment,JB=null,vEe=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},yEe=(e="medium")=>{if(JB===e)return!1;JB=e;let t=vEe(e);ft.shadowmap_pars_fragment=fEe(t);let r=mEe.slice();r=r.replace("getShadow( spotShadowMap[ i ]",`getShadow( UNROLLED_LOOP_INDEX + ${3}, spotShadowMap[ i ]`),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),ft.lights_fragment_begin=r;let i=gEe.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),ft.shadowmask_pars_fragment=i,!0},xEe=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,bEe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,qS=new nr({vertexShader:xEe,fragmentShader:bEe,uniforms:{depthContrast:{value:1}}}),ek=new Jr,wEe=class extends zU{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new $,this.pipeline=new pEe(this),this.dummyCamra=new Ui,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(n=!0,s=!0,a=!0)=>{let o=this.getContext(),l=0;n&&(l|=o.COLOR_BUFFER_BIT),s&&(l|=o.DEPTH_BUFFER_BIT),a&&(l|=o.STENCIL_BUFFER_BIT),o.clear(l),o.clearBufferfv(o.COLOR,1,[0,0,0,1])},this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=BC;let i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio!==n&&(this._pixelRatio=n,t(n))},this.setSize=(n,s,a=!0)=>{var o,l;(this.viewportWidth!==n||this.viewportHeight!==s)&&(this.viewportWidth=n,this.viewportHeight=s,r(n,s,a),(o=this.normalRenderTarget)==null||o.setSize(n*this._pixelRatio,s*this._pixelRatio),this._resizeTransmission(n,s),(l=this.transmissionDepthTarget)==null||l.setSize(n*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(n,s,a))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new $t(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:xt,magFilter:xt,wrapS:Lr,wrapT:Lr,depthBuffer:!1}))}_resizeTransmission(e,t){var r,i;(r=this.transmissionRenderTarget)==null||r.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(i=this.aoRenderTarget)==null||i.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return Je.transmissionLod.value===1}set hdTransmission(e){Je.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new $t(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Yd,magFilter:xt,wrapS:Lr,wrapT:Lr,depthBuffer:!1}),this.transmissionDepthTarget=new $t(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:ir,magFilter:ir,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new $t(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:ir,magFilter:ir,type:Qn,depthTexture:new Zd(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof Ui?qS.uniforms.depthContrast.value=(r.far-r.near)/1e4:qS.uniforms.depthContrast.value=1,t.overrideMaterial=qS,this.render(t,r),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?oE:null,r.layers.enable(0),r.layers.enable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,r=1){this.dummyCamra.updateCameraState(t.dataPatched);let i=t.height,n=t.width,s=this.viewportWidth/this.viewportHeight;n<i?n=i*s:i=n/s,this.dummyCamra.setViewplaneSize(n,i);for(let a=0;a<r;a++)this.renderSplineScene(e,this.dummyCamra)}renderSplineScene(e,t,{sceneHelpers:r=void 0,sceneHelpersOnTop:i=void 0,overrideTransmission:n=void 0,overrideNormal:s=void 0}={}){let a=e instanceof eP?e.activePage:e,o=a.visible;a.visible=!0;let l=a.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(a.bgColor,a.bgColor.a),a.penumbraSizeArray.forEach((d,p)=>{Je.penumbraSize.value[p]=d}),Je.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Je.resolution.value.set(this.resolution.x,this.resolution.y):Je.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),s!==void 0?(Je.normalRenderTarget.value=s,Je.normalRenderTargetDepth.value=ek):l.needsNormal()&&(this.createNormalRenderTarget(),Je.normalRenderTarget.value=this.normalRenderTarget.texture,Je.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,a,t));let c=a.data.ao,h=c.occlusion;h&&(this.createAORenderTarget(),Je.aoRenderTarget.value=this.aoRenderTarget.texture),Je.aoEnabled.value=h,this.pipeline.setAmbientOcclusionParams(c.occlusion,c.radius,c.bias,a.aoColor,a.fog!==null,a.backupFog.near,a.backupFog.far,c.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let u=!1;if(n!==void 0)Je.transmissionRenderTarget.value=n,Je.transmissionRenderTargetDepth.value=ek,this.pipeline.setTransmissionPassEnabled(!1);else{let d=l.needsTransmission();d&&(this.transmissionRenderTarget===void 0&&(u=!0),this.createTransmissionRenderTarget(),Je.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Je.aspectRatio.value=t_e(this.viewportWidth,this.viewportHeight),Je.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(d)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=a,this.pipeline.camera=t,u&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==a.postprocessing&&(this.pipeline.updatePostprocessing(a.postprocessing),!r&&!i&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),a.overrideMaterial=l.wireframeState?oE:null,this.pipeline.render(),Je.frameIndex.value=(Je.frameIndex.value+1)%16,t instanceof Ui&&t.copyHistory(),a.visible=o}renderFromSceneForSceneTransitionPass(e,t,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,r,i,n,s;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(s=(n=this.normalRenderTarget)==null?void 0:n.depthTexture)==null||s.dispose()}},V6=class extends Qg(Ide){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Kg(this.object,V6.geometryHelper,e,t)}},G6=class extends Qg(Lde){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Kg(this.object,G6.geometryHelper,e,t)}},sE=class extends Qg(Ode){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Kg(this.object,sE.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=sE._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},H6=sE;H6._vector=new C;function SEe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var W6=class extends XT(fde,V6){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let n=new x1(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof x1&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&SEe(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),r&&this.update()}},tk=new C,rk=new C,ik=new mt,q6=class extends XT(ude,H6){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=vt.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let n=new x1(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof x1&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),rk.setFromMatrixPosition(this.matrixWorld),ik.setFromRotationMatrix(this.matrixWorld),tk.copy(this.up).applyQuaternion(ik).negate().multiplyScalar(this.distance),this.target.position.copy(rk).add(tk),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},sc=class extends OT(ec){constructor(e,t){super(),this.data=t,this.bgColor=new On(1,1,1,1),this.fog=null,this.backupFog=new NU(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new et,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new Ui(Dp,{...hg.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new lde(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=rn(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Ip)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&yEe(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let r=this.scene;r.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=rn(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=rn(e.aoColor,t))}updateByOp(e,t,r,i){super.updateByOp(e,t,r,i);let n=t;As(e.path,["fog"])?this.updateFog(n.fog,r.shared):As(e.path,["ao"])?this.updateAo(n.ao,r.shared):As(e.path,["ambient"])?this.updateAmbientLight(n.ambient,r.shared):As(e.path,["shadow"])&&this.updateShadow(n.shadow)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(rn(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e,t;return(t=(e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))!=null?t:this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(r=>{if(!r.visible)return!0;r instanceof W6&&r.visible&&e<3&&(this.penumbraSizeArrayCache[e]=r.data.penumbraSize,e+=1),r instanceof q6&&r.visible&&e<5-3&&(this.penumbraSizeArrayCache[3+t]=r.data.penumbraSize,t+=1)})}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let s=n.cloner;Rt.is(n)&&(n.visible||(s==null?void 0:s.object.data.visible))&&((Ks(n)||JM(n)&&this.scene.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),aE(n,e,t,!0)),r(n))}};return r(this),t}},_Ee=class extends XT(dde,G6){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let n=new C(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new C(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),a=new Br(n,s),o=new b1(a,new et(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof b1){let r=this.shadow.camera,i=new C(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new C(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},AEe=class extends nn{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?FT(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},KT=class extends nn{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var i;let e=this.data.geometry.extrusion.shape,t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let s=this._context.scene.find(n);s!=null&&s.data&&(s.attachedPaths.add(this),t=(i=s.geometry.userData)==null?void 0:i.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=qV;break;case"Ellipse":n=zT;break;case"Polygon":n=WV;break;case"Star":n=$V;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build(),this.attachedSurfaceCloners.forEach(n=>n.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e){return super.updateTransformState(e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?FT(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},Ld=class extends Zg(sd,pb){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=G1.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(r){let i,n;for(let s of Fl.rootOverrideProps)e[s]===void 0?(i===void 0&&(i={...e}),i[s]=r.data[s]):(n===void 0&&(n={}),n[s]=e[s],i===void 0&&(i={...e}),i[s]=tc.apply(r.data[s],e[s]));return this.overrideData=n,i}else return{...ln.defaultData,...e,...Vo(ln.defaultData,Fl.rootOverrideProps)}}updateByOp(e,t,r,i){let n;if(this.isInstanceRoot&&!i){if(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component)for(let s of Fl.rootOverrideProps)s in e.props&&e.props[s]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[s]=this.component.data[s]);else if(e.type===0&&e.path.length>0&&Fl.rootOverrideProps.includes(e.path[0])){let s=e.path[0];n===void 0&&(n={...e,path:[],props:{[s]:t[s]}})}}super.updateByOp(n!=null?n:e,t,r,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){var r;let t=this.data;if(this.component===void 0){let i=(r=e.scene.find(t.component))!=null?r:null,n=!1;if(i!==this.oldComponent){if(this.oldComponent){let s=0;for(let a of this.children)if(Rt.is(a))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),ZT(a),s+=1;else break;this.children.splice(0,s)}n=!0}if(i){let s={};$6(e,[this.uuid],t.overrides,this,i,i,0,n,s);for(let a of this.children)if(Rt.is(a)){let o=a.data;o.type==="Empty"&&o.animations&&a.traverseEntity(l=>{if(l instanceof nn&&l.isSkinnedMesh){let c=l.dataPatched;if(c.bones&&c.boneInverses){let h=c.bones.map(p=>e.scene.find(s[p])),u=c.boneInverses.map(p=>new we().fromArray(p)),d=new HC(h,u);l.bind(d,l.bindMatrix)}}else l.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function ZT(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)Rt.is(r)&&ZT(r)}}function nk(e,t,r,i){return e.component===t&&yT(e.identity,i)?e.overrideData===r?2:1:0}function $6(e,t,r,i,n,s,a,o,l){var h;if(a>50)return!1;if(i.component!==n){if(i.component){let u=i.component.instances.indexOf(i);u>=0&&i.component.instances.splice(u,1)}n.instances.push(i),i.component=n}n instanceof Ld&&n.isInstanceRoot&&n.expandInstanceChildren(e);let c=0;for(let u of n.children)if(Rt.is(u)){let d=[...t,...typeof u.identity=="string"?[u.identity]:u.identity],p=F1.resolve(r,d,1);p!=null&&!(p instanceof ei)&&(Object.setPrototypeOf(p,ei.prototype),console.error("wrong prototype"));let f=null,m;if(!o){let g=i.children[c];if(f=Rt.is(g)?g:null,f!==null){let v=nk(f,u,p,d);m=v>=1?f.stateSelection:void 0,v!==2&&(f=null)}if(f===null&&(f=(h=e.scene.findInstance(d))!=null?h:null,f!==null)){let v=nk(f,u,p,d);if(m=v>=1?f.stateSelection:void 0,v!==2)f=null;else{let y=f.parent.children.indexOf(f);f.parent.children.splice(y,1),i.children.splice(c,0,f),f.parent===i?y<=c&&console.error("not possible"):(f.parent=i,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let g=p?tc.apply(u.data,p):u.data;Bu.is(g.type)&&(g={...g,type:"Empty"}),f=Ul.createEntity(d,g,e),f.overrideData=p,i.add(f),i.children.splice(i.children.length-1,1),i.children.splice(c,0,f),f.updateState(f.data,e),m&&f.changeSelectedState(m,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let g=f.identity[f.identity.length-1];l[g]=f.uuid}c+=1,$6(e,t,r,f,u,s,a+1,o,l)}if(!o){let u=c;for(;;){let d=i.children[c];if(Rt.is(d))e.pendingDeletes.add(d);else break;c+=1}i.children.splice(u,c-u)}return!0}var MEe=class extends Zg(FU,pb){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}};function EEe(e,t,r){let i;return t.geometry.type==="TextGeometry"?new R6(e,t,r):(t.geometry.type==="SubdivGeometry"?i=new yg(e,t,r):t.geometry.type==="PathGeometry"?i=new KT(e,t,r):t.geometry.type==="VectorGeometry"?i=new AEe(e,t,r):t.geometry.type==="BooleanGeometry"?i=new cp(e,t,r):i=new nn(e,t,r),i)}function JT(e,t,r){return t.type==="Mesh"?EEe(e,t,r):t.type==="Empty"?new xg(e,t):t.type==="Bone"?new MEe(e,t):t.type==="Page"?new sc(e,t):t.type==="PointLight"?new _Ee(e,t,r):t.type==="SpotLight"?new q6(e,t,r):t.type==="DirectionalLight"?new W6(e,t,r):t.type==="Component"||t.type==="Instance"?new Ld(e,t,r):Bu.is(t.type)?new Ui(e,t):(console.error(t),new xg(e,t))}Ul.createEntity=JT;function CEe(e,t,r){let i=JT(e.identity,t,r),n=e.children,s=e.attachedPaths,a=e.parent,o=e.component,l=e.instances,c=e.overrideData,h=e.uuid,u=e.stateSelection;e.dispose();for(let d of Object.keys(e))delete e[d];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let d of Object.keys(i))e[d]=i[d];e.children=[...e.children,...n],e.attachedPaths=s,e.parent=a,e.component=o,e.instances=l,e.uuid=h,e.overrideData=c,e.updateState(e.data,r),u&&e.changeSelectedState(u,r),e.resetBBoxNeedsUpdate()}Ul.changeEntityProptotype=CEe;Ul.Cloner=ta;function TEe(e,t,r,i){e.updateByOp(t,r,i,!1)}function sk(e,t){let r=!1,i=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),r=!0,$T(e),qT(e)),i.length===0&&n.length===0&&e.layers.set(0),e instanceof Ip&&e.needsAO&&e.layers.enable(5),r}function ak(e,t){if(!t.layers)return!1;let r=!1,i=t.getLayersOfType("transmission").filter(s=>s.data.visible),n=t.getLayersOfType("outline").filter(s=>s.data.visible);return i.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),r=!0),i.length===0&&n.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),r}function PEe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Ip)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)sk(r,r.material[i])&&(t=!0);else sk(r,r.material)&&(t=!0)}),t}function DEe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Ip)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)ak(r,r.material[i])&&(t=!0);else ak(r,r.material)&&(t=!0)}),t}var OEe=new ij,LEe=new we,IEe=new yp;function aE(e,t,r,i=!1){let n=e.cloner;if(n)for(let s of n.children){let a=LEe.copy(s.matrixWorld).invert(),o=IEe.copy(t.ray).applyMatrix4(a),l=e.matrixWorld;o.applyMatrix4(l);let c=OEe;c.set(o.origin,o.direction),c.near=t.near,c.far=t.far;let h=c.intersectObject(e,!1);h.length>0&&r.push({...h[0],object:i?s:e})}}var REe=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,i)=>{let n=[i,r],s=r;for(;this._constraints.has(s);)s=this._constraints.get(s),t.has(s)||n.push(s);for(let a=n.length-2;a>=0;a--)if(!t.has(n[a])){let o=e.find(n[a]);o?o.applyPathSnapping(e):console.warn(`missing entity ${n[a]}`),t.add(n[a])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},oE=new Hg;oE.wireframe=!0;var ok=new C,eP=class extends ec{constructor(e,t){super(),this.data=e,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new REe,this.errorPage=new sc("fdasfa",{...op.defaultData,name:""}),this.invisibleObjects=new xg("jflkdsafjasdifjaslk",{...TM.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=DEe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=PEe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof sc&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this;){let n=i;i=i.parent;let s=i.children.indexOf(n);r.splice(0,0,s)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>sxe(r.sortKey,i.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===Dp)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let i=e.parent===null?this:this.find(e.parent);if(i===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);n.updateVisible(),n.resetBBoxNeedsUpdate(),Ks(n)&&Na(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty()}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markPenumbraSizeDirty(),i.parent.remove(i),Na(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Ks(i)&&(i.freeBooleanPointer(),n instanceof cp&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof KT&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid)}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),(r=i.cloner)==null||r.resetOnMove(),this.markToExpandCloner(i);let s=e.parent===null?this:this.find(e.parent);if(s===void 0)throw new Error("unexpected");s.add(i),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(),i.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let a=e.localIndex;s.children.splice(a,0,s.children.pop()),Ks(i)&&(i.invalidateUpstreamBooleanData(),Na(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof cp&&n.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){var e;return(e=this.find(this.data.publish.playPage))!=null?e:this.errorPage}updatePage(e){this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let t of this.children)t instanceof sc&&(t.visible=t.uuid===e,t.visible&&(this.activePage=t,this.activePage.onActive(this)))}updateEntityByOp(e,t,r,i){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:s}=t.props;t={...t,props:s},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{TEe(n,t,r,{scene:this,shared:i}),n instanceof nn&&n.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let r=Object.entries(t.data.lib.components).map((i,n)=>({data:i[1].asset.data,children:i[1].asset.children,id:i[0],fi:n}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(i=>{Na(i)&&i.recomputeBoolean(),i instanceof Ui&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Rt.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{Rt.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,i,n,s,a){if(e){let o=i.find(e);o&&o!==i&&n.forInstancesRec(l=>{l.data=ug(l.data,c=>{let h=c.events.data(a.id),u=l.goUp(s);if(u){let d=[...Uj(u.identity),e].join("-"),p=this.entityIdentityToEntity[d];if(p){let f=p.uuid,m=qa.zoom(h,t);m[r]=f}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,r,i,n,s){e.forEach(a=>{a.data.type==="Transition"?this.relativeizeInner(a.data.object,[...t,a.id],"object",r,i,n,s):a.data.type==="Animation"&&this.relativeizeInner(a.data.object,[...t,a.id],"object",r,i,n,s)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof Ld&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(i=>{if(i.data.type==="GameControl"){let n=!1;if(t.forInstancesRec(s=>{s.data=ug(s.data,a=>{s.isInstanceRoot||(a.events.delete(i.id),n=!0)}).data}),n===!1)for(let s of RM.list)this.rewriteActions(i.data.gameActions[s],["gameActions",s],e,t,r,i)}else i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,r,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,r,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,r,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,i)),this.rewriteActions(i.data.inActions,["inActions"],e,t,r,i),this.rewriteActions(i.data.outActions,["outActions"],e,t,r,i)):"actions"in i.data&&this.rewriteActions(i.data.actions,["actions"],e,t,r,i)})}),!0})}expandInstances(e,t,r){let i=new Set;this.traverseEntity(n=>{if(n instanceof Ld&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||n.resetBBoxNeedsUpdate(),r&&n.traverseEntity(s=>{r.addClip(s)}),!0});for(let n of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),ZT(n)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof Ld&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)Rt.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let r=[],i=n=>{for(let s of n.children){let a=s.cloner;if(Rt.is(s)&&!s.raycastLock&&(s.visible||(a==null?void 0:a.object.data.visible)))if(t===!0&&s.isInstanceRoot){let o=[];if(e.intersectObject(s,!0,o),o.length){let l=o[0];l.object=s,l.point.applyMatrix4(l.object.matrixWorld);let c=s.matrixWorld.clone().invert();l.point.applyMatrix4(c),r.push(l)}}else(Ks(s)||JM(s)&&this.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,r),aE(s,e,r)),i(s)}};return i(this),r}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let s=n.cloner;Rt.is(n)&&(n.visible||(s==null?void 0:s.object.data.visible))&&((Ks(n)||JM(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),aE(n,e,t,!0)),r(n))}};return r(this),t}forEachEntity(e){for(let t of this.children)Rt.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)Rt.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)Rt.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(r=>{if(r instanceof nn&&r.data.type==="Mesh"&&r.data.geometry.type==="TextGeometry"&&r.data.geometry.font===e){let i=r.geometry,n=r.data.geometry;i.updateFont(e,t).then(()=>{i.update(n);let s=r.invalidateDownstreamBooleanData();Na(s)&&s.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)vg.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)Rt.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,i,n,s){var l;let a={scene:this,shared:s},o=JT(e,t,a);return o&&(this.entityByUuid[e]=o,i.add(o),i.children.splice(n,0,i.children.pop()),r.length>0&&(o.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,o,s)),o.updateState(t,a),o instanceof nn&&o.updateGeometryGroupsIfNeeded(),o.updateVisible(),o.cloner&&this.toExpandCloner.add(o),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&o.traverseEntity(c=>{if(c instanceof nn&&c.isSkinnedMesh){let h=c.dataPatched;if(h.bones&&h.boneInverses){let u=h.bones.map(f=>this.find(f)),d=h.boneInverses.map(f=>new we().fromArray(f)),p=new HC(u,d);c.bind(p,c.bindMatrix)}}else c.matrixAutoUpdate=!0}),o}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:s,recursive:a}=e[i],o=this.find(s),l=a?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let r=new Br;return r.setFromPoints(t),r.getCenter(ok),ok}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Rn)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof pc&&e(t.material[r]);else t.material instanceof pc&&e(t.material)})}updateViewPlaneSize(e,t,r=!1){this.traverseConcreteEntity(i=>{i instanceof Ui&&i.setViewplaneSize(e,t,r)})}},xy=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},BEe=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return zEe(Math.atan2(i,r))},kEe=(e,t,r)=>{let i={x:0,y:0};return r=lE(r),i.x=e.x-t*Math.cos(r),i.y=e.y-t*Math.sin(r),i},lE=e=>e*(Math.PI/180),zEe=e=>e*(180/Math.PI),NEe=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,$S=new Map,lk=e=>{$S.has(e)&&clearTimeout($S.get(e)),$S.set(e,setTimeout(e,100))},Z1=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let s=0;s<i.length;s+=1)n=i[s],e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent(n,r)},ck=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let s=0;s<i.length;s+=1)n=i[s],e.removeEventListener?e.removeEventListener(n,r):e.detachEvent&&e.detachEvent(n,r)},X6=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),uk=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},cE=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},tP=(e,t,r)=>{let i=Y6(e);for(let n in i)if(i.hasOwnProperty(n))if(typeof t=="string")i[n]=t+" "+r;else{let s="";for(let a=0,o=t.length;a<o;a+=1)s+=t[a]+" "+r+", ";i[n]=s.slice(0,-2)}return i},FEe=(e,t)=>{let r=Y6(e);for(let i in r)r.hasOwnProperty(i)&&(r[i]=t);return r},Y6=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},XS=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},UEe=(e,t)=>{let r={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?r[i]=t[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r},uE=(e,t)=>{if(e.length)for(let r=0,i=e.length;r<i;r+=1)t(e[r]);else t(e)},jEe=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(Q6="ontouchstart"in window,K6=!!window.PointerEvent,Z6=!!window.MSPointerEvent);var Q6,K6,Z6,bf={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},cd,bg={};K6?cd=bf.pointer:Z6?cd=bf.MSPointer:Q6?(cd=bf.touch,bg=bf.mouse):cd=bf.mouse;function qu(){}qu.prototype.on=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var s=0;s<i.length;s+=1)n=i[s],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r};qu.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};qu.prototype.trigger=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var s=0;s<i.length;s+=1)n=i[s],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(a){a.call(r,{type:n,target:r},t)})};qu.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=UEe(t.options,e))};qu.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},Z1(e,cd[t],r._domHandlers_[t]),bg[t]&&Z1(e,bg[t],r._domHandlers_[t]),r};qu.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},ck(e,cd[t],r._domHandlers_[t]),bg[t]&&ck(e,bg[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var rP=qu;function ii(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=ii.id,ii.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}ii.prototype=new rP;ii.constructor=ii;ii.id=0;ii.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};ii.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=FEe("borderRadius","50%"),r=tP("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},XS(i.el,r),this.options.shape==="circle"&&XS(i.back,t),XS(i.front,t),this.applyStyles(i),this};ii.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};ii.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};ii.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};ii.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};ii.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};ii.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,i={};i.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,i.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t};ii.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var i=r.options.fadeTime+"ms",n={};n.front=tP("transition",["top","left"],i);var s={front:{}};s.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(n),r.applyStyles(s),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};ii.prototype.restCallback=function(){var e=this,t={};t.front=tP("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};ii.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};ii.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,i=Math.PI/2,n,s,a;if(t>r&&t<r*3&&!e.lockX?n="up":t>-r&&t<=r&&!e.lockY?n="left":t>-r*3&&t<=-r&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-i&&t<i?s="left":s="right"),e.lockX||(t>0?a="up":a="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var c={};this.direction={x:s,y:a,angle:n},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+s,e),c.y||this.trigger("plain:"+a,e),c.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var VEe=ii;function Rr(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=Rr.id,Rr.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let i=getComputedStyle(r.options.zone.parentElement);return i&&i.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}Rr.prototype=new rP;Rr.constructor=Rr;Rr.id=0;Rr.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===r)return t[i];return!1}};Rr.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};Rr.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};Rr.prototype.createNipple=function(e,t){var r=this,i=r.manager.scroll,n={},s=r.options,a={x:r.parentIsFlex?i.x:i.x+r.box.left,y:r.parentIsFlex?i.y:i.y+r.box.top};if(e.x&&e.y)n={x:e.x-a.x,y:e.y-a.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",s.zone.appendChild(o);var l=o.getBoundingClientRect();s.zone.removeChild(o),n=e,e={x:l.left+i.x,y:l.top+i.y}}var c=new VEe(r,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:t,position:e,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(cE(c.ui.el,n),cE(c.ui.front,c.frontPosition)),r.nipples.push(c),r.trigger("added "+c.identifier+":added",c),r.manager.trigger("added "+c.identifier+":added",c),r.bindNipple(c),c};Rr.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};Rr.prototype.bindNipple=function(e){var t=this,r,i=function(n,s){r=n.type+" "+s.id+":"+n.type,t.trigger(r,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Rr.prototype.pressureFn=function(e,t,r){var i=this,n=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval(function(){var s=e.force||e.pressure||e.webkitForce||0;s!==n&&(t.trigger("pressure",s),i.trigger("pressure "+t.identifier+":pressure",s),n=s)}.bind(i),100)};Rr.prototype.onstart=function(e){var t=this,r=t.options,i=e;e=X6(e),t.updateBox();var n=function(s){t.actives.length<r.maxNumberOfNipples?t.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(a){if(Object.values(i.touches).findIndex(function(l){return l.identifier===a})<0){var o=[e[0]];o.identifier=a,t.processOnEnd(o)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(s))};return uE(e,n),t.manager.bindDocument(),!1};Rr.prototype.processOnStart=function(e){var t=this,r=t.options,i,n=t.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},o=t.getOrCreate(n,a);o.identifier!==n&&t.manager.removeIdentifier(o.identifier),o.identifier=n;var l=function(h){h.trigger("start",h),t.trigger("start "+h.id+":start",h),h.show(),s>0&&t.pressureFn(e,h,h.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(o))>=0&&t.idles.splice(i,1),t.actives.push(o),t.ids.push(o.identifier),r.mode!=="semi")l(o);else{var c=xy(a,o.position);if(c<=r.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};Rr.prototype.getOrCreate=function(e,t){var r=this,i=r.options,n;return/(semi|static)/.test(i.mode)?(n=r.idles[0],n?(r.idles.splice(0,1),n):i.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=r.createNipple(t,e),n)};Rr.prototype.processOnMove=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),s=t.manager.scroll;if(!NEe(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(r.dynamicPage){var a=n.el.getBoundingClientRect();n.position={x:s.x+a.left,y:s.y+a.top}}n.identifier=i;var o=n.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=n.position.y),r.lockY&&(l.x=n.position.x);var c=xy(l,n.position),h=BEe(l,n.position),u=lE(h),d=c/o,p={distance:c,position:l},f,m;if(n.options.shape==="circle"?(f=Math.min(c,o),m=kEe(n.position,f,h)):(m=jEe(l,n.position,o),f=xy(m,n.position)),r.follow){if(c>o){let x=l.x-m.x,b=l.y-m.y;n.position.x+=x,n.position.y+=b,n.el.style.top=n.position.y-(t.box.top+s.y)+"px",n.el.style.left=n.position.x-(t.box.left+s.x)+"px",c=xy(l,n.position)}}else l=m,c=f;var g=l.x-n.position.x,v=l.y-n.position.y;n.frontPosition={x:g,y:v},r.dataOnly||cE(n.ui.front,n.frontPosition);var y={identifier:n.identifier,position:l,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:u,degree:h},vector:{x:g/o,y:-v/o},raw:p,instance:n,lockX:r.lockX,lockY:r.lockY};y=n.computeDirection(y),y.angle={radian:lE(180-h),degree:180-h},n.trigger("move",y),t.trigger("move "+n.id+":move",y)};Rr.prototype.processOnEnd=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),s=t.manager.removeIdentifier(n.identifier);!n||(r.dataOnly||n.hide(function(){r.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(r.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[s.id]=s.identifier))};Rr.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};Rr.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var GEe=Rr;function gi(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=uk(),t.config(e),t.prepareCollections();var r=function(){var n;t.collections.forEach(function(s){s.forEach(function(a){n=a.el.getBoundingClientRect(),a.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;Z1(window,"resize",function(){lk(r)});var i=function(){t.scroll=uk()};return Z1(window,"scroll",function(){lk(i)}),t.collections}gi.prototype=new rP;gi.constructor=gi;gi.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(i){return r=i.get(t),!r}),r}};gi.prototype.create=function(e){return this.createCollection(e)};gi.prototype.createCollection=function(e){var t=this,r=new GEe(t,e);return t.bindCollection(r),t.collections.push(r),r};gi.prototype.bindCollection=function(e){var t=this,r,i=function(n,s){r=n.type+" "+s.id+":"+n.type,t.trigger(r,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};gi.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};gi.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};gi.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};gi.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};gi.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};gi.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};gi.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};gi.prototype.onAny=function(e,t){var r=this,i,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=X6(t);var s=function(o,l,c){c.ids.indexOf(l)>=0&&(c[n](o),o._found_=!0)},a=function(o){i=r.getIdentifier(o),uE(r.collections,s.bind(null,o,i)),o._found_||r.removeIdentifier(i)};return uE(t,a),!1};gi.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};gi.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var HEe=gi,hk=new HEe,WEe={create:function(e){return hk.create(e)},factory:hk},J6=new Map,vm=new Map,uu=class{constructor(e,t,r,i){this.data=t;let{audio:n,volume:s,delay:a,loop:o}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?i.getAudio(n).src:n.data;this.audioPlayer=new Gf({src:l,volume:s,delay:a,loop:o}),vm.has(r.uuid)?vm.get(r.uuid).push(this):vm.set(r.uuid,[this]),J6.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},hE=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=J6.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=vm.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...vm.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},ym=class{constructor(e,t,r,i){if(this.data=t,t.interaction==="play")this.interaction=new uu(e,t,r,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new hE(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof uu?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof uu?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){this.interaction instanceof uu&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},qEe="text/plain",$Ee="us-ascii",dk=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),XEe=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:i,data:n,hash:s}=r.groups,a=i.split(";");s=t?"":s;let o=!1;a[a.length-1]==="base64"&&(a.pop(),o=!0);let l=(a.shift()||"").toLowerCase(),c=[...a.map(h=>{let[u,d=""]=h.split("=").map(p=>p.trim());return u==="charset"&&(d=d.toLowerCase(),d===$Ee)?"":`${u}${d?`=${d}`:""}`}).filter(Boolean)];return o&&c.push("base64"),(c.length>0||l&&l!==qEe)&&c.unshift(l),`data:${c.join(";")},${o?n.trim():n}${s?`#${s}`:""}`};function YEe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return XEe(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),t.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,o="";for(;;){let c=s.exec(i.pathname);if(!c)break;let h=c[0],u=c.index;o+=i.pathname.slice(a,u).replace(/\/{2,}/g,"/"),o+=h,a=u+h.length}o+=i.pathname.slice(a,i.pathname.length).replace(/\/{2,}/g,"/"),i.pathname=o}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),a=s[s.length-1];dk(a,t.removeDirectoryIndex)&&(s=s.slice(0,-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let s of[...i.searchParams.keys()])dk(s,t.removeQueryParameters)&&i.searchParams.delete(s);if(t.removeQueryParameters===!0&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let n=e;return e=i.toString(),!t.removeSingleSlash&&i.pathname==="/"&&!n.endsWith("/")&&i.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var QEe=class{constructor({url:e,context:t},r){if(this.eventManager=r,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:YEe(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=t!=null?t:"tab"}dispatch(){var e;Fj?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.eventManager.controlsManager.orbitControls)==null||e.onPointerUp(tt[0]),axe())}},eG=class{constructor(e,t,r){this.data=e,this.page=t,this.eventManager=r,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=i=>{var o,l;this.timeoutIdQueue.shift();let n=this.page.scene.find(i);if(n===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,a=s?(o=n.dataPatched.physics)==null?void 0:o.fusedBody:!0;if(n.cloner){for(let c of n.cloner.children)a?(c.playModeVisible=!1,c.rigidBody&&((l=n.dataPatched.physics)==null?void 0:l.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),s.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0)):this.clone===void 0||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),s.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):c.playModeVisible===void 0&&(c.playModeVisible=!0);(a||this.clone===void 0||this.clone===!1)&&(n.visible=!1,n.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),s.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0))}else n.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),s.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0),n.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.rigidBody!==void 0),this.eventManager.requestRender()},this.objects=[...e.objects],this.controlsManager=r.controlsManager}dispatch(e){this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},tG=class{constructor(e,t,r,i){this.data=e,this.page=t,this.eventManager=i,this.sharedAssets=r}dispatch(){var e;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var t;dP(this.page,this.sharedAssets,!0),this.eventManager.reset(),(t=this.eventManager.controlsManager.gameControl)==null||t.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},((e=this.data.delay)!=null?e:0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},rG={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},iP={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},KEe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],J1={CSS:{},springs:{}};function ra(e,t,r){return Math.min(Math.max(e,t),r)}function xm(e,t){return e.indexOf(t)>-1}function YS(e,t){return e.apply(null,t)}var it={arr:function(e){return Array.isArray(e)},obj:function(e){return xm(Object.prototype.toString.call(e),"Object")},pth:function(e){return it.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||it.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return it.hex(e)||it.rgb(e)||it.hsl(e)},key:function(e){return!rG.hasOwnProperty(e)&&!iP.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function iG(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function nG(e,t){var r=iG(e),i=ra(it.und(r[0])?1:r[0],.1,100),n=ra(it.und(r[1])?100:r[1],.1,100),s=ra(it.und(r[2])?10:r[2],.1,100),a=ra(it.und(r[3])?0:r[3],.1,100),o=Math.sqrt(n/i),l=s/(2*Math.sqrt(n*i)),c=l<1?o*Math.sqrt(1-l*l):0,h=1,u=l<1?(l*o+-a)/c:-a+o;function d(f){var m=t?t*f/1e3:f;return l<1?m=Math.exp(-m*l*o)*(h*Math.cos(c*m)+u*Math.sin(c*m)):m=(h+u*m)*Math.exp(-m*o),f===0||f===1?f:1-m}function p(){var f=J1.springs[e];if(f)return f;for(var m=1/6,g=0,v=0;;)if(g+=m,d(g)===1){if(v++,v>=16)break}else v=0;var y=g*m*1e3;return J1.springs[e]=y,y}return t?d:p}function ZEe(e){return e===void 0&&(e=10),function(t){return Math.ceil(ra(t,1e-6,1)*e)*(1/e)}}var JEe=function(){var e=11,t=1/(e-1);function r(h,u){return 1-3*u+3*h}function i(h,u){return 3*u-6*h}function n(h){return 3*h}function s(h,u,d){return((r(u,d)*h+i(u,d))*h+n(u))*h}function a(h,u,d){return 3*r(u,d)*h*h+2*i(u,d)*h+n(u)}function o(h,u,d,p,f){var m,g,v=0;do g=u+(d-u)/2,m=s(g,p,f)-h,m>0?d=g:u=g;while(Math.abs(m)>1e-7&&++v<10);return g}function l(h,u,d,p){for(var f=0;f<4;++f){var m=a(u,d,p);if(m===0)return u;var g=s(u,d,p)-h;u-=g/m}return u}function c(h,u,d,p){if(!(0<=h&&h<=1&&0<=d&&d<=1))return;var f=new Float32Array(e);if(h!==u||d!==p)for(var m=0;m<e;++m)f[m]=s(m*t,h,d);function g(v){for(var y=0,x=1,b=e-1;x!==b&&f[x]<=v;++x)y+=t;--x;var S=(v-f[x])/(f[x+1]-f[x]),w=y+S*t,A=a(w,h,d);return A>=.001?l(v,w,h,d):A===0?w:o(v,y,y+t,h,d)}return function(v){return h===u&&d===p||v===0||v===1?v:s(g(v),u,p)}}return c}(),sG=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=ra(i,1,10),a=ra(n,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-a/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/a)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,a){return function(o){return 1-n(s,a)(1-o)}},e["easeInOut"+i]=function(s,a){return function(o){return o<.5?n(s,a)(o*2)/2:1-n(s,a)(o*-2+2)/2}}}),e}();function nP(e,t){if(it.fnc(e))return e;var r=e.split("(")[0],i=sG[r],n=iG(e);switch(r){case"spring":return nG(e,t);case"cubicBezier":return YS(JEe,n);case"steps":return YS(ZEe,n);default:return YS(i,n)}}function aG(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function mb(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var a=e[s];t.call(i,a,s,e)&&n.push(a)}return n}function gb(e){return e.reduce(function(t,r){return t.concat(it.arr(r)?gb(r):r)},[])}function pk(e){return it.arr(e)?e:(it.str(e)&&(e=aG(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function sP(e,t){return e.some(function(r){return r===t})}function aP(e){var t={};for(var r in e)t[r]=e[r];return t}function dE(e,t){var r=aP(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function vb(e,t){var r=aP(e);for(var i in t)r[i]=it.und(e[i])?t[i]:e[i];return r}function e2e(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function t2e(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(o,l,c,h){return l+l+c+c+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),a=parseInt(i[3],16);return"rgba("+n+","+s+","+a+",1)"}function r2e(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function a(d,p,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?d+(p-d)*6*f:f<1/2?p:f<2/3?d+(p-d)*(2/3-f)*6:d}var o,l,c;if(i==0)o=l=c=n;else{var h=n<.5?n*(1+i):n+i-n*i,u=2*n-h;o=a(u,h,r+1/3),l=a(u,h,r),c=a(u,h,r-1/3)}return"rgba("+o*255+","+l*255+","+c*255+","+s+")"}function i2e(e){if(it.rgb(e))return e2e(e);if(it.hex(e))return t2e(e);if(it.hsl(e))return r2e(e)}function Ho(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function n2e(e){if(xm(e,"translate")||e==="perspective")return"px";if(xm(e,"rotate")||xm(e,"skew"))return"deg"}function pE(e,t){return it.fnc(e)?e(t.target,t.id,t.total):e}function Ua(e,t){return e.getAttribute(t)}function oP(e,t,r){var i=Ho(t);if(sP([r,"deg","rad","turn"],i))return t;var n=J1.CSS[t+r];if(!it.und(n))return n;var s=100,a=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=s+r;var l=s/a.offsetWidth;o.removeChild(a);var c=l*parseFloat(t);return J1.CSS[t+r]=c,c}function oG(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?oP(e,n,r):n}}function lP(e,t){if(it.dom(e)&&!it.inp(e)&&(Ua(e,t)||it.svg(e)&&e[t]))return"attribute";if(it.dom(e)&&sP(KEe,t))return"transform";if(it.dom(e)&&t!=="transform"&&oG(e,t))return"css";if(e[t]!=null)return"object"}function lG(e){if(it.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function s2e(e,t,r,i){var n=xm(t,"scale")?1:0+n2e(t),s=lG(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?oP(e,s,i):s}function cP(e,t,r,i){switch(lP(e,t)){case"transform":return s2e(e,t,i,r);case"css":return oG(e,t,r);case"attribute":return Ua(e,t);default:return e[t]||0}}function uP(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=Ho(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function cG(e,t){if(it.col(e))return i2e(e);if(/\s/g.test(e))return e;var r=Ho(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function hP(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function a2e(e){return Math.PI*2*Ua(e,"r")}function o2e(e){return Ua(e,"width")*2+Ua(e,"height")*2}function l2e(e){return hP({x:Ua(e,"x1"),y:Ua(e,"y1")},{x:Ua(e,"x2"),y:Ua(e,"y2")})}function uG(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=hP(i,s)),i=s}return r}function c2e(e){var t=e.points;return uG(e)+hP(t.getItem(t.numberOfItems-1),t.getItem(0))}function hG(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return a2e(e);case"rect":return o2e(e);case"line":return l2e(e);case"polyline":return uG(e);case"polygon":return c2e(e)}}function u2e(e){var t=hG(e);return e.setAttribute("stroke-dasharray",t),t}function h2e(e){for(var t=e.parentNode;it.svg(t)&&it.svg(t.parentNode);)t=t.parentNode;return t}function dG(e,t){var r=t||{},i=r.el||h2e(e),n=i.getBoundingClientRect(),s=Ua(i,"viewBox"),a=n.width,o=n.height,l=r.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:o/l[3]}}function d2e(e,t){var r=it.str(e)?aG(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:dG(r),totalLength:hG(r)*(i/100)}}}function p2e(e,t){function r(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var i=dG(e.el,e.svg),n=r(),s=r(-1),a=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(a.y-s.y,a.x-s.x)*180/Math.PI}}function fk(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=cG(it.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:it.str(e)||t?i.split(r):[]}}function pG(e){var t=e?gb(it.arr(e)?e.map(pk):pk(e)):[];return mb(t,function(r,i,n){return n.indexOf(r)===i})}function fG(e){var t=pG(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:lG(r)}}})}function f2e(e,t){var r=aP(t);if(/^spring/.test(r.easing)&&(r.duration=nG(r.easing)),it.arr(e)){var i=e.length,n=i===2&&!it.obj(e[0]);n?e={value:e}:it.fnc(t.duration)||(r.duration=t.duration/i)}var s=it.arr(e)?e:[e];return s.map(function(a,o){var l=it.obj(a)&&!it.pth(a)?a:{value:a};return it.und(l.delay)&&(l.delay=o?0:t.delay),it.und(l.endDelay)&&(l.endDelay=o===s.length-1?t.endDelay:0),l}).map(function(a){return vb(a,r)})}function m2e(e){for(var t=mb(gb(e.map(function(s){return Object.keys(s)})),function(s){return it.key(s)}).reduce(function(s,a){return s.indexOf(a)<0&&s.push(a),s},[]),r={},i=function(s){var a=t[s];r[a]=e.map(function(o){var l={};for(var c in o)it.key(c)?c==a&&(l.value=o[c]):l[c]=o[c];return l})},n=0;n<t.length;n++)i(n);return r}function g2e(e,t){var r=[],i=t.keyframes;i&&(t=vb(m2e(i),t));for(var n in t)it.key(n)&&r.push({name:n,tweens:f2e(t[n],e)});return r}function v2e(e,t){var r={};for(var i in e){var n=pE(e[i],t);it.arr(n)&&(n=n.map(function(s){return pE(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function y2e(e,t){var r;return e.tweens.map(function(i){var n=v2e(i,t),s=n.value,a=it.arr(s)?s[1]:s,o=Ho(a),l=cP(t.target,e.name,o,t),c=r?r.to.original:l,h=it.arr(s)?s[0]:c,u=Ho(h)||Ho(l),d=o||u;return it.und(a)&&(a=c),n.from=fk(h,d),n.to=fk(uP(a,h),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=nP(n.easing,n.duration),n.isPath=it.pth(s),n.isColor=it.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var mG={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(a,o){s+=o+"("+a+") "}),e.style.transform=s}}};function gG(e,t){var r=fG(e);r.forEach(function(i){for(var n in t){var s=pE(t[n],i),a=i.target,o=Ho(s),l=cP(a,n,o,i),c=o||Ho(l),h=uP(cG(s,c),l),u=lP(a,n);mG[u](a,n,h,i.transforms,!0)}})}function x2e(e,t){var r=lP(e.target,t.name);if(r){var i=y2e(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function b2e(e,t){return mb(gb(e.map(function(r){return t.map(function(i){return x2e(r,i)})})),function(r){return!it.und(r)})}function vG(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){var c,h,u,d;let a=(c=s.startOnceDelay)!=null?c:0,o=(h=s.pingPongDelayCorrection)!=null?h:0,l=(u=s.pingPongEndDelayCorrection)!=null?u:0;return i(s)+a+o+l+s.duration*((d=s.loop)!=null?d:1)})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){var l,c;let a=(l=s.startOnceDelay)!=null?l:0,o=(c=s.pingPongDelayCorrection)!=null?c:0;return i(s)+a+o+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){var c,h,u,d;let a=(c=s.startOnceDelay)!=null?c:0,o=(h=s.pingPongDelayCorrection)!=null?h:0,l=(u=s.pingPongEndDelayCorrection)!=null?u:0;return i(s)+a+o+s.duration*((d=s.loop)!=null?d:1)-s.endDelay-l})):t.endDelay,n}var mk=0;function w2e(e){var t=dE(rG,e),r=dE(iP,e),i=g2e(r,e),n=fG(e.targets),s=b2e(n,i),a=vG(s,r),o=mk;return mk++,vb(t,{id:o,children:[],animatables:n,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var Os=[],gk=[],by,S2e=function(){function e(){by=requestAnimationFrame(t)}function t(r){var i=Os.length;if(i){for(var n=0;n<i;){var s=Os[n];s.paused?(Os.splice(n,1),i-=1):(s.tick(r),n++)}e()}else by=cancelAnimationFrame(by)}return e}();function _2e(e){document.hidden?(Os.forEach(function(t){return t.pause(e.timeStamp)}),gk=Os.slice(0),Ir.running=Os=[]):gk.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",_2e);function Ir(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s,a=0,o=null;function l(w){var A=window.Promise&&new Promise(function(_){return o=_});return w.finished=A,A}var c=w2e(e);l(c);function h(){var w=c.direction;w!=="alternate"&&(c.direction=w!=="normal"?"normal":"reverse"),c.reversed=!c.reversed,s.forEach(function(A){(A.loop===1||A.loop%2===0)&&(A.reversed=c.reversed)})}function u(){c.direction="normal",c.reversed=!1,s.forEach(function(w){return w.reversed=!1})}function d(w){return c.reversed?c.duration-w:w}function p(){t=0,r=d(c.currentTime)*(1/Ir.speed)}function f(w,A,_=!1){A&&(c.reversed?A.seek(A.duration*A.loop-(w-A.timelineOffset-A.pingPongDelayCorrection),_):A.seek(w-A.timelineOffset-A.startOnceDelay-A.pingPongDelayCorrection,_))}function m(w,A=!1){if(c.reversed)for(var _=a;_--;)f(w,s[_],A);else for(var M=0;M<a;M++)f(w,s[M],A)}function g(w){var te,Z,Q,re,ae,ce,pe,Te,xe,Ie;var A=0,_=c.animations,M=_.length;for(c.direction!=="alternate"&&((te=c.parent)==null?void 0:te.direction)==="alternate"?((Z=c.parent)==null?void 0:Z.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1&&(((Q=c.parent)==null?void 0:Q.reversed)&&c.direction==="alternate"?w=c.duration-c.delay+c.endDelay-w:w=c.duration+c.delay-c.endDelay-w):b(!1,(re=c.parent)==null?void 0:re.rewind,c.rewind,(ae=c.parent)==null?void 0:ae.reversePlayback,c.reversePlayback)&&(((ce=c.parent)==null?void 0:ce.reversed)&&c.direction==="alternate"?w=c.duration-c.delay+c.endDelay-w:w=c.duration+c.delay-c.endDelay-w);A<M;){var E=_[A],T=E.animatable,P=E.tweens,D=P.length-1,L=P[D];D&&(L=mb(P,function(Se){return w<Se.end})[0]||L);let Oe;((pe=c.parent)==null?void 0:pe.reversed)&&c.direction==="alternate"?Oe=ra(w-L.start-L.endDelay,0,L.duration)/L.duration:Oe=ra(w-L.start-L.delay,0,L.duration)/L.duration;for(var R=isNaN(Oe)?1:L.easing(Oe),V=L.to.strings,F=L.round,O=[],k=L.to.numbers.length,z=void 0,N=0;N<k;N++){var j=void 0;let Se,be;c.direction!=="alternate"?((Te=c.parent)==null?void 0:Te.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1?(Se=L.to.numbers[N],be=L.from.numbers[N]||0):(be=L.to.numbers[N],Se=L.from.numbers[N]||0):b(!0,(xe=c.parent)==null?void 0:xe.rewind,c.rewind,(Ie=c.parent)==null?void 0:Ie.reversePlayback,c.reversePlayback)?(Se=L.to.numbers[N],be=L.from.numbers[N]||0):(be=L.to.numbers[N],Se=L.from.numbers[N]||0),L.isPath?j=p2e(L.value,R*be):j=Se+R*(be-Se),F&&(L.isColor&&N>2||(j=Math.round(j*F)/F)),O.push(j)}var Y=V.length;if(!Y)z=O[0];else{z=V[0];for(var q=0;q<Y;q++){V[q];var X=V[q+1],G=O[q];isNaN(G)||(X?z+=G+X:z+=G+" ")}}mG[E.type](T.target,E.property,z,T.transforms),E.currentValue=z,A++}}function v(w){c[w]&&!c.passThrough&&c[w](c)}function y(){c.remaining&&c.remaining!==!0&&c.remaining--}let x={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function b(w,A,_,M,E){return x[w<<4|A<<3|_<<2|M<<1|E]}function S(w,A=!1){var P;var _=c.duration;let M=c.delay,E=_-c.endDelay;((P=c.parent)==null?void 0:P.reversed)&&c.direction==="alternate"&&(M=c.endDelay,E=_-c.delay);var T=d(w);if(c.progress=ra(T/_*100,0,100),A||(c.reversePlayback=T<c.currentTime),a&&m(T,A),!c.began&&c.currentTime>=0&&(c.began=!0,v("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,v("loopBegin")),(c.reversed||T>=0)&&T<=M&&c.currentTime!==0&&(g(0),v("change")),(T>=E&&c.currentTime!==_+c.pingPongDelayCorrection||!_)&&(g(_),v("change")),T>M&&T<E?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,v("changeBegin")),g(T),v("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,v("change"),a&&v("timelineChangeComplete")):c.began&&T>E&&v("changeComplete"),c.currentTime=ra(T,0,_+c.pingPongDelayCorrection),c.began&&v("update"),w>=_)if(y(),!c.remaining)c.paused=!0,c.completed||(c.completed=!0,v("loopComplete"),v("complete"),!c.passThrough&&"Promise"in window&&(o(),l(c)));else{a?t+=c.duration/Ir.speed:t+=c.duration;for(let D of s)D.setStartTime(0),D.remaining=D.loop;v("loopComplete"),c.loopBegan=!1,c.direction==="alternate"?h():a&&u()}}return c.reset=function(){var w=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed=w==="reverse",c.remaining=c.loop,s=c.children,a=s.length;for(var A=a;A--;)c.children[A].reset();(c.reversed&&c.loop!==!0||w==="alternate"&&c.loop===1)&&c.remaining++,g(c.reversed?c.duration:0)},c.setStartTime=function(w){t=w},c.set=function(w,A){return gG(w,A),c},c.tick=function(w){i=w,t||(t=i),S((i+(r-t))*Ir.speed)},c.seek=function(w,A=!1){S(w-t,A)},c.pause=function(w){c.paused=!0,a&&(n=w!=null?w:performance.now())},c.play=function(w){!c.paused||(c.completed&&c.reset(),c.paused=!1,Os.push(c),a&&n!==void 0&&(t+=(w!=null?w:performance.now())-n),by||S2e())},c.reverse=function(){h(),c.completed=!c.reversed,p()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function vk(e,t){for(var r=t.length;r--;)sP(e,t[r].animatable.target)&&t.splice(r,1)}function A2e(e){for(var t=pG(e),r=Os.length;r--;){var i=Os[r],n=i.animations,s=i.children;vk(t,n);for(var a=s.length;a--;){var o=s[a],l=o.animations;vk(t,l),!l.length&&!o.children.length&&s.splice(a,1)}!n.length&&!s.length&&i.pause()}}function M2e(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?nP(t.easing):null,n=t.grid,s=t.axis,a=t.from||0,o=a==="first",l=a==="center",c=a==="last",h=it.arr(e),u=parseFloat(h?e[0]:e),d=h?parseFloat(e[1]):0,p=Ho(h?e[1]:e)||0,f=t.start||0+(h?u:0),m=[],g=0;return function(v,y,x){if(o&&(a=0),l&&(a=(x-1)/2),c&&(a=x-1),!m.length){for(var b=0;b<x;b++){if(!n)m.push(Math.abs(a-b));else{var S=l?(n[0]-1)/2:a%n[0],w=l?(n[1]-1)/2:Math.floor(a/n[0]),A=b%n[0],_=Math.floor(b/n[0]),M=S-A,E=w-_,T=Math.sqrt(M*M+E*E);s==="x"&&(T=-M),s==="y"&&(T=-E),m.push(T)}g=Math.max.apply(Math,m)}i&&(m=m.map(function(D){return i(D/g)*g})),r==="reverse"&&(m=m.map(function(D){return s?D<0?D*-1:-D:Math.abs(g-D)}))}var P=h?(d-u)/g:u;return f+P*(Math.round(m[y]*100)/100)+p}}function E2e(e){e===void 0&&(e={});var t=Ir(e);return t.duration=0,t.add=function(r,i){var n=Os.indexOf(t),s=t.children;n>-1&&Os.splice(n,1);function a(d){d.passThrough=!0}for(var o=0;o<s.length;o++)a(s[o]);var l=vb(r,dE(iP,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=it.und(i)?c:uP(i,c),a(t);var h=Ir(l);a(h),s.push(h),h.parent=t;var u=vG(s,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,h.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Ir.version="3.2.0";Ir.speed=1;Ir.running=Os;Ir.remove=A2e;Ir.get=cP;Ir.set=gG;Ir.convertPx=oP;Ir.path=d2e;Ir.setDashoffset=u2e;Ir.stagger=M2e;Ir.timeline=E2e;Ir.easing=nP;Ir.penner=sG;Ir.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var yG=Ir,yk=new C,xk=new C,bk=new mt;function C2e(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let h=1-i;return r.w=h*e.w+i*t.w,r.x=h*e.x+i*t.x,r.y=h*e.y+i*t.y,r.z=h*e.z+i*t.z,r.normalize(),r}let a=Math.sqrt(s),o=Math.atan2(a,n),l=Math.sin((1-i)*o)/a,c=Math.sin(i*o)/a;return r.w=e.w*l+t.w*c,r.x=e.x*l+t.x*c,r.y=e.y*l+t.y*c,r.z=e.z*l+t.z*c,r}function ku(e,t,r,i,n){let s=r[e]?r[e]:void 0,a=i[e];if(a==null)return;let o=s!=null?s:t[e],l=a;if(o!==l)return{update:c=>{let h=vt.lerp(o,l,c);n?t[e]=Math.trunc(h):t[e]=h},start:()=>{t[e]=o},end:()=>{t[e]=l}}}function xG(e,t,r,i,n){let s=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],l=[...s!=null?s:o],c=[...a];if(!(l.length!==c.length||yT(l,c)))return{update:h=>{l.forEach((u,d)=>{let p=vt.lerp(u,c[d],h);t[e][d]=n?Math.trunc(p):p})},start:()=>{Object.assign(t[e],l)},end:()=>{Object.assign(t[e],c)}}}function wk(e,t,r,i){let n=r[e]?r[e]:void 0,s=i[e];if(!s)return;let a=t[e],o=n?new C().fromArray(n):a.clone(),l=new C().fromArray(s);if(!o.equals(l))return{update:c=>{a.lerpVectors(o,l,c)},start:()=>{a.copy(o)},end:()=>{a.copy(l)}}}function T2e(e,t,r,i){let n=r[e]?r[e]:void 0,s=i[e];if(!s)return;let a=t[e],o=n?new we().fromArray(n):a.clone(),l=new C,c=new mt,h=new C;o.decompose(l,c,h);let u=new we().fromArray(s),d=new C,p=new mt,f=new C;if(u.decompose(d,p,f),!o.equals(u))return{update:m=>{bk.slerpQuaternions(c,p,m),yk.lerpVectors(l,d,m),xk.lerpVectors(h,f,m),a.compose(yk,bk,xk)},start:()=>{a.compose(l,c,h)},end:()=>{a.compose(d,p,f)}}}function P2e(e,t,r,i,n){let s=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],l=s?typeof s=="string"?n.getColor(s).clone():new et().setRGB(s.r,s.g,s.b):o.clone(),c=typeof a=="string"?n.getColor(a).clone():new et().setRGB(a.r,a.g,a.b);if(l.equals(c))return;let h=o.clone();return t[e]=h,{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function Ec(e,t,r,i){if(typeof t[e]=="number")return ku(e,t,r!=null?r:{},i);if(Array.isArray(t[e]))return xG(e,t,r!=null?r:{},i)}function D2e(e,t,r){var a,o,l,c;let i=[],n=e.cameraType==="OrthographicCamera"?(a=t.orthographic)==null?void 0:a.zoom:(o=t.perspective)==null?void 0:o.zoom,s=e.cameraType==="OrthographicCamera"?(l=r.orthographic)==null?void 0:l.zoom:(c=r.perspective)==null?void 0:c.zoom;if(s!==void 0){let h=n!=null?n:e.zoom,u=s;h!==u&&i.push({update:d=>{e.zoom=vt.lerp(h,u,d),e.updateProjectionMatrix()},start:()=>{e.zoom=h,e.updateProjectionMatrix()},end:()=>{e.zoom=u,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let h=ku("targetOffset",e,t,r);h&&i.push(h)}return i}function O2e(e,t,r,i){var o;if(r.scaleBaked===void 0)return;let n=(o=t.scaleBaked)!=null?o:e.data.geometry.scaleBaked,s=r.scaleBaked;if(yu.isEqual(n,s))return;let a=[];return a.push({update:l=>{e.updateGeometryInteractions({scaleBaked:[vt.lerp(n[0],s[0],l),vt.lerp(n[1],s[1],l),vt.lerp(n[2],s[2],l)]},i),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},i),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:s},i),e.invalidateDownstreamBooleanData()}}),a}function L2e(e,t,r){var o;if(!r.extrusion)return;let i=e.extrusion,n=(o=t.extrusion)!=null?o:{},s=r.extrusion,a=[];return wV.forEach(l=>{let c=Ec(l,i,n,s);c&&a.push(c)}),a}function I2e(e,t,r,i){let n=[];if(!("geometry"in r))return n;let s=e.geometry.userData.parameters,a="geometry"in t?t.geometry:{},o=r.geometry;if(e instanceof yg){let l=O2e(e,a,o,i);l&&n.push(...l)}else{let l={};if(Object.assign(l,Vo(s,CR)),CR.forEach(c=>{let h=Ec(c,l,a,o);h&&n.push(h)}),e instanceof KT){Object.assign(l,{extrusion:{...s.extrusion}});let c=L2e(l,a,o);c&&n.push(...c)}n.length&&n.push({update:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},start:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},end:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()}})}return n}function R2e(e,t,r,i){let n=[];if(r.intensity!==void 0){let s=ku("intensity",e,t,r);s&&n.push(s)}if(r.color!==void 0){let s=P2e("color",e,t,r,i);s&&n.push(s)}return n}function B2e(e,t,r,i){let n=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return n;let s="materials"in t&&t.materials?t.materials:[],a=r.materials;e.material.forEach((o,l)=>{var u;if(!a[l])return;let c=(u=s[l])!=null?u:{},h=a[l];typeof c=="string"||typeof h=="string"||n.push(...Sk(o,c,h,i))})}else{if(!("material"in r&&r.material))return n;let s="material"in t&&t.material?t.material:{},a=r.material;if(typeof s=="string"||typeof a=="string")return n;n.push(...Sk(e.material,s,a,i))}return n}function Sk(e,t,r,i){var a,o,l;let n=[],s=Y1(r,i)||!!t.layers&&Y1(t,i);n.push(H2e(e,s));for(let c of e.layers){let h=(a=t.layers)==null?void 0:a.data(c.uuid),u=r.layers.data(c.uuid);if(!u||!((o=c.visible)==null||o)||!((l=u.visible)==null||l))continue;let d=c.getNames().filter(p=>!yV.some(f=>p.includes(f)));for(let p of d)try{let f=c.getValue(p),m;if(p==="colors")m=V2e(c,h,u,p);else if(Array.isArray(f))p==="steps"&&(m=j2e(c,h,u,p));else if(typeof f=="number")m=k2e(c,h,u,p);else{if(typeof f=="boolean")continue;f instanceof $?m=z2e(c,h,u,p):f instanceof C?m=N2e(c,h,u,p):f instanceof On?m=U2e(c,h,u,p,i):f instanceof et?m=F2e(c,h,u,p,i):"isTexture"in f&&(m=G2e(c,h,u,p))}m&&(Array.isArray(m)?n.push(...m):n.push(m))}catch(f){console.error(`lerpMaterial: unexpected material layer for ${p}`,f)}}return n}function k2e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=t?t[i]:e.getValue(i),s=r[i];if(n!==s)return{update:a=>{e.setValue(i,vt.lerp(n,s,a))},start:()=>{e.setValue(i,n)},end:()=>{e.setValue(i,s)}}}function z2e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),s=t?new $().fromArray(t[i]):n.clone(),a=new $().fromArray(r[i]);if(!s.equals(a))return{update:o=>{n.lerpVectors(s,a,o)},start:()=>{n.copy(s)},end:()=>{n.copy(a)}}}function N2e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),s=t?new C().fromArray(t[i]):n.clone(),a=new C().fromArray(r[i]);if(!s.equals(a))return{update:o=>{n.lerpVectors(s,a,o)},start:()=>{n.copy(s)},end:()=>{n.copy(a)}}}function F2e(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let s=t?t[i]:void 0,a=r[i],o=e.getValue(i),l=s?typeof s=="string"?n.getColor(s).clone():new et().setRGB(s.r,s.g,s.b):o.clone(),c=typeof a=="string"?n.getColor(a).clone():new et().setRGB(a.r,a.g,a.b);if(l.equals(c))return;let h=o.clone();return{update:u=>{e.getValue(i)!==h&&e.setValue(i,h),h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function U2e(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let s=t?t[i]:void 0,a=r[i],o=e.getValue(i),l=s?typeof s=="string"?n.getColor(s).clone():new et().setRGB(s.r,s.g,s.b):o.clone(),c=typeof a=="string"?n.getColor(a).clone():new On(a.r,a.g,a.b,a.a);if(l.equals(c))return;let h=o.clone();return{update:u=>{e.getValue(i)!==h&&e.setValue(i,h),h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function j2e(e,t,r,i="steps"){if(!e.hasValue(i)||!(i in r))return;let n=[],s=e.getValue(i),a=t?t[i]:s,o=r[i];for(let l=0;l<s.length;++l){let c=a[l],h=o[l];c!==h&&n.push({update:u=>{s[l]=vt.lerp(c,h,u)},start:()=>{s[l]=c},end:()=>{s[l]=h}})}return n.length?n:void 0}function V2e(e,t,r,i="colors"){if(!e.hasValue(i)||!(i in r))return;let n=[],s=e.getValue(i),a=t?t[i]:s.map(l=>l.toArray()),o=r[i];for(let l=0;l<s.length;++l){let c=[...a[l]],h=[...o[l]];I1.isEqual(c,h)||n.push({update:u=>{s[l].fromArray(I1.lerp(c,h,u))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(h)}})}return n.length?n:void 0}function G2e(e,t,r,i="texture"){if(!e.hasValue(i)||!(i in r))return;let n=e.getNode("mat");if(!n)return;let s=t?t[i]:n,a=r[i],o=[...s.repeat],l=[...s.offset],c=[...a.repeat],h=[...a.offset];if(!od.isEqual(o,c)||!od.isEqual(l,h))return{update:u=>{n.repeat=od.lerp(o,c,u),n.offset=od.lerp(l,h,u),n.updateMatrix()},start:()=>{n.repeat=[...o],n.offset=[...l],n.updateMatrix()},end:()=>{n.repeat=[...c],n.offset=[...h],n.updateMatrix()}}}function H2e(e,t){return{update:()=>{e.transparent=t}}}var QS=new C,_k=new hi;function W2e(e,t,r,i){var d,p,f,m,g,v,y,x,b,S;let n=[],s,a,o,l,c,h,u={slide:((p=(d=t.pathSnapping)!=null?d:e.updatedPathSnapping)!=null?p:e.dataPatched.pathSnapping).slide,offset:((m=(f=t.pathSnapping)!=null?f:e.updatedPathSnapping)!=null?m:e.dataPatched.pathSnapping).offset};if(c=ku("slide",u,(v=(g=t.pathSnapping)!=null?g:e.updatedPathSnapping)!=null?v:e.dataPatched.pathSnapping,(y=r.pathSnapping)!=null?y:e.dataPatched.pathSnapping),c&&n.push(c),h=ku("offset",u,(b=(x=t.pathSnapping)!=null?x:e.updatedPathSnapping)!=null?b:e.dataPatched.pathSnapping,(S=r.pathSnapping)!=null?S:e.dataPatched.pathSnapping),h&&n.push(h),!c&&!h&&(s=wk("position",e,t,r),s&&n.push(s),a=wk("scale",e,t,r),a&&n.push(a),o=q2e(e,t,r,i),o&&n.push(o),l=T2e("hiddenMatrix",e,t,r),l&&n.push(l)),s||a||o||l||c||h){let w=()=>{var A;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(A=e.parent)!=null&&A.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),Ks(e)&&Na(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,u))};n.push({update:w,start:w,end:w})}return n}function q2e(e,t,r,i){let n=t!=null&&t.rotation?t.rotation:void 0,s=r.rotation;if(!s)return;let a=n?new C().fromArray(n):new C().setFromEuler(e.rotation),o=new C().fromArray(s);if(a.equals(o))return;let l=QS.subVectors(o,a);if(i&&l.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new mt().setFromEuler(_k.setFromVector3(a)),h=new mt().setFromEuler(_k.setFromVector3(o));return{update:u=>{C2e(c,h,e.quaternion,u)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(o)}}}else return{update:c=>{QS.lerpVectors(a,o,c),e.rotation.setFromVector3(QS)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(o)}}}function $2e(e,t,r){let i=[];if(!("cloner"in r)||!e.cloner)return i;let n=e.cloner,s="cloner"in t?t.cloner:{},a=r.cloner;dV.forEach(d=>{let p;d==="count"?p=ku("count",n.parameters,s,a,!0):p=Ec(d,n.parameters,s!=null?s:{},a),p&&i.push(p)});let o=X2e(n,s,a);o!=null&&o.length&&i.push(...o);let l=Y2e(n,s,a);l!=null&&l.length&&i.push(...l);let c=Q2e(n,s,a);c!=null&&c.length&&i.push(...c);let h=K2e(n,s,a);h!=null&&h.length&&i.push(...h);let u=Z2e(n,s,a);return u!=null&&u.length&&i.push(...u),i.length&&i.push({update:()=>{n.update()}}),i}function X2e(e,t,r){if(e.parameters.type!=="radial")return;let i=t.radial,n=r.radial;if(!n)return;let s=e.parameters.radial,a=[];return pV.forEach(o=>{let l=Ec(o,s,i!=null?i:{},n);l&&a.push(l)}),a}function Y2e(e,t,r){if(e.parameters.type!=="linear")return;let i=t.linear,n=r.linear;if(!n)return;let s=[],a=e.parameters.linear;return fV.forEach(o=>{let l=Ec(o,a,i!=null?i:{},n);l&&s.push(l)}),s}function Q2e(e,t,r){if(e.parameters.type!=="grid")return;let i=t.grid,n=r.grid;if(!n)return;let s=[],a=e.parameters.grid;return mV.forEach(o=>{let l;o==="count"?l=xG(o,a,i!=null?i:{},n,!0):l=Ec(o,a,i!=null?i:{},n),l&&s.push(l)}),s}function K2e(e,t,r){if(e.parameters.type!=="toObject")return;let i=t.toObject,n=r.toObject;if(!n)return;let s=[],a=e.parameters.toObject;return gV.forEach(o=>{let l;o==="count"?l=ku(o,a,i!=null?i:{},n,!0):l=Ec(o,a,i!=null?i:{},n),l&&s.push(l)}),s}function Z2e(e,t,r){if(!e.parameters.randomness)return;let i=t.randomnessObject,n=r.randomnessObject;if(!n)return;let s=[],a=e.parameters.randomnessObject;return vV.forEach(o=>{let l=Ec(o,a,i!=null?i:{},n);l&&s.push(l)}),s}function Ak(e,t,r,i,n){let s=[];return e.data.visible&&s.push(...W2e(e,t,r,n)),e.data.visible&&s.push(...$2e(e,t,r)),Ks(e)?(e instanceof nn&&e.data.visible&&s.push(...I2e(e,t,r,i)),e.data.visible&&s.push(...B2e(e,t,r,i))):fAe(e)?e.data.visible&&s.push(...R2e(e,t,r,i)):pAe(e)&&s.push(...D2e(e,t,r)),s.length?{update:a=>{s.forEach(o=>o.update(a))},start:a=>{s.forEach(o=>{var l;return(l=o.start)==null?void 0:l.call(o,a)})},end:a=>{s.forEach(o=>{var l;return(l=o.end)==null?void 0:l.call(o,a)})}}:void 0}var Mk=new C;function dP(e,t,r=!1){let i=[];e.traverseChildren(n=>{var l,c,h,u,d;if(r&&((l=n.rigidBody)==null||l.setTranslation(n.position0,!0),(c=n.rigidBody)==null||c.setRotation(n.rotation0,!0),(h=n.rigidBody)==null||h.setLinvel(Mk,!0),(u=n.rigidBody)==null||u.setAngvel(Mk,!0)),!Rt.is(n))return;let s=n.uuid,a=n.data;if(delete n.states,n.uuid===Dp)return;let o=!1;i.some(p=>{var f;return(f=e.scene.find(s))==null?void 0:f.isDescendantOf(p)})?o=!0:((d=a.physics)==null?void 0:d.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&i.push(s),n.data=a,n.currentState=null,n.reversibleToState=null,n.currentTransitionEvent=null;for(let p of a.states){let f={...p.data};e.data.globalPhysics.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||o)&&(p.data.position!==void 0&&delete f.position,p.data.rotation!==void 0&&delete f.rotation,p.data.hiddenMatrix!==void 0&&delete f.hiddenMatrix),n.states||(n.states={}),n.states[p.id]=ou.patch(a,f)}eCe(e.scene,n,null,t,a.events.find(p=>p.data.type==="Follow"||p.data.type==="LookAt")!==void 0),J2e(e)})}function J2e(e){e.traverseEntity(t=>{for(let r of t.data.events){let i=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...r.data.actions);break;case"GameControl":for(let n of Object.values(r.data.gameActions))i.push(...n);break;case"DragDrop":i.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":i.push(...r.data.inActions,...r.data.outActions);break}for(let n of i)if(n.data.type==="Create"&&n.data.hideBase==="Yes"){let s=e.scene.find(n.data.object);s&&(s.visible=!1)}}})}function eCe(e,t,r,i,n=!1){if(t instanceof nn&&t.removeInteractionGeometry(),t.changeSelectedState(r,{scene:e,shared:i},n),t instanceof nn&&t.updateGeometryGroupsIfNeeded(),t instanceof Ui&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),t.cloner)for(let s of t.cloner.children)s.playModeVisible=void 0;t.updateVisible()}function bG(e){let t;if(e.easing===5){let{control1:r,control2:i}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${i[0]}, ${i[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:i,damping:n,velocity:s}=e;t=`spring( ${r}, ${i}, ${n}, ${s} )`}else{let r;switch(e.easing){case 0:r=_l.linear;break;case 1:r=_l.ease;break;case 2:r=_l.easeIn;break;case 3:r=_l.easeOut;break;case 4:r=_l.easeInOut;break;default:r=_l.linear}let[i,n,s,a]=r;t=`cubicBezier( ${i}, ${n}, ${s}, ${a} )`}return{duration:e.duration,easing:t}}function wG(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var tCe={type:"beginState"},rCe={type:"completeState",isfromEntity:!1},Ek=class{constructor(e,t,r,i,n,s){if(this.object=e,this.data=i,this.sharedAssets=n,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let a=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"beginState",state:a}),this.object.traverseEntity(o=>{o!==this.object&&o instanceof Ui&&o.dispatchEvent(tCe)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let a=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"completeState",state:a}),this.object.traverseEntity(o=>{o!==this.object&&o instanceof Ui&&o.dispatchEvent(rCe)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=Ak(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let a=wy(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!a)throw new Error("Missing property");this.from=a}else{let a=wy(this.object,t);if(!a)throw new Error("Missing property");this.from=a}if(r===void 0)throw new Error("Missing property");{let a=wy(this.object,r);if(!a)throw new Error("Missing property");this.to=a}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...wG(i),...bG(i),change:this.onChange},this.callback=Ak(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},bm=class extends Ti{constructor(e,t,r){if(super(),this.data=e,this.page=t,this.sharedAssets=r,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var n;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let i=this.page.scene.find(e.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){var e;return(e=this.tweens.some(t=>t.changeBegan))!=null?e:!1}init(){this.initialCurrentState=wy(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,isRebuild:t=!1}={}){var r,i,n,s,a,o;try{let l=wG(this.data.tweens[0].data),c=l.loop;t&&typeof l.loop=="number"&&l.loop--,(r=this.timeline)==null||r.pause(),this.timeline=yG.timeline({autoplay:!1,...l,...c===!0||c>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let h=this.tweens.findIndex(u=>u==null?void 0:u.changeBegan);if(this.timelineNeedsRebuild=h!==-1&&(c===!0||c>1),l.pingPongDelayCorrection&&t===!1&&(this.timelineNeedsRebuild=!0),e){let u=h===-1?0:h;for(let d=u;d<this.data.tweens.length-1;d++){let p=this.data.tweens[d],f=this.data.tweens[d+1],m;d===u&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(m=void 0,this.object instanceof Ui&&(this.object.wasMovedByUser=!1)):m=p.data.state===void 0?this.currentState:p.data.state;let g=new Ek(this.object,m,f.data.state===void 0?this.currentState:f.data.state,f.data,this.sharedAssets,(n=this.data.allowSlerp)!=null?n:!1);h!==-1&&d===u&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[d]=g,this.timeline.add(g.params,this.timeline.duration+(d===u?l.delay:0)+(d===u&&!t?l.pingPongDelayCorrection:0))}this.timeline.duration+=l.endDelay}else{let u=h===-1?this.data.tweens.length-1:h+1;for(let d=u;d>0;d--){let p=this.data.tweens[d],f=this.data.tweens[d-1],m;d===u&&(this.object.wasMovedByUser===!0||((s=this.object.previousAction)==null?void 0:s.playing)===!0)?(m=void 0,this.object instanceof Ui&&(this.object.wasMovedByUser=!1)):m=p.data.state===void 0?this.currentState:p.data.state;let g=new Ek(this.object,m,f.data.state===void 0?this.currentState:f.data.state,p.data,this.sharedAssets,(a=this.data.allowSlerp)!=null?a:!1);h!==-1&&d===u&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[d-1]=g,this.timeline.add(g.params,this.timeline.duration+(d===u?l.endDelay:0))}this.timeline.duration+=l.delay+(t?0:l.pingPongDelayCorrection)}}catch(l){l instanceof Error&&console.error(l.message)}((o=this.object.previousAction)==null?void 0:o.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(e){e instanceof Error&&console.error(e.message)}},this.startOnceDelay)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.sharedAssets}),this.object.currentState=e}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e!=null?e:!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function wy(e,t){var n;let r,i;if(typeof t=="string"?(r=t,i=(n=e.states)==null?void 0:n[r]):t===null&&(r=null,i=e.data),!(r===void 0||i===void 0))return{id:r,data:i}}var iCe={type:"beginState"},Ck={type:"completeState",isfromEntity:!1},Tk={type:"requestRender"},SG=class extends Ti{constructor(e,t){super(),this.data=e,this.page=t,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new C,this.posEnd=new C,this.qStart=new mt,this.qEnd=new mt,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=yG({targets:r,t:1,...bG(this.data),update:()=>{r.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(iCe));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,r.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(Tk),r.t===1&&i.dispatchEvent(Ck)}})}switchCamera(e){let t=this.page.scene.find(e);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(t),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:t})}play(){if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e!=null?e:!this.toggleIsForward;try{this.playing?((t=this.animation)==null||t.pause(),this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var i,n;delete this.timeoutId,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(Ck),this.page.activeCamera.dispatchEvent(Tk))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},wm=class extends Ti{constructor(e,t,r){var o,l,c,h,u;super(),this.page=t,this.animationControls=r,this.startOnceDelay=0,this.toggleIsForward=!1;let i=e.object,n=t.scene.find(e.object);n&&Array.isArray(n.identity)&&(i=n.identity[0]),this.data={...e,object:i};let s=this.animationControls.clipIdToAction[e.clipId+"/"+i];this.duration=(l=(o=s==null?void 0:s.getClip())==null?void 0:o.duration)!=null?l:1;let a=(u=(h=(c=s==null?void 0:s.getClip())==null?void 0:c.tracks[0])==null?void 0:h.times.length)!=null?u:1/0;this.leftFrameTime=this.data.crop[0]/a*this.duration,this.rightFrameTime=this.data.crop[1]/a*this.duration,this.startOnceDelay=e.delay}get playing(){var e,t;return(t=(e=this.threeAnimAction)==null?void 0:e.isRunning())!=null?t:!1}play(e=!1){window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([i,n])=>{let s=i.split("/")[1];this.threeAnimAction!==n&&s===t&&n.isRunning()&&(e?n.fadeOut(.2):n.stop())}),e&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=vt.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){this.toggleIsForward=e!=null?e:!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let i=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([n,s])=>{let a=n.split("/")[1];this.threeAnimAction!==s&&a===i&&s.isRunning()&&(t?s.fadeOut(.2):s.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},_G=class{constructor(e,t,r,i){this.data=e,this.page=t,this.eventManager=r,this.shared=i,this.timeOutId=-1,this.scene=t.scene}dispatch(){this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),dP(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}};function ss(e,t,r,i,n,s){let a={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[]};return t.forEach(({id:o,data:l})=>{try{l.type==="Audio"?ma[e.type].includes("Audio")&&a.Audio.push(new ym(o,l,s,i)):l.type==="Video"?ma[e.type].includes("Video")&&a.Video.push(new pP(o,l,s)):l.type==="Link"?ma[e.type].includes("Link")&&a.Link.push(new QEe(l,n)):l.type==="Create"?ma[e.type].includes("Create")&&a.Create.push(new _m(l,r,n.controlsManager)):l.type==="Destroy"?ma[e.type].includes("Destroy")&&a.Destroy.push(new eG(l,r,n)):l.type==="Reset"?ma[e.type].includes("Reset")&&a.Reset.push(new tG(l,r,i,n)):l.type==="Transition"?ma[e.type].includes("Transition")&&a.Transition.push(new bm(l,r,i)):l.type==="SwitchCamera"?ma[e.type].includes("SwitchCamera")&&a.SwitchCamera.push(new SG(l,r)):l.type==="SceneTransition"?ma[e.type].includes("SceneTransition")&&a.SceneTransition.push(new _G(l,r,n,i)):l.type==="Animation"&&ma[e.type].includes("Animation")&&a.Animation.push(new wm(l,r,n.animationControls))}catch{}}),a}function Bn(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof ym||r instanceof pP||r instanceof wm||r instanceof bm||r instanceof _m||r instanceof eG||r instanceof SG||r instanceof _G||r instanceof tG)&&r.dispose()})})}function nCe(e,t){let r;if("material"in e){let i=e.material;Array.isArray(i)?r=e.material[0].layers.find(n=>n.uuid===t):r=e.material.layers.find(n=>n.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var AG=new Map,Sm=new Map,Id=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:n,volume:s,delay:a}=t;if(this.object=r,i===void 0)throw new Error("Missing property");let o=nCe(r,i);o&&(this.videoElement=o,this.videoElement.loop=n===1/0,this.videoElement.autoplay=!0,s!==void 0&&(this.videoElement.volume=s)),a!==void 0&&(this.delay=a),Sm.has(r.uuid)?Sm.get(r.uuid).push(this):Sm.set(r.uuid,[this]),AG.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},fE=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=AG.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=Sm.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...Sm.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},pP=class{constructor(e,t,r){if(this.data=t,t.interaction==="play")this.interaction=new Id(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new fE(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof Id?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof Id?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},Pk=(()=>{let e,t,r,i;function n(o){!e&&!Dk()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(s)),o&&(t=o,i=o.requestRender)}function s(o){let l=r?o-r:0,c=t.sharedGameControlGlobals.createdObjects,h=t.sharedGameControlGlobals.nCreatedPerAction,u=c.length,d=0;for(;d<u;){let p=c[d];p.userData.createdTime===void 0&&(p.userData.createdTime=o),p.userData.lifetime===void 0&&p.userData.quantity===void 0||p.userData.lifetime&&o-p.userData.createdTime<p.userData.lifetime||p.userData.quantity&&h[p.userData.actionId]<=p.userData.quantity?(p.userData.velocity&&(p.position.addScaledVector(p.userData.velocity,l/1e3),p.updateMatrix(),i()),d++):(h[p.userData.actionId]>p.userData.quantity&&h[p.userData.actionId]--,c.splice(d,1),p.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&p.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(p.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(p.rigidBody)):(p.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(f=>f.bvhGeometry!==void 0)),u--,i())}e=d>0?requestAnimationFrame(s):void 0,r=d>0?o:void 0}function a(){Dk()?e&&(cancelAnimationFrame(e),e=void 0,r=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",a),n})();function Dk(){return!!document&&document.hidden}var Ok=new mt,sCe=new C,aCe=new C,_m=class{constructor(e,t,r){this.data=e,this.page=t,this.controlsManager=r,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=vt.generateUUID(),this.dispatch=()=>{this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=$1e(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let n=new Ni(this.object);if(n.playModeVisible=!0,n.expand(),this.data.coordinateSystem!=="world"){let a=this.data.coordinateSystem,o=this.page.scene.find(a);o&&(o.updateMatrixWorldSVD(),n.hiddenMatrix.copy(o.matrixWorldRigid))}n.position.fromArray(this.data.position),n.rotation.fromArray(this.data.rotation),n.updateMatrix(),this.page.add(n);let s=this.controlsManager.sharedGameControlGlobals;s.createdObjects.push(n),s.nCreatedPerAction[this.uniqueId]===void 0?s.nCreatedPerAction[this.uniqueId]=1:s.nCreatedPerAction[this.uniqueId]++,n.updateWorldMatrix(!0,!0),n.traverseObject(this.traverseObjectCB),Pk(),this.controlsManager.requestRender()},this.traverseObjectCB=n=>{var l,c,h,u;n.hasNonUniformScale&&n.updateMatrixWorldSVD();let s;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(n instanceof ta)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;s=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof Ni)s=n.object;else if(s=n,(l=s.dataPatched.cloner)==null?void 0:l.hideBase)return!0}else{if(n instanceof ta)return;n instanceof Ni?s=n.object:s=n}this.data.destroy==="Time"?n.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(n.userData.quantity=this.data.destroyAfterQuantity,n.userData.actionId=this.uniqueId);let a=new C().fromArray(this.data.velocity),o=s.dataPatched;if(!(o.physics.enabled==="visibility"?!o.visible:!o.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(n,s,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((c=n.rigidBody)==null||c.collider(0).setActiveEvents(1),n.userData.hasCollisionDestroy=!0),n.matrixWorld.decompose(sCe,Ok,aCe),a.applyQuaternion(Ok),this.data.velocity.some(d=>d!==0)&&this.data.dynamic&&((h=n.rigidBody)==null||h.setLinvel(a.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in n.object&&this.controlsManager.addBoundsTree(n),this.data.velocity.some(d=>d!==0)&&this.data.dynamic&&(n.userData.velocity=a)),((u=s.dataPatched.physics)==null?void 0:u.fusedBody)===!0))return!0};let i=this.page.scene.find(this.data.object);if(!i)throw new Error("Missing Property");if(this.object=i,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");Pk(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},MG=200,KS=.02,ZS=.3,oCe=65;new C;var Lk=new C,Ik=new C,lCe=new C,bi=new C,$i=new C,ml=new C,j0=new we,JS=new we,cCe=new we;new we;var Gn=new mt,mo=new mt,wa=new hi(0,0,0,"YXZ"),uCe=new C(1,0,0),qs=new C(0,1,0),hCe=new C(0,0,1),e_=new C(1,1,1),t_=new ns,dCe=1,pCe=.025,fCe=16e-6,Rk=12,mCe=20,ai=new Ds,fs=new Br,gCe={type:"requestRender"},vCe={type:"updateMatrix"},Bk=Math.PI/6,mE=class extends Ti{constructor(e,t,r,i,n,s,a,o,l){var f,m,g,v,y,x,b,S,w,A,_,M,E,T,P,D,L,R,V,F;super(),this.object=e,this.domElement=t,this.data=r,this.gloabalPhysics=i,this.controlsManager=n,this.cameraFollow=s,this.camera=a,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new we,this.target0=new C,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=MG,this.euler0=new hi(0,0,0,"YXZ"),this.position0Cam=new C,this.quat0Cam=new mt,this.scale0Cam=new C,this.hiddenMatrix0Cam=new we,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Ds(new C(0,-40,0),new C(0,40,0)),matrix:new we,position:new C,rotation:new mt},this.euler=new hi(0,0,0,"YXZ"),this.eulerDelta=new C,this.lastPosition=new C,this.lastCameraQuaternion=new mt,this.lastCameraPosition=new C,this.PI_2=Math.PI/2,this.prevMouse=new $,this.velocityTarget=new C,this.velocity=new C,this.directionXZ=new C,this.rotVelocityStick=new C,this.rotVelocityTarget=new C,this.rotVelocity=new C,this.rotDirection=new C,this.nonColliderRotOffset=new we,this.nonColliderPosOffset=new we,this.firstPointerId=-1,this.rot=new C,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new we,this.objectToTarget=new C,this.objectToTarget0=new C,this.objectToCamXZ=new C,this.objectToCamXZ0=new C,this.targetToCamera=new C,this.targetToCamera0=new C,this.cameraPolarAxis0=new C,this.targetPos=new C,this.targetQuat=new mt,this.lerpFactorPos=new C().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new mt,this.objXZQuatInv=new mt,this.objXZRotMat=new we,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new C,this.pushedVelocity=new C,this.groundYRotation=0,this.objectRealQuat=new mt,this.colliderWorldQuat=new mt,this.groundNormal=new C,this.groundTilt=new mt,this.groundTiltInv=new mt,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new C,this.quaternion=new mt,this.scale=new C,this.initialAction=!0,this.onPointerDown=O=>{O.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=O.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Kn&&(!JI||eR>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(O.clientX,O.clientY))},this.onPointerUp=O=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),O.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=O=>{if(O.pointerId!==this.firstPointerId)return;let k=O.clientX-this.prevMouse.x,z=O.clientY-this.prevMouse.y;this.prevMouse.set(O.clientX,O.clientY),O.pointerType==="mouse"&&this.rotBy!=="keys"&&(JI&&eR<15.5&&!Kn?(this.eulerDelta.y=-k*this.mouseOrbitSensitivity,this.eulerDelta.x=-z*this.mouseOrbitSensitivity):(this.eulerDelta.y=-O.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-O.movementY*this.mouseOrbitSensitivity)),O.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-k*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-z*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=O=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?mE.isLocked=!0:mE.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let O in this.movementState)this.movementState[O]=0},this.onKeyDown=O=>{!(O.target instanceof HTMLInputElement)&&(O.code==="ArrowLeft"||O.code==="ArrowUp"||O.code==="ArrowRight"||O.code==="ArrowDown"||O.code==="Space")&&O.preventDefault();for(let k of this.keyAssignments)if(O.key.toUpperCase()===k[1]||O.key===k[1]){this.movementState[k[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=O=>{for(let k of this.keyAssignments)if(O.key.toUpperCase()===k[1]||O.key===k[1]||O.code.slice(3,O.code.length).toUpperCase()===k[1]){this.movementState[k[0]]=0;break}},this.copyVRGamePadValues=(O,k)=>{for(let z=2;z<4;z++){let N=O.axes[z];k===0?z===2?this.movementState.movePosX=N:this.movementState.movePosZ=N:(O.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,z===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(N)>=.3&&(this.vrEulerYOffset+=N<0?1:-1),this.movementState.rotPosY=N):this.moveMode==="fly"&&(this.movementState.moveNegY=N))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===a&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let c=this.euler0.clone(),h=c.y;if(this.objectRealQuat.copy(this.quaternion),c.y=0,this.quaternion.setFromEuler(c),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),c.set(0,h,0),this.quaternion.setFromEuler(c),this.rot.setFromEuler(c),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((f=this.camera)==null?void 0:f.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let O=new C(0,0,-1).applyQuaternion(this.camera.quaternion),k=new C().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(k),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let z,N;Math.abs(O.y)<1e-6?(k.y=0,O.y=0,N=k.projectOnVector(O)):k.y/O.y>0?N=O.multiplyScalar(k.y/O.y):N=O.multiplyScalar(k.length()),this.targetToCamera0.copy(N).negate(),z=this.camera.position.clone().add(N),this.objectToTarget0.subVectors(z,this.position);let j=new hi().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-j.x,j.x=0,j.z=0,j.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(j)}if(this.object instanceof Ui&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=(m=r.rotByTouch)!=null?m:"joystick",this.rotBy=(g=r.rotBy)!=null?g:"keys",this.rotationMode=(v=r.rotationMode)!=null?v:"normal",this.moveMode=(y=r.moveMode)!=null?y:"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=((x=r.speedTranslate)!=null?x:250)*dCe,this.speedOrbit=((b=r.speedRotate)!=null?b:100)*pCe,this.mouseOrbitSensitivity=((S=r.speedRotate)!=null?S:100)*fCe,this.keyAssignments=r.keyAssignments.map(O=>{let k=[O[0],O[1]];return k[1]==="\u25B2"?k[1]="ArrowUp":k[1]==="\u25C0"?k[1]="ArrowLeft":k[1]==="\u25BC"?k[1]="ArrowDown":k[1]==="\u25B6"?k[1]="ArrowRight":k[1]==="\u21E7"?k[1]="Shift":k[1]==="\u21B5"?k[1]="Enter":k[1]==="Space"?k[1]=" ":k[1]==="\u2318"?k[1]="Meta":k[1]==="Ctrl"?k[1]="Control":k[1]==="Esc"&&(k[1]="Escape"),k}),r.rotBy==="mouse"){let O;O=this.keyAssignments.findIndex(k=>k[0]==="rotNegX"),O!==-1&&(this.keyAssignments[O][1]=""),O=this.keyAssignments.findIndex(k=>k[0]==="rotPosX"),O!==-1&&(this.keyAssignments[O][1]=""),O=this.keyAssignments.findIndex(k=>k[0]==="rotPosY"),O!==-1&&(this.keyAssignments[O][1]=""),O=this.keyAssignments.findIndex(k=>k[0]==="rotNegY"),O!==-1&&(this.keyAssignments[O][1]="")}this.lerpFactorPosStart=1-.02**(1/(((w=r.delayPos[0])!=null?w:.3)*60)),this.lerpFactorPosEnd=1-.02**(1/(((A=r.delayPos[1])!=null?A:.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(((_=r.delayRot[0])!=null?_:.3)*60)),this.lerpFactorRotEnd=1-.02**(1/(((M=r.delayRot[1])!=null?M:.3)*60)),this.lerpFactorPosCamera=1-.02**(1/(((E=r.delayPosCamera)!=null?E:.3)*60)),this.lerpFactorRotCamera=1-.02**(1/(((T=r.delayRotCamera)!=null?T:.3)*60)),this.gravity=((P=this.gloabalPhysics.gravity)!=null?P:sp.defaultData.gravity)*Rk,this.usePhysics=(D=this.gloabalPhysics.usePhysics)!=null?D:sp.defaultData.usePhysics,this.jumpPower=r.jumpPower*mCe,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=(L=r.alignToGround)!=null?L:!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=(R=r.orientWith)!=null?R:V1.defaultDataThirdPerson.orientWith,this.slopeThresh=oCe*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*KS/this.pixelsPerMeter,this.stepThresh=r.collider.height*ZS/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*KS/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*ZS/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*KS/this.pixelsPerMeter,this.stepThresh=r.collider.height*ZS/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let u=new C().fromArray(r.collider.position),d=new mt().setFromEuler(new hi().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(u).multiply(this.scale),this.collider.rotation.copy(d),this.collider.matrix.compose(u,d,e_),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=(V=r.forwardDirection)!=null?V:"-z",this.runMultiplier=(F=r.runMultiplier)!=null?F:2;let p=r.navmesh.destinationHelperRadius*2;if(p>0){let O=new lt;O.push({fi:0,data:{...vn.defaultData("light","phong"),alpha:0},id:"layer1"}),O.push({fi:0,data:{...vn.defaultData("color"),color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a},id:"layer2"});let k=new HT({layers:O},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new Sn(TV.create({parameters:{width:p,height:p/10,hollow:.7}}),k),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new hi().setFromQuaternion(this.quaternion,"YXZ"),r=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,r,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof Ui?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.page,r=this.sharedAssets,i=this.object;e.gameActions!==void 0&&Object.entries(e.gameActions).forEach(([n,s],a)=>{s.forEach(({id:o,data:l})=>{try{this.actions[n]===void 0&&(this.actions[n]=[]),l.type==="Transition"?this.actions[n].push(new bm(l,t,r)):l.type==="Animation"?this.actions[n].push(new wm(l,t,this.controlsManager.eventManager.animationControls)):l.type==="Audio"?this.actions[n].push(new ym(o,l,i,r)):l.type==="Video"?this.actions[n].push(new pP(o,l,i)):l.type==="Create"&&this.actions[n].push(new _m(l,t,this.controlsManager))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),Bn(this.actions)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].forEach(t=>{t instanceof bm?t.play():t instanceof wm?t.play(this.initialAction===!1):t instanceof _m?t.dispatchStart():t instanceof ym&&t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].forEach(t=>{t instanceof bm?(t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})):t instanceof wm||(t instanceof _m?t.dispatchStop():t instanceof ym&&t.dispatchGameControl("stop"))})))}get colliderWorldPosition(){return bi.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,r){var o,l,c,h,u,d,p,f,m,g,v;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=i*60,s=!1;if(this.usePhysics&&this.collisionEnabled){let y=$i.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*Rk),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),x=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,y,(o=this.object.rigidBody)==null?void 0:o.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(x){this.onObject=!0,this.groundNormal.set(x.normal2.x,x.normal2.y,x.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),((l=x.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let b=x.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let S of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(S.rigidBody===b&&S.userData.isFollowingObj!==this.object.uuid){(S.hasNonUniformScale?S.matrixWorldRigid:S.matrixWorld).decompose(bi,mo,$i),this.groundVelocity.subVectors(bi,S.prevT),this.object.getWorldPosition($i).add(this.collider.position).sub(bi),this.groundYRotation=wa.setFromQuaternion(mo).y-S.prevR.y,ml.copy($i).applyAxisAngle(qs,this.groundYRotation),this.groundVelocity.add(ml.sub($i)).divideScalar(i);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let y=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let x=bi.subVectors(this.path[1],this.position),b=$i.subVectors(this.path[1],this.path[0]);x.dot(b)<0?this.path.shift():(this.directionXZ.x=b.x,this.directionXZ.z=b.z),y.opacity=y.userData.opacity0}else y.opacity-=.05*y.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let a=lCe.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let y=$i.copy(a);y.y=0,a.set(0,a.y,y.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let y=bi;this.camera.getWorldDirection(y);let x=ml.copy(qs).multiplyScalar(y.dot(qs));y.sub(x);let b=$i.copy(this.directionXZ);b.x*=-1,this.rot.y=y.angleTo(b)*(y.cross(b).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(wa.setFromVector3(this.rot),this.moveMode==="walk"&&(wa.x=0),a.applyEuler(wa),s&&(mo.setFromUnitVectors(qs,this.groundNormal),a.applyQuaternion(mo)),r){let y=wa.set(0,this.vrEulerYOffset*Bk,0);r.applyEuler(y),a.x+=r.x,a.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*i}if(this.usePhysics===!0){let y=$i;this.pushedVelocity.set(0,0,0);for(let x of this.sharedGameControlGlobals.entitiesWithTransformAnim){let b=ml.setFromMatrixPosition(x.matrixWorld).sub(x.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),S=x.rigidBody.collider(0).castCollider(b,this.object.rigidBody.collider(0),bi.copy(a).divideScalar(this.pixelsPerMeter),i,!1);b.multiplyScalar(this.pixelsPerMeter);let w=Rt.is(x)?x:x.object;if(S!==null&&this.lastHitObj!==w){let A;x instanceof Ni&&(A=x);let _=this.sharedGameControlGlobals.entityToCollisionEvents[w.uuid];if(_)for(let M of _)M.data.target==="character"&&(M.dispatch(A),w.dispatchEvent(yE));this.lastHitObj=w}if(S!==null){this.pushedVelocity.copy(b),y.copy(S.normal1).applyQuaternion(x.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let x=y.dot(a);x<0&&a.addScaledVector(y,-x),a.add(this.pushedVelocity)}else a.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(qs,this.euler.y-this.euler0.y);let y=$i.copy(this.objectToCamXZ).normalize(),x=ml.copy(a).multiplyScalar(i);x.y=0;let b=x.sub(bi.copy(y).multiplyScalar(x.dot(y))).cross(y).y;this.euler.y-=Math.atan2(b,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=vt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=vt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=vt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(wa.copy(t),wa.y=0):(wa.copy(this.euler),wa.y=0),this.nonColliderRotOffset.makeRotationFromEuler(wa)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*Bk),Gn.setFromAxisAngle(uCe,this.rot.x),mo.setFromAxisAngle(qs,this.rot.y),mo.multiply(Gn),Gn.setFromAxisAngle(hCe,this.rot.z),mo.multiply(Gn),this.quaternion.copy(mo),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let y=$i.copy(a).multiplyScalar(i/this.pixelsPerMeter),x=null;this.didHit=!1;let b=new C;for(let S=0;S<5;S++){let w=y.length(),A=ml.copy(y).normalize();if(x=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),this.colliderWorldQuat,A,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,w,!1,24,void 0,void 0,this.object.rigidBody),x!==null){this.didHit=!0;let _=this.sharedGameControlGlobals.colliderToEntity.get(x.collider.handle);if(_!==this.lastHitObj&&S===0){this.lastHitObj=_;let P=this.sharedGameControlGlobals.entityToCollisionEvents[_==null?void 0:_.uuid];if(P){for(let D of P)if(D.data.target==="character"){let L=((h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.getCollider(x.collider.handle))._parent,R;if(_.cloner){for(let V of _.cloner.children)if(V.rigidBody===L){R=V;break}}D.dispatch(R),_.dispatchEvent(yE)}}}let M=Lk.set(x.normal2.x,x.normal2.y,x.normal2.z).applyQuaternion(this.colliderWorldQuat),E=Ik.copy(A).multiplyScalar(x.toi).dot(M),T=x.toi;if(T===0&&(this.position.y+=this.offset*this.pixelsPerMeter),E>this.offset&&(T=x.toi*(E-this.offset)/E,b.addScaledVector(A,T)),y.copy(A).multiplyScalar(w-T),Math.acos(-M.y)>this.slopeThresh){let P=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),D=ml.copy(x.witness2).applyQuaternion(this.colliderWorldQuat);D.y=0;let L=P.add(D);L.y+=this.stepThresh;let R=this.sharedGameControlGlobals.rapierWorld.castShape(L,this.colliderWorldQuat,y,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);R!==null&&R.toi===0&&(M.y=0,M.normalize())}y.addScaledVector(M,-y.dot(M))}else{S===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),b.add(y);break}}this.position.addScaledVector(b,this.pixelsPerMeter),(d=this.object.rigidBody)==null||d.setTranslation(bi.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(p=this.object.rigidBody)==null||p.setRotation(Gn.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let y=this.onObject?1:5,x=a.multiplyScalar(i/y);for(let b=0;b<y;b++)this.position.add(x),b===0&&this.checkTrigger(),this.collisionAdjustment(i/y)}else this.position.addScaledVector(a,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let y=this.objectToTarget.add(this.position),x=this.targetToCamera.add(y);j0.lookAt(x,y,qs).setPosition(x),j0.decompose(this.targetPos,this.targetQuat,bi),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=vt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=vt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(vCe),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&((m=(f=this.navMeshPathDest)==null?void 0:f.material)==null?void 0:m.opacity)<-.04*((v=(g=this.navMeshPathDest)==null?void 0:g.material)==null?void 0:v.userData.opacity0)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(gCe),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=Gn.setFromAxisAngle(qs,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?vt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=vt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=vt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=bi.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let i=mo.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){qs.angleTo(e)*180/Math.PI<15||qs.angleTo(e)*180/Math.PI>85?Gn.identity():Gn.setFromUnitVectors(qs,e),this.groundTilt.slerp(Gn,.06),this.groundTiltInv.copy(this.groundTilt).invert()}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[r,i,n,s]=this.sharedGameControlGlobals.triggers[t];for(let a=0;a<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;a++){let o=this.sharedGameControlGlobals.entitiesWithTransformAnim[a];if(n===o||s.isValidTriggeringObject(Rt.is(o)?o:o.object)===!1)continue;let l=JS.copy(n.matrixWorld).decompose(bi,Gn,$i).compose(bi,Gn,e_).multiply(i),c=j0.copy(o.matrixWorld).invert().multiply(l);r instanceof Br?e=o.bvhGeometry.boundsTree.intersectsBox(r,c):(t_.radius=r,t_.center.setFromMatrixPosition(c),e=o.bvhGeometry.boundsTree.intersectsSphere(t_)),e?s.currentIntersectedObjects.indexOf(o)===-1&&(s.currentIntersectedObjects.push(o),s.dispatch(),n.dispatchEvent(MTe)):s.currentIntersectedObjects=s.currentIntersectedObjects.filter(h=>h!==o)}}}collisionAdjustment(e){var n;let t=Ik.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=j0.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(bi,Gn,$i).compose(bi,Gn,e_);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;fs.makeEmpty(),s.updateMatrixWorldSVD();let a=s.matrixWorldRigid,o=JS.copy(a).invert(),l=cCe.copy(JS).multiply(r);ai.copy(this.collider.segment),ai.start.applyMatrix4(l),ai.end.applyMatrix4(l);let c=Lk.copy(this.position).applyMatrix4(o);fs.expandByPoint(ai.start),fs.expandByPoint(ai.end),fs.min.addScalar(-this.collider.radius),fs.max.addScalar(this.collider.radius),s.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(h){return h.distanceToPoint(ai.end)},intersectsBounds:h=>h.intersectsBox(fs),intersectsTriangle:h=>{let u=bi,d=$i,p=h.closestPointToSegment(ai,u,d);if(p<this.collider.radius){let f=this.collider.radius-p,m=d.sub(u).normalize(),g=ml.copy(c);g.addScaledVector(m,f);let v=g.applyMatrix4(a).sub(this.position);t.add(v),ai.start.addScaledVector(m,f),ai.end.addScaledVector(m,f)}}})}),fs.makeEmpty(),ai.copy(this.collider.segment),ai.start.applyMatrix4(r),ai.end.applyMatrix4(r),fs.expandByPoint(ai.start),fs.expandByPoint(ai.end),fs.min.addScalar(-this.collider.radius),fs.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({traverseBoundsOrder(s){return s.distanceToPoint(ai.end)},intersectsBounds:s=>s.intersectsBox(fs),intersectsTriangle:s=>{let a=bi,o=$i,l=s.closestPointToSegment(ai,a,o);if(l<this.collider.radius){let c=this.collider.radius-l,h=o.sub(a).normalize();this.alignToGround&&this.groundTiltAdjustment(h),t.addScaledVector(h,c),ai.start.addScaledVector(h,c),ai.end.addScaledVector(h,c)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.position.add(t)}},EG=mE;EG.isLocked=!1;var yCe=gp(pU());function Do(e,t){let r=new nt;if(!e.getAttribute("position"))return r.setAttribute("position",new Ve([],3)),r.setIndex([]),r;let{positions:i,triIndices:n}=db(e.getAttribute("position"),e.getIndex());return r.setAttribute("position",new Ve(i,3)),r.setIndex(n),t&&r.applyMatrix4(t),r}var xCe=new we,bCe=new we,Sa=[[0,0,0],[0,0,0],[0,0,0]];function CG(e){let t=e.elements;Sa[0][0]=t[0],Sa[0][1]=t[4],Sa[0][2]=t[8],Sa[1][0]=t[1],Sa[1][1]=t[5],Sa[1][2]=t[9],Sa[2][0]=t[2],Sa[2][1]=t[6],Sa[2][2]=t[10];let{u:r,v:i}=(0,yCe.SVD)(Sa),n=xCe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),s=bCe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return n.multiply(s.transpose())}var wCe=class extends ij{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new Ac({color:65280,linewidth:10}),t=new C(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new C(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new C().addVectors(t,r.multiplyScalar(i)),s=new nt;return s.setFromPoints([t,n]),new f1(s,e)}},TG=e=>e instanceof xg||e instanceof Ld;function SCe(e,t){return e.distance-t.distance}function PG(e,t,r){if(!(!Po(t)||!t.visible)){Ks(t)&&t.raycast(e,r);for(let i of t.children)PG(e,i,r)}}function gE(e,t,r){if(!r.some(n=>ex(e,n)!==void 0))return[];let i=[];return t.children.forEach(n=>PG(e,n,i)),i.sort(SCe),i}function vE(e){let t=[];if(e.length){let r=e[0].object;Po(r)&&t.push(r);let i=r.parent;for(;i;)TG(i)&&t.push(i),i=i.parent}return t}function ex(e,t){if(Ks(t)){if(t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if(TG(t))return DG(e,t)}function DG(e,t){if(!(!Po(t)||!t.visible)){if(Ks(t)){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children){let i=DG(e,r);if(i)return i}}}function _Ce(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width*2-1,y:-((t-(r.top+window.scrollY))/r.height)*2+1}}var ACe=class{constructor(e,t,r,i,n,s,a,o){this.renderer=e,this.publish=t,this.scene=r,this.getCamera=i,this.sharedAssets=n,this.requestRender=s,this.isExport=a,this.frame=o,this.raycaster=new wCe,this.raycasterNeedsUpdate=!0,this._useWindowEvents=!1,this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}updateRaycaster(e){var n;if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:t,pageY:r}=((n=e.touches)==null?void 0:n.length)>0?e.touches[0]:e,i=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(_Ce(t,r,i),this.getCamera())}},OG=(e=>(e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e[e.scroll=6]="scroll",e))(OG||{}),so=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},fP=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],LG=e=>{var t;return(t=fP.find(([r,i])=>i===e))==null?void 0:t[0]},ev=e=>{var t;return(t=fP.find(([r])=>r===e))==null?void 0:t[1]},MCe=(e,t)=>{let r=LG(e);if(r){let i=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}},ECe=class extends so{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=r=>{var s;if(!r.eventName||!r.target||r.eventName==="Scroll")return;let i=(s=this.splineEvents[LG(r.eventName)])==null?void 0:s[r.target.uuid];if(!i)return;r.eventName==="Scroll"&&r.deltaY!==void 0&&Object.assign(i,{deltaY:r.deltaY});let{domElement:n}=this.eventContext;n.dispatchEvent(i)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var i,n;if((i=r.data)!=null&&i.events.length){for(let[s,a]of fP)if(r.data.events.some(o=>o.data.type===a&&!o.data.disabled)){this.objectsPerEvents.has(s)?(n=this.objectsPerEvents.get(s))==null||n.push(r):this.objectsPerEvents.set(s,[r]);let o={id:r.uuid,name:r.name},l=MCe(a,o),c=this.splineEvents[s];c?c[r.uuid]=l:this.splineEvents[s]={[r.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},CCe=class{constructor(e,t,r,i,n,s){if(this.id=e,this.data=t,this.object=r,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=t.toggle,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=ss(t,t.actions,i,n,s,r)}disconnect(){Bn(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.useToggle===!1&&this.alreadyPlayedNonTogglingActions.add(t)}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()}),this.actions.SwitchCamera.forEach(t=>{t.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing)||this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.SwitchCamera.some(t=>t.playing)||this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()})}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()})}},TCe=class extends so{constructor(e,t){super(e),this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.windowMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.onWindowMouseDown=n=>{(n.target===this.eventContext.domElement||n.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&s.dispatch()}),this.windowMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&s.dispatch()})},this.onWindowMouseUp=n=>{(n.target===this.eventContext.domElement||n.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{s.data.type==="MouseUp"?s.dispatch():s.data.type==="MousePress"&&s.dispatchRelease()}),this.windowMouseEvents.forEach(s=>{s.data.type==="MouseUp"?s.dispatch():s.data.type==="MousePress"&&s.dispatchRelease()})},this.onMouseDown=n=>{tt.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseEvent("MouseDown"))},this.onMouseUp=n=>{tt.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=n=>{tt.length>1||(this.eventContext.updateRaycaster(n),this.handleMousePressEvent())},this.onMousePressRelease=n=>{tt.length>1||(this.eventContext.updateRaycaster(n),this.handleMousePressEvent(!0))},this.onKeyDown=n=>{this.heldKeys[n.key]||(this.handleKeyEvent(n,"KeyDown"),this.handleKeyEventHeld(n,"KeyDown",!0)),this.heldKeys[n.key]=!0},this.onKeyUp=n=>{this.handleKeyEvent(n,"KeyUp"),this.handleKeyEventHeld(n,"KeyUp",!0)},this.onKeyPressDown=n=>{this.heldKeysPress[n.key]?this.handleKeyEventHeld(n,"KeyPress"):(this.handleKeyEvent(n,"KeyPress"),this.handleKeyEventHeld(n,"KeyPress",!0)),this.heldKeysPress[n.key]=!0},this.onKeyPressUp=n=>{this.handleKeyEvent(n,"KeyPress",!0)},this.releaseHeldKey=n=>{delete this.heldKeys[n.key]},this.releaseHeldKeyPress=n=>{delete this.heldKeysPress[n.key]},this._onUserEvent=({eventName:n,target:s,reverse:a})=>{var l,c,h,u;if(!n||!s)return;let o=ev(n);o&&(o==="MouseDown"||o==="MouseUp"||o==="MousePress"?(s.dispatchEvent({type:"beginEvent",eventName:o}),(c=(l=this.eventsPerObjects[o])==null?void 0:l[s.uuid])==null||c.forEach(d=>{d.dispatchUserEvent(a)})):(o==="KeyDown"||o==="KeyUp"||o==="KeyPress")&&(s.dispatchEvent({type:"beginEvent",eventName:o}),(u=(h=this.eventsPerObjects[o])==null?void 0:h[s.uuid])==null||u.forEach(d=>{d.dispatchUserEvent()})))};let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var a,o;if(!((a=n.data)!=null&&a.events.length))return;let s=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let l of s){let c=this.eventsPerObjects[l];n.data.events.filter(({data:h})=>h.type===l&&h.disabled!==!0).forEach(({id:h,data:u})=>{try{let d=new CCe(h,u,n,r,i,t);d.actions.Video.length&&(this.hasVideoAction=!0),(u.type==="MouseDown"||u.type==="MouseUp"||u.type==="MousePress")&&(u.mode==="Canvas"||u.mode==="Window")?u.mode==="Canvas"&&this.canvasMouseEvents.push(d):c[n.uuid]?c[n.uuid].push(d):c[n.uuid]=[d]}catch{}}),(o=c[n.uuid])!=null&&o.length&&this.objectsPerTypes[l].push(n)}})}connect(){var t,r,i,n,s,a;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),typeof window<"u"&&(window.addEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.addEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),(t=this.objectsPerTypes.MouseDown)!=null&&t.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(r=this.objectsPerTypes.MouseUp)!=null&&r.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(i=this.objectsPerTypes.MousePress)!=null&&i.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(n=this.objectsPerTypes.KeyDown)!=null&&n.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(s=this.objectsPerTypes.KeyUp)!=null&&s.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(a=this.objectsPerTypes.KeyPress)!=null&&a.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([o,l])=>{l.forEach(c=>{c.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},typeof window<"u"&&(window.removeEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.removeEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(r=>{r.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,r])=>{r.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:r,page:i}=this.eventContext,n=this.objectsPerTypes[e];if(n.length)if(t){let s=gE(r,i,n);vE(s).forEach(a=>{this.eventsPerObjects[e][a.uuid]&&this.handleObjectMouseEventDispatch(a,e)})}else n.forEach(s=>{ex(r,s)&&this.handleObjectMouseEventDispatch(s,e)})}handleMousePressEvent(e=!1){let t="MousePress",r=this.objectsPerTypes[t],i=[];if(r.length){if(!e){let{stopRaycast:n,raycaster:s,page:a}=this.eventContext;if(n){let o=gE(s,a,r);i=vE(o)}else r.forEach(o=>{ex(s,o)&&i.push(o)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{i.includes(n)||this.handleObjectMouseEventDispatchRelease(n,t)}),i.length&&i.forEach(n=>{this.handleObjectMouseEventDispatch(n,t)}),this._prevObjects=i}}handleObjectMouseEventDispatch(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{let n=this.eventsPerObjects[t][i.uuid];n.some(({data:s})=>"key"in s&&s.key===e.key)&&i.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(s=>{"key"in s.data&&s.data.key===e.key&&(r?s.dispatchRelease():s.dispatch(!0))})})}handleKeyEventHeld(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{this.eventsPerObjects[t][i.uuid].forEach(n=>{"key"in n.data&&n.data.key===e.key&&n.dispatchHeld(r)})})}},PCe=new C,DCe=new C,IG=class{constructor(e,t,r,i,n){this.actionsIn=ss(e,e.inActions,r,i,n,t),this.actionsOut=ss(e,e.outActions,r,i,n,t)}disconnect(){Bn(this.actionsIn),Bn(this.actionsOut)}},OCe=class extends IG{constructor(e,t,r,i,n,s){super(t,r,i,n,s),this.id=e,this.data=t,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{for(let d of this.objects)if(!d.visible)return;let c=PCe.setFromMatrixPosition(this.objects[0].matrixWorld),h=DCe.setFromMatrixPosition(this.objects[1].matrixWorld),u=c.distanceTo(h)<=this.distance?"in":"out";if(this.stage!==u){this.stage=u;let d=u==="in"?this.actionsIn:this.actionsOut;d.Audio.forEach(p=>p.dispatchConditional()),d.Video.forEach(p=>p.dispatchConditional()),d.Link.forEach(p=>p.dispatch()),d.Create.forEach(p=>p.dispatch()),d.Destroy.forEach(p=>p.dispatch()),d.Reset.forEach(p=>p.dispatch()),d.Transition.forEach(p=>{p.object.currentTransitionEvent!==this&&(p.object.currentTransitionEvent=this),p.init()}),d.Transition.forEach(p=>p.play()),d.Animation.forEach(p=>p.play()),d.SwitchCamera.forEach(p=>p.play()),d.SceneTransition.forEach(p=>p.dispatch())}};let{distance:a,fromObject:o,toObject:l}=t.condition;this.distance=a;for(let c of[o,l]){if(!c)throw new Error("Missing property");let h=i.find(c);if(!h)throw new Error("Missing property");this.objects.push(h)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrix",this.onUpdateMatrix)}),this.onUpdateMatrix()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrix",this.onUpdateMatrix)})}},LCe=class extends IG{constructor(e,t,r,i,n,s){var l;super(t,r,i,n,s),this.id=e,this.data=t,this.object=r,this.onBegin=({target:c,state:h})=>{this.toState!==h&&(this.actionsOut.Audio.forEach(u=>u.dispatchConditional()),this.actionsOut.Video.forEach(u=>u.dispatchConditional()),this.actionsOut.Link.forEach(u=>u.dispatch()),this.actionsOut.Create.forEach(u=>u.dispatch()),this.actionsOut.Destroy.forEach(u=>u.dispatch()),this.actionsOut.Reset.forEach(u=>u.dispatch()),this.actionsIn.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(u=>u.play()),this.actionsOut.Animation.forEach(u=>u.play()),this.actionsIn.SwitchCamera.forEach(u=>u.pause()),this.actionsOut.SwitchCamera.forEach(u=>u.play()),this.actionsOut.SceneTransition.forEach(u=>u.dispatch()))},this.onComplete=({target:c,state:h})=>{this.toState===h&&(this.actionsIn.Audio.forEach(u=>u.dispatchConditional()),this.actionsIn.Video.forEach(u=>u.dispatchConditional()),this.actionsIn.Link.forEach(u=>u.dispatch()),this.actionsIn.Create.forEach(u=>u.dispatch()),this.actionsIn.Destroy.forEach(u=>u.dispatch()),this.actionsIn.Reset.forEach(u=>u.dispatch()),this.actionsOut.Transition.forEach(u=>u.pause()),this.actionsOut.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(u=>u.play()),this.actionsIn.Animation.forEach(u=>u.play()),this.actionsOut.SwitchCamera.forEach(u=>u.pause()),this.actionsIn.SwitchCamera.forEach(u=>u.play()),this.actionsIn.SceneTransition.forEach(u=>u.dispatch()))};let{condition:a}=t;if(!a.object)throw new Error("Missing property");let o=i.find(a.object);if(!o)throw new Error("Missing property");if(this.toObject=o,a.state&&!((l=this.toObject.states)!=null&&l[a.state]))throw new Error("Missing property");this.toState=a.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},ICe=class extends so{constructor(e,t){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var s;if((s=n.data)!=null&&s.events.length){for(let{id:a,data:o}of n.data.events)if(!o.disabled&&o.type==="Conditional")try{let l;o.condition.type==="Comparison"||(o.condition.type==="Distance"?l=new OCe(a,o,n,r,i,t):o.condition.type==="State"&&(l=new LCe(a,o,n,r,i,t))),l&&(this.eventsPerConditions[o.condition.type].push(l),(l.actionsIn.Video.length||l.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},wf=new C,gl=new C,zc=new C,kk=new $n,RCe=.01,Ut=new C,Xr=new C,zk=new C,hu=new mt,r_=new hi,BCe=new we,i_=new pi,Mh=new C,_a=new C,Eh=.2;function n_(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var kCe=function(){let e=new we;return(t,r,i)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(r),t.reference==="global"&&n_(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?n_(n.position,t.limits):t.reference==="local"&&(hu.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(hu),n_(n.position,t.limits),hu.invert(),n.position.applyQuaternion(hu),n.position.add(t.position0)),e.multiply(i!=null?i:n.matrixWorld).decompose(Ut,n.quaternion,Xr),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof Rn&&Na(n.parent)&&n.invalidateDownstreamBooleanData(!0)}}(),zCe=class{constructor(e,t,r,i,n,s){this.object=e,this.data=t,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=ss(t,t.dragDropActions.drag,r,i,n,this.object),this.actionsDrop=ss(t,t.dragDropActions.drop,r,i,n,this.object);let a=[];this.data.objects.forEach(o=>{let l=r.find(o);!l||l.data.visible!==!1&&(a.push(l),s[l.uuid]&&s[l.uuid].forEach(c=>{let h=r.find(c);!h||h.data.visible!==!1&&a.push(h)}))}),this.data.dropDestinations.forEach(o=>{let l=r.find(o);!l||l.data.visible!==!1&&(this.dropDestIds.push(l.uuid),s[l.uuid]&&s[l.uuid].forEach(c=>{let h=r.find(c);!h||h.data.visible!==!1&&this.dropDestIds.push(h.uuid)}))}),this.dragItems=a.map(o=>(this.data.planeMode==="locked"&&(o.userData.lockedPlane=!0),o.userData.worldPosition0=new C().setFromMatrixPosition(o.matrixWorld),{obj:o,fromPosition:new C().setFromMatrixPosition(o.matrixWorld),pointStart:new C,pointEnd:new C,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new C().copy(o.position),quat0:new mt().copy(o.quaternion),snapped:!1,orientationMatrix:new we,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){Bn(this.actionsDrag),Bn(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},NCe=class extends so{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{var o;if(tt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:n,page:s}=this.eventContext,a=s.raycastWithClones(n);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let l of this.events){let c=0;for(let{obj:h,pointEnd:u,pointStart:d}of l.dragItems){if(h===a[0].object||h===a[0].object.object||Rt.is(h)&&h.isAncestorOf(a[0].object.uuid)){if(l.activeIdx=c,l.activeDragItem.reset=!1,l.activeDragItem.currentDampingFactor=l.data.dampingFactor,l.activeDragItem.snapped=!1,l.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){l.activeDragItem.obj.rigidBody&&l.activeDragItem.obj.rigidBody.setBodyType(2,!0);let p=l.activeDragItem.obj;h.hasNonUniformScale&&h.updateMatrixWorldSVD(),(p.hasNonUniformScale?p.matrixWorldRigid:p.matrixWorld).decompose(Ut,hu,Xr),r_.setFromQuaternion(hu),p.prevR===void 0?(p.prevR=r_.clone(),p.prevT=Ut.clone()):(p.prevR.copy(r_),p.prevT.copy(Ut)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(l.activeDragItem.obj)}this.calcPlaneIntersectPos(h,d,l.data.plane,l.data.referenceFrame),u.copy(d),(this.eventManager.controlsManager.usePhysics&&((o=h.data.physics)==null?void 0:o.rigidBody)==="dynamic"||l.data.drop===!1||l.data.resetOnSnapFail===!1)&&l.activeDragItem.fromPosition.setFromMatrixPosition(l.activeDragItem.obj.matrixWorld),this.activeEvent=l,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}c++}}this.activeEvent=null},this.onPointerMove=i=>{var o,l,c,h;if(tt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:n,page:s}=this.eventContext,a=s.raycastWithClones(n);if(tt.length===0){let u=!1;for(let d of this.events){for(let{obj:p}of d.dragItems)if(p===((o=a[0])==null?void 0:o.object)||p===((c=(l=a[0])==null?void 0:l.object)==null?void 0:c.object)||Rt.is(p)&&p.isAncestorOf((h=a[0])==null?void 0:h.object.uuid)){switch(u=!0,d.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(u)break}u||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let u=this.activeEvent.activeDragItem;u.snapped=!1;let d;if(this.activeEvent.data.drop&&(d=a.filter(p=>u.obj!==p.object&&!u.obj.isAncestorOf(p.object.uuid)&&!(p.object instanceof xg)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(f=>f===p.object.uuid||s.scene.find(f).isAncestorOf(p.object.uuid))))[0]),d){let p=zk.copy(d.face.normal).applyMatrix3(i_.getNormalMatrix(d.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")u.fromPosition.setFromMatrixPosition(d.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(u.fromPosition.copy(d.point),this.activeEvent.data.snapSurfaceMode==="bbox"){Ut.copy(p).applyMatrix3(i_.setFromMatrix4(u.obj.matrixWorld).transpose());let f=u.obj;Ut.x>Eh?Xr.x=-f.recursiveBBox.min.x:Ut.x<-Eh&&(Xr.x=-f.recursiveBBox.max.x),Ut.y>Eh?Xr.y=-f.recursiveBBox.min.y:Ut.y<-Eh&&(Xr.y=-f.recursiveBBox.max.y),Ut.z>Eh?Xr.z=-f.recursiveBBox.min.z:Ut.z<-Eh&&(Xr.z=-f.recursiveBBox.max.z),Xr.applyMatrix3(i_.invert())}else Xr.copy(p).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);u.fromPosition.add(Xr)}this.activeEvent.data.autoOrient&&(Ut.set(0,1,0).cross(p),Ut.length()<1e-4&&Ut.set(-1,0,0).cross(p),Xr.crossVectors(zk,Ut),u.orientationMatrix.makeBasis(Ut,Xr,p)),u.pointStart.copy(u.fromPosition),u.pointEnd.copy(u.pointStart),u.currentDampingFactor=this.activeEvent.snapDampingFactor,u.snapped=!0,this.lastDropDestination!==d.object&&(this.lastDropDestination=d.object,this.activeEvent.actionsDrop.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(f=>{f.dispatchThrottled()}))}else u.orientationMatrix.makeRotationFromQuaternion(u.quat0),this.lastDropDestination=null,u.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(u.obj,u.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(p=>{p.stop(),p.object.currentState!==null&&p.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(p=>{p.stop()}),this.activeEvent.actionsDrop.Audio.forEach(p=>{p.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(p=>{p.dispatchThrottled()}),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(p=>{p.play()}),this.activeEvent.actionsDrag.Animation.forEach(p=>{p.play()}),this.activeEvent.actionsDrag.Audio.forEach(p=>{p.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(p=>{p.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(p=>{p.stop(),p.object.currentState!==null&&p.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(p=>{p.stop()}))},500),this.updateDragItem(u),u.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{var n;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let s=((n=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:n.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!s)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&s&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(a=>{a.stop()}),this.activeEvent.actionsDrag.Audio.forEach(a=>{a.dispatchGameControl("stop")})),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let r={};e.page.traverseEntity(i=>{i.component&&(r[i.component.uuid]?r[i.component.uuid].push(i.uuid):r[i.component.uuid]=[i.uuid])}),e.page.traverseEntity(i=>{var n;(n=i.data)==null||n.events.filter(s=>s.data.type==="DragDrop"&&!s.data.disabled).forEach(s=>{this.events.push(new zCe(i,s.data,e.page,e.sharedAssets,t,r))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,r,i){let{getCamera:n,raycaster:s}=this.eventContext;n().getWorldDirection(gl),gl.negate();let a=hu.identity();switch(i==="parent"?BCe.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Ut,a,Xr):i==="local"&&e.matrixWorld.decompose(Ut,a,Xr),r){case"x":Ut.set(1,0,0).applyQuaternion(a),Mh.copy(gl).cross(Ut),_a.copy(Ut).cross(Mh);break;case"y":Ut.set(0,1,0).applyQuaternion(a),Mh.copy(gl).cross(Ut),_a.copy(Ut).cross(Mh);break;case"z":Ut.set(0,0,1).applyQuaternion(a),Mh.copy(gl).cross(Ut),_a.copy(Ut).cross(Mh);break;case"xy":_a.set(0,0,1).applyQuaternion(a);break;case"yz":_a.set(1,0,0).applyQuaternion(a);break;case"xz":_a.set(0,1,0).applyQuaternion(a);break;case"adaptive":gl.angleTo(Xr.set(0,1,0))>Math.PI/6?(Ut.crossVectors(Xr.set(0,1,0),gl),_a.crossVectors(Ut,Xr)):_a.set(0,1,0);break;default:_a.copy(gl);break}zc.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:zc;if(kk.setFromNormalAndCoplanarPoint(_a,o),!!s.ray.intersectPlane(kk,t)&&(r==="x"||r==="y"||r==="z")){let l=Xr.subVectors(t,o).dot(Ut);t.copy(o).addScaledVector(Ut,l)}}updateDragItem(e,t=!1){var r,i;zc.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?wf.subVectors(e.fromPosition,zc).divideScalar(e.currentDampingFactor):e.reset==="original"?(wf.subVectors(e.obj.userData.worldPosition0,zc).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):wf.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(zc).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?wf.length()<RCe:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&kCe(e,wf.add(zc),((r=this.activeEvent)==null?void 0:r.data.drop)&&((i=this.activeEvent)==null?void 0:i.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},Ch=new C,s_=new C,go=new C,vo=new C,Nk=new $n,FCe=.01,UCe={type:"requestRender"},jCe=function(){let e=new C,t=new C;return(r,i,n)=>n>0?(e.subVectors(r,i),e.length()<=n?r:t.copy(i).add(e.normalize().multiplyScalar(n))):i}(),Fk=function(){let e=new we;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Rn&&Na(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),VCe=class{constructor(e,t,r,i,n){this.data=e,this.object=t,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new C,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...uM.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=ss(e,e.actions,r,i,n,t)}},GCe=class extends so{constructor(e,t){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(tt.length>1)){this.eventContext.updateRaycaster(i);for(let n of this.events)n.target===void 0&&this.updateSingleEvent(n)}},this.onMouseEnter=i=>{for(let n of this.events)n.target===void 0&&(n.isReset=!1,n.currentDampingFactor=n.data.dampingFactor)},this.onMouseLeave=i=>{for(let n of this.events)n.target===void 0&&(n.data.resetOnPointerLeave&&(n.isReset=!0,n.currentDampingFactor=n.resetDampingFactor),this.updateSingleEvent(n))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{page:r}=this.eventContext;r.traverseEntity(i=>{var s,a;let n=(s=i.data)==null?void 0:s.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);n&&(!r.data.globalPhysics.usePhysics||((a=i.dataPatched.physics)==null?void 0:a.rigidBody)!=="dynamic")&&this.events.push(new VCe(n.data,i,r,e.sharedAssets,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Kn&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let i=r.target,n=this.onTargetChange(r);this.pairOfEventListeners.push([i,n]),i.addEventListener("requestRender",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Kn&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let r of this.events)r.paused=!0,r.isReset=!1,Bn(r.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var a;this.events.forEach(o=>{o.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:i,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(go),e.isReset)vo.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(vo);else{let{getCamera:o,raycaster:l}=this.eventContext;if(r==="custom"?(o().getWorldDirection(s_),s_.negate(),Ch.copy(s_)):r==="xy"?Ch.set(0,0,1):r==="xz"?Ch.set(0,1,0):r==="yz"&&Ch.set(1,0,0),Nk.setFromNormalAndCoplanarPoint(Ch,go),!l.ray.intersectPlane(Nk,vo))return}if(!e.isReset){if(vo.distanceTo(e.worldPosition0)>i&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)vo.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(vo.x=go.x),e.data.enabledTranslation[1]===!1&&(vo.y=go.y),e.data.enabledTranslation[2]===!1&&(vo.z=go.z);let s=jCe(go,vo,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let o=Ch.subVectors(s,go).divideScalar(e.currentDampingFactor);go.add(o),t&&Fk(e.object,go),e.paused=o.length()<FCe}else Fk(e.object,s),e.paused=!0;(a=e.object)==null||a.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(UCe)}},Sf=new C,V0=new C,_f=new we,Th=new mt,vl=new mt,Af=new C,Mf=new C,Nc=new C,yo=new C,a_=new $n,HCe=1e-6,WCe={type:"requestRender"},qCe={type:"changeRotation"},Uk=function(){let e=new we;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(CG(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof Rn&&Na(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),$Ce=class{constructor(e,t,r){this.object=t,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new mt,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...hM.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},XCe=class extends so{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=r=>{if(!(tt.length>1)){this._lastMouseEvent=r,this.eventContext.updateRaycaster(r);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=r=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=r=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onScroll=r=>{if(this._lastMouseEvent){let i=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(i)}},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)},this.createUserEventListener=r=>({eventName:i,target:n})=>{if(!i||!n)return;let s=ev(i);s&&s==="LookAt"&&this.updateSingleEvent(r)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var n,s;let i=(n=r.data)==null?void 0:n.events.find(a=>a.data.type==="LookAt"&&!a.data.disabled);i&&(!t.data.globalPhysics.usePhysics||((s=r.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new $Ce(i.data,r,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Kn&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?t.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let s=this.onTargetChange(r),a=r.target;this.pairOfEventListeners.push([a,s]),a.addEventListener("requestRender",s)}let i=this.createUserEventListener(r),n=r.object;this.pairOfUserEventListeners.push([n,i]),n.addEventListener("userEvent",i)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Kn&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let[r,i]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",i);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var d;let{tilt:t,axis:r,distance:i,plane:n,limitDistance:s,enabledRotation:a,limitDistanceEnabled:o}=e.data,{getCamera:l,raycaster:c}=this.eventContext,{object:h,target:u}=e;if(h.getWorldPosition(Af),!e.isReset)if(e.target)e.target.getWorldPosition(Mf);else{if(n==="custom"?(l().getWorldDirection(V0),V0.negate(),a_.setFromNormalAndCoplanarPoint(V0,Af)):(n==="xy"?Sf.set(0,0,1):n==="xz"?Sf.set(0,1,0):n==="yz"&&Sf.set(1,0,0),a_.setFromNormalAndCoplanarPoint(Sf,Af)),!c.ray.intersectPlane(a_,Mf))return;i>0&&(n==="custom"||n===void 0)&&Mf.addScaledVector(V0,i)}if(e.isReset||(u?t==="target"?Nc.copy(u.up).applyMatrix4(_f.extractRotation(u.matrixWorld)).normalize():a.some(p=>p===!1)?(r==="x"?(yo.set(0,0,1),a[2]===!1&&yo.set(0,1,0)):r==="y"?(yo.set(1,0,0),a[0]===!1&&yo.set(0,0,1)):(yo.set(0,1,0),a[1]===!1&&yo.set(1,0,0)),Nc.copy(yo).applyQuaternion(e.worldQuaternion0).normalize()):Nc.set(0,1,0):n==="custom"?Nc.set(0,1,0):Nc.copy(Sf)),e.isReset)vl.copy(e.worldQuaternion0);else if(Af.distanceTo(Mf)>s&&o&&u)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)vl.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;YCe(_f,Mf,Af,Nc,r,yo),vl.setFromRotationMatrix(_f),Th.setFromUnitVectors(yo.applyQuaternion(vl),Nc),a.some(p=>p===!1)&&t!=="target"&&vl.premultiply(Th).normalize()}e.currentDampingFactor>1?(h.updateWorldMatrix(!0,!1),Th.setFromRotationMatrix(CG(h.matrixWorld)),Th.slerp(vl,1/e.currentDampingFactor),Uk(h,_f.makeRotationFromQuaternion(Th)),e.paused=8*(1-Th.dot(vl))<HCe):(Uk(h,_f.makeRotationFromQuaternion(vl)),e.paused=!0),(d=e.object)==null||d.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),h.dispatchEvent(WCe),h.dispatchEvent(qCe)}},ms=new C,$r=new C,Dr=new C;function YCe(e,t,r,i,n,s){let a=e.elements;Dr.subVectors(t,r),Dr.lengthSq()===0&&(Dr.z=1),Dr.normalize(),$r.crossVectors(i,Dr),$r.lengthSq()===0&&(Math.abs(i.z)===1?Dr.x+=1e-4:Dr.z+=1e-4,Dr.normalize(),$r.crossVectors(i,Dr)),$r.normalize(),ms.crossVectors(Dr,$r),n==="x"?s.z===1?[$r,ms,Dr]=[Dr,$r,ms]:($r.negate(),[$r,Dr]=[Dr,$r]):n==="y"?s.x===1?[$r,ms,Dr]=[ms,Dr,$r]:($r.negate(),[ms,Dr]=[Dr,ms]):s.x===1&&($r.negate(),[$r,ms]=[ms,$r]),a[0]=$r.x,a[4]=ms.x,a[8]=Dr.x,a[1]=$r.y,a[5]=ms.y,a[9]=Dr.y,a[2]=$r.z,a[6]=ms.z,a[10]=Dr.z}var QCe=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.entered=!1,this.actions=ss(t,t.actions,i,n,s,r)}disconnect(){Bn(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch())}},KCe=class extends so{constructor(e,t){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=n=>{tt.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onMouseUp=n=>{tt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=n=>{tt.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:n,target:s,reverse:a})=>{var l;if(!n||!s)return;let o=ev(n);o&&o==="MouseHover"&&(s.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(l=this.eventsPerObjects[s.uuid])==null||l.forEach(c=>c.dispatchUserEvent(a)))};let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var s,a;if(!(!n.visible||!((s=n.data)!=null&&s.events.length))){for(let{id:o,data:l}of n.data.events)if(!l.disabled&&l.type==="MouseHover")try{let c=new QCe(o,l,n,r,i,t);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(c):this.eventsPerObjects[n.uuid]=[c]}catch{}(a=this.eventsPerObjects[n.uuid])!=null&&a.length&&this.objects.push(n)}})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Kn&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(t=>{t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Kn&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(r=>{r.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:i,page:n}=this.eventContext;if(r){let s=gE(i,n,this.objects);t=vE(s)}else this.objects.forEach(s=>{ex(i,s)&&t.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var i;t.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(r=>{var i;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},ZCe=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.scrollCounter=0,this.actions=ss(t,t.actions,i,n,s,r)}connect(){this.scrollCounter=0}disconnect(){Bn(this.actions)}dispatch(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(r)),this.actions.Animation.forEach(i=>i.seek(t)),this.actions.Create.forEach(i=>i.dispatchThrottled())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled())}},JCe=class{constructor(e,t,r,i,n,s,a){this.id=e,this.data=t,this.object=r,this.domElement=s,this.eventManager=a,this.scrollStart=0,this.scrollEnd=0,this.actions=ss(t,t.actions,i,n,a,r)}computeScrollBounds(){var a,o;let e=this.domElement.getBoundingClientRect(),t=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||t.scrollTop,n=r.clientTop||t.clientTop||0,s=Math.round(e.top+i-n);if(this.data.startFrom==="enter"){let l=window.innerHeight,c=e.height,h=this.data.enterAnchor,u=h==="top"?l:h==="bottom"?l-c:l-c*.5;this.scrollStart=s-u}else this.scrollStart=0;this.scrollStart+=(a=this.data.startOffset)!=null?a:0,this.scrollEnd=this.scrollStart+((o=this.data.endAfter)!=null?o:400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){Bn(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let r=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(t-this.scrollStart)/r));this.actions.Transition.forEach(n=>n.seek(i)),this.actions.Animation.forEach(n=>n.seek(i)),this.actions.Create.forEach(n=>n.dispatchThrottled())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled())}},eTe=class extends so{constructor(e,t){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([a,o])=>{o.forEach(l=>l.handleResize())})},this.onScroll=a=>{if(!this.isInview)return;let o={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,c])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:o}),c.forEach(h=>h.dispatch(o))})},this.onWheel=a=>{!this.isInview||a.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([o,l])=>{o.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:a.deltaY}),l.forEach(c=>c.dispatch(a.deltaY))})},this.onUserEvent=({eventName:a,target:o,reverse:l})=>{var h;if(!a||!o)return;let c=ev(a);c&&c==="Scroll"&&(o.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(h=this.wheelEventsPerObject.get(o))==null||h.forEach(u=>{u.dispatchUserEvent(l)}))};let{page:r,sharedAssets:i,domElement:n,isExport:s}=this.eventContext;r.traverseEntity(a=>{var o,l,c;if((o=a.data)!=null&&o.events.length){for(let{id:h,data:u}of a.data.events)if(!u.disabled&&u.type==="Scroll")if(u.trigger==="load"||!s){let d=new ZCe(h,u,a,r,i,t);this.wheelEventsPerObject.has(a)?(l=this.wheelEventsPerObject.get(a))==null||l.push(d):this.wheelEventsPerObject.set(a,[d])}else{let d=new JCe(h,u,a,r,i,n,t);this.scrollEventsPerObject.has(a)?(c=this.scrollEventsPerObject.get(a))==null||c.push(d):this.scrollEventsPerObject.set(a,[d])}}}),this.intersectionObserver=new IntersectionObserver(a=>{let o=a[0];o&&(this.isInview=o.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},tTe=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.actions=ss(t,t.actions,i,n,s,r)}disconnect(){Bn(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{var r;((r=t.interaction.data.triggerAfter)!=null?r:"any")===e&&(t.interaction instanceof uu?t.interaction.audioPlayer.play():t.interaction instanceof hE&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{var i;let r=(i=t.interaction.data.triggerAfter)!=null?i:"autoplay";r===e&&(t.interaction instanceof Id?t.interaction.play(r==="autoplay"):t.interaction instanceof fE&&t.interaction.dispatch())})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof uu?t.interaction.audioPlayer.play():t.interaction instanceof hE&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof Id?t.interaction.play():t.interaction instanceof fE&&t.interaction.dispatch()})}},rTe=class extends so{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:i}=this.eventContext;(i?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([n,s])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(a=>{a.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.actions.Audio.forEach(s=>{s.interaction instanceof uu&&s.interaction.audioPlayer.play()}),n.actions.Video.forEach(s=>{var o;let a=(o=s.interaction.data.triggerAfter)!=null?o:"autoplay";s.interaction instanceof Id&&s.interaction.play(a==="autoplay")})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var a,o;if(!r||!i)return;let s=ev(r);s&&s==="Start"&&(i.dispatchEvent({type:"beginEvent",eventName:"Start"}),(a=this.eventsPerObject.get(i))==null||a.forEach(l=>{l.dispatchUserEvent(n)}),(o=this.eventsAfterPerObject.get(i))==null||o.forEach(l=>{l.dispatchUserEvent(n)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext;if(t.traverseEntity(r=>{var i,n,s,a;if((i=r.data)!=null&&i.events.length)for(let{id:o,data:l}of r.data.events){if(l.disabled||l.type!=="Start")continue;let c=new tTe(o,l,r,t,e,this.eventManager);(c.actions.Transition.length||c.actions.Animation.length||c.actions.SwitchCamera.length||c.actions.Create.length||c.actions.Destroy.length||c.actions.SceneTransition.length)&&(this.eventsPerObject.has(r)?(n=this.eventsPerObject.get(r))==null||n.push(c):this.eventsPerObject.set(r,[c])),c.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(s=this.eventsAfterPerObject.get(r))==null||s.push(c):this.eventsAfterPerObject.set(r,[c])),c.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(c):this.eventsAfterPerObject.set(r,[c]))}}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:i}=this.eventContext,n=i?document:r;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),n.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),n.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>n.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,r=t?document:e;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,n])=>{i.removeEventListener("userEvent",this.onUserEvent),n.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},iTe=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.disabled=!1,this.actions=ss(t,t.actions,i,n,s,r),this.target=t.target,this.useToggle=t.toggle}disconnect(){Bn(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()})):(this.actions.Transition.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e!=null?e:!1)}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}))}},nTe="https://unpkg.com/@splinetool/runtime@0.9.453/build/",sTe="https://unpkg.com/@splinetool/navmesh-wasm@0.9.453/build/",aTe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${nTe}' + 'navmesh.js'),
		fetch('${sTe}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,oTe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,lTe=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,cTe=.001,uTe={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},RG,Et,wi;cxe.then(e=>{RG=e,Et=new e.Vec3,wi=new e.Vec3});var hTe=new C,dTe=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=r=>{if(tt.length!==1)return;let{raycaster:i,page:n}=this.eventContext;this.eventContext.updateRaycaster(r);let s=n.raycastWithClones(i);if(s.length!==0){if(this.gameControl){let a=hTe.copy(this.gameControl.colliderWorldPosition);a.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(a,s[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(r,i)=>n=>{var d,p,f,m,g,v,y;let s;if(n instanceof ta)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;s=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof Ni)s=n.object;else if(s=n,((d=s.dataPatched.cloner)==null?void 0:d.disabled)===!1&&((p=s.dataPatched.cloner)==null?void 0:p.hideBase)&&((f=s.dataPatched.physics)==null?void 0:f.fusedBody)!==!0)return!0;if(i&&!s.userData.navmesh)return;let a=s.dataPatched;if(!a.visible&&((m=a.physics)==null?void 0:m.enabled)!==!0)return!0;n.updateMatrixWorldSVD();let o=tx(a),l=s.userData.hasDestroy,c=s.userData.hasDrag,h=!1,u=!1;for(let x of a.events)x.data.disabled!==!0&&(x.data.type==="GameControl"?h=!0:x.data.type==="Follow"&&(u=!0));if(h||o||u||l||c)return!0;if(this.usePhysics&&((g=a.physics)==null?void 0:g.rigidBody)==="dynamic"){if(this.usePhysics&&((v=a.physics)==null?void 0:v.fusedBody))return!0}else if("geometry"in n&&n.geometry&&r.push(Do(n.geometry,n.matrixWorld)),this.usePhysics&&((y=a.physics)==null?void 0:y.fusedBody))return n.traverseObject((x,b)=>{var A,_;if(b===0)return;let S;if(x instanceof ta)if(x.objectForSample){if(x.objectForSample.dataPatched.physics.fusedBody)return;S=x.object}else return x.object.dataPatched.physics.fusedBody===!0&&x.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(x instanceof Ni)S=x.object;else if(S=x,(A=x.dataPatched.cloner)==null?void 0:A.hideBase)return!0;let w=S.dataPatched;if(!w.visible&&((_=w.physics)==null?void 0:_.enabled)!==!0)return!0;"geometry"in x&&x.geometry&&r.push(Do(x.geometry,x.matrixWorld))}),!0},this.traverseNoPhysics=(r,i)=>n=>{let s;if(n instanceof ta)return;n instanceof Ni?s=n.object:s=n;let a=s.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;if(i&&!s.userData.navmesh)return;let o=n.geometry,l=s.userData.hasDestroy===!0,c=s.userData.hasDrag===!0;if(tx(a)||l||c||s.dataPatched.events.some(h=>h.data.disabled!==!0&&h.data.type==="GameControl"))return!0;o&&r.push(Do(o,n.matrixWorld))},this.navmeshWasm=RG,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?aTe:oTe)+lTe])),this._worker=new Worker(this._workerURL)}init(e,t,r){this.gameControl=t,this.eventContext=r,this.resolution=e.ch,this.setDefaultQueryExtent(new C().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(r.page,e,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,r){t.objects.forEach(l=>{var h;let c=e.scene.find(l);c.traverseEntity(u=>{u.userData.navmesh=!0}),(h=c.cloner)==null||h.traverseObject(u=>{u.userData.navmesh=!0})});let i=[],n=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,t.zones==="custom");if(e.traverseChildren(n),t.objects.forEach(l=>{var h;let c=e.scene.find(l);c.traverseEntity(u=>{u.userData.navmesh=void 0}),(h=c.cloner)==null||h.traverseObject(u=>{u.userData.navmesh=void 0})}),i.length===0)return!1;let s=lu(i),{positions:a,triIndices:o}=db(s.getAttribute("position"),s.getIndex());return this._worker.postMessage([a,a.length/3,o,o.length,{...uTe,...t}]),this._worker.onmessage=r,!0}createDebugNavGeometry(){let e,t,r=this.navMesh.getDebugNavMesh(),i=r.getTriangleCount(),n=new Uint32Array(i*3),s=new Float32Array(i*3*3);for(e=0;e<i*3;e++)n[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){let o=r.getTriangle(e).getPoint(t);s[e*9+t*3+0]=o.x,s[e*9+t*3+1]=o.y,s[e*9+t*3+2]=o.z}let a=new nt;return a.setIndex(new st(n,1)),a.setAttribute("position",new st(s,3)),a}getClosestPoint(e){return Et.x=e.x,Et.y=e.y,Et.z=e.z,this.navMesh.getClosestPoint(Et)}getClosestPointToRef(e,t){Et.x=e.x,Et.y=e.y,Et.z=e.z;let r=this.navMesh.getClosestPoint(Et);t.set(r.x,r.y,r.z)}getRandomPointAround(e,t){return Et.x=e.x,Et.y=e.y,Et.z=e.z,this.navMesh.getRandomPointAround(Et,t)}getRandomPointAroundToRef(e,t,r){Et.x=e.x,Et.y=e.y,Et.z=e.z;let i=this.navMesh.getRandomPointAround(Et,t);r.set(i.x,i.y,i.z)}moveAlong(e,t){return Et.x=e.x,Et.y=e.y,Et.z=e.z,wi.x=t.x,wi.y=t.y,wi.z=t.z,this.navMesh.moveAlong(Et,wi)}moveAlongToRef(e,t,r){return Et.x=e.x,Et.y=e.y,Et.z=e.z,wi.x=t.x,wi.y=t.y,wi.z=t.z,this.navMesh.moveAlong(Et,wi)}computePath(e,t){let r=this.getClosestPoint(t);wi.x=r.x,wi.y=r.y,wi.z=r.z,this.getClosestPoint(e);let i=this.navMesh.computePath(Et,wi),n=i.getPointCount(),s=[];for(let a=0;a<n;a++){let o=i.getPoint(a);s.push(new C(o.x,o.y,o.z))}return s}createCrowd(e,t){return new pTe(this,e,t)}setDefaultQueryExtent(e){Et.x=e.x,Et.y=e.y,Et.z=e.z,this.navMesh.setDefaultQueryExtent(Et)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,r=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,r,t);i.set(e);let n=new this.navmeshWasm.NavmeshData;n.dataPointer=i.byteOffset,n.size=e.length,this.navMesh.buildFromNavmeshData(n),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),r=new Uint8Array(e.size);return r.set(t),this.navMesh.freeNavmeshData(e),r}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,r){return Et.x=e.x,Et.y=e.y,Et.z=e.z,this.navMesh.addCylinderObstacle(Et,t,r)}addBoxObstacle(e,t,r){return Et.x=e.x,Et.y=e.y,Et.z=e.z,wi.x=t.x,wi.y=t.y,wi.z=t.z,this.navMesh.addBoxObstacle(Et,wi,r)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},pTe=class{constructor(e,t,r){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,r){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let n=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(r),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new C(0,0,0)),n}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let r=this.crowd.getAgentPosition(e);t.set(r.x,r.y,r.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let r=this.crowd.getAgentVelocity(e);t.set(r.x,r.y,r.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let r=this.crowd.getAgentNextTargetPath(e);t.set(r.x,r.y,r.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let r=this.agents.indexOf(e);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let r=this.crowd.getAgentParameters(e);t.radius!==void 0&&(r.radius=t.radius),t.height!==void 0&&(r.height=t.height),t.maxAcceleration!==void 0&&(r.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(r.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(r.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(r.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,r)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=cTe)return;let t=1/60,r=10;{let i=Math.floor(e/t);i>r&&(i=r),i<1&&(i=1);let n=e/i;for(let s=0;s<i;s++)this.crowd.update(n)}for(let i=0;i<this.agents.length;i++){let n=this.agents[i],s=this.getAgentPosition(n);if(this.transforms[i].copy(s),this._agentDestinationArmed[i]){let a=s.x-this._agentDestination[i].x,o=s.z-this._agentDestination[i].z,l=this.reachRadii[i],c=this._agentDestination[i].y-this.reachRadii[i],h=this._agentDestination[i].y+this.reachRadii[i],u=a*a+o*o;s.y>c&&s.y<h&&u<l*l&&(this.onReachTarget(n,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,r=this.crowd.getCorners(e),i=r.getPointCount(),n=[];for(t=0;t<i;t++){let s=r.getPoint(t);n.push(new C(s.x,s.y,s.z))}return n}dispose(){this.crowd.destroy()}};function fTe(e){let t=!1;return e.scene.objects.forEach(r=>{r.data.type==="Page"&&!t&&r.data.publish.gameControlObject&&dg.traverseModuleInstances(e,r.id,(i,n,s)=>{for(let a of s)a.data.type==="GameControl"&&a.data.navmesh.enabled&&(t=!0)})}),t}var mTe={type:"change"},jk={type:"changeZoom"},gTe={type:"changePan"},Ph={type:"start"},Dh={type:"end",changed:!0},vTe={type:"end",changed:!1},o_=new mt,Vk=new $,yTe=2*Math.PI,xTe=1e-8,bTe=.01,l_=new C,G0=new $,c_=new C,H0=new mt,Gk=new we,wTe={type:"requestRender"},BG=class extends Ti{constructor(e,t,r={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,us.DOLLY_ROTATE,us.PAN],this.offset=new C,this.eye=new C,this.lastPosition=new C,this.lastQuaternion=new mt,this.current=new $,this.overShoot=new $,this.overRatio=new $,this.spherical=new hI,this.sphericalDelta=new hI,this.panOffset=new C,this.panLeftV=new C,this.panUpV=new C,this.panV=new C,this.rotateStart=new $,this.rotateEnd=new $,this.rotateDelta=new $,this.panStart=new $,this.panEnd=new $,this.panDelta=new $,this.dollyStart=new $,this.dollyEnd=new $,this.dollyDelta=new $,this.rotationRangeFactor=new $,this.panRangeFactor=new $,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(c_,H0,l_),this.offset.copy(c_).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(o_.copy(H0).invert()),this.panOffset.applyQuaternion(o_),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(H0),this.panOffset.applyQuaternion(H0)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),c_.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(Gk.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(Gk));let i=this.spherical.phi%yTe;return this.eye.copy(this.offset).normalize(),this.object.up.copy(Yt.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>bTe||8*(1-this.lastQuaternion.dot(this.object.quaternion))>xTe?(this.dispatchEvent(mTe),this.object.dispatchEvent(wTe),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&Kn?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Ph),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&Kn||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,l_.subVectors(this.position0,this.target0),this.spherical.setFromVector3(l_),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?G0.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):G0.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(G0).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(Vk,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(G0).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(this.checkRaycastLock()||(i.pointerType==="touch"||i.pointerType==="pen"&&Kn?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation()))},this.onPointerUp=i=>{this.isPointerDown=!1,tt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),tt.length>1&&i.preventDefault(),this.hasChange?this.dispatchEvent(Dh):this.dispatchEvent(vTe),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&Kn||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[i.button]:n=this.mouseButtonsPlay[i.button],n){case 0:if(i.altKey===!0&&!i.shiftKey&&!o0(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(o0(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(o0(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(tt.length>1&&i.preventDefault(),this.touches[tt.length-1]){case us.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case us.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case us.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case us.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(tt.length>1&&i.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=vT(()=>this.dispatchEvent(Dh),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(Ph),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!Fj)if(i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(Ph),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Dh)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent(Ph))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&i.key==="Alt"&&this.onPointerUp(tt[0]),i.key===" "&&this.dispatchEvent(Dh))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){var n;this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(o_.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+i.y,this.maxV=e.panVerticalOffset.max+i.y,this.minH=-e.panHorizontalOffset.min+i.x,this.maxH=e.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Aa(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Aa(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Aa(Aa(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=Aa(Aa(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=us.ROTATE),e.panTouches===1&&(this.touches[0]=us.PAN),e.orbitTouches===2&&(this.touches[1]=us.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=us.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=us.ROTATE),e.panTouches===3&&(this.touches[2]=us.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=(n=e.resetHoverEffectOnPointerLeave)!=null?n:!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,s,a,o){this.overShoot.set(0,0);let l,c,h;e instanceof C?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),h=!0):(l=e.theta,c=e.phi,this.current.set(Aa(this.spherical.theta),Aa(this.spherical.phi)),h=!1),r===0&&(this.current.x+=l,this.current.y+=c),(t===3||t===2)&&(!h&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x)),(t===3||t===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y)),h||(this.overShoot.x=Aa(this.overShoot.x),this.overShoot.y=Aa(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=Hk(Math.abs(this.overRatio.x)),this.overRatio.y=Hk(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):r===2&&(!h&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||h&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(c=this.overShoot.y*.05),h?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):h?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof C?(e.x=l,e.y=c):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=c))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrixWorld),this.panUp(2*t*n/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(gTe)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(jk)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(jk)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Ph),this.dollyOut(e),this.dispatchEvent(Dh)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Ph),this.dollyIn(e),this.dispatchEvent(Dh)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(Vk,-this.object.angleOffsetFromUp);let r=this.domElement,i=this.useWindowEvents?window.innerHeight:r.clientHeight,n=2*Math.PI*this.rotateDelta.x/i,s=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(n),this.rotateUp(s),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(nxe===!1&&o0(e)===!1&&STe(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(tt.length===2){let e=.5*(tt[0].pageX+tt[1].pageX),t=.5*(tt[0].pageY+tt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(tt[0].pageX,tt[0].pageY)}handleTouchStartPan(){if(tt.length===2){let e=.5*(tt[0].pageX+tt[1].pageX),t=.5*(tt[0].pageY+tt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(tt[0].pageX,tt[0].pageY)}handleTouchStartDolly(){let e=tt[0].pageX-tt[1].pageX,t=tt[0].pageY-tt[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(tt.length===2){let r=cS(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==tt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(tt.length===2){let t=cS(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==tt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=cS(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function Aa(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function Hk(e){return 1-Math.pow(1-e,4)}function STe(e){return e.wheelDeltaY===0||e.deltaY===0?sb&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var Wk=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.currentIntersectedObjects=[],this.disabled=!1,this.actions=ss(t,t.actions,i,n,s,r),this.target=t.target,this.useToggle=t.toggle,this.triggeringObjects=t.triggeringObjects.map(a=>i.scene.find(a))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){Bn(this.actions)}dispatch(){this.disabled||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}))}},Lt;hxe.then(e=>Lt=e);var Nr=new C,$s=new mt,yl=new C,u_=new hi(0,0,0,"YXZ"),qk=new hi(0,0,0,"XYZ"),xo=new C,$k=new C,Xk=new C(1,1,1),Oh=new mt,h_=new we,_Te=new we,ATe={type:"updateMatrix"},yE={type:"beginEvent",eventName:"Collision"},MTe={type:"beginEvent",eventName:"Trigger"};function ETe(e){if(dg.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.events){if(Array.isArray(i.events)){for(let n of i.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}else for(let n of Object.values(i.events))if(n.disabled!==!0&&n.type==="GameControl"&&n.collisionEnabled){t=!0;break}}}),t}var tx=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),CTe=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==Lt.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[r,i,n]=this.rigidBodyToMesh.get(t.handle);if(Nr.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),$s.copy(t.rotation()),r.matrixWorld.compose(Nr,$s,i),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(ATe),n){let s=r.cloner;if(s&&s.objectForSample===void 0){s.matrixWorld.copy(r.matrixWorld);for(let a of s.children)a.updateMatrixWorld(!0)}for(let a of r.children)a.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,r,i)=>{var a,o,l,c;if(i===!1)return;let n,s;if(this.sensorToTriggerEvent[t]?(n=this.sensorToTriggerEvent[t],s=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(n=this.sensorToTriggerEvent[r],s=this.sharedGameControlGlobals.colliderToEntity.get(t)),n&&s&&n.isValidTriggeringObject(s)){n.dispatch();return}for(let h=this.sharedGameControlGlobals.createdObjects.length-1;h>=0;h--){let u=this.sharedGameControlGlobals.createdObjects[h];if(u.userData.hasCollisionDestroy&&(((a=u.rigidBody)==null?void 0:a.collider(0).handle)===t||((o=u.rigidBody)==null?void 0:o.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(h,1),u.removeFromParent(),requestAnimationFrame(()=>{var d;return(d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.removeRigidBody(u.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)===this.sharedGameControlGlobals.colliderToEntity.get(t)){let h=this.sharedGameControlGlobals.colliderToEntity.get(r),u=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(u===void 0)return;for(let d of u)d.data.target==="character"&&this.dispatchCollisionEvent(d,h,r)}else if(((c=this.gameControl)==null?void 0:c.object)===this.sharedGameControlGlobals.colliderToEntity.get(r)){let h=this.sharedGameControlGlobals.colliderToEntity.get(t),u=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(u===void 0)return;for(let d of u)d.data.target==="character"&&this.dispatchCollisionEvent(d,h,t)}else{let h=this.sharedGameControlGlobals.colliderToEntity.get(t),u=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(u!==void 0)for(let f of u)f.data.target==="scene"&&this.dispatchCollisionEvent(f,h,t);let d=this.sharedGameControlGlobals.colliderToEntity.get(r),p=this.sharedGameControlGlobals.entityToCollisionEvents[d==null?void 0:d.uuid];if(p!==void 0)for(let f of p)f.data.target==="scene"&&this.dispatchCollisionEvent(f,d,r)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=MG,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var r,i;let t=e.dataPatched;for(let n of t.events){if(n.data.disabled===!0)continue;let s=(i=(r=n.data.actions)==null?void 0:r.find(a=>a.data.type==="Destroy"))==null?void 0:i.data;if(s)for(let a of s.objects){let o=this.page.scene.find(a);o&&(o.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let r of t.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let i of r.data.objects){let n=this.page.scene.find(i);n&&(n.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var o,l;let r;if(t instanceof ta)return;t instanceof Ni?r=t.object:r=t;let i=r.dataPatched;if(((o=i.physics)==null?void 0:o.enabled)==="visibility"?!i.visible:!((l=i.physics)!=null&&l.enabled))return!0;let n=t.geometry,s=r.userData.hasDestroy===!0,a=r.userData.hasDrag===!0;if(tx(i)||s||a||r.dataPatched.events.some(c=>c.data.disabled!==!0&&c.data.type==="GameControl"))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;n&&e.push(Do(n,t.matrixWorld))}),e.length>0){let t=lu(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new mm(t)}}addRigidBody(e,t,r){let i=[],n="geometry"in e?e.geometry:void 0,s=t.dataPatched;if((n==null?void 0:n.getAttribute("position"))!==void 0&&i.push(Do(n,e.shearScale)),s.physics.fusedBody){let a=this.gatherChildrenGeom(e,i);e.traverseObject(a),e.children.forEach(l=>l.updateMatrixWorld(!0));let o=e.cloner;o&&o.objectForSample===void 0&&s.physics.rigidBody==="dynamic"&&(o.traverseObject(a),o.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let a,o=!r.fromCreate&&s.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;o?(a=Lt.RigidBodyDesc.dynamic(),a.setLinearDamping(s.physics.damping).setAngularDamping(s.physics.damping).setAdditionalMass(1e-9).setGravityScale(s.physics.gravityScale).enabledRotations(...s.physics.enabledRotation).enabledTranslations(...s.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(a=Lt.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):a=Lt.RigidBodyDesc.fixed();let l=lu(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Nr,$s,yl),e.position0=Nr.clone().divideScalar(this.pixelsPerMeter),e.rotation0=$s.clone(),Nr.divideScalar(this.pixelsPerMeter),a.setTranslation(Nr.x,Nr.y,Nr.z).setRotation($s),n?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(yl.x/this.pixelsPerMeter,yl.y/this.pixelsPerMeter,yl.z/this.pixelsPerMeter);let c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a);o&&this.rigidBodyToMesh.set(c.handle,[e,yl.clone(),s.physics.fusedBody]);let h=!(s.geometry===void 0||s.geometry.type==="SubdivGeometry"||s.geometry.type==="NonParametricGeometry"||s.geometry.type==="BooleanGeometry"||s.geometry.type==="VectorGeometry"||s.geometry.type==="StarGeometry"||s.geometry.type==="RectangleGeometry"||s.geometry.type==="EllipseGeometry"||s.geometry.type==="TriangleGeometry"||s.geometry.type==="TorusGeometry"||s.geometry.type==="HelixGeometry");try{this.addCollider(c,s.physics,l,t,h)}catch{try{this.addCollider(c,s.physics,l,t,!1)}catch(u){console.error(u)}}e.rigidBody=c}}addBoundsTree(e){var r;let t=[];if(((r=e.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&t.push(Do(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(i=>i.updateMatrixWorld(!0)),t.length>0){let i=lu(t,!1);e.bvhGeometry=i,e.bvhGeometry.boundsTree=new mm(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,t,r,i,n=!0){var o,l;if((r==null?void 0:r.getAttribute("position").count)===0||((o=r==null?void 0:r.getIndex())==null?void 0:o.count)===0)return;let s;r&&(t.colliderType==="trimesh"?s=Lt.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):s=Lt.ColliderDesc.convexMesh(r.getAttribute("position").array,n?r.getIndex().array:void 0)),s.setFrictionCombineRule(Lt.CoefficientCombineRule.Average).setRestitutionCombineRule(Lt.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(s,e);this.sharedGameControlGlobals.colliderToEntity.set(a.handle,i),(l=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid])!=null&&l.some(c=>c.target==="scene")&&a.setActiveEvents(Lt.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(r,i)=>{var o;if(i===0)return;let n;if(r instanceof ta)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;n=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof Ni)n=r.object;else if(n=r,(o=n.dataPatched.cloner)==null?void 0:o.hideBase)return!0;let s=n.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;i===1?e.hasNonUniformScale?r.matrixWorld.multiplyMatrices(e.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let a=r.geometry;(a==null?void 0:a.getAttribute("position"))!==void 0&&t.push(Do(a,r.matrixWorld))}}activate(e){var d,p;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,r=!1,i=5,n=8,s=9,a="drag",o=this.page.data.publish.gameControlObject,l=o!==null?this.page.find(o):null,c=null;if(l)for(let f of l.data.events){if(f.data.disabled||f.data.type!=="GameControl")break;let m=l;for(;this.usePhysics&&((d=m=m.parent)==null?void 0:d.parent)!==null&&!((p=m.data.physics)!=null&&p.fusedBody););f.data.collisionEnabled&&(this.needsCollisionDetection=!0),c===null&&(c=f.data)}if(l&&c){r=r||c.camera===t.uuid||l.uuid===t.uuid;let f=new EG(l,this.renderer.domElement,c,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&c.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=f,i=c.joystickPosLoc,n=c.joystickRotLoc,s=c.jumpTouchButtonLoc,a=c.rotByTouch,Kn&&c.touchControl&&(this.joystickToGameControls[i]="pos",c.moveMode==="walk"&&(this.joystickToGameControls[s]="jmp"),a==="joystick"&&(this.joystickToGameControls[n]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let f=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new dTe(this.usePhysics,this.isExport);let m;f.collider.type==="sphere"?m=f.collider.radius*2:m=f.collider.height,m=Math.floor(m/f.navmesh.ch-1),this.navigationMeshWrapper.init({...f.navmesh,walkableHeight:m},this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:f,enablePan:m,enableZoom:g,autoRotate:v,hoverRotatePanMode:y}=this.eventManager.publish.orbitControls;(f||m||g||v||y!==0)&&(this.orbitControls=new BG(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let h=this.renderer.domElement.width/this.renderer.getPixelRatio(),u=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((f,m)=>{let g=document.body.appendChild(document.createElement("div")),[v,y,x]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[m],b=(h-5*v)/4+v,S={},w=f==="jmp",A=w?0:v;m<10?(m<5?S.top=A/2:S.bottom=A/2,S.left=A/2+m%5*b):m===10?(S.left=A/2,S.top=u/2):(S.right=A/2,S.top=u/2),S.top?S.top-=y[1]:S.bottom+=y[1],S.left?S.left+=y[0]:S.right-=y[0];for(let E in S)S[E]+="px";if(w){let E=g.appendChild(document.createElement("div"));Object.assign(E.style,S,{position:"absolute",width:v+"px",height:v+"px",backgroundColor:`rgba(255,255,255,${x==="show"?.4:0})`,zIndex:"9999",borderRadius:v+"px",border:x==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let T=v/16*16*.4;x==="show"&&(E.innerHTML=`
						<svg width="${T}" height="${v*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),E.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),E.addEventListener("touchend",P=>P.preventDefault()),this.joysticks[m]=[void 0,g];return}let _={zone:g,mode:"static",position:S,size:v};x==="hide"&&(_.restOpacity=0);let M=WEe.create(_);M.on("move",(E,T)=>{let P=this.gameControl;f==="pos"?T.force<.2?P.moveForce=0:(P.movementState.movePosZ=Math.sin(-T.angle.radian),P.movementState.movePosX=Math.cos(-T.angle.radian),T.force>1.2?P.movementState.run=1:P.movementState.run=0,T.force<.3?P.moveForce=(T.force-.2)/.1:P.moveForce=1):f==="rot"&&(T.force<.2?P.rotForce=0:(P.movementState.rotPosX=T.vector.y,P.movementState.rotPosY=-T.vector.x,T.force<.3?P.rotForce=(T.force-.2)/.1:P.rotForce=1)),this.requestRender()}),M.on("end",(E,T)=>{let P=this.gameControl;f==="pos"?(P.movementState.movePosZ=0,P.movementState.movePosX=0,P.moveForce=1):f==="rot"&&(P.movementState.rotPosX=0,P.movementState.rotPosY=0,P.rotForce=1)}),this.joysticks[m]=[M,g]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(f=>f.disabled=!1)},80)}initPhysics(){var a;(a=this.sharedGameControlGlobals.rapierWorld)==null||a.free(),this.sharedGameControlGlobals.rapierWorld=new Lt.World(new Lt.Vector3(0,this.gravity,0)),this.events=new Lt.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(o=>{var v,y,x,b;let l;if(o instanceof ta)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;l=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof Ni)l=o.object;else if(l=o,((v=l.dataPatched.cloner)==null?void 0:v.disabled)===!1&&((y=l.dataPatched.cloner)==null?void 0:y.hideBase)&&((x=l.dataPatched.physics)==null?void 0:x.fusedBody)!==!0)return!0;let c=l.dataPatched,h;for(let S of c.events)S.data.disabled!==!0&&S.data.type==="GameControl"&&(h=S.data);if(!c.physics||(c.physics.enabled==="visibility"?!c.visible:!c.physics.enabled))return!0;o.updateMatrixWorldSVD();let u=tx(c),d=!1,p=l.userData.hasDestroy,f=l.userData.hasDrag,m=!1;for(let S of c.events)if(S.data.disabled!==!0){if(S.data.type==="Collision"){d=!0;let w=new iTe(S.id,S.data,l,this.page,this.sharedAssets,this.eventManager);w.disabled=!0,this.collisionEvents.push(w),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(A=>A.id!==S.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(w):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[w]}else if(S.data.type==="Follow"){m=!0;let w=S.data.target;o.traverseVisible(A=>{A.userData.isFollowingObj=w})}}c.physics.rigidBody==="dynamic"&&c.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let g=o.geometry;if(h!==void 0){let S=Lt.RigidBodyDesc.kinematicPositionBased();(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(Nr,$s,yl),o.position0=Nr.clone().divideScalar(this.pixelsPerMeter),o.rotation0=$s.clone(),Nr.divideScalar(this.pixelsPerMeter),S.setTranslation(Nr.x,Nr.y,Nr.z).setRotation($s);let w=this.sharedGameControlGlobals.rapierWorld.createRigidBody(S);o.rigidBody=w;let A;h.collider.type==="sphere"?A=Lt.ColliderDesc.ball(h.collider.radius/this.pixelsPerMeter):h.collider.type==="capsule"?A=Lt.ColliderDesc.capsule((h.collider.height/2-h.collider.radius)/this.pixelsPerMeter,h.collider.radius/this.pixelsPerMeter):A=Lt.ColliderDesc.cuboid(h.collider.width/this.pixelsPerMeter/2,h.collider.height/this.pixelsPerMeter/2,h.collider.depth/this.pixelsPerMeter/2),A.setFrictionCombineRule(Lt.CoefficientCombineRule.Average).setRestitutionCombineRule(Lt.CoefficientCombineRule.Average).setDensity(c.physics.density).setFriction(c.physics.friction).setRestitution(c.physics.restitution);let _=this.sharedGameControlGlobals.rapierWorld.createCollider(A,w);this.sharedGameControlGlobals.colliderToEntity.set(_.handle,l),Nr.fromArray(h.collider.position).multiply(yl.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),_.setTranslationWrtParent(Nr);let M=new mt().setFromEuler(new hi().setFromVector3(new C().fromArray(h.collider.rotation)));_.setRotationWrtParent(M),_.setActiveEvents(Lt.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else c.physics.rigidBody==="dynamic"||u||m||p||f||d?(this.addRigidBody(o,l,{hasFollow:m,hasTransformAnim:u,hasDrag:f}),this.generateSensorColliderDescs(l,c.physics.fusedBody)):(g&&e.push(Do(g,o.matrixWorld)),c.physics.fusedBody&&o.traverseObject((S,w)=>{var E;if(w===0)return;let A;if(S instanceof ta)if(S.objectForSample){if(S.objectForSample.dataPatched.physics.fusedBody)return;A=S.object}else return S.object.dataPatched.physics.fusedBody===!0&&S.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(S instanceof Ni)A=S.object;else if(A=S,(E=A.dataPatched.cloner)==null?void 0:E.hideBase)return!0;let _=A.dataPatched;if(_.physics.enabled==="visibility"?!_.visible:!_.physics.enabled)return!0;let M=S.geometry;(M==null?void 0:M.getAttribute("position"))!==void 0&&e.push(Do(M,S.matrixWorld))}),this.generateSensorColliderDescs(l,c.physics.fusedBody,t));if(((b=c.physics)==null?void 0:b.fusedBody)===!0||h)return!0}),e.length===0)return;let r=lu(e);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=Lt.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),s=Lt.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(Lt.CoefficientCombineRule.Multiply).setRestitutionCombineRule(Lt.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,n);for(let[o,l]of t){let c=this.sharedGameControlGlobals.rapierWorld.createCollider(o,n);this.sensorToTriggerEvent[c.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?(this.gameControl===null||this.needsCollisionDetection)&&this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let r=new Wk(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),i=new we().compose(xo.fromArray(t.data.position),Oh.setFromEuler(qk.fromArray(t.data.rotation)),Xk);if(t.data.triggerZone==="box"){let n=new Br;n.min.fromArray(t.data.size).multiplyScalar(-.5),n.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([n,i,e,r])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,i,e,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,r,i;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(n=>{let s=n;s.matrixWorldFusedFalse&&(s.matrixWorldFusedFalse=void 0),s.rigidBody&&(s.rigidBody=void 0),s.position0&&(s.position0=void 0),s.rotation0&&(s.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([n,s])=>{n==null||n.destroy(),s.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(i=this.navigationMeshWrapper)==null||i.dispose(),this.navigationMeshWrapper=void 0;for(let n of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))n.forEach(s=>s.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,r){if(!this.isEnabled)return!0;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):this.initializationCounter===2&&this.gameControl&&(i=!this.gameControl.update(e,t,r)&&i),this.usePhysics){let n=.016666666666666666;if(e===0)i=this.stepPhysics()&&i;else{let s=e/1e3;s<n&&s>n*.55&&(s=n),this.accumulator+=s;let a=performance.now(),o=0,l=6;for(;this.accumulator>=n&&o<l&&(i=this.stepPhysics()&&i,this.accumulator-=n,o++,!(performance.now()-a>n*1e3)););this.accumulator=this.accumulator%n}}return i}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Nr,$s,yl),u_.setFromQuaternion($s);let r=t;r.prevR===void 0?(r.prevR=u_.clone(),r.prevT=Nr.clone()):(r.prevR.copy(u_),r.prevT.copy(Nr)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(Nr.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation($s))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,r){var s;let i=((s=this.sharedGameControlGlobals.rapierWorld)==null?void 0:s.getCollider(r))._parent,n;if(t.cloner){for(let a of t.cloner.children)if(a.rigidBody===i){n=a;break}}e.dispatch(n),t.dispatchEvent(yE)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,r){let i=_Te.copy(e.matrixWorld).invert();e.traverseEntity((n,s)=>{if(t===!1&&s===1)return!0;for(let a of n.dataPatched.events)if(a.data.type==="Trigger"&&a.data.disabled!==!0){let o=new Wk(a.id,a.data,n,this.page,this.sharedAssets,this.eventManager),l;if(a.data.triggerZone==="box"?l=Lt.ColliderDesc.cuboid(...a.data.size.map(c=>c/(2*this.pixelsPerMeter))):l=Lt.ColliderDesc.ball(a.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(Lt.ActiveEvents.COLLISION_EVENTS),xo.fromArray(a.data.position),Oh.setFromEuler(qk.fromArray(a.data.rotation)),h_.compose(xo,Oh,Xk).premultiply(n.matrixWorld),r?(h_.decompose(xo,Oh,$k),l.setActiveCollisionTypes(Lt.ActiveCollisionTypes.KINEMATIC_FIXED|Lt.ActiveCollisionTypes.DYNAMIC_FIXED)):(h_.premultiply(i).decompose(xo,Oh,$k),e.rigidBody.bodyType()===Lt.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===Lt.RigidBodyType.Fixed?l.setActiveCollisionTypes(Lt.ActiveCollisionTypes.KINEMATIC_FIXED|Lt.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(Lt.ActiveCollisionTypes.KINEMATIC_KINEMATIC|Lt.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),xo.divideScalar(this.pixelsPerMeter),l.setTranslation(xo.x,xo.y,xo.z),l.setRotation(Oh),r)r.push([l,o]);else{let c=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[c.handle]=o}}})}};function TTe(e){var o;let t=this._clip.duration,r=(o=this._clip.start)!=null?o:0,i=this.loop,n=this.time+e,s=this._loopCount,a=i===kC;if(e===0)return s===-1?n:a&&(s&1)===1?t-(n-r):n;if(i===bU){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),n>=t||n<r){let l=Math.floor((n-r)/(t-r));n-=(t-r)*l,s+=Math.abs(l);let c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a||(n=e>0?t:r,this.repetitions===1&&(n=t)),this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){let h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=n;if(a&&(s&1)===1)return t-(n-r)}return n}var Yk=!1,PTe=class{constructor(e,t,r,i){this.scene=e,this.requestRender=t,this.updateDisplayProgress=r,this.animationInspectorState=i,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=n=>{n.data.type==="Empty"&&n.data.animations&&n.data.animations.forEach((s,a)=>{let o=s[0]+"/";if(Array.isArray(n.identity)?o+=n.identity[0]:o+=n.uuid,this.clipIdToAction[o])return;let l=WA.parse(JSON.parse(s[2]));n.animations[a]=l;let c=this.mixer.clipAction(l,n);Yk===!1&&(Object.getPrototypeOf(c)._updateTime=TTe,Yk=!0),c.clampWhenFinished=!0,this.clipIdToAction[o]=c})},this.mixer=new Pde(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let r=this.scene.find(t);if(!r)return;let i=r.animations.find(s=>s.uuid===e);if(!i)return;let n=this.clipIdToAction[e];!n||(n.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],r.animations=r.animations.filter(s=>s.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=wU}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,r=this.clipIdToAction[t];if(r)return e&&(e.repeat>=0&&(r.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(r.loop=kC)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||((t=this.animationInspectorState)==null?void 0:t.isScrubbing))return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,t,r;return(r=(t=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:t.times.length)!=null?r:0}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let r=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[t].paused=!0)}},d_=new WeakMap,DTe=class extends QC{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){let n=new qA(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,s=>{this.decodeDracoFile(s,t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){let n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let r=JSON.stringify(t);if(d_.has(e)){let o=d_.get(e);if(o.key===r)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,n=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(n,s).then(o=>(i=o,new Promise((l,c)=>{i._callbacks[n]={resolve:l,reject:c},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return a.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),d_.set(e,{key:r,promise:a}),a}_createGeometry(e){let t=new nt;e.index&&t.setIndex(new st(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r],n=i.name,s=i.array,a=i.itemSize;t.setAttribute(n,new st(s,a))}return t}_loadLibrary(e,t){let r=new qA(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,n)=>{r.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let n=OTe.toString(),s=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){let s=n.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function OTe(){let e,t;onmessage=function(a){let o=a.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(h){e.onModuleLoaded=function(u){h({draco:u})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,c=o.taskConfig;t.then(h=>{let u=h.draco,d=new u.Decoder,p=new u.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{let f=r(u,d,p,c),m=f.attributes.map(g=>g.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:o.id,error:f.message})}finally{u.destroy(p),u.destroy(d)}});break}};function r(a,o,l,c){let h=c.attributeIDs,u=c.attributeTypes,d,p,f=o.GetEncodedGeometryType(l);if(f===a.TRIANGULAR_MESH)d=new a.Mesh,p=o.DecodeBufferToMesh(l,d);else if(f===a.POINT_CLOUD)d=new a.PointCloud,p=o.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());let m={index:null,attributes:[]};for(let g in h){let v=self[u[g]],y,x;if(c.useUniqueIDs)x=h[g],y=o.GetAttributeByUniqueId(d,x);else{if(x=o.GetAttributeId(d,a[h[g]]),x===-1)continue;y=o.GetAttribute(d,x)}m.attributes.push(n(a,o,d,g,v,y))}return f===a.TRIANGULAR_MESH&&(m.index=i(a,o,d)),a.destroy(d),m}function i(a,o,l){let c=l.num_faces()*3,h=c*4,u=a._malloc(h);o.GetTrianglesUInt32Array(l,h,u);let d=new Uint32Array(a.HEAPF32.buffer,u,c).slice();return a._free(u),{array:d,itemSize:1}}function n(a,o,l,c,h,u){let d=u.num_components(),p=l.num_points()*d,f=p*h.BYTES_PER_ELEMENT,m=s(a,h),g=a._malloc(f);o.GetAttributeDataArrayForAllPoints(l,u,m,f,g);let v=new h(a.HEAPF32.buffer,g,p).slice();return a._free(g),{name:c,array:v,itemSize:d}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}var Vl;function LTe(){return Vl||(Vl=new DTe,Vl.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Vl.decoderPending}async function ITe(e){if(Vl){let t={attributeIDs:Vl.defaultAttributeIDs,attributeTypes:Vl.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await Vl.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([i,n])=>({name:i,itemSize:n.itemSize,array:n.array}))}}return null}async function RTe(e,t){let[r,i]=Jj(lM.deserialize(new Uint8Array(e)));SV(r);let n=[];r.scene.objects.traverse((s,a)=>{a.type==="Mesh"&&a.geometry.type==="NonParametricGeometry"&&a.geometry.data.draco!==void 0&&n.push(a)}),n.length&&await LTe();for(let s of n){let a=await ITe(mi(s.geometry.data.draco));if(a){a.index&&(s.geometry.data.index={array:a.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let o={};a.attributes.forEach(({name:l,array:c,itemSize:h})=>{o[l]={array:c,itemSize:h,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=o,s.geometry.data.draco=void 0}}return t&&t(r),i.result().data}var BTe=class{constructor(e,t,r,i,n,s,a){this.id=e,this.data=t,this.dataEvent=r,this.object=i,this.stage=!1,this.actions=ss(r,t.actions,n,s,a,i)}disconnect(){Bn(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},kTe=class extends so{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.helperResize=(r,i)=>{this.breakpoints.forEach(n=>{let s=dM.deviceToSize(n.data.size),a=n.dataEvent.orientation==="horizontal"?r:i,o;switch(n.data.operator){case"<":o=a<s[0];break;case">":o=a>s[0];break;case"<>":o=a>s[0]&&a<s[1];break}n.stage!==o&&(n.stage=o,n.stage?n.dispatchIn():n.dispatchOut())})},this.onResize=()=>{let{innerWidth:r,innerHeight:i}=window;this.helperResize(r,i)},this.onResizeObserver=new ResizeObserver(r=>{for(let i of r){let{width:n,height:s}=i.contentRect;this.helperResize(n,s)}})}connect(){let{page:e,sharedAssets:t,domElement:r,isExport:i,frame:n}=this.eventContext;i?window.addEventListener("resize",this.onResize):n.preset==="fullscreen"?this.onResizeObserver.observe(r):window.addEventListener("resize",this.onResize),e.traverseEntity(s=>{var a;if(!(!s.visible||!((a=s.data)!=null&&a.events.length)))for(let{data:o}of s.data.events)o.disabled||o.type==="Resize"&&o.breakpoints.forEach(({data:l,id:c})=>{try{let h=new BTe(c,l,o,s,e,t,this.eventManager);this.breakpoints.push(h)}catch{}})})}disconnect(){let{isExport:e,frame:t}=this.eventContext;e?window.removeEventListener("resize",this.onResize):t.preset==="fullscreen"?this.onResizeObserver.disconnect():window.removeEventListener("resize",this.onResize),this.breakpoints.forEach(r=>{r.disconnect()}),this.breakpoints=[]}},Qk=Object.keys(OG).filter(e=>isNaN(Number(e))),zTe=class{constructor(e,t,r,i){this.publish=e,this.controlsManager=t,this.animationControls=r,this.eventContext=i,this.isEnabled=!1,this.activateCount=0,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=n=>{(n.touches.length>1||this.preventTouchScroll)&&n.preventDefault()},this.onMouseWheelPreventScroll=n=>{this.preventScroll&&n.preventDefault()},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=i.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.handlers={Spline:new ECe(this.eventContext),Conditional:new ICe(this.eventContext,this),Start:new rTe(this.eventContext,this),Basic:new TCe(this.eventContext,this),MouseHover:new KCe(this.eventContext,this),Scroll:new eTe(this.eventContext,this),Follow:new GCe(this.eventContext,this),DragDrop:new NCe(this.eventContext,this),LookAt:new XCe(this.eventContext),Resize:new kTe(this.eventContext,this)};let{page:e,domElement:t,eventElement:r}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),e.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),Qk.forEach(i=>{(Object.values(this.handlers).some(n=>n.domEventsNeeded.has(i))||i==="pointerdown"&&this.controlsManager.navigationMeshWrapper)&&(t.addEventListener(i,this.onResetRaycaster),r.addEventListener(i,this.onResetRaycaster))}),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var r;if(!this.isEnabled)return;this.isEnabled=!1;let{page:e,domElement:t}=this.eventContext;t.style.cursor="",Object.values(this.handlers).forEach(i=>i.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(i=>{i.removeEventListener("requestRender",this.requestRender)}),Qk.forEach(i=>{t.removeEventListener(i,this.onResetRaycaster)}),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}},NTe=class{constructor(e,t,r,i,n){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new $().copy(r),this._editorSize=new $().copy(i),this._aspect=t.aspect,this._fov=n!=null?n:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.y;this._aspect=e/t,t<=r&&(this._camera.zoom*=r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,r=this._editorSize.y,i=this._fov;if(e&&t>r){let n=FTe(t,1080,2160,1,15)/100;i*=t/r,i*=1-n}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function FTe(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var UTe=class{get sharedAssets(){return this.shared}constructor(e,t={}){this.shared=new WT(e.shared,t),this.scene=new eP(e.scene,this.sharedAssets)}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof sc&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof nn&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},jTe=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function VTe(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function Am(e){return e instanceof yg?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function GTe(e,t){let r={};return e.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof Rn)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let n=i.parent;for(;n;){if(n instanceof Rn&&i.states&&Object.keys(i.states).length)return;n=n.parent}let s=i.material.uuid,a=t.shared.materials[s];if(a){if(!Fi.isMergable(a))return}else{let c=(l=t.scene.objects.get(i.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!Fi.isMergable(c.material))return;s=Fi.getHash(c.material)}}r[s]||(r[s]={});let o=r[s][Am(i)];if(o){if(o.push(i),i.cloner)for(let c of i.cloner.children)o.push(c)}else if(r[s][Am(i)]=[i],i.cloner)for(let c of i.cloner.children)r[s][Am(i)].push(c)}),r}function HTe(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(i=>{let n=i.length;n>t&&(t=n)})}),t}function WTe(e,t){let r=GTe(t,e),i=HTe(r),n=new Array(i),s=0,a=new Array(i),o=0,l=new Array(i),c=0,h=new Array(i),u=0;for(let[d,p]of Object.entries(r))for(let f of Object.values(p)){if(o=0,c=0,f.forEach(g=>{g instanceof Rn&&(a[o++]=g.geometry.clone(),l[c++]=g)}),c<2)continue;for(let g=0;g<c;g++)l[g].updateWorldMatrix(!0,!1),a[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&VTe(a[g]);let m=lu(a.slice(0,o),!1);if(m){let g;switch(d){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new Sn(m,l[0].material);break}default:{g=new Sn(m,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,t.add(g);let v=y=>{u=0;for(let x of y)x.children&&v(x.children),x instanceof Rn&&(Array.isArray(x.material)||r[x.material.uuid]&&r[x.material.uuid][Am(x)]&&r[x.material.uuid][Am(x)].length>1||(h[u++]=x));for(let x=0;x<u;x++)t.attach(h[x])};for(let y=0;y<c;y++){let x=l[y];v(x.children),n[s++]=x}}}for(let d=0;d<s;d++)n[d].removeFromParent()}var qTe=gp(gse(),1),$Te=new $;function XTe(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var YTe=class{constructor(e,{renderOnDemand:t,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{var n,s,a,o,l,c,h,u,d,p,f,m;if(this.time=i,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(n=this._perfs)==null||n.start(),!this._renderer){(s=this._perfs)==null||s.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(a=this._perfs)==null||a.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&(((o=this._eventManager.handlers)==null?void 0:o.Start.hasVideoAction)||((l=this._eventManager.handlers)==null?void 0:l.Basic.hasVideoAction)||((c=this._eventManager.handlers)==null?void 0:c.Conditional.hasVideoAction))&&(this._skipRender=!1),(h=this._animationControls)==null||h.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(u=this._eventManager)!=null&&u.isEnabled&&(((d=this._eventManager.handlers)==null?void 0:d.Follow).onAnimationFrameDamping(),((p=this._eventManager.handlers)==null?void 0:p.LookAt).onAnimationFrameDamping(),((f=this._eventManager.handlers)==null?void 0:f.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let g=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=g,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(m=this._perfs)==null||m.end()},this._resize=()=>{var i,n,s,a,o,l,c,h,u,d,p,f,m,g,v;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=$Te.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(i=this._scene)==null?void 0:i.activeCamera,(d=this._scene)==null||d.updateViewPlaneSize((a=(s=(n=this._frameView)==null?void 0:n.frameSize)==null?void 0:s.x)!=null?a:this._viewportWidth,(c=(l=(o=this._frameView)==null?void 0:o.frameSize)==null?void 0:l.y)!=null?c:this._viewportHeight,(u=(h=this._frameView)==null?void 0:h.enableResponsive)!=null?u:!1),this._camera){let y=(m=Object.values((f=(p=this._data)==null?void 0:p.frames)!=null?f:{})[0].preset)!=null?m:"fullscreen";(g=this._frameView)==null||g.setCamera(this._camera),(v=this._frameView)==null||v.updateCamera(y!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this._requestRenderAutoMode()}},this._debouncedResize=vT(this._resize,10),this.canvas=e,this.renderMode=t?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new jTe({x:10,y:10})),oxe(e)}async load(e,t){XTe(e),this.disposed=!1;let r=await(await fetch(e,t)).arrayBuffer();await this.start(r)}async start(e,{interactive:t=!0}={}){var a,o,l,c;if(this.disposed)return;let r=await RTe(e);this._data=r,r.version&&(0,qTe.default)(r.version,"0.9.453")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([GB(r)&&MSe(),q_e(r)&&SSe(),dg.physicsEnabled(r.scene.objects)&&dxe(),FB(r)&&I_e(),fTe(r)&&uxe()].filter(Boolean)),(a=this._eventManager)==null||a.deactivate(),(o=this._controls)==null||o.deactivate(),(l=this._scene)==null||l.dispose();let i=new UTe(r);if(i.resetPersonalCameraFromDocumentData(),this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let h=performance.now();WTe(r,i.scene);let u=performance.now();console.log("Merged geometries in ",u-h," ms")}GB(r)&&this._scene.traverse(h=>{Na(h)&&h.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var h;this._requestRenderAutoMode(),(h=this._scene)==null||h.traverse(u=>{u instanceof ta&&u.pendingMediaLoad&&u.update()})});let n=Object.keys(r.shared.fonts).map(h=>this._sharedAssetsManager.getFont(h).loadingPromise);Promise.all(n).then(()=>{i.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),FB(r)&&ETe(r)&&await Promise.all(n),this._scene.rewriteEventsBeforeGoToPlayMode(),dP(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new wEe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=r.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),r.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let s=Object.values(r.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(s.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new NTe(this._renderer,this._camera,new $(this._viewportWidth,this._viewportHeight),new $(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=((c=s.allowResponsive)!=null?c:!1)&&s.preset==="fullscreen"),t){let h=new ACe(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,s);this._scene.updateMatrixWorld(!0),this._controls=new CTe(h),this._animationControls=new PTe(this._scene,this._requestRenderAutoMode),this._eventManager=new zTe(r.scene.publish,this._controls,this._animationControls,h),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var h;(h=this._renderer)==null||h.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300)}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(r=>{if(r.uuid!==Dp&&!this._scene.isInvisibleObjects(r)&&!(r instanceof sc)){let i=this._createProxyObject(r);i&&e.push(i)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof BG&&((r=this._controls)==null||r.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var a;let{r:t,g:r,b:i,a:n}={r:0,g:0,b:0,a:1},s=new On(t,r,i,n);try{s.setStyle(e)}catch{console.error("This is not a valid css color",e)}(a=this._scene)==null||a.activePage.setBackgroundColor(s),this._requestRenderAutoMode()}dispose(){var e,t,r,i,n,s,a;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(o=>{wI.unsubscribe(o)}),(i=this._renderer)==null||i.setAnimationLoop(null),(n=this._renderer)==null||n.dispose(),this._renderer=void 0,(s=this._sharedAssetsManager)==null||s.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(a=this._controls)==null||a.deactivate(),lxe(this.canvas)}get isStopped(){return this._isPaused}stop(){var e,t,r;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,r;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var n;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(s=>{s instanceof sc&&(t=s.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof sc||e instanceof eP||(n=e.parent)==null?void 0:n.uuid,emitEvent(s){e.dispatchEvent({type:"userEvent",eventName:s})},emitEventReverse(s){e.dispatchEvent({type:"userEvent",eventName:s,reverse:!0})}},i=wI(r,(s,a)=>{var o;typeof e[s]!="object"&&((o=Object.getOwnPropertyDescriptor(e,s))==null?void 0:o.writable)&&(e[s]=a),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}},W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xE={},QTe={get exports(){return xE},set exports(e){xE=e}},Ef={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk;function KTe(){if(Kk)return Ef;Kk=1;var e=sn,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var h,u={},d=null,p=null;c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(p=l.ref);for(h in l)i.call(l,h)&&!s.hasOwnProperty(h)&&(u[h]=l[h]);if(o&&o.defaultProps)for(h in l=o.defaultProps,l)u[h]===void 0&&(u[h]=l[h]);return{$$typeof:t,type:o,key:d,ref:p,props:u,_owner:n.current}}return Ef.Fragment=r,Ef.jsx=a,Ef.jsxs=a,Ef}(function(e){e.exports=KTe()})(QTe);const bE=xE.jsx;var ZTe="Expected a function",Zk=0/0,JTe="[object Symbol]",ePe=/^\s+|\s+$/g,tPe=/^[-+]0x[0-9a-f]+$/i,rPe=/^0b[01]+$/i,iPe=/^0o[0-7]+$/i,nPe=parseInt,sPe=typeof W0=="object"&&W0&&W0.Object===Object&&W0,aPe=typeof self=="object"&&self&&self.Object===Object&&self,oPe=sPe||aPe||Function("return this")(),lPe=Object.prototype,cPe=lPe.toString,uPe=Math.max,hPe=Math.min,p_=function(){return oPe.Date.now()};function dPe(e,t,r){var i,n,s,a,o,l,c=0,h=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(ZTe);t=Jk(t)||0,wE(r)&&(h=!!r.leading,u="maxWait"in r,s=u?uPe(Jk(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d);function p(w){var A=i,_=n;return i=n=void 0,c=w,a=e.apply(_,A),a}function f(w){return c=w,o=setTimeout(v,t),h?p(w):a}function m(w){var A=w-l,_=w-c,M=t-A;return u?hPe(M,s-_):M}function g(w){var A=w-l,_=w-c;return l===void 0||A>=t||A<0||u&&_>=s}function v(){var w=p_();if(g(w))return y(w);o=setTimeout(v,m(w))}function y(w){return o=void 0,d&&i?p(w):(i=n=void 0,a)}function x(){o!==void 0&&clearTimeout(o),c=0,i=l=n=o=void 0}function b(){return o===void 0?a:y(p_())}function S(){var w=p_(),A=g(w);if(i=arguments,n=this,l=w,A){if(o===void 0)return f(l);if(u)return o=setTimeout(v,t),p(l)}return o===void 0&&(o=setTimeout(v,t)),a}return S.cancel=x,S.flush=b,S}function wE(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function pPe(e){return!!e&&typeof e=="object"}function fPe(e){return typeof e=="symbol"||pPe(e)&&cPe.call(e)==JTe}function Jk(e){if(typeof e=="number")return e;if(fPe(e))return Zk;if(wE(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=wE(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ePe,"");var r=rPe.test(e);return r||iPe.test(e)?nPe(e.slice(2),r?2:8):tPe.test(e)?Zk:+e}var mPe=dPe;function gPe(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}const vPe=[],yPe={width:"100%",height:"100%"},xPe=W.exports.forwardRef(function({className:e,children:t,debounceTime:r=300,ignoreDimensions:i=vPe,parentSizeStyles:n,enableDebounceLeadingCall:s=!0,resizeObserverPolyfill:a,...o},l){const c=W.exports.useRef(null),h=W.exports.useRef(0),[u,d]=W.exports.useState({width:0,height:0,top:0,left:0}),p=W.exports.useMemo(()=>{const f=Array.isArray(i)?i:[i];return mPe(m=>{d(g=>Object.keys(g).filter(v=>g[v]!==m[v]).every(v=>f.includes(v))?g:m)},r,{leading:s})},[r,s,i]);return W.exports.useEffect(()=>{const f=a||window.ResizeObserver,m=new f(g=>{g.forEach(v=>{var w;const{left:y,top:x,width:b,height:S}=(w=v==null?void 0:v.contentRect)!=null?w:{};h.current=window.requestAnimationFrame(()=>{p({width:b,height:S,top:x,left:y})})})});return c.current&&m.observe(c.current),()=>{window.cancelAnimationFrame(h.current),m.disconnect(),p.cancel()}},[p,a]),bE("div",{style:{...yPe,...n},ref:gPe([l,c]),className:e,...o,children:t({...u,ref:c.current,resize:p})})}),bPe=W.exports.forwardRef(({scene:e,style:t,onMouseDown:r,onMouseUp:i,onMouseHover:n,onKeyDown:s,onKeyUp:a,onStart:o,onLookAt:l,onFollow:c,onWheel:h,onLoad:u,renderOnDemand:d=!0,...p},f)=>{const m=W.exports.useRef(null),[g,v]=W.exports.useState(!0);return W.exports.useEffect(()=>{v(!0);let y;const x=[{name:"mouseDown",cb:r},{name:"mouseUp",cb:i},{name:"mouseHover",cb:n},{name:"keyDown",cb:s},{name:"keyUp",cb:a},{name:"start",cb:o},{name:"lookAt",cb:l},{name:"follow",cb:c},{name:"scroll",cb:h}];if(m.current){y=new YTe(m.current,{renderOnDemand:d});async function b(){await y.load(e);for(let S of x)S.cb&&y.addEventListener(S.name,S.cb);v(!1),u==null||u(y)}b()}return()=>{for(let b of x)b.cb&&y.removeEventListener(b.name,b.cb);y.dispose()}},[e]),bE(xPe,{ref:f,parentSizeStyles:t,debounceTime:50,...p,children:()=>bE("canvas",{ref:m,style:{display:g?"none":"block"}})})});function wPe(){const e=P$(),t=W.exports.useRef(null),r=L$(t);W.exports.useEffect(()=>{r&&e.start("visible")},[r]);const i=Ete("(min-width:775px)");return Me(Ct,{width:"100%",height:"120vh",sx:{position:"relative",overflow:"visible"},px:{xs:0,sm:0,md:1,lg:2,xl:3},children:[Me(Tt,{variant:"h2",fontWeight:500,letterSpacing:1,className:"lh-1 text-center",sx:{width:"100%",position:"absolute",left:"50%",transform:"translateX(-50%)",top:{xs:"15%",sm:"10%",md:"5%"},zIndex:1,maxWidth:700},children:["We transform the ",H("span",{className:"text-gradient text-glow",children:"Future of the Companies"})]}),i?H(bPe,{style:{width:"100%",height:"80%",position:"absolute",left:0,bottom:"0%"},renderOnDemand:!1,scene:"https://prod.spline.design/SVpkRrzh9hWIndam/scene.splinecode"}):H(El,{variant:"square",src:"/3d-mobile.png",sx:{width:"100%",height:{xs:"70%",sm:"60%",md:"70%"},position:"absolute",left:0,bottom:"2.5%"},imgProps:{style:{objectFit:"contain",objectPosition:"center"}}})]})}const SPe=()=>Me(on,{children:[H(rse,{}),H(Ct,{width:"100%",sx:{backgroundColor:"black",position:"absolute",top:0,left:0}}),Me(Ct,{className:"row overflow-y-hidden home-container overflow-x-visible position-relative",children:[H(kO,{}),Me("div",{className:"col-12 col-md-9 col-lg-10 position-relative order-0 order-md-1",children:[Me(Ct,{className:"home-content mb-3 mb-sm-0",maxWidth:{xs:"100%",sm:700,md:700,lg:725,xl:750},children:[Me(Tt,{className:"text-uppercase",variant:"subtitle2",fontWeight:400,children:["AI Engineer & Cloud Architect",H("br",{}),"Specialized in LLM Agents, RAG & Async High-Performance Systems | Python & AWS"]}),Me(Tt,{variant:"h1",fontWeight:500,className:"ms-0 lh-1 my-3",children:["Jean",H("br",{}),"Victor Rada."]}),Me(Tt,{variant:"body2",fontWeight:400,className:"col-11 col-sm-10 col-md-8 col-lg-7 ms-0",children:["I'm a passionate FullSatck Developer, Cloud Computing & NLP/AI Integration Specialist (AI Agent) from ",H("b",{children:"Bolivia"})," with +",new Date().getFullYear()-2019," years of experience."]}),H(kO,{className:"col-12 mt-4 d-flex d-md-none flex-row-reverse justify-content-end align-items-center",rotate:!1})]}),H("img",{className:" object-fit ml-auto",style:{width:"15%",position:"absolute",right:0,bottom:"0%"},src:"/home.png"})]})]}),H(wPe,{}),H(zne,{}),H("div",{className:"row overflow-visible",children:Me("div",{className:"col-12 d-flex flex-wrap px-0 position-relative",children:[Me("div",{className:"col-12 col-md-7 ps-md-4 order-md-1 bg-transparent overflow-visible",children:[Me(Tt,{variant:"h2",fontWeight:500,letterSpacing:1,className:"col-8 jeansyo-link-widget",children:[H("div",{className:"col-2 bg-dark",style:{height:".05rem"}}),"What Do ",H("span",{className:"text-gradient text-glow",children:"I Help"})]}),H(Tt,{variant:"body2",fontWeight:400,className:"col-10",children:"I will help you with finding a solution and solve your problems, we use process design to create digital products, besides that I also help their business."}),Me("div",{className:"overflow-visible col-12 col-md-12 my-3 d-flex flex-row flex-wrap justify-content-between align-items-center justify-content-md-start px-0",children:[H(vd,{titleHelp:"01",title:"Software Development",description:"Building the future with you",titleFlexStyles:"d-flex flex-column-reverse mt-2",iconTitle:H(GF,{className:"my-2 fs-1"}),withHover:!1}),H(vd,{titleHelp:"02",title:"NLP/AI Integration (AI Agent)",description:"Designing the future with you",titleFlexStyles:"d-flex flex-column-reverse mt-2",iconTitle:H(WF,{className:"my-2 fs-1"}),withHover:!1}),H(vd,{titleHelp:"03",title:"Cloud Computing",description:"Creating the future with you",titleFlexStyles:"d-flex flex-column-reverse mt-2",iconTitle:H(HF,{className:"my-2 fs-1"}),withHover:!1})]}),H(El,{variant:"square",component:ui.div,initial:{scale:1},animate:{scale:1.1},transition:{ease:"linear",duration:5,repeat:1/0,repeatType:"reverse"},className:"img-fluid position-absolute bottom-0 end-0  d-md-block",src:"/home1.jpg",style:{width:"10rem",height:"10rem",zIndex:"-2",objectFit:"cover"}})]}),H("div",{className:"col-md-5 order-md-0 d-md-flex align-items-center justify-content-center",style:{zIndex:"-1"},children:H(El,{variant:"square",component:ui.div,initial:{scale:1},animate:{scale:1.1},transition:{ease:"linear",duration:5,repeat:1/0,repeatType:"reverse"},src:"/home2.jpg",style:{width:"25rem",height:"30rem",objectFit:"cover"}})})]})})]}),_Pe="/jeansyo/assets/profile_user.34e6b475.png",APe=({start:e=!0,data:t})=>Me("div",{className:"position-relative col-12 col-md-11 col-lg-11 d-flex flex-wrap flex-sm-nowrap flex-sm-row my-5 mx-auto",children:[t!=null&&t.image?H("img",{className:`order-0 col-12 col-sm-6 col-md-6 img-fluid order-1 py-sm-4 ps-sm-4 ${e?"order-sm-1":"order-sm-0 "}`,src:t.image,style:{maxWidth:"30rem",maxHeight:"25rem",minWidth:"20rem",minHeight:"10rem"}}):Me("div",{className:`position-relative order-0 col-12 col-sm-6 col-md-6 order-1 py-sm-4 ps-sm-4 ${e?"order-sm-1":"order-sm-0 "}`,style:{maxWidth:"30rem",maxHeight:"25rem",minWidth:"20rem",minHeight:"10rem"},children:[H("img",{src:VF,className:" img-fluid",style:{width:"100%",height:"100%"}}),H("img",{src:_Pe,className:"position-absolute img-fluid py-sm-4 ps-sm-4 ",style:{width:"50%",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})]}),Me("div",{className:`order-1 mt-3 mt-sm-0 position-relative col-12 col-sm-6 p-sm-3 col-md-6 order-0 d-flex flex-column mb-3 mb-sm-0 ${e?"order-sm-0":"order-sm-1"}`,children:[H(AC,{style:{fontSize:"6rem",top:"-2rem",left:e?"2rem":"-4rem"},className:"position-absolute d-none d-sm-block text-dark"}),H(Tt,{variant:"h4",className:`col-12 h1 mt-md-4 ${e?"ms-sm-2 ms-md-3 ms-lg-4":"work-title"}`,children:t.title}),Me("div",{className:"col-12 d-flex flex-row align-items-center my-2 my-md-3",children:[H("div",{className:"col-2 col-md-2 bg-dark my-3",style:{height:"0.07rem"}}),Me("div",{className:"ps-2 ps-sm-2 ps-md-3 ps-lg-4 col-9 d-flex flex-column",children:[H(Tt,{variant:"button",className:"col-11 m-0",children:t.name}),H(Tt,{variant:"body2",className:"text-muted col-11 m-0",children:t.role})]})]})]}),e?Me(on,{children:[H("div",{className:"circle-animated-static circle-animated__static_work_end"}),H("div",{className:"circle-animated-static circle-animated__static_work_end-2"})]}):Me(on,{children:[H("div",{className:"circle-animated-static circle-animated__static_work_start"}),H("div",{className:"circle-animated-static circle-animated__static_work_start-2"})]})]}),MPe={initial:{filter:"none",boxShadow:"none"},animate:{filter:"blur(40px)",boxShadow:"#f7404b88 15px 15px 15px 5px inset, #f7404b66 100px 100px 100px 100px inset, #f7404b44 200px 200px 200px 200px inset, #f7404b22 300px 300px 300px 300px inset"}},EPe={initial:{transform:"scale(1)"},animate:{transform:"scale(1.5)"}},f_=({children:e,sm:t=!1,className:r,onClick:i=()=>{}})=>{const[n,s]=W.exports.useState(!1);return Me(ui.div,{whileHover:{transform:"scale(0.95)"},onHoverStart:()=>s(!0),onHoverEnd:()=>s(!1),className:`text-center w-100 h-100 position-relative border border-dark border-2 rounded-circle d-flex align-items-center justify-content-center button-styled ${t?"button-styled-size-sm h6":"button-styled-size h3"} ${r||""}`,onClick:i,style:{cursor:"pointer",transform:"scale(1)",position:"relative",borderWidth:2,borderColor:"black"},children:[H(Ct,{component:ui.div,sx:{width:"125%",height:"125%",position:"absolute",borderRadius:"50%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:-1},variants:MPe,animate:n?"animate":"initial"}),H("div",{className:"position-absolute bg-dark button-styled__line",style:{height:"0.05rem",width:"150%",transform:"rotate(-30deg)"}}),H(ui.span,{variants:EPe,animate:n?"animate":"initial",children:e})]})};var mP={},CPe=Gi.exports;Object.defineProperty(mP,"__esModule",{value:!0});var kG=mP.default=void 0,TPe=CPe(dn()),PPe=pn,DPe=(0,TPe.default)((0,PPe.jsx)("path",{d:"M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z"}),"Shop");kG=mP.default=DPe;var gP={},OPe=Gi.exports;Object.defineProperty(gP,"__esModule",{value:!0});var zG=gP.default=void 0;RPe(W.exports);var LPe=OPe(dn()),IPe=pn;function NG(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(NG=function(i){return i?r:t})(e)}function RPe(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=NG(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}var BPe=(0,LPe.default)((0,IPe.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"}),"Apple");zG=gP.default=BPe;const kPe=({start:e=!0,data:t})=>Me("div",{className:"position-relative col-12 col-md-11 col-lg-11 d-flex flex-wrap flex-sm-nowrap flex-sm-row my-5 mx-auto",children:[H(ui.img,{className:`col-12 col-sm-5 col-md-7 img-fluid order-1 py-sm-4 ps-sm-4 my-auto ${e?"order-sm-1":"order-sm-0 "}`,src:t.image,style:{objectFit:"cover"},whileHover:{scale:1.05}}),Me("div",{className:`col-12 col-sm-7 p-sm-3 col-md-5 order-0 d-flex flex-column mb-3 mb-sm-0 ${e?"order-sm-0":"order-sm-1"}`,children:[Me(Tt,{className:"col-12 h1 mt-md-5 ms-sm-2 ms-md-3 ms-lg-4",variant:"h2",fontWeight:500,style:{marginBottom:"0rem"},children:[t.name.split(" ").slice(0,-1).map(r=>r+" "),H("span",{className:"text-gradient text-glow",children:t.name.split(" ").slice(-1).map(r=>r)})]}),H("div",{className:"col-3 bg-dark ms-sm-2 ms-md-3 ms-lg-4 my-3",style:{height:"0.07rem"}}),H(Tt,{variant:"body2",className:"ps-sm-2 ps-md-3 ps-lg-4 text-muted col-11",children:t.description}),H(Tt,{variant:"caption",fontWeight:300,className:"col-12 d-flex flex-row flex-wrap align-items-center justify-content-start ms-sm-2 ms-md-3 ms-lg-4 text-muted mt-2",children:t.skills.map((r,i)=>Me("i",{children:[i===0?"":" | ",H("small",{children:r}),i===t.skills.length-1?"":" | "]},i))}),Me("div",{className:"col-12 d-flex flex-row align-items-center justify-content-end",style:{gap:"2rem",marginTop:"2rem"},children:[!!t.repository&&t.showRepository&&H(SC,{text:"View",sm:!0,onClick:()=>window.open(t.repository,"_blank")}),!!t.website&&H(f_,{sm:!0,onClick:()=>window.open(t.website,"_blank"),children:H(LC,{fontSize:"large",className:"text-dark"})}),!!t.playStore&&H(f_,{sm:!0,onClick:()=>window.open(t.playStore,"_blank"),children:H(kG,{fontSize:"large",className:"text-dark"})}),!!t.appStore&&H(f_,{sm:!0,onClick:()=>window.open(t.appStore,"_blank"),children:H(zG,{fontSize:"large",className:"text-dark"})})]})]}),e?Me(on,{children:[H("div",{className:"circle-animated-static circle-animated__static_work_end"}),H("div",{className:"circle-animated-static circle-animated__static_work_end-2"})]}):Me(on,{children:[H("div",{className:"circle-animated-static circle-animated  circle-animated__static_work_start"}),H("div",{className:"circle-animated-static circle-animated__static_work_start-2"})]})]}),zPe=[{title:"A person who does impeccable work, very good communication and quality work.",name:"Cesar Antezana",role:"Plastic surgeon and founder at Yo Amo Mi Salud TV"},{title:"Jean is a great professional, very skilled and resourceful.",name:"Robeto de La Costa",role:"Digital Business Manager at Sofia - Food Products"},{title:"A very exceptional developer, it was a pleasure working with Jean.",name:"Carlos Pineda",role:"Videogame Developer at Real Vision Colombia"},{title:"A great person and a very good professional, he gave me help and advice at all times.",name:"Alejandra Bedoya",role:"Entrepreneur"}],NPe="/jeansyo/assets/clinitify.56be8ed8.jpg",FPe="/jeansyo/assets/entereza.7ef9cf0a.png",UPe="/jeansyo/assets/fapro.baae694e.png",jPe="/jeansyo/assets/myapps.cc6d3b12.png",VPe="/jeansyo/assets/miteleferico.434fae6f.jpg",GPe="/jeansyo/assets/ansell.304b6487.jpg",HPe="/jeansyo/assets/hipermaxi.46f982d2.jpg",WPe="/jeansyo/assets/micap.4949d58d.jpg",qPe="/jeansyo/assets/space.6e7307be.jpg",$Pe="/jeansyo/assets/metafask.9f274da2.jpg",XPe="/jeansyo/assets/whastfast.a37d1c1d.png",YPe="/jeansyo/assets/befit.460169a6.jpg",QPe="/jeansyo/assets/cafena.02c08aef.jpg",KPe="/jeansyo/assets/sky.335e46c3.jpg",ZPe="/jeansyo/assets/fitness.757a446b.jpg",JPe="/jeansyo/assets/restaurant.2f9cc2ad.jpg",eDe="/jeansyo/assets/hosting.78b0c0bd.jpg",tDe="/jeansyo/assets/aleman.987a7f07.webp",rDe="/jeansyo/assets/moyo.78448787.jpg",iDe="/jeansyo/assets/real.452078c7.webp",nDe="/jeansyo/assets/sie.103088aa.jpg",sDe=[{name:"CeamGPT Medicina",description:"In charge and responsible for the development of the LLM system of the application, where the quality of the system was prioritized using programming techniques based on process threads and innovative technologies for the development of Generative AI and thus guarantee the correct functioning and quality of the LLM system.",image:"https://s3.us-east-2.amazonaws.com/files.public.bo/images/pro1.png",skills:["Python","FastAPI","Langchain","Embeddings","Retrieval Augmented Generation (RAG)","Fine Tuning LLM","VectorStore Database","Graph VectorStore Database","Multimodal LLM Aplications","Web Socket - Streaming","Expression Language Programing","Amazon Web Services"],website:"https://www.ceam-gpt.com"},{name:"Orientaci\xF3n M\xE9dica IA",description:"In charge and responsible for the development of the LLM system of the application, where the quality of the system was prioritized using programming techniques based on process threads and innovative technologies for the development of Generative AI and thus guarantee the correct functioning and quality of the LLM system.",image:"orimed.png",skills:["Python","FastAPI","Langchain","Embeddings","Retrieval Augmented Generation (RAG)","Fine Tuning LLM","VectorStore Database","Graph VectorStore Database","Multimodal LLM Aplications","Web Socket - Streaming","Expression Language Programing","Amazon Web Services"]},{name:"CEAM Flashcards",description:"Responsible for the development and launch of the CEAM Flashcards mpovel application, prioritizing application performance and meeting UI/UX design standards set by the design team.",image:"flahcards.png",skills:["Python","FastAPI","Langchain","Embeddings","Retrieval Augmented Generation (RAG)","Fine Tuning LLM","VectorStore Database","Graph VectorStore Database","Multimodal LLM Aplications","Web Socket - Streaming","Expression Language Programing","Amazon Web Services"],playStore:"https://play.google.com/store/apps/details?id=com.ceamedicina.ceamflashcards&hl=es",appStore:"https://apps.apple.com/bo/app/ceam-flashcards/id6480475515?l=en-GB"},{name:"Golf Live App",description:"Responsible for the development and production of the iOS Golf Live App application, in addition to supporting the backend development team in the development of features of: Pattern recognition, live video streaming services and segmentation, using technologies such as Node, python, OpenCV and Amazon Web Services.",image:"https://s3.us-east-2.amazonaws.com/files.public.bo/images/pro4.png",skills:["SwiftUI","Xcode","Typescript","Python","Amazon Web Services","App Store Developer","OpenCV","Mobile Design"],website:"https://www.golfliveapp.com/"},{name:"Fapro SpA",description:"Achieve migration of the platform in record time, obtaining good commercial reviews from customers regarding the UI/UX design of the new platform. A new platform for additional services was developed in record time, aligning the UI/UX design with the strategies of the marketing and branding teams.",image:UPe,skills:["React","ReactJS","Redux","Redux Toolkit","HTML&CSS","Tailwind","MaterialUI","Web Design"],website:"https://www.fapro.app"},{name:"MyApps S.R.L.",description:"I automated 75% of the server management operations through the successful migration of traditional servers to hybrid servers, reducing the workload of the resources responsible for this area.",image:jPe,skills:["Amazon Web Services","Docker Compose","Docker","JBoss Application Server","Nginx","React","Redux","Java","Spring Boot","Git"],website:"https://site.myapps.bo/"},{name:"Entereza Fintech",description:"Improved the accessibility, design and user experience of the legacy system by reducing loading times by 50%. Also managed to develop the mobile version of the system in less time than estimated, meeting the requirements of security, usability and good development practices for both iOS and Android through effective time management and efficient teamwork.",image:FPe,skills:["JavaScript","React","React Native","Redux","HTML & CSS","Bootstrap","Material UI","Git"],playStore:"https://play.google.com/store/apps/details?id=com.myapps.bo",appStore:"https://play.google.com/store/apps/details?id=com.entereza.client&hl=en_US",website:"https://enterezabol.com"},{name:"Deutsche Schule La Paz | Freelance",description:"Automate by 60% the parental control processes of children's studies through the development of a mobile application for iOS. Actively participate in the UI/UX design of the app through a focus on usability and efficiency.",image:tDe,skills:["Spring Boot","Java","React Native","Redux","Git","Google Play Store","Amazon Web Services","MySQL"],appStore:"https://apps.apple.com/us/app/deutsche-schule-la-paz/id1574057717"},{name:"Moyo AI | Freelance",description:"I migrated and redesigned the previously developed application, improving the efficiency of use up to 60%, applying good development practices and user experience. I successfully migrated Machine Learning services by reducing costs by up to 60% and the maintenance workload by up to 80%, taking these services from a traditional architecture to a serverless environment.",image:rDe,skills:["React","Redux","HTML & CSS","Bootstrap","Material UI","Git","Amazon Web Services","Seo"],website:"https://www.moyoai.com/"},{name:"Clinitify",description:"Actively participate in the design and development of the entire system development cycle, achieving the development of a product aligned to the marketing strategy; business model; design and user experience.software architecture. Design and implement server architecture, achieving cost reductions of up to 75% through extensive research and the correct use of Amazon Web Services.",image:NPe,skills:["JavaScript","TypeScript","React","React Native","Redux","NodeJS","Express","MongoDB","Amazon Web Services","Docker","Docker Compose","Nginx","Git","Algolia","OAuth2","Socket.io","Severless","HTML & CSS","Bootstrap","Material UI","Namecheap","Seo"],website:"https://www.clinitify.com"},{name:"Ansell Colombia | Freelance",description:'I collaborated in the frontend development of a landing page for the Ansell distributor in Colombia and aligned the system design to the seasonal event "El guante del poder", obtaining a positive acceptance by the client thanks to my focus on usability and user experience.',image:GPe,skills:["JavaScript","HTML & CSS","Bootstrap","PHP","Git","Amazon Web Services","Namecheap","Seo"]},{name:"Real Vision Enterprise | Freelance",description:"I managed to integrate a cryptocurrency payment method to the online gaming platform, so that the process would be as natural as possible and similar to traditional transfers through exhaustive research and the implementation of innovative solutions.",image:iDe,skills:["JavaScript","HTML & CSS","Bootstrap","Git","Metamask API"]},{name:"Hipermaxi | Freelance",description:"I developed the mobile application for a chain with presence throughout Bolivia, ensuring product quality and allowing to serve large numbers of users; user research was also conducted to provide the best user experience through attention to detail and implementation of extensive testing.",image:HPe,skills:["JavaScript","TypeScript","React","React Native","Redux","HTML & CSS","Bootstrap","PHP","Git","Heroku","Google Play"],playStore:"https://play.google.com/store/apps/details?id=com.hipermaxi&hl=en&gl=US",appStore:"https://apps.apple.com/bo/app/hipermaxi/id1543545683",website:"https://hipermaxi.com/"},{name:"Mi Teleferico | Professional Practices",description:'I collaborated in the development of the mobile application "Mi Telef\xE9rico" during my internship at the public transportation company of La Paz Bolivia, automating 90% of the processes performed by users such as card recharge, balance inquiry and estimated time from one station to another through a focus on efficiency and attention to detail in software development.',image:VPe,skills:["JavaScript","Vue","Nuxt.js","React Native","Redux","Native Base","HTML & CSS","Git","Amazon Web Services","Namecheap","Seo","Google Play"],playStore:"https://play.google.com/store/apps/details?id=bo.miteleferico.mobileteleferico&hl=es_VE",appStore:"https://apps.apple.com/bo/app/mi-telef%C3%A9rico/id1322097850",website:"https://www.miteleferico.bo/"},{name:"SIE UPEA | Professional Practices",description:"I was able to optimize page load times by up to 80% and apply best practices in software architectures that ensured the availability of the academic platform through a focus on efficiency and attention to detail in software development.",image:nDe,skills:["JavaScript","HTML & CSS","Git","Amazon Web Services","Seo","Google Play","PHP"],website:"https://sie.upea.bo/l"},{name:"Micro Aprendizaje | Freelance",description:"Development of web and mobile application of educational platform",image:WPe,skills:["JavaScript","React","React Native","HTML & CSS","Git","Amazon Web Services","Java","Spring Boot","MySQL"]},{name:"Space Tourism | Personal Project",description:"This page is the solution to a frontend mentor challenge, for this job, use NextJS taking advantage of its rendering benefits from the server.",image:qPe,skills:["JavaScript","React","Next.js","HTML & CSS","Bootstrap","Git","Vercel"],website:"https://space.jeansyo.com/"},{name:"MetaMask Transaction | Personal Project",description:"This small web app was made with ReactJS, Bootstrap and Metamask API, in order to perform a fast transfer service.",image:$Pe,skills:["JavaScript","React","HTML & CSS","Bootstrap","Git","Github","MetaMask API"],website:"https://metafask.jeansyo.com/"},{name:"WhastFast | Personal Project",description:"Small application to send WhatsApp messages without the need to save the contact in your address book.",image:XPe,skills:["JavaScript","React","React Native","HTML & CSS","Google Play"],playStore:"https://play.google.com/store/apps/details?id=com.jeansyo.WhatsFast"},{name:"BeFit | Personal Project",description:"Website to show all the necessary information of your business (gym)",image:YPe,skills:["JavaScript","React","HTML & CSS","Bootstrap","Git"],website:"https://befit.jeansyo.com/"},{name:"Cafena | Personal Project",description:"Website to show all the necessary information of your business (cafeteria)",image:QPe,skills:["JavaScript","React","HTML & CSS","Bootstrap","Git"],website:"https://cafena.jeansyo.com/"},{name:"The Sky | Personal Project",description:"Website to show all the necessary information of your business (hotel)",image:KPe,skills:["JavaScript","React","HTML & CSS","Bootstrap","Git"],website:"https://uyuni.jeansyo.com/#blogs"},{name:"Fitness | Personal Project",description:"Website to show all the necessary information of your business (fitness center)",image:ZPe,skills:["JavaScript","React","HTML & CSS","Bootstrap","Git"],website:"https://fit.jeansyo.com/#blogs"},{name:"Restaurant | Personal Project",description:"Website to show all the necessary information of your business (restaurant)",image:JPe,skills:["JavaScript","React","HTML & CSS","Bootstrap","Git"]},{name:"Hosting | Personal Project",description:"Website to show all the necessary information of your business (hosting)",image:eDe,skills:["JavaScript","React","HTML & CSS","Bootstrap","Git"]}],aDe=()=>H(on,{children:H("div",{className:"row mt-5 overflow-visible h-full",children:Me("div",{className:"col-12",children:[Me("div",{className:"col-12 fs-5 d-flex flex-row align-items-center justify-content-start mb-4",children:[H("div",{className:"col-1 bg-dark me-3",style:{height:"0.05rem"}}),H(Tt,{textTransform:"uppercase",variant:"subtitle2",fontWeight:400,textAlign:{xs:"left",sm:"left",md:"left",lg:"left"},children:"My Works Collection"})]}),H("div",{className:"col-12",children:sDe.map((e,t)=>H(kPe,{start:t%2===0,data:e},t))}),H("hr",{className:"col-10 mx-auto my-5"}),Me("div",{className:"col-12",children:[Me("div",{className:"col-12 fs-5 d-flex flex-row align-items-center justify-content-start mb-4",children:[H("div",{className:"col-1 bg-dark me-3",style:{height:"0.05rem"}}),H(Tt,{textTransform:"uppercase",variant:"subtitle2",textAlign:{xs:"left",sm:"left",md:"left",lg:"left"},children:"Client Talking"})]}),H("div",{className:"col-12",children:zPe.map((e,t)=>H(APe,{start:t%2===0,data:e},t))})]})]})})}),oDe=()=>{var t;const e=pp();return W.exports.useEffect(()=>{window.scrollTo(0,0)},[e.pathname]),Me(Ct,{width:"100%",position:"relative",bgcolor:"white",children:[H(Ct,{component:ui.div,initial:{transform:"translateY(100%)"},onAnimationComplete:()=>{document.body.style.overflow="visible"},onAnimationStart:()=>{document.body.style.overflow="hidden"},animate:{transform:"translateY(-100%)",transition:{duration:1.5,ease:[.87,0,.13,1]}},sx:{position:"fixed",left:0,top:0,width:"100%",height:"100vh",background:"black",zIndex:100,p:5,overflow:"hidden"},children:H(Tt,{variant:"h2",fontWeight:600,color:"white",display:"inline-block",mr:10,fontSize:{xs:68,sm:132,md:168,lg:168},sx:{position:"absolute",bottom:{xs:25,sm:25,md:35,lg:50},left:{xs:25,sm:35,md:45,lg:55}},children:((t=e==null?void 0:e.state)==null?void 0:t.title)||"Welcome!!!"})},(e==null?void 0:e.pathname)+(e==null?void 0:e.key)),H(ui.div,{initial:{opacity:1},animate:{opacity:0,transition:{duration:1.5,ease:[1,0,.13,1]}},style:{position:"fixed",left:0,top:0,width:"100%",height:"100vh",background:"#ffffff00",backdropFilter:"blur(20px)",zIndex:90,pointerEvents:"none"}},e.pathname),H(uX,{children:Me(Lf,{element:H(Kte,{}),children:[H(Lf,{path:"/",element:H(SPe,{})}),H(Lf,{path:"/my-works",element:H(aDe,{})}),H(Lf,{path:"/about-me",element:H(nre,{})})]})})]})};function lDe(){return H(A$,{mode:"wait",children:H(pX,{children:H(oDe,{})})})}m_.createRoot(document.getElementById("root")).render(H(sn.StrictMode,{children:H(lDe,{})}))});export default cDe();
